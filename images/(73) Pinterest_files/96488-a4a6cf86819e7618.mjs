(self.modernJsonp=self.modernJsonp||[]).push([["96488"],{69119:function(e,a,n){n.d(a,{Z:()=>l});var i=n(619013),t=n(13882);function l(e){(0,t.Z)(1,arguments);var a=(0,i.Z)(e);return a.setHours(0,0,0,0),a}},130845:function(e,a,n){n.d(a,{Z:()=>l});var i=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function t(e,a){if(e.length!==a.length)return!1;for(var n,t,l=0;l<e.length;l++)if(!((n=e[l])===(t=a[l])||i(n)&&i(t))&&1)return!1;return!0}let l=function(e,a){void 0===a&&(a=t);var n,i,l=[],r=!1;return function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];return r&&n===this&&a(t,l)||(i=e.apply(this,t),r=!0,n=this,l=t),i}}},957661:function(e,a,n){var i,t,l;n.r(a),n.d(a,{default:()=>s});let r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CardSourceDescriptionText_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinAdditionalNote",storageKey:null},{alias:null,args:null,concreteType:"TextTag",kind:"LinkedField",name:"userMentionTags",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"length",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[{alias:null,args:null,concreteType:"AggregateRatingMetadata",kind:"LinkedField",name:"aggregateRating",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"reviewCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ratingValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"bestRating",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"MakeCardTutorialMetadata",kind:"LinkedField",name:"tutorial",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinBasics",kind:"LinkedField",name:"basics",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinListBlock",kind:"LinkedField",name:"listBlocks",plural:!0,selections:[i={alias:null,args:null,kind:"ScalarField",name:"heading",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blocks",plural:!0,selections:[t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[i,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blocks",plural:!0,selections:[t,{kind:"InlineFragment",selections:l=[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],type:"TextBlock",abstractKey:null},{kind:"InlineFragment",selections:l,type:"ParagraphBlock",abstractKey:null},{kind:"InlineFragment",selections:l,type:"HeadingBlock",abstractKey:null},{kind:"InlineFragment",selections:l,type:"LinkBlock",abstractKey:null},{kind:"InlineFragment",selections:l,type:"StoryPinImageBlock",abstractKey:null},{kind:"InlineFragment",selections:l,type:"StoryPinVideoBlock",abstractKey:null}],storageKey:null}],type:"StoryPinListBlock",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryPinKeyValueBlock",kind:"LinkedField",name:"keyValueBlocks",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"categoryType",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"DescriptionBrokenByLineBreaks_pin"},{args:null,kind:"FragmentSpread",name:"DescriptionWithLinksAndMentions_pin"}],type:"Pin",abstractKey:null};r.hash="c6b0de206743312221bd0e0b89d2f0aa";let s=r},505370:function(e,a,n){n.r(a),n.d(a,{default:()=>t});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CarouselVideoItem_pin",selections:[{args:null,kind:"FragmentSpread",name:"CloseupVideoNonDuplo_pin"}],type:"Pin",abstractKey:null};i.hash="510195e37611b9b69a16eccfeb13e9cf";let t=i},799379:function(e,a,n){var i,t,l;n.r(a),n.d(a,{default:()=>s});let r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupAttributionAndDescription_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,concreteType:"Attribution",kind:"LinkedField",name:"attribution",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"authorName",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"authorUrl",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"ccUrl",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"providerName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"providerUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subtype",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"MediaAttribution",kind:"LinkedField",name:"mediaAttribution",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"author",storageKey:null},i,t,{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mediaType",storageKey:null},l],storageKey:null},{args:null,kind:"FragmentSpread",name:"Description_pin"}],type:"Pin",abstractKey:null};r.hash="7142df6a7a3c1aee54267c5441d3d50b";let s=r},621539:function(e,a,n){n.r(a),n.d(a,{default:()=>t});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupCarousel_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"},{args:null,kind:"FragmentSpread",name:"CarouselVideoItem_pin"}],type:"Pin",abstractKey:null};i.hash="83e61e6fc89222c2a0b03276839f44a5";let t=i},934191:function(e,a,n){n.r(a),n.d(a,{default:()=>t});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupMainPinImpression_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"}],type:"Pin",abstractKey:null};i.hash="9fe338bb0275ffff2818b274fce014af";let t=i},718611:function(e,a,n){n.r(a),n.d(a,{default:()=>t});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupRelatedModule_pin",selections:[{args:null,kind:"FragmentSpread",name:"CloseupRelatedModuleOneTapConfiguration_pin"}],type:"Pin",abstractKey:null};i.hash="535b0dce979f4e368b354c1d7db63f73";let t=i},824065:function(e,a,n){n.r(a),n.d(a,{default:()=>t});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupRelatedModulesContainer_pin",selections:[{args:null,kind:"FragmentSpread",name:"CloseupRelatedPins_pin"},{args:null,kind:"FragmentSpread",name:"CloseupRelatedModule_pin"}],type:"Pin",abstractKey:null};i.hash="8b3eeb9b4671e020ac715d9513179386";let t=i},327060:function(e,a,n){var i;n.r(a),n.d(a,{default:()=>l});let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupRelatedPins_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isHidden",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isUnsafe",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:i,storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:i,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:i,storageKey:null},{args:null,kind:"FragmentSpread",name:"ShoppingModule_pin"}],type:"Pin",abstractKey:null};t.hash="3fa8620068a79dc4a73dbbcde3f352f9";let l=t},3449:function(e,a,n){n.r(a),n.d(a,{default:()=>t});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupVideoWithVisibility_pin",selections:[{args:null,kind:"FragmentSpread",name:"CloseupVideoNonDuplo_pin"}],type:"Pin",abstractKey:null};i.hash="60493becbbe037be854a8cd1136fede6";let t=i},119031:function(e,a,n){var i,t,l;n.r(a),n.d(a,{default:()=>s});let r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CreatorCard_pin",selections:[i={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedIsLeadAd",storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"typeName",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"templateType",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isAdsOnlyProfile",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"adsOnlyProfileSite",storageKey:null},i,t={alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"promoter",plural:!1,selections:[t,l],storageKey:null},{alias:null,args:null,concreteType:"Sponsorship",kind:"LinkedField",name:"sponsorship",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"creator",plural:!1,selections:[{alias:"creatorId",args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"sponsor",plural:!1,selections:[{alias:"sponsorId",args:null,kind:"ScalarField",name:"id",storageKey:null},t,l],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{args:null,kind:"FragmentSpread",name:"useCreatorRecsPrevStateCloseup_pin"}],type:"Pin",abstractKey:null};r.hash="e0f013c76e98f3f285ba25a7d2f0f3af";let s=r},265532:function(e,a,n){var i,t,l,r;n.r(a),n.d(a,{default:()=>o});let s=(i={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},l=[t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],r=[i],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DefaultMetadata_pin",selections:[i,{alias:null,args:null,concreteType:"Attribution",kind:"LinkedField",name:"attribution",plural:!1,selections:l,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUserNote",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"commentsDisabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinAdditionalNote",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"promoter",plural:!1,selections:r,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"isPrimaryWebsiteVerified",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"websiteUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDirectToSiteAllowed",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Sponsorship",kind:"LinkedField",name:"sponsorship",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"sponsor",plural:!1,selections:l,storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"affiliateLink",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDownstreamPromotion",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:r,storageKey:null},{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"originPin",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:r,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[t,{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"CategorizedIngredientsMetadata",kind:"LinkedField",name:"categorizedIngredients",plural:!0,selections:l,storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showRecipeCta",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isGoLinkless",storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hasAffiliateProducts",storageKey:null},{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinBasics",kind:"LinkedField",name:"basics",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinKeyValueBlock",kind:"LinkedField",name:"keyValueBlocks",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"categoryType",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templateType",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isInstagramApi",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"utmLink",storageKey:null},{args:null,kind:"FragmentSpread",name:"DescriptionBrokenByLineBreaks_pin"},{args:null,kind:"FragmentSpread",name:"useHandleTitleClick_pin"},{args:null,kind:"FragmentSpread",name:"useCloseupBodyUtils_pin"},{args:null,kind:"FragmentSpread",name:"UnifiedCommentModule_pin"},{args:null,kind:"FragmentSpread",name:"ContextMenuClickthroughLogging_pin"},{args:null,kind:"FragmentSpread",name:"TitleDesktop_pin"},{args:null,kind:"FragmentSpread",name:"PartnerModule_pin"},{args:null,kind:"FragmentSpread",name:"CreatorCard_pin"},{args:null,kind:"FragmentSpread",name:"VisitButton_pin"},{args:null,kind:"FragmentSpread",name:"CloseupAttributionAndDescription_pin"},{args:null,kind:"FragmentSpread",name:"PinRecipeRating_pin"}],type:"Pin",abstractKey:null});s.hash="6a99555fe621b7c9afe6cd504d857930";let o=s},817272:function(e,a,n){var i;n.r(a),n.d(a,{default:()=>l});let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DescriptionBrokenByLineBreaks_pin",selections:[{alias:null,args:null,concreteType:"TextTag",kind:"LinkedField",name:"descriptionLinks",plural:!0,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"length",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"offset",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"TextTag",kind:"LinkedField",name:"userMentionTags",plural:!0,selections:i,storageKey:null},{args:null,kind:"FragmentSpread",name:"DescriptionWithLinksAndMentions_pin"},{args:null,kind:"FragmentSpread",name:"useHyperlinkExperiment_pin"}],type:"Pin",abstractKey:null};t.hash="7f5ee41f639d28bd1418cd137ed8b8a0";let l=t},354418:function(e,a,n){var i,t,l;n.r(a),n.d(a,{default:()=>s});let r=(i=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],l=[t={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"Description_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:i,storageKey:null},t,{alias:null,args:null,kind:"ScalarField",name:"pinAdditionalNote",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:i,storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:l,storageKey:null},{alias:null,args:null,concreteType:"MakeCardTutorialMetadata",kind:"LinkedField",name:"tutorial",plural:!1,selections:l,storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"CardSourceDescriptionText_pin"}],type:"Pin",abstractKey:null});r.hash="d6d83b429981e4bc762e3872608eedbd";let s=r},128948:function(e,a,n){var i;n.r(a),n.d(a,{default:()=>l});let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DomainLinkButtonWrapper_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"advertiserId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"attributionSourceId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"campaignId",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDownstreamPromotion",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinPromotionId",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"promoter",plural:!1,selections:[i],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isPrimaryWebsiteVerified",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"websiteUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDirectToSiteAllowed",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isInstagramApi",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{args:null,kind:"FragmentSpread",name:"DomainLinkButton_pin"}],type:"Pin",abstractKey:null};t.hash="4c99d4ae49479ef8ed3083d59d4343c1";let l=t},362250:function(e,a,n){n.r(a),n.d(a,{default:()=>t});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DomainLinkButton_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"showRecipeCta",storageKey:null},{args:null,kind:"FragmentSpread",name:"ContextMenuClickthroughLogging_pin"}],type:"Pin",abstractKey:null};i.hash="f8426bd32c5531bed724a11f1f7d3b94";let t=i},149627:function(e,a,n){n.r(a),n.d(a,{default:()=>t});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProductDetailPageRelatedModule_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null}],type:"Pin",abstractKey:null};i.hash="cce8a8d5ad05c8e6c1137bf7c8845c2a";let t=i},937046:function(e,a,n){n.r(a),n.d(a,{default:()=>t});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProductDetailPageRelatedModules_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"ProductDetailPageRelatedPins_pin"},{args:null,kind:"FragmentSpread",name:"ProductDetailPageRelatedModule_pin"}],type:"Pin",abstractKey:null};i.hash="85ae0703574c2bc161bc13206c3184f8";let t=i},502396:function(e,a,n){var i;n.r(a),n.d(a,{default:()=>l});let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProductDetailPageRelatedPins_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:i,storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:i,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:i,storageKey:null},{args:null,kind:"FragmentSpread",name:"ShoppingModule_pin"}],type:"Pin",abstractKey:null};t.hash="86cb4963f4714e2184c01e13236c3616";let l=t},650719:function(e,a,n){n.r(a),n.d(a,{default:()=>t});let i=(l={defaultValue:null,kind:"LocalArgument",name:"isAuth"},r={defaultValue:!1,kind:"LocalArgument",name:"isCloseupRelatedModulesFeedQuery"},s={defaultValue:null,kind:"LocalArgument",name:"isDesktop"},o={defaultValue:null,kind:"LocalArgument",name:"pinId"},d=[{kind:"Variable",name:"pin",variableName:"pinId"}],u={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},m={alias:"storyId",args:null,kind:"ScalarField",name:"id",storageKey:null},h=[g={alias:null,args:null,kind:"ScalarField",name:"format",storageKey:null}],y={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},f=[{kind:"Literal",name:"spec",value:"236x"}],x={alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"layout",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},C={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},I={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},T={alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},E={alias:null,args:null,kind:"ScalarField",name:"imageSmallUrl",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"itemId",storageKey:null},L={alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},R=[k={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},c,P={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],D={alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV3MOBILE",plural:!1,selections:Z=[{alias:null,args:null,kind:"ScalarField",name:"blockId",storageKey:null},k,K={alias:null,args:null,kind:"ScalarField",name:"thumbnail",storageKey:null},P,c],storageKey:null},M=[{kind:"Literal",name:"spec",value:"474x"}],B=[{kind:"Literal",name:"spec",value:"564x"}],O=[{kind:"Literal",name:"spec",value:"736x"}],N={alias:"entityId",args:null,kind:"ScalarField",name:"id",storageKey:null},z={alias:null,args:null,kind:"ScalarField",name:"pinId",storageKey:null},V={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},U=[k,c,P,x],W={alias:null,args:null,kind:"ScalarField",name:"isThirdPartyAd",storageKey:null},G=[x,k,c,P],H=[{kind:"Literal",name:"spec",value:"170x"}],$=[c],Y=[_,C,T,F,E,A],X={alias:null,args:null,kind:"ScalarField",name:"isVerifiedMerchant",storageKey:null},J={alias:null,args:null,concreteType:"VerifiedIdentity",kind:"LinkedField",name:"verifiedIdentity",plural:!1,selections:[q={alias:null,args:null,kind:"ScalarField",name:"verified",storageKey:null}],storageKey:null},ee={alias:null,args:null,concreteType:"PinAnalyticsStats",kind:"LinkedField",name:"creatorAnalytics",plural:!1,selections:[{alias:null,args:null,concreteType:"CreatorAnalytics",kind:"LinkedField",name:"_30dRealtime",plural:!1,selections:Q=[u],storageKey:null}],storageKey:null},ea={alias:null,args:null,kind:"ScalarField",name:"followedByMe",storageKey:null},en=[_,C],ei={alias:null,args:null,kind:"ScalarField",name:"isCollaborative",storageKey:null},et={alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null},el={alias:null,args:null,kind:"ScalarField",name:"imageLargeUrl",storageKey:null},er=[k,P,c,u],es={alias:null,args:null,kind:"ScalarField",name:"duration",storageKey:null},eo={alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null},ed={alias:null,args:null,kind:"ScalarField",name:"blockType",storageKey:null},eu=[{kind:"Literal",name:"version",value:"V_HLSV3_MOBILE"}],ec={alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pinTitle",storageKey:null}],storageKey:null},ep={alias:null,args:null,kind:"ScalarField",name:"reason",storageKey:null},em={alias:null,args:null,kind:"ScalarField",name:"data",storageKey:null},eg={alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},ey={alias:"image236x",args:f,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:eh=[u,{alias:null,args:null,concreteType:"Thumbnails",kind:"LinkedField",name:"canonicalImage",plural:!1,selections:R,storageKey:null},L],storageKey:'additionalImagesPerSpec(spec:"236x")'},e_={alias:"image474x",args:M,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:eh,storageKey:'additionalImagesPerSpec(spec:"474x")'},ef={alias:"image564x",args:B,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:eh,storageKey:'additionalImagesPerSpec(spec:"564x")'},ex={alias:"image736x",args:O,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:eh,storageKey:'additionalImagesPerSpec(spec:"736x")'},ek={alias:"productId",args:null,kind:"ScalarField",name:"id",storageKey:null},eP={alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"maxPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"minPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"standardPrice",storageKey:null}],storageKey:null},eS={alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},ev={alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},eb={alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},ew=[eC={alias:null,args:null,kind:"ScalarField",name:"adsOnlyProfileSite",storageKey:null},el,eI={alias:null,args:null,kind:"ScalarField",name:"isAdsOnlyProfile",storageKey:null}],eT={alias:null,args:null,concreteType:"PinAnalyticsStats",kind:"LinkedField",name:"creatorAnalytics",plural:!1,selections:[{alias:null,args:null,concreteType:"CreatorAnalytics",kind:"LinkedField",name:"_30dRealtime",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"impression",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinClick",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"save",storageKey:null}],storageKey:null}],storageKey:null},eF={kind:"InlineFragment",selections:eA=[ed,p],type:"ParagraphBlock",abstractKey:null},eE={kind:"InlineFragment",selections:eA,type:"HeadingBlock",abstractKey:null},ej={kind:"InlineFragment",selections:eA,type:"TextBlock",abstractKey:null},eL=[K,c,P,k,es],eR={alias:null,args:null,kind:"ScalarField",name:"imageCoverUrl",storageKey:null},eK={alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null},eZ={alias:null,args:null,kind:"ScalarField",name:"showFewerWeightLossAds",storageKey:null},eD={alias:null,args:null,kind:"ScalarField",name:"showAdReasons",storageKey:null},ez={alias:null,args:null,kind:"ScalarField",name:"imageUrl",storageKey:null},eV=[eM={alias:null,args:null,kind:"ScalarField",name:"boardId",storageKey:null},eB={alias:null,args:null,kind:"ScalarField",name:"localPinId",storageKey:null},eO={alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},eN={alias:null,args:null,kind:"ScalarField",name:"sectionId",storageKey:null},y,V,c],eU={alias:null,args:null,kind:"ScalarField",name:"action",storageKey:null},eW={alias:null,args:null,concreteType:"ActionOptions",kind:"LinkedField",name:"actionOptions",plural:!1,selections:[eM,{alias:null,args:null,kind:"ScalarField",name:"interestId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"interestList",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"complaintReason",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"feedbackType",storageKey:null},z,{alias:null,args:null,kind:"ScalarField",name:"pinType",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pin",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"recommendationReasonId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"undo",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"userId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"query",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"newsId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"throughId",storageKey:null},{alias:null,args:null,concreteType:"ThroughProperties",kind:"LinkedField",name:"throughProperties",plural:!0,selections:[eg,em],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"clientTrackingParams",storageKey:null},W],storageKey:null},{fragment:{argumentDefinitions:[l,r,s,o],kind:"Fragment",metadata:null,name:"ShoppingModuleQuery",selections:[{alias:null,args:d,concreteType:null,kind:"LinkedField",name:"v3GetStelaShoppingCarouselQuery",plural:!1,selections:[u,{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"ShoppingModule_v3GetStelaShoppingCarousel"}],type:"V3GetStelaShoppingCarousel",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[o,s,l,r],kind:"Operation",name:"ShoppingModuleQuery",selections:[{alias:null,args:d,concreteType:null,kind:"LinkedField",name:"v3GetStelaShoppingCarouselQuery",plural:!1,selections:[u,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"data",plural:!0,selections:[u,{alias:null,args:null,concreteType:"StoryAction",kind:"LinkedField",name:"action",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"requestParams",storageKey:null},c,{alias:null,args:null,kind:"ScalarField",name:"location",storageKey:null},p,{alias:null,args:null,kind:"ScalarField",name:"style",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"containerType",storageKey:null},{alias:null,args:null,concreteType:"StoryDisplayOptions",kind:"LinkedField",name:"displayOptions",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryContentDisplay",kind:"LinkedField",name:"contentDisplay",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"componentType",storageKey:null},{alias:null,args:null,concreteType:"StoryContentCarouselDisplayOptions",kind:"LinkedField",name:"carouselDisplayOptions",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"navigationType",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"carouselScrollingMode",storageKey:null},{alias:null,args:null,concreteType:"StoryContentVisibleItemCount",kind:"LinkedField",name:"contentVisibleItemCount",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"mobile",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"web",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryTilesGridLayout",kind:"LinkedField",name:"gridLayout",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"cols",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"itemWidthHeightRatio",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinsDisplay",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"carouselFadeEnds",storageKey:null},{alias:null,args:null,concreteType:"StoryItemViewRepStyle",kind:"LinkedField",name:"itemViewRepStyle",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"exploreArticleRepStyle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"moreIdeasRepStyle",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryHeaderDisplay",kind:"LinkedField",name:"headerDisplay",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"expandedTextAlignment",storageKey:null},{alias:null,args:null,concreteType:"StoryThumbnailDisplayOptions",kind:"LinkedField",name:"thumbnail",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"thumbnailUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thumbnailWidth",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thumbnailWidthHeightRatio",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thumbnailWash",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryHeaderDynamicContentSpan",kind:"LinkedField",name:"dynamicHeaderContentSpan",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"narrowView",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wideView",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"textAlignment",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subtitleAlignment",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"headerSize",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"headerWidth",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"titlePosition",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subtitleStyle",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"titleTextColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subtitleTextColor",storageKey:null}],storageKey:null},m,{alias:null,args:null,kind:"ScalarField",name:"storyType",storageKey:null},{alias:null,args:null,concreteType:"StoryText",kind:"LinkedField",name:"title",plural:!1,selections:h,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"contentIds",storageKey:null},{alias:"storyTitle",args:null,concreteType:"StoryText",kind:"LinkedField",name:"title",plural:!1,selections:[u,g,p],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"objects",plural:!0,selections:[u,{kind:"InlineFragment",selections:[y,_,{alias:"imageSpec_236x",args:f,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[c,x,k,P],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"debug",storageKey:null},S,{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[v,b,c,C,_,u],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"attributionSourceId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"seoAltText",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"altText",storageKey:null},I,{alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dpaCreativeType",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDownstreamPromotion",storageKey:null},w,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"promoter",plural:!1,selections:[u,C,_,T,A,F,E],storageKey:null},{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[_,{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:[y,{alias:null,args:null,kind:"ScalarField",name:"details",storageKey:null},w,j,{alias:"slotId",args:null,kind:"ScalarField",name:"id",storageKey:null},L,{alias:"imagesSpec_236x",args:f,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:R,storageKey:'images(spec:"236x")'},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[_,{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV4",plural:!1,selections:Z,storageKey:null},D],storageKey:null},C],storageKey:null},u,{alias:"image236x",args:f,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:R,storageKey:'images(spec:"236x")'},{alias:"image474x",args:M,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:R,storageKey:'images(spec:"474x")'},{alias:"image564x",args:B,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:R,storageKey:'images(spec:"564x")'},{alias:"image736x",args:O,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:R,storageKey:'images(spec:"736x")'},N],storageKey:null},C,u,{alias:"carouselDataId",args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CollectionPin",kind:"LinkedField",name:"collectionPin",plural:!1,selections:[{alias:null,args:null,concreteType:"CollectionPinItem",kind:"LinkedField",name:"itemData",plural:!0,selections:[u,z,{alias:null,args:[{kind:"Literal",name:"spec",value:"750x"}],concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:[c,P,k],storageKey:'images(spec:"750x")'},w],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"autoAltText",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[u,k,c,P,x],storageKey:'images(spec:"orig")'},{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},V],storageKey:null},{alias:"image236x",args:f,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:R,storageKey:'images(spec:"236x")'},{alias:"image474x",args:M,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:R,storageKey:'images(spec:"474x")'},{alias:"image564x",args:B,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:R,storageKey:'images(spec:"564x")'},{alias:"image736x",args:O,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:R,storageKey:'images(spec:"736x")'},{alias:"imageSpec_474x",args:M,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:U,storageKey:'images(spec:"474x")'},{alias:"imageSpec_736x",args:O,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:U,storageKey:'images(spec:"736x")'},W,{alias:null,args:null,concreteType:"ImageCrop",kind:"LinkedField",name:"imageCrop",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"maxY",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"minY",storageKey:null}],storageKey:null},{alias:"imageSpec_136x136",args:[{kind:"Literal",name:"spec",value:"136x136"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:G,storageKey:'images(spec:"136x136")'},{alias:"imageSpec_170x",args:H,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:G,storageKey:'images(spec:"170x")'},{alias:null,args:null,kind:"ScalarField",name:"linkUtmApplicableAndReplaced",storageKey:null},{alias:"imageSpec_564x",args:B,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:$,storageKey:'images(spec:"564x")'},{alias:null,args:null,concreteType:"PromotedLeadForm",kind:"LinkedField",name:"promotedLeadForm",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"leadFormId",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Attribution",kind:"LinkedField",name:"attribution",plural:!1,selections:[{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[V],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Interest",kind:"LinkedField",name:"sourceInterest",plural:!1,selections:[b,{alias:null,args:null,kind:"ScalarField",name:"urlName",storageKey:null},C,_],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"videoStatus",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isRepin",storageKey:null},{alias:null,args:null,concreteType:"UserWebsite",kind:"LinkedField",name:"linkUserWebsite",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:[T,C],storageKey:null},C],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"seeMoreUserFeedback",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"unauthOnGridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"unauthOnPageDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedPartnershipAdvertiserName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedPartnershipAttributionName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPromotedPartnership",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"digitalMediaSourceType",storageKey:null},{alias:null,args:null,concreteType:"Sponsorship",kind:"LinkedField",name:"sponsorship",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"creator",plural:!1,selections:Y,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"sponsor",plural:!1,selections:Y,storageKey:null},u],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"gridAttribution",plural:!1,selections:[_,T,F,E,A,X,J,C],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mobileLink",storageKey:null},{alias:"imageSpec_60x60",args:[{kind:"Literal",name:"spec",value:"60x60"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:$,storageKey:'images(spec:"60x60")'},{alias:"imageSpec_600x315",args:[{kind:"Literal",name:"spec",value:"600x315"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:$,storageKey:'images(spec:"600x315")'},{alias:null,args:null,kind:"ScalarField",name:"isGoLinkless",storageKey:null},ee,{alias:null,args:null,kind:"ScalarField",name:"isQuickPromotable",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isVideo",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isInstagramApi",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showRecipeCta",storageKey:null},{condition:"isCloseupRelatedModulesFeedQuery",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[v,b,c,C,ea,{alias:null,args:null,kind:"ScalarField",name:"featuredIn",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"owner",plural:!1,selections:en,storageKey:null},ei,_,et,{alias:null,args:null,kind:"ScalarField",name:"collaboratorCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"collaboratedByMe",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"collaboratorPermissions",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"adDestinationUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"advertiserId",storageKey:null},x,L,{alias:null,args:null,kind:"ScalarField",name:"seoUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shoppingFlags",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:[u,C,J,X,_,T,F,E,A,{alias:null,args:null,kind:"ScalarField",name:"isPrimaryWebsiteVerified",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"websiteUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDirectToSiteAllowed",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"GenAIInterestData",kind:"LinkedField",name:"genAiTopics",plural:!0,selections:[b,{alias:null,args:null,kind:"ScalarField",name:"interestIdStr",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"explicitlyFollowedByMe",storageKey:null},C,A,T,_,X,J,u,E,el],storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[_,{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV3MOBILE",plural:!1,selections:er,storageKey:null},{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV4",plural:!1,selections:[k,P,c,u,K],storageKey:null},{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"v720P",plural:!1,selections:er,storageKey:null},u],storageKey:null},C,u,es],storageKey:null},{alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[eo,{alias:null,args:null,concreteType:"AnnotationsWithLinks",kind:"LinkedField",name:"annotationsWithLinksArray",plural:!0,selections:[b,c],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"PinTagChipImagesPerSpec",kind:"LinkedField",name:"pinTagsChips",plural:!0,selections:[u,N,{alias:null,args:null,concreteType:"Thumbnails",kind:"LinkedField",name:"image",plural:!1,selections:R,storageKey:null},w],storageKey:null},C,{alias:null,args:null,kind:"ScalarField",name:"isShopTheLook",storageKey:null},ee],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"campaignId",storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[u,{alias:null,args:null,kind:"ScalarField",name:"isDeleted",storageKey:null},C,{alias:null,args:null,concreteType:"StoryPinPage",kind:"LinkedField",name:"pages",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blocks",plural:!0,selections:[u,{kind:"InlineFragment",selections:[ed,{alias:null,args:null,concreteType:"StoryPinVideoMetadataFormattedV2",kind:"LinkedField",name:"videoDataV2",plural:!1,selections:[{alias:null,args:eu,concreteType:"StoryPinVideoFormatsV2",kind:"LinkedField",name:"videoList",plural:!1,selections:[D],storageKey:'videoList(version:"V_HLSV3_MOBILE")'},u],storageKey:null}],type:"StoryPinVideoBlock",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalVideoDuration",storageKey:null},_,ec,{alias:null,args:null,kind:"ScalarField",name:"hasProductPins",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"staticPageCount",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinRecommendationReason",kind:"LinkedField",name:"recommendationReason",plural:!1,selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[u,C,b,c,_],storageKey:null},ep,{alias:null,args:null,kind:"ScalarField",name:"reasonId",storageKey:null},{alias:null,args:null,concreteType:"PinThroughProperties",kind:"LinkedField",name:"throughProperties",plural:!0,selections:[em,eg],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AdData",kind:"LinkedField",name:"adData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"collectionGridClickType",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ceAltImageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isWeightLossAd",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"excludeFromGridRepTests",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:Q,storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[u,{alias:null,args:null,concreteType:"Brand",kind:"LinkedField",name:"brand",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"signature",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ShippingInfo",kind:"LinkedField",name:"shippingInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"freeShippingPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"freeShippingValue",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"DimensionMetadata",kind:"LinkedField",name:"dimensionMetadata",plural:!0,selections:[b,{alias:null,args:null,kind:"ScalarField",name:"values",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:Q,storageKey:null}],storageKey:null},ey,e_,ef,ex,ek,b,eP,{alias:"additionalImageSpec_236x",args:f,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:Q,storageKey:'additionalImagesPerSpec(spec:"236x")'},{alias:"additionalImageSpec_474x",args:M,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:Q,storageKey:'additionalImagesPerSpec(spec:"474x")'},{alias:"additionalImageSpec_564x",args:B,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:Q,storageKey:'additionalImagesPerSpec(spec:"564x")'},{alias:"additionalImageSpec_736x",args:O,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:Q,storageKey:'additionalImagesPerSpec(spec:"736x")'}],storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[u,{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null}],storageKey:null},y,I],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"utmLink",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isOosProduct",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStaleProduct",storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[j,{alias:null,args:null,kind:"ScalarField",name:"itemSetId",storageKey:null},ey,e_,ef,ex,ek,u,eP,{alias:null,args:null,concreteType:"Brand",kind:"LinkedField",name:"brand",plural:!1,selections:[b],storageKey:null},b,{alias:null,args:null,concreteType:"LabelInfo",kind:"LinkedField",name:"labelInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"labels",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"typeName",storageKey:null},u,{alias:null,args:null,kind:"ScalarField",name:"siteName",storageKey:null},eS,{alias:null,args:null,kind:"ScalarField",name:"displayCookTime",storageKey:null},{alias:null,args:null,concreteType:"AggregateRatingMetadata",kind:"LinkedField",name:"aggregateRating",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"bestRating",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ratingValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reviewCount",storageKey:null}],storageKey:null},c],storageKey:null},{alias:null,args:null,concreteType:"ProductMetadataV2",kind:"LinkedField",name:"productPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"ItemMetadata",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"additionalImagesLength",storageKey:null}],storageKey:null},C],storageKey:null},ev,{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForWebCloseup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedIsLeadAd",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinPromotionId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"adMatchReason",storageKey:null},{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:[T,C,F],storageKey:null},C,u],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:[T,C,_],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"access",storageKey:null},eb,{alias:null,args:null,kind:"ScalarField",name:"promotedIsRemovable",storageKey:null},{alias:null,args:null,concreteType:"AdTargetingAttribution",kind:"LinkedField",name:"adTargetingAttribution",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"geoPostalCode",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"geoRegion",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isCustomerListMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isShoppingRetargetingMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isActalikeMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEngagementMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isExpandTargetingMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isFromGpsLocation",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isVisitorMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isShoppingProspectingMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPlPersonaMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"matchedAgeBucket",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"matchedDevice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"matchedGender",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"matchedInterest",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"matchedKeyword",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"matchedLocale",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isFirstPartyAdPersonalizationEnabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isThirdPartyAdPersonalizationEnabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isLocalInventoryAdsMatched",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shouldOpenInStream",storageKey:null}]},{condition:"isDesktop",kind:"Condition",passingValue:!0,selections:[eb,{alias:null,args:null,kind:"ScalarField",name:"isUnsafe",storageKey:null},{alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[eo],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[I,y],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[eS],storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[ec,C],storageKey:null},ev,{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:Q,storageKey:null},C],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPreLovedGoodsLabel",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"promoter",plural:!1,selections:[eC,eI],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"favoritedByMe",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"favoriteUserCount",storageKey:null},{alias:null,args:null,concreteType:"ReactionCountModel",kind:"LinkedField",name:"reactionCountsData",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"reactionCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reactionType",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"gridAttribution",plural:!1,selections:ew,storageKey:null},eT,{alias:null,args:null,kind:"ScalarField",name:"showFoodIndicator",storageKey:null},{condition:"isCloseupRelatedModulesFeedQuery",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinPage",kind:"LinkedField",name:"pages",plural:!0,selections:[v,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blocks",plural:!0,selections:[eF,eE,ej,{kind:"InlineFragment",selections:[p,{alias:null,args:null,concreteType:"StoryPinVideoMetadataFormattedV2",kind:"LinkedField",name:"videoDataV2",plural:!1,selections:[{alias:"videoListMobile",args:eu,concreteType:"StoryPinVideoFormatsV2",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV3MOBILE",plural:!1,selections:eL,storageKey:null}],storageKey:'videoList(version:"V_HLSV3_MOBILE")'},{alias:"videoListEXP3",args:[{kind:"Literal",name:"version",value:"V_EXP3"}],concreteType:"StoryPinVideoFormatsV2",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vEXP3",plural:!1,selections:eL,storageKey:null}],storageKey:'videoList(version:"V_EXP3")'},{alias:"videoListEXP4",args:[{kind:"Literal",name:"version",value:"V_EXP4"}],concreteType:"StoryPinVideoFormatsV2",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vEXP4",plural:!1,selections:eL,storageKey:null}],storageKey:'videoList(version:"V_EXP4")'},{alias:"videoListEXP5",args:[{kind:"Literal",name:"version",value:"V_EXP5"}],concreteType:"StoryPinVideoFormatsV2",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vEXP5",plural:!1,selections:eL,storageKey:null}],storageKey:'videoList(version:"V_EXP5")'},{alias:"videoListEXP6",args:[{kind:"Literal",name:"version",value:"V_EXP6"}],concreteType:"StoryPinVideoFormatsV2",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vEXP6",plural:!1,selections:eL,storageKey:null}],storageKey:'videoList(version:"V_EXP6")'},{alias:"videoListEXP7",args:[{kind:"Literal",name:"version",value:"V_EXP7"}],concreteType:"StoryPinVideoFormatsV2",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vEXP7",plural:!1,selections:eL,storageKey:null}],storageKey:'videoList(version:"V_EXP7")'},{alias:"videoList720P",args:[{kind:"Literal",name:"version",value:"V_720P"}],concreteType:"StoryPinVideoFormatsV2",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"v720P",plural:!1,selections:eL,storageKey:null}],storageKey:'videoList(version:"V_720P")'}],storageKey:null}],type:"StoryPinVideoBlock",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinBasics",kind:"LinkedField",name:"basics",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinListBlock",kind:"LinkedField",name:"listBlocks",plural:!0,selections:[ed,{alias:null,args:null,kind:"ScalarField",name:"heading",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blocks",plural:!0,selections:[u,eF,eE,ej,{kind:"InlineFragment",selections:[ed],type:"IngredientBlock",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasAffiliateProducts",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"imageThumbnailUrl",storageKey:null},eR],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,concreteType:"AggregateRatingMetadata",kind:"LinkedField",name:"aggregateRating",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ratingCount",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[eT],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:ew,storageKey:null}]},{condition:"isDesktop",kind:"Condition",passingValue:!0,selections:[{kind:"ClientExtension",selections:[eK,eZ]}]},{kind:"ClientExtension",selections:[eK,eD,eZ]}]},{kind:"ClientExtension",selections:[eK,{alias:"nodeId",args:null,kind:"ScalarField",name:"__id",storageKey:null},{alias:null,args:null,concreteType:"SaveTarget",kind:"LinkedField",name:"savedInfo",plural:!1,selections:[eM,eB,u,c,eO,eN,y,V],storageKey:null},eD,eZ,{alias:null,args:null,kind:"ScalarField",name:"imageBase64",storageKey:null},ez,{alias:null,args:null,kind:"ScalarField",name:"mediaUploadId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"saved",storageKey:null},{alias:null,args:null,concreteType:"SaveTarget",kind:"LinkedField",name:"savedCutout",plural:!1,selections:eV,storageKey:null},{alias:null,args:null,concreteType:"SaveTarget",kind:"LinkedField",name:"selectedItem",plural:!1,selections:eV,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showFeedbackOverlay",storageKey:null},{alias:null,args:null,concreteType:"FeedbackText",kind:"LinkedField",name:"feedbackText",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"subTitle",storageKey:null},y,{alias:null,args:null,concreteType:"Unfollow",kind:"LinkedField",name:"unfollow",plural:!1,selections:[eU,eW],storageKey:null},{alias:null,args:null,concreteType:"UndoCallbackProps",kind:"LinkedField",name:"undoCallbackProps",plural:!1,selections:[eU,eW,{alias:null,args:null,kind:"ScalarField",name:"viewType",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewParameter",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showFeedback",storageKey:null}]}],type:"Pin",abstractKey:null},{kind:"InlineFragment",selections:[m,{alias:"storyTitle",args:null,concreteType:"StoryText",kind:"LinkedField",name:"title",plural:!1,selections:h,storageKey:null}],type:"Story",abstractKey:null},{kind:"InlineFragment",selections:[_,b,{alias:null,args:null,kind:"ScalarField",name:"archivedByMeAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"boardOrderModifiedAt",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"collaboratingUsers",plural:!1,selections:[u,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserCollaboratingUsersConnection",kind:"LinkedField",name:"connection",plural:!1,selections:[{alias:null,args:null,concreteType:"UserCollaboratingUsersEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"node",plural:!1,selections:en,storageKey:null}],storageKey:null}],storageKey:null}],type:"UserCollaboratingUsersConnectionContainer",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CoverPin",kind:"LinkedField",name:"coverPin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"crop",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"size",storageKey:null},ez],storageKey:null},ea,{alias:null,args:null,kind:"ScalarField",name:"hasCustomCover",storageKey:null},{alias:"images170x",args:H,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!0,selections:$,storageKey:'images(spec:"170x")'},{alias:"images236x",args:f,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!0,selections:$,storageKey:'images(spec:"236x")'},ei,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"owner",plural:!1,selections:[_,C,{alias:null,args:null,kind:"ScalarField",name:"blockedByMe",storageKey:null},T,X,A,{alias:null,args:null,concreteType:"VerifiedIdentity",kind:"LinkedField",name:"verifiedIdentity",plural:!1,selections:[b,q],storageKey:null}],storageKey:null},I,c,eR,{alias:null,args:null,kind:"ScalarField",name:"pinCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinThumbnailUrls",storageKey:null},et,{alias:null,args:null,kind:"ScalarField",name:"sectionCount",storageKey:null},{alias:null,args:null,concreteType:"SensitivityScreen",kind:"LinkedField",name:"sensitivityScreen",plural:!1,selections:[ep,{alias:null,args:null,kind:"ScalarField",name:"showWarning",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shouldShowBoardCollaborators",storageKey:null},V,{alias:"coverImageSpec_222x",args:[{kind:"Literal",name:"spec",value:"222x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"coverImages",plural:!1,selections:$,storageKey:'coverImages(spec:"222x")'},{alias:"coverImageSpec_400x300",args:[{kind:"Literal",name:"spec",value:"400x300"}],concreteType:"ImageDetails",kind:"LinkedField",name:"coverImages",plural:!1,selections:$,storageKey:'coverImages(spec:"400x300")'},{alias:"coverImageSpec_216x146",args:[{kind:"Literal",name:"spec",value:"216x146"}],concreteType:"ImageDetails",kind:"LinkedField",name:"coverImages",plural:!1,selections:$,storageKey:'coverImages(spec:"216x146")'},{alias:null,args:null,kind:"ScalarField",name:"imageCoverHdUrl",storageKey:null},{condition:"isCloseupRelatedModulesFeedQuery",kind:"Condition",passingValue:!1,selections:[{alias:"boardAccess",args:null,kind:"ScalarField",name:"access",storageKey:null}]}],type:"Board",abstractKey:null},{kind:"InlineFragment",selections:[{alias:"boardMoreIdeasFeedUpsellId",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:"boardMoreIdeasFeedUpsellName",args:null,kind:"ScalarField",name:"boardName",storageKey:null}],type:"BoardMoreIdeasFeedUpsell",abstractKey:null},{kind:"InlineFragment",selections:[_,A],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[_,{alias:"exploreArticleTitle",args:null,concreteType:"ArticleTitleGraphQL",kind:"LinkedField",name:"title",plural:!1,selections:h,storageKey:null}],type:"ExploreArticle",abstractKey:null},{kind:"InlineFragment",selections:[b,{alias:"imageSpec236x",args:f,concreteType:"Thumbnails",kind:"LinkedField",name:"image",plural:!0,selections:$,storageKey:'image(spec:"236x")'},{alias:"imageSpec474x",args:M,concreteType:"Thumbnails",kind:"LinkedField",name:"image",plural:!0,selections:$,storageKey:'image(spec:"474x")'},{alias:"klpUrl",args:null,kind:"ScalarField",name:"url",storageKey:null}],type:"SeoRelatedInterestsData",abstractKey:null},{kind:"InlineFragment",selections:[C],type:"Node",abstractKey:"__isNode"}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[X,J,A,F,C,u],storageKey:null},{alias:null,args:null,concreteType:"StoryText",kind:"LinkedField",name:"subtitle",plural:!1,selections:h,storageKey:null},{alias:"storyDescription",args:null,concreteType:"StoryText",kind:"LinkedField",name:"description",plural:!1,selections:h,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shopSource",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"slot",storageKey:null},S],storageKey:null}],type:"V3GetStelaShoppingCarousel",abstractKey:null}],storageKey:null}]},params:{id:"32240e7337f4c5cd9d81fa6a0959f36a2aad38a8d351bbd63dc8ef5d09a977d9",metadata:{},name:"ShoppingModuleQuery",operationKind:"query",text:null}});i.hash="b36a131b6573d138a64ac3e9a26683c4";let t=i;var l,r,s,o,d,u,c,p,m,g,h,y,_,f,x,k,P,S,v,b,C,I,w,T,A,F,E,j,L,R,K,Z,D,M,B,O,N,z,V,U,W,G,H,$,Y,X,q,J,Q,ee,ea,en,ei,et,el,er,es,eo,ed,eu,ec,ep,em,eg,eh,ey,e_,ef,ex,ek,eP,eS,ev,eb,eC,eI,ew,eT,eA,eF,eE,ej,eL,eR,eK,eZ,eD,eM,eB,eO,eN,ez,eV,eU,eW,eG=i.default||i;if("query"===eG.params.operationKind)if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(eG);else{let e=[eG.params.name,eG.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[e]=eG}},263032:function(e,a,n){n.r(a),n.d(a,{default:()=>t});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ShoppingModule_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"CollectionPin",kind:"LinkedField",name:"collectionPin",plural:!1,selections:[{alias:null,args:null,concreteType:"CollectionPinItem",kind:"LinkedField",name:"itemData",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"source",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinId",storageKey:null}],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"CSSCarouselModule_parentPin"},{args:null,kind:"FragmentSpread",name:"CarouselModule_parentPin"}],type:"Pin",abstractKey:null};i.hash="9568236b6fff857d42b318f21d466fe8";let t=i},336209:function(e,a,n){n.r(a),n.d(a,{default:()=>t});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ShoppingModule_story",selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:"storyId",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"contentIds",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"slot",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyType",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,concreteType:"StoryDisplayOptions",kind:"LinkedField",name:"displayOptions",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryContentDisplay",kind:"LinkedField",name:"contentDisplay",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"componentType",storageKey:null}],storageKey:null}],storageKey:null}],type:"Story",abstractKey:null};i.hash="967fc795bbfb9844686a21d73abf35e0";let t=i},220149:function(e,a,n){n.r(a),n.d(a,{default:()=>t});let i={argumentDefinitions:[{defaultValue:!1,kind:"LocalArgument",name:"skipUnauthFragment"}],kind:"Fragment",metadata:null,name:"ShoppingModule_v3GetStelaShoppingCarousel",selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"data",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,concreteType:"StoryAction",kind:"LinkedField",name:"action",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"requestParams",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"containerType",storageKey:null},{alias:null,args:null,concreteType:"StoryDisplayOptions",kind:"LinkedField",name:"displayOptions",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryContentDisplay",kind:"LinkedField",name:"contentDisplay",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"componentType",storageKey:null}],storageKey:null}],storageKey:null},{alias:"storyId",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyType",storageKey:null},{alias:null,args:null,concreteType:"StoryText",kind:"LinkedField",name:"title",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"format",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"CarouselModule_story"},{args:[{kind:"Variable",name:"skipUnauthFragment",variableName:"skipUnauthFragment"}],kind:"FragmentSpread",name:"CSSCarouselModule_story"},{args:null,kind:"FragmentSpread",name:"ShoppingModule_story"}],storageKey:null}],type:"V3GetStelaShoppingCarousel",abstractKey:null};i.hash="f6b0848713674452581430e71783a253";let t=i},176376:function(e,a,n){var i,t,l,r,s,o,d;n.r(a),n.d(a,{default:()=>c});let u=(i={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},r=[l={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],s=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},i,{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"TitleDesktop_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"advertiserId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"attributionSourceId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[i],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"campaignId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isGoLinkless",storageKey:null},{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},t],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:r,storageKey:null},l,{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"736x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"orig")'},{alias:null,args:null,kind:"ScalarField",name:"isDownstreamPromotion",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinPromotionId",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"promoter",plural:!1,selections:r,storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:d=[o={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:d,storageKey:null},t,{alias:null,args:null,concreteType:"MakeCardTutorialMetadata",kind:"LinkedField",name:"tutorial",plural:!1,selections:[o,{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null},t,{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{args:null,kind:"FragmentSpread",name:"usePinFormattedLink_pin"},{args:null,kind:"FragmentSpread",name:"usePinHasProducts_pin"}],type:"Pin",abstractKey:null});u.hash="e0961d958eda59cad942eda9890b0f5f";let c=u},971203:function(e,a,n){n.r(a),n.d(a,{default:()=>t});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoContent_pin",selections:[{args:null,kind:"FragmentSpread",name:"useCalculateMaxWidthAndHeightForSideBySideVariant_pin"},{args:null,kind:"FragmentSpread",name:"CloseupVideoWithVisibility_pin"}],type:"Pin",abstractKey:null};i.hash="89029511c11617e1150976d1002228db";let t=i},655327:function(e,a,n){n.r(a),n.d(a,{default:()=>t});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useBuildCloseupImageOverlayProps_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"isGoLinkless",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"access",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null}],type:"Pin",abstractKey:null};i.hash="759d6577be9e10b82394f48ee87daf24";let t=i},543996:function(e,a,n){var i,t,l,r,s,o,d;n.r(a),n.d(a,{default:()=>c});let u=(i={alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},l=[t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],o={alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCloseupBodyUtils_pin",selections:[i,{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[t,{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:l,storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:l,storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:l,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:l,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:s=[r={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"domainUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"domainVerified",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"thirdPartyPinOwner",plural:!1,selections:l,storageKey:null},{alias:null,args:null,concreteType:"UserWebsite",kind:"LinkedField",name:"linkUserWebsite",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:l,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:[t,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:s,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isShopTheLook",storageKey:null}],storageKey:null},o,{alias:null,args:null,kind:"ScalarField",name:"isGoLinkless",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:s,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:s,storageKey:null},{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:[o,i],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:d=[r],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupUnifiedAttribution",plural:!1,selections:d,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForAggregatedComments",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isCollaborative",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"collaboratedByMe",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:d,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDownstreamPromotion",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,concreteType:"CreatorClass",kind:"LinkedField",name:"creatorClass",plural:!1,selections:l,storageKey:null}],type:"Pin",abstractKey:null});u.hash="b640d34fae5bf66634c4dffcbb8ea6d4";let c=u},522386:function(e,a,n){n.r(a),n.d(a,{default:()=>t});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCreatorRecsPrevStateCloseup_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"promotedIsLeadAd",storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"typeName",storageKey:null}],storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"showSuggestedCreatorRecs",storageKey:null}]}],type:"Pin",abstractKey:null};i.hash="a1f87ab2b8198cdc7fd8fc3cdaa872f0";let t=i},208540:function(e,a,n){var i;n.r(a),n.d(a,{default:()=>l});let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useHandleBackButtonClick_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedIsLeadAd",storageKey:null},{alias:null,args:null,concreteType:"PromotedLeadForm",kind:"LinkedField",name:"promotedLeadForm",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"leadId",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:i,storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:i,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:i,storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"}],type:"Pin",abstractKey:null};t.hash="efee9cd30f69b524ed9920746ed65ceb";let l=t},394292:function(e,a,n){n.r(a),n.d(a,{default:()=>t});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useHandleTitleClick_pin",selections:[{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"},{args:null,kind:"FragmentSpread",name:"useClientTrackingParams_pin"},{alias:null,args:null,kind:"ScalarField",name:"linkUtmApplicableAndReplaced",storageKey:null}],type:"Pin",abstractKey:null};i.hash="d38a7b9f18791089cd1df852e3863570";let t=i},881010:function(e,a,n){var i;n.r(a),n.d(a,{default:()=>l});let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useIsBoardOwnerOrCollaborator_pin",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"collaboratedByMe",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"owner",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:i,storageKey:null}],type:"Pin",abstractKey:null};t.hash="120c47eff2cf4911de716b514608718f";let l=t},224266:function(e,a,n){var i;n.r(a),n.d(a,{default:()=>l});let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useMediaContainer_pin",selections:[{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isShopTheLook",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"altText",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"autoAltText",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForRelatedProducts",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Shuffle",kind:"LinkedField",name:"shuffle",plural:!1,selections:i,storageKey:null},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"orig")'},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"method",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"utmLink",storageKey:null}],type:"Pin",abstractKey:null};t.hash="c3027cfec56abe15f0990c2bc6707062";let l=t},251967:function(e,a,n){var i,t;n.r(a),n.d(a,{default:()=>r});let l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"usePinAnalyticsStatus_pin",selections:[{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[t={alias:null,args:null,concreteType:"PinAnalyticsStats",kind:"LinkedField",name:"creatorAnalytics",plural:!1,selections:[{alias:null,args:null,concreteType:"CreatorAnalytics",kind:"LinkedField",name:"_30dRealtime",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null}],storageKey:null},t,{alias:null,args:null,kind:"ScalarField",name:"isRepin",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:i,storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};l.hash="977a37f1bef6ecfbe279db65075e1520";let r=l},545578:function(e,a,n){n.r(a),n.d(a,{default:()=>t});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"usePinFormattedLink_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"method",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"utmLink",storageKey:null},{args:null,kind:"FragmentSpread",name:"usePinHasProducts_pin"}],type:"Pin",abstractKey:null};i.hash="b694b913cbcf66451260d78ec78bcccd";let t=i},445662:function(e,a,n){n.r(a),n.d(a,{default:()=>t});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"usePinHasProducts_pin",selections:[{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};i.hash="e1f413e0ba2f9031ea605d85baa14a4b";let t=i},873707:function(e,a,n){n.d(a,{CA:()=>t,Gv:()=>i,k5:()=>l});let i=({orbacSubjectId:e,pinIsRepin:a,pinPinnerId:n,viewerId:i,viewerIsPartner:t})=>!a&&!!t&&[i,e].includes(n),t=e=>!!(e&&!e.insufficient_data_response&&e.results&&e.results.length>0),l=(e,a)=>{if(!e)return e;let n=[...e].filter(e=>!!e.mom_change?.roundedPercentChange&&e.mom_change.roundedPercentChange>0);return n.length<=a?n:Array(a).fill(1).map(()=>{let e=Math.floor(Math.random()*n.length);return n.splice(e,1)[0]})}},314021:function(e,a,n){n.r(a),n.d(a,{default:()=>M});var i,t,l=n(667294),r=n(581722);n(167912);var s=n(20256),o=n(980787),d=n(821342),u=n(422578),c=n(221020);let p=function(e,a,n){switch((0,c.o)(e)){case"SingularLegacy":case"PluralLegacy":case"PaginationLegacyData":return a;case"GraphQL":{let e=(0,u.useRelayEnvironment)();return a=>(0,u.commitLocalUpdate)(e,e=>n(e,a))}default:throw Error("Unexpected case")}};var m=n(28427),g=n(19585),h=n(628708),y=n(281098),_=n(886981),f=n(302148),x=n(341742),k=n(744862),P=n(709311),S=n(281239),v=n(149728),b=n(785893);let C=({creatorData:e,onTap:a,onUserFollow:n})=>{(0,l.useEffect)(()=>{(0,y.Z)("SuggestedCreatorRep","/app/www/CreatorCard/SuggestedCreatorRecs/SuggestedCreatorRep.tsx")},[]);let i=(0,g.ZP)(),t=(0,d.Z)(),{explicitly_followed_by_me:r,follower_count:o=0,full_name:u,id:c,image_medium_url:p,username:m,verified_identity:h,avatar_color_index:_,is_verified_merchant:x}=e||{},C=`/${m}/`;return(0,b.jsx)(s.sg,{span:4,children:(0,b.jsxs)(s.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{padding:"0px 2px"}},direction:"column",display:"flex",marginBottom:1,children:[(0,b.jsx)(s.Tg,{href:C,onTap:()=>a(c),children:(0,b.jsxs)(s.kC,{alignItems:"center",direction:"column",justifyContent:"start",children:[(0,b.jsx)(s.xu,{height:60,width:60,children:(0,b.jsx)(k.qE,{color:_,name:u??"",size:"fit",src:p??"",verified:!1})}),(0,b.jsxs)(s.xu,{marginBottom:1,paddingY:2,children:[(0,b.jsx)(s.xu,{marginBottom:1,children:(0,b.jsx)(s.xv,{align:"center",lineClamp:1,size:"100",weight:"bold",children:h||x?(0,b.jsx)(v.Z,{badgeSize:"xs",badgeSpacing:2,fullName:u??"",isVerifiedIdentity:h?.verified,isVerifiedMerchant:x}):u})}),(0,b.jsx)(s.xv,{align:"center",size:"100",children:(0,f.nk)(i.ngettext('{{ followerCount }} follower', '{{ followerCount }} followers', o, 'suggestedCreatorRep.creator.followerCount', 'the number of followers the user has'),{followerCount:(0,b.jsx)(P.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:o},o)})})]})]})}),(0,b.jsx)(S.Z,{fullName:u,id:c,imageUrl:p,isOwnProfile:t.isAuth&&t.id===c,isSecondaryButton:!0,onUserFollow:e=>n({userIsNowFollowing:e,creatorId:c}),profileUrl:`/${m}/`,shouldStopEventPropagation:!0,size:"sm",userFollowed:r,viewParameter:156,viewType:3})]})})},I=({creatorRecs:e,fullName:a,pinId:n,viewParameter:i,viewType:t})=>{(0,l.useEffect)(()=>{(0,y.Z)("SuggestedCreatorRecs","/app/www/CreatorCard/SuggestedCreatorRecs/SuggestedCreatorRecs.tsx")},[]);let{logContextEvent:r}=(0,o.u)(),d=(0,g.ZP)();(0,x.Z)(()=>{r({event_type:13,component:13891,view_parameter:i,view_type:t,aux_data:{...n?{pin_id:n}:{}}})});let u=e=>{r({event_type:101,component:13891,view_parameter:i,view_type:t,object_id_str:e,aux_data:{...n?{pin_id:n}:{}}})},c=({userIsNowFollowing:e,creatorId:a})=>{e?r({event_type:45,component:13891,object_id_str:a,view_parameter:i,view_type:t,aux_data:{...n?{pin_id:n}:{}}}):r({event_type:46,component:13891,object_id_str:a,view_parameter:i,view_type:t,aux_data:{...n?{pin_id:n}:{}}})};return(0,b.jsx)(s.xu,{minWidth:432,paddingY:4,children:(0,b.jsxs)(s.xu,{borderStyle:"shadow",paddingX:5,paddingY:4,rounding:4,children:[a&&(0,b.jsx)(s.X6,{align:"center",size:"300",children:(0,f.nk)(d._('More like {{creatorName}}', 'suggestedCreatorRecs.title', 'Users like the one just followed. creatorName: the creator\'s name'),{creatorName:a})}),(0,b.jsx)(s.xu,{display:"flex",justifyContent:"between",marginTop:4,width:"100%",children:e.map(e=>(0,b.jsx)(C,{creatorData:e.user,onTap:u,onUserFollow:c},e.user_id))})]})})},w=3,T=["creatorrecommendationitem.user_id","creatorrecommendationitem.user()","user.explicitly_followed_by_me","user.id","user.follower_count","user.full_name","user.image_medium_url","user.username","user.verified_identity","user.is_verified_merchant"],A=({fullName:e,id:a,numCreatorsToShow:n=w,pinId:i,viewParameter:t,viewType:r})=>{(0,l.useEffect)(()=>{(0,y.Z)("SuggestedCreatorRecsWrapper","/app/www/CreatorCard/SuggestedCreatorRecs/SuggestedCreatorRecsWrapper.tsx")},[]);let s=(0,_.Z)({name:"ApiResource",options:{url:"/v3/orientation/nux_creator_recommendations/",data:{fields:T.join(","),page_size:n,referrer:4,target_user:a}}});if(!s.isLoaded||!(s.data&&s.data.length===n))return null;let o=s.data||[];return(0,b.jsx)(I,{creatorRecs:o,fullName:e,pinId:i,viewParameter:t,viewType:r})};var F=n(390843);let E=(void 0!==i||(i=n(522386)).hash&&"a1f87ab2b8198cdc7fd8fc3cdaa872f0"!==i.hash&&console.error("The definition of 'useCreatorRecsPrevStateCloseup_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),j=function(e){let a=function(){let{forward:e}=(0,F.ou)(),a=e&&e.length>0&&e[0].match&&e[0].match.path?e[0].match.path:null;return!!(a&&a.includes("/:username"))}(),n=(0,m.Z)(E,e);if(!a||!n)return{creatorRecsPrevState:!1};{let e=!!n.promotedIsLeadAd,a=n.richSummary?.typeName==="product";return{creatorRecsPrevState:!!n&&!e&&!a&&!!n.showSuggestedCreatorRecs}}};var L=n(285491),R=n(206459);function K(e,a,n){var i;return(a="symbol"==typeof(i=function(e,a){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,a||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(a,"string"))?i:i+"")in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}let Z=(void 0!==t||(t=n(119031)).hash&&"e0f013c76e98f3f285ba25a7d2f0f3af"!==t.hash&&console.error("The definition of 'CreatorCard_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),t);class D extends l.PureComponent{constructor(...e){super(...e),K(this,"state",{shouldShowCreatorRecs:this.props.suggestedCreatorRecsPrevState,user:this.props.officialUser}),K(this,"handleNavigateAndLog",(e,a)=>{let{pin:n}=this.props,i=!!n.storyPinDataId;e===a?this.props.logContextEvent({event_type:101,element:13382,view_type:this.viewType,view_parameter:this.viewParameter,...i?{component:230}:Object.freeze({}),object_id_str:n.entityId,aux_data:{pin_id:n.entityId,creator_id:n.sponsorship?.creator?.creatorId,aop_origin:"CreatorCard",...i?{story_pin_template_type:n.storyPinData?.metadata?.templateType}:{}}}):this.props.logContextEvent({event_type:101,view_type:this.viewType,view_parameter:this.viewParameter,element:11619,...i?{component:230}:Object.freeze({}),object_id_str:n.entityId,aux_data:{pin_id:n.entityId,creator_id:n.sponsorship?.creator?.creatorId,...i?{story_pin_template_type:n.storyPinData?.metadata?.templateType}:{}}})}),K(this,"handleNavigateAndLogSponsorClick",()=>{let{pin:e}=this.props,a=e.entityId,n=e.sponsorship?.creator?.creatorId,i=e.sponsorship?.sponsor?.sponsorId,t=!!e.storyPinDataId;n&&i&&this.props.logContextEvent({event_type:101,view_type:this.viewType,view_parameter:this.viewParameter,element:11619,...t?{component:230}:Object.freeze({}),object_id_str:a,aux_data:{pin_id:a,creator_id:n,sponsor_id:i}})})}static getDerivedStateFromProps(e,a){let n=e.officialUser;if(n&&n!==a.user)return{...a,user:n};let i=e.suggestedCreatorRecsPrevState;return i&&!a.shouldShowCreatorRecs?{...a,shouldShowCreatorRecs:i}:null}get viewType(){return this.props.viewType||3}get viewParameter(){return this.props.viewParameter||156}render(){let{user:e}=this.state;if(!e)return(0,b.jsx)(s.xu,{});let{pin:a}=this.props,{full_name:n,id:i,image_medium_url:t,is_verified_merchant:l,username:r,verified_identity:o}=e,d=!!o?.verified,u=!!a.promotedIsLeadAd,c=a.richSummary?.typeName==="product",p=!!(!u&&!c&&this.state.shouldShowCreatorRecs),m=a.pinner?.isAdsOnlyProfile&&a.pinner.adsOnlyProfileSite?a.pinner?.adsOnlyProfileSite:`/${r}/`;return(0,b.jsx)(s.xu,{position:"relative",children:(0,b.jsxs)(s.xu,{children:[(0,b.jsx)(s.kC,{alignItems:"center",justifyContent:"start",children:(0,b.jsx)(s.xu,{flex:"grow",children:(0,b.jsx)(L.Z,{fullName:n,imageUrl:t,isPromoted:!!(a.promoter&&a.isPromoted),isVerifiedIdentity:d,isVerifiedMerchant:l,onNavigateClick:()=>this.handleNavigateAndLog(m,a.pinner?.adsOnlyProfileSite),onNavigateSponsorClick:this.handleNavigateAndLogSponsorClick,openNewTab:m===a.pinner?.adsOnlyProfileSite,profileUrl:m,sponsorName:a.sponsorship?.sponsor?.fullName??"",sponsorshipStatus:a.sponsorship?.status,sponsorUsername:a.sponsorship?.sponsor?.username??""})})}),p&&(0,b.jsx)(s.xu,{marginEnd:1,marginStart:1,children:(0,b.jsx)(A,{fullName:n,id:i,pinId:a.entityId,viewParameter:this.viewParameter,viewType:this.viewType})})]})})}}let M=(0,h.Z)(function(e){let{logContextEvent:a}=(0,o.u)(),n=(0,g.ZP)(),i=(0,m.Z)(Z,e.input),t=(0,r.I0)(),l=p(e.input,()=>{t((0,R.Vw)(i.entityId))},e=>{let a=e.get(i.entityId);a&&a.setValue(!0,"showSuggestedCreatorRecs")}),s=(0,d.Z)(),{creatorRecsPrevState:u}=j(i);return(0,b.jsx)(D,{...e,i18n:n,logContextEvent:a,pin:i,setShowSuggestedCreatorRecs:l,suggestedCreatorRecsPrevState:u,viewerUserId:s.isAuth?s.id:null})})},889144:function(e,a,n){n.d(a,{Z:()=>S});var i=n(281098),t=n(667294),l=n(581722),r=n(825332),s=n(96733),o=n(770545),d=n(890479),u=n(821342),c=n(390843),p=n(675973),m=n(15667),g=n(448505),h=n(7872),y=n(620427),_=n(990103),f=n(169053),x=n(438235),k=n(785893);function P(e){return(0,t.useEffect)(()=>{(0,i.Z)("ProductDetailPageContainer","/app/common/react/components/ProductDetailPage/ProductDetailPageContainer.tsx")},[]),(0,k.jsx)(d.Z,{id:"CloseupContainerCommon-2",children:(0,k.jsx)(s.l6,{...e,closeupComponentToRender:"ProductDetailPage"})})}function S(e){(0,t.useEffect)(()=>{(0,i.Z)("ProductDetailPageContainer","/app/common/react/components/ProductDetailPage/ProductDetailPageContainer.tsx")},[]);let a=(0,l.I0)(),n=(0,u.Z)(),s=(0,x.Z)(),S=(0,c.aX)(),v=(0,r.TH)(),b=(0,f.S6)()(s.id||""),C=(0,y.Z)((v?.state||{}).trackingParams,b?.tracking_params),I={...e,navigate:(0,r.s0)(),location:v,clientTrackingParams:C,params:s,requestContext:(0,m.B)(),searchPinCloseupViewed:(e,n)=>a((0,_.Y4)(e,n)),viewer:n},{checkExperiment:w}=(0,p.Z)();return(0,k.jsx)(o.Z,{orbacSubjectId:(0,h.lJ)(n,(0,g.Z)()),pinId:s.id||"",children:({pinResource:e})=>(0,k.jsx)(d.Z,{id:"ProductDetailPageContainer",children:(0,t.createElement)(P,{...I,key:s.id,checkExperiment:w,clientTrackingParams:C,currentHistoryStack:S,pinResource:e})})})}},228121:function(e,a,n){n.d(a,{Z:()=>g});var i=n(281098),t=n(667294),l=n(20256),r=n(149739),s=n(19585),o=n(302148),d=n(473728),u=n(785893);function c({minutes:e}){let a=(0,s.ZP)(),n=e%60,i=Math.floor(e/60),t=n>0?(0,o.nk)(a._('{{ mins }}min', 'closeup.storyPin.basicsLayout.cookTimeUnit', 'Minutes label indicating the cooking time of this Story Pin'),{mins:n}).join(""):"",d=i>0?(0,o.nk)(a._('{{ hours }}hr', 'closeup.storyPin.basicsLayout.cookTimeUnit', 'Hours label indicating the cooking time of this Story Pin'),{hours:i}).join(""):"";return(0,u.jsx)(l.xu,{display:"inlineBlock",marginEnd:1,children:(0,u.jsx)(l.xv,{inline:!0,size:r.n,children:(0,o.nk)(a._('{{ hoursText }} {{ minsText }}', 'closeup.storyPin.basicsLayout.cookTime', 'Combined label for story pin cooktime (ex: "1hr 13min")'),{hoursText:d,minsText:t})})})}function p({servingSize:e}){let a=(0,s.ZP)(),n=(0,d.Z)(a.ngettext('{{servingSize}} serving', '{{servingSize}} servings', e, 'number of servings for a recipe', 'number of servings for a recipe'),{servingSize:e});return(0,u.jsx)(l.xu,{display:"inlineBlock",marginEnd:1,children:(0,u.jsx)(l.xv,{inline:!0,size:r.n,children:(0,o.nk)(a._('{{ servingText }}', 'closeup.storyPin.basicsLayout.servings', 'Combined label for story pin servings (ex: "Servings: 10 servings")'),{servingText:n})})})}function m({difficulty:e}){let a=(0,s.ZP)(),n={1:a._('Easy', 'closeup.storyPin.basicsLayout.difficulty', 'Easy difficulty level'),2:a._('Intermediate', 'closeup.storyPin.basicsLayout.difficulty', 'Intermediate difficulty level'),3:a._('Expert', 'closeup.storyPin.basicsLayout.difficulty', 'Expert difficulty level')},i=e&&e in n?n[e]:null;if(!i)return null;let t=a._('Difficulty:', 'closeup.storyPin.basicsLayout.difficultyLevelLabel', 'Label indicating the difficulty level of this Story Pin');return(0,u.jsx)(l.xu,{display:"inlineBlock",marginEnd:1,children:(0,u.jsx)(l.xv,{inline:!0,size:r.n,children:(0,o.nk)(a._('{{ label }} {{ difficultyLevel }}', 'closeup.storyPin.basicsLayout.difficulty', 'Combined label for story pin difficulty (ex: "Difficulty: Intermediate")'),{label:t,difficultyLevel:i})})})}function g({keyValueBlocks:e,hasMetadataTemplateType:a}){if((0,t.useEffect)(()=>{(0,i.Z)("BasicsCategoriesMetadata","/app/common/react/components/closeup/CloseupBody/BasicsCategoriesMetadata.tsx")},[]),!a)return null;let n=e||[];return(0,u.jsx)(l.xu,{"data-test-id":"categories-metadata",children:(n||[]).map((e,a)=>{let i=`kv-${a}`,s=function(e){let a=e.category_type??e.categoryType,{value:n}=e;if(2===a)return(0,u.jsx)(m,{difficulty:n});let i=parseInt(n,10);return 1===a?(0,u.jsx)(p,{servingSize:i}):0===a&&i?(0,u.jsx)(c,{minutes:i}):null}(e);return s?a<n.length-1?(0,u.jsxs)(t.Fragment,{children:[s,(0,u.jsx)(l.xu,{display:"inlineBlock",marginEnd:1,children:(0,u.jsx)(l.xv,{inline:!0,size:r.n,children:"  "})})]},i):(0,u.jsx)(t.Fragment,{children:s},i):null}).filter(e=>null!=e)})}},364674:function(e,a,n){n.d(a,{Z:()=>d});var i=n(281098),t=n(667294),l=n(20256),r=n(19585),s=n(618336),o=n(785893);function d({digitalMediaType:e,isMobile:a=!1,isViewedByOwnerEmployeeOrAgency:n=!1}){(0,t.useEffect)(()=>{(0,i.Z)("AICloseupLabel","/app/common/react/components/closeup/CloseupBody/CloseupImage/AICloseupLabel.tsx")},[]);let d=(0,r.ZP)(),u={[s.s.TRAINED_ALGORITHMIC_MEDIA]:d._('AI modified', 'closeup.aIModifiedLabel.label', 'Label for AI Modified images'),[s.s.COMPOSITE_WITH_TRAINED_ALGORITHMIC_MEDIA]:d._('AI modified', 'closeup.aIModifiedLabel.label', 'Label for AI Modified images'),[s.s.DETECTED_TRAINED_ALGORITHMIC_MEDIA]:d._('AI modified', 'closeup.aIModifiedLabel.label', 'Label for AI Modified images')},c=()=>(0,o.jsx)(l.xu,{alignItems:"center",color:"transparentDarkGray","data-test-id":"ai-generated-label",display:"flex",height:a?48:44,justifyContent:"center",paddingX:4,rounding:4,children:(0,o.jsx)(l.xv,{color:"light",lineClamp:1,size:"300",children:u[e]})});return n?(0,o.jsx)(l.u,{idealDirection:"up",text:d._('This label won\u2019t appear on Pins in a promoted state. Your paid ads will include the disclosure on the "Why am I seeing this ad" page.', 'AICloseupLabel.tooltip.text', 'Tooltip text for AICloseupLabel'),children:c()}):c()}},520585:function(e,a,n){n.d(a,{Z:()=>C});var i,t,l=n(281098),r=n(667294);n(167912);var s=n(20256),o=n(617778),d=n(28427),u=n(19585),c=n(453179),p=n(774429),m=n(603316),g=n(785893);let h=(void 0!==i||(i=n(362250)).hash&&"f8426bd32c5531bed724a11f1f7d3b94"!==i.hash&&console.error("The definition of 'DomainLinkButton_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function y({clientTrackingParams:e,domain:a,link:n,pinKey:i,trafficSource:t,size:y="lg",onClick:_,viewType:f=3}){let x;(0,r.useEffect)(()=>{(0,l.Z)("DomainLinkButton","/app/common/react/components/closeup/CloseupBody/CloseupImage/DomainLinkButton.tsx")},[]);let k=(0,u.ZP)(),P=(0,d.Z)(h,i),[S,v]=(0,r.useState)(!1),b=(0,r.useCallback)(()=>v(e=>!e),[]),C=(0,p.Z)({clickthroughType:"middleClick",location:"closeup.domainLinkButton"}),I=(0,r.useCallback)(()=>{(0,m.nP)(`web.closeup.media_viewer_stats.clickthrough.clicked_from.${675===f?"media_viewer":"closeup"}`)},[f]);return n.startsWith("https://i.pinimg.com")?(0,g.jsx)(r.Fragment,{}):(x=P.showRecipeCta?k._('See recipe', 'closeup.defaultMetadata.visitButton', 'Button to visit recipe link on Pin'):a?k._('Visit site', 'closeup.pinActionDropDown.visitSite', 'Button allowing user to clickthrough Pin'):k._('Learn more', 'closeup.image.domainLinkButton', 'Text indicating where clickthrough will navigate to'),(0,g.jsx)(o.Z,{clientTrackingParams:e,hovered:S,pinKey:P,trafficSource:t,viewType:f,children:(0,g.jsx)(s.ZP,{_onAuxClick:({event:e})=>{(0,c.UE)(e)&&(C(),e.preventDefault(),e.stopPropagation(),I(),_({event:e}))},_onMouseEnter:b,_onMouseLeave:b,accessibilityLabel:x,color:"semiTransparentWhite",dataTestId:"visit-button",href:n,iconStart:"arrow-up-right",onClick:({event:e,dangerouslyDisableOnNavigation:a})=>{I(),a(),_({event:e})},rel:"nofollow",size:y,text:x})}))}var _=n(980787),f=n(355940),x=n(611282),k=n(899678),P=n(675973),S=n(821806),v=n(601686);let b=(void 0!==t||(t=n(128948)).hash&&"4c99d4ae49479ef8ed3083d59d4343c1"!==t.hash&&console.error("The definition of 'DomainLinkButtonWrapper_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),t);function C({auxData:e,domain:a,link:n,onClick:i,pinKey:t,trafficSource:s,viewType:o}){(0,r.useEffect)(()=>{(0,l.Z)("DomainLinkButtonWrapper","/app/common/react/components/closeup/CloseupBody/CloseupImage/DomainLinkButtonWrapper.tsx")},[]);let u=(0,d.Z)(b,t),{logContextEvent:c}=(0,_.u)(),{checkExperiment:p}=(0,P.Z)(),m=u.isInstagramApi&&u.nativeCreator?.websiteUrl&&u.nativeCreator?.isPrimaryWebsiteVerified&&u.nativeCreator?.isDirectToSiteAllowed,h=m&&p("dweb_closeup_links").anyEnabled?u.nativeCreator?.websiteUrl:n,{clientTrackingParams:C}=(0,v.x4)(),I=(0,x.Z)({href:{pathname:h,state:{trackingParams:C}},target:"blank",clientTrackingParams:C,externalData:{auxData:e,pin:u&&{attributionSourceId:u.attributionSourceId,board:u.board&&{url:u.board.url},campaignId:u.campaignId,entityId:u.entityId,isDownstreamPromotion:u.isDownstreamPromotion,isPromoted:u.isPromoted,pinner:u.pinner&&{username:u.pinner.username},pinPromotionId:u.pinPromotionId,promoter:u.promoter&&{entityId:u.promoter.entityId},storyPinDataId:u.storyPinDataId,trackingParams:u.trackingParams,advertiserId:u.advertiserId}}});return(0,g.jsx)(f.Z,{name:"SafeSuspense_DomainLinkButtonWrapper_DomainLinkButton",children:(0,g.jsx)(S.Z,{children:(0,g.jsx)(k.Z,{overrideDataTestId:"image-link",children:(0,g.jsx)(y,{clientTrackingParams:C,domain:a,link:h,onClick:({event:e})=>{i(),c({event_type:102,element:162,component:4,aux_data:{is_claimed_domain:m}}),I({event:e})},pinKey:u,trafficSource:s,viewType:o})})})})}},935410:function(e,a,n){n.r(a),n.d(a,{default:()=>I});var i=n(281098),t=n(667294),l=n(262508),r=n(303151),s=n(20256),o=n(369416),d=n(785893);let u="animated-text";function c({duration:e,show:a,text:n}){(0,t.useEffect)(()=>{(0,i.Z)("CloseupButtonText","/app/common/react/components/closeup/CloseupBody/CloseupImage/ImageOverlay/CloseupButtonText.tsx")},[]);let r=(0,t.useRef)(null),c=`
    .${u}-enter {
      opacity: 0;
    }
    .${u}-enter-active {
      opacity: 1;
      transition: opacity ${e}ms cubic-bezier(1,0,1,0);
    }
    .${u}-enter-done {
      opacity: 1;
    }
    .${u}-exit {
      opacity: 1;
    }
    .${u}-exit-active {
      opacity: 0;
      transition: opacity ${e}ms cubic-bezier(0,1,0,1);
    }
    .${u}-exit-done {
      opacity: 0;
    }
  `;return(0,d.jsxs)(t.Fragment,{children:[(0,d.jsx)(o.Z,{unsafeCSS:c}),(0,d.jsx)(l.Z,{appear:!0,classNames:u,in:a,nodeRef:r,timeout:e,children:(0,d.jsx)(s.xu,{ref:r,opacity:0,children:(0,d.jsx)(s.mg,{size:"md",children:n})})})]})}var p=n(874072),m=n(111330),g=n(121836),h=n(521009),y=n(667835),_=n(702849),f=n(675973),x=n(15667),k=n(753143),P=n(238589),S=n(647709),v=n(341742);let b="animated-button-container",C=`
  .${b}-enter  {
    width: 0px;
  }
  .${b}-enter-active {
    width: 100% !important;
    transition: width 200ms ease-in;
  }
  .${b}-enter-done {
    width: 100% !important;
  }
  .${b}-exit {
    width: 100% !important;
  }
  .${b}-exit-active {
    width: 0px !important;
    transition: width 200ms ease-in;
  }
  .${b}-exit-done {
    width: 0px;
  }
`;function I({animateOnMount:e,animationDelayOnMount:a=1e3,leaveOnDurationOnMount:n=3e3,dataTestId:u,icon:I,imageSignature:w,onMouseDown:T,onTap:A,variant:F,ref:E}){(0,t.useEffect)(()=>{(0,i.Z)("AnimatedCloseupButton","/app/common/react/components/closeup/CloseupBody/CloseupImage/ImageOverlay/AnimatedCloseupButton.tsx")},[]);let j=(0,h.Z)(),{isRTL:L}=(0,x.B)(),R=(0,y.vs)(),K=(0,S.HG)(),Z=(0,k.M0)(),D=(0,P.Nl)(),{checkExperiment:M}=(0,f.Z)(),B=(0,t.useRef)(null),[O,N]=(0,t.useState)(!1),[z,V]=(0,t.useState)(!1),U=(0,p.Z)({variant:F}),W=(0,t.useMemo)(()=>R&&K?"rgba(17, 17, 17, 0.9)":O?_.Xq:_.XF,[R,K,O]),G="visual-search"===F,H=D.getItem(g.Ml)||0,{animationSeenCount:$,lastAnimationTimestamp:Y}=Z.getItem(m.Yn)||{animationSeenCount:0,lastAnimationTimestamp:0},X=(0,r.Z)(new Date(Y),new Date);return(0,v.Z)(()=>{if(G&&!X&&Z.setItem(m.Yn,{animationSeenCount:0,lastAnimationTimestamp:Y}),!e||G&&![0,1].includes(H)&&M("sg_dweb_improved_share_animation_on_closeup").anyEnabled)return;let i=setTimeout(()=>{V(!0),G&&Z.setItem(m.Yn,{animationSeenCount:$+1,lastAnimationTimestamp:Date.now()});let e=setTimeout(()=>{V(!1)},n);return()=>clearTimeout(e)},a);return()=>clearTimeout(i)}),(0,v.Z)(()=>{j({event_type:120,component:128,element:"view-larger"===F?15864:234,view_type:3,aux_data:{image_signature:w}})}),(0,d.jsxs)(s.iP,{ref:E,accessibilityLabel:U,onMouseDown:T,onMouseEnter:()=>N(!0),onMouseLeave:()=>N(!1),onTap:A,rounding:"circle",children:[(0,d.jsx)(o.Z,{unsafeCSS:C}),(0,d.jsx)(s.kC,{alignItems:"stretch",justifyContent:"end",children:(0,d.jsx)(l.Z,{appear:!0,classNames:b,in:O||z,nodeRef:B,timeout:200,children:(0,d.jsxs)(s.xu,{ref:B,alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:W}},"data-test-id":u,display:"flex",justifyContent:"end",minHeight:48,minWidth:48,position:"relative",rounding:4,width:0,children:[(0,d.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap"}},marginEnd:2,marginStart:3,overflow:"hidden",children:(0,d.jsx)(c,{duration:200,show:O||z,text:U})}),(0,d.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{paddingLeft:L?"12px":0,paddingRight:L?0:"12px"}},children:(0,d.jsx)(s.JO,{accessibilityLabel:U,color:"default",icon:I,size:24})})]})})})]})}},874072:function(e,a,n){n.d(a,{Z:()=>t});var i=n(19585);function t({variant:e}){let a=(0,i.ZP)();return"view-larger"===e?a._('View larger', 'closeup.image.mediaViewerButton', 'clicking on this button will open a full screen view of the Pin image'):a._('Explore', 'closeup.explore.icon', 'clicking on this text will open a visual search feed')}},516202:function(e,a,n){n.d(a,{Z:()=>o,p:()=>s}),n(167912);var i,t=n(501392),l=n(28427);let r=(void 0!==i||(i=n(655327)).hash&&"759d6577be9e10b82394f48ee87daf24"!==i.hash&&console.error("The definition of 'useBuildCloseupImageOverlayProps_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function s(e,a,n,i,t){return!a&&!!e&&e.includes("tag")&&!n&&!t||i||!1}function o({carouselInfo:e,disablePinTagButton:a,domain:n,hasMetTrustAndSafetyCheck:i,isCollageEnabled:o,isEmployee:d,isORBACProfileManager:u,isScenePin:c,navLink:p,pinKey:m,showProductDetailPage:g}){let h=(0,l.Z)(r,m),{isEnabled:y}=(0,t.Z)({dangerouslySkipActivation:!1}),{access:_,storyPinDataId:f,isPromoted:x}=h,k=!1,P=!1;c||(k=!(P=!!p&&!o)&&!!n&&!!h.link&&!h.link.startsWith("https://i.pinimg.com")&&!(g&&e)&&!o);let S=i&&!u&&!x;return{showCarouselControls:!!e&&!y,showCloseupShopDomainLinkButton:c,showDebugSignalsFeedbackButton:!!d,showDomainLink:k,showDomainLinkButton:P=P&&!h?.isGoLinkless,showFlashlightButton:S,showPinTagButton:s(_,f,a,u,o)}}},688379:function(e,a,n){n.d(a,{Z:()=>f});var i,t=n(281098),l=n(667294);n(167912);var r=n(20256),s=n(471998),o=n(937805),d=n(736802),u=n(149739),c=n(478086),p=n(355940),m=n(28427),g=n(601686),h=n(785893);let y=(void 0!==i||(i=n(817272)).hash&&"7f5ee41f639d28bd1418cd137ed8b8a0"!==i.hash&&console.error("The definition of 'DescriptionBrokenByLineBreaks_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function _({description:e}){let{closeupWithinMasonryEnabled:a,peekCloseupEnabled:n}=(0,g.x4)(),{mWebCloseupRedesignEnabled:i}=(0,o.Z)();return(0,h.jsx)(p.Z,{name:"SimpleDescriptionWithHashtags",children:(0,d.Z)({closeupWithinMasonryEnabled:a,peekCloseupEnabled:n,mWebCloseupRedesignEnabled:i,text:e})})}function f({description:e,enableAdditionalNoteSpace:a=!1,pinKey:n}){(0,l.useEffect)(()=>{(0,t.Z)("DescriptionBrokenByLineBreaks","/app/common/react/components/closeup/CloseupBody/DescriptionBrokenByLineBreaks.tsx")},[]);let i=(0,m.Z)(y,n),{userMentionTags:o,descriptionLinks:d}=i,{hyperlinkKeywordsEnabled:p}=(0,s.Z)(i),g=e.split(/\n/)||[];return(0,h.jsx)(l.Fragment,{children:g.map((e,n)=>{let t=e.length>0?`${e.replace(/[^a-zA-Z0-9]/g,"").slice(0,15)}-${e.length}`:"empty-line-0",s=`desc-line-${t}-${Math.random().toString(36).slice(2,8)}`;if(""===e&&a)return(0,h.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{height:"1em"}}},s);let m=0;for(let e=0;e<n;e+=1){let a=g[e];void 0!==a&&(m+=a.length+1)}let y=m+e.length,{userMentionTags:f,descriptionLinks:x}=(({lineStartPosition:e,lineEndPosition:a,userMentionTags:n,descriptionLinks:i})=>({userMentionTags:n?.map(n=>n&&"number"==typeof n.offset&&n.offset>=e&&n.offset<a?{...n,originalOffset:n.offset,offset:n.offset-e}:null).filter(e=>null!==e)||[],descriptionLinks:i?.map(n=>n&&"number"==typeof n.offset&&n.offset>=e&&n.offset<a?{...n,originalOffset:n.offset,offset:n.offset-e}:null).filter(e=>null!==e)||[]}))({lineStartPosition:m,lineEndPosition:y,userMentionTags:o,descriptionLinks:p?d:void 0});return f.length>0||x.length>0?(0,h.jsxs)(l.Fragment,{children:[(0,h.jsx)(r.xu,{children:(0,h.jsx)(c.Z,{description:e.replace(/\s+/g," "),descriptionLinks:x,mentionLinkColor:"link",pinKey:i,shouldAdjustOffset:!1,shouldMakeHashtagLinksFromText:!0,textSize:u.n,userMentionTags:f})}),(0,h.jsx)("br",{})]},s):(0,h.jsxs)(l.Fragment,{children:[(0,h.jsx)(_,{description:e}),(0,h.jsx)("br",{})]},s)})})}},96413:function(e,a,n){n.d(a,{Z:()=>c});var i=n(281098),t=n(667294),l=n(20256),r=n(980787),s=n(982166),o=n(19585),d=n(369416),u=n(785893);function c({handlePause:e,handlePlay:a,musicAttributions:n,shouldMute:c,showEndCard:p}){(0,t.useEffect)(()=>{(0,i.Z)("MusicAttribution","/app/common/react/components/closeup/CloseupBody/VisualContent/MusicAttribution.tsx")},[]);let m=(0,o.ZP)(),{logContextEvent:g}=(0,r.u)(),[h,y]=(0,t.useState)(!1);if((0,t.useEffect)(()=>{!p&&(n?.length||c)&&g({event_type:c?14600:14601,view_type:3,view_parameter:140})},[g,n,c,p]),p||!n?.length&&!c)return null;let _=()=>{a&&a(),y(!1)},f="";if(n?.length===1){let{artist:e="",title:a=""}=n[0];f=e&&a?`${e} - ${a}`:""}let x=(n?.length||0)>=2?(0,u.jsx)(l.xu,{children:(0,u.jsx)(l.iP,{fullHeight:!0,fullWidth:!0,onTap:()=>{e&&e(),y(!0)},children:(0,u.jsxs)(l.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,u.jsx)(l.xu,{marginEnd:2,children:(0,u.jsx)(l.JO,{accessibilityLabel:m._('Music icon', 'web.closeup.musicicon', 'Artist and song title for Pin music attribution'),color:"inverse",icon:c?"music-off":"music-on",inline:!0,size:12})}),(0,u.jsx)(l.xv,{color:"inverse",inline:!0,overflow:"noWrap",size:"100",children:m._('View the playlist', 'web.closeup.musicAttibutionModal.entryPoint', 'Entry point for playlist modal')})]})})}):(0,u.jsxs)(t.Fragment,{children:[(0,u.jsx)(l.JO,{accessibilityLabel:m._('Music icon', 'web.pin.closeup.musicicon', 'Music icon for Pin music attribution'),color:"inverse",icon:c?"music-off":"music-on",inline:!0,size:12}),(0,u.jsx)(l.xu,{marginStart:2,overflow:"hidden",children:(0,u.jsxs)("span",{className:f.length>=50?"marquee":void 0,style:{display:"inline-block",maxWidth:f.length>=50?"260px":void 0},children:[(0,u.jsx)(l.xv,{color:"inverse",inline:!0,overflow:"noWrap",size:"100",children:f}),(0,u.jsx)(d.Z,{unsafeCSS:`
                  .marquee {
                   animation: marquee 10s linear infinite;
                   animation-delay: 2s;
                  }

                  .marquee:hover {
                      animation-play-state: paused;
                  }


                 @keyframes marquee {
                   0% {
                     transform: translateX(0%);
                    }
                  50% {
                    transform: translateX(-100%);
                  }
                  100% {
                    transform: translateX(0%);
                  }
              }
            `})]})})]});return(0,u.jsxs)(t.Fragment,{children:[c?(0,u.jsx)(t.Fragment,{children:(0,u.jsxs)(l.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,u.jsx)(l.xu,{marginEnd:2,children:(0,u.jsx)(l.JO,{accessibilityLabel:m._('Music icon', 'web.closeup.musicMutedIcon', 'Music muted icon for Pin music attribution'),color:"inverse",icon:"music-off",inline:!0,size:12})}),(0,u.jsx)(l.xv,{color:"inverse",inline:!0,overflow:"noWrap",size:"100",children:m._('Audio not available in your location', 'web.closeup.musicAttribution', 'Informational message to tell user audio is not available in their location')})]})}):x,h&&(0,u.jsx)(s.ZP,{accessibilityModalLabel:m._('Artist and song title for this Pin', 'web.closeup.musicAttibutionModal', 'Artist and song title for Pin music attribution'),heading:(0,u.jsxs)(l.kC,{justifyContent:"between",children:[(0,u.jsx)(l.X6,{size:"600",children:m._('Playlist for this video', 'web.closeup.musicAttibutionModal.heading', 'Title for music attribution modal')}),(0,u.jsx)(l.hU,{accessibilityLabel:m._('Close modal button', 'web.closeup.musicAttibutionModal.closeButton', 'Close modal button for music attribution modal'),bgColor:"white",icon:"cancel",iconColor:"darkGray",onClick:_,size:"sm"})]}),onDismiss:_,children:(0,u.jsx)(l.xu,{marginBottom:5,paddingX:5,paddingY:1,children:n?.map(({isrc:e,thumbnail_image_url:a,title:n,artist:i},t)=>(0,u.jsxs)(l.xu,{display:"flex",padding:1,children:[a&&(0,u.jsx)(l.xu,{color:"darkWash",height:60,rounding:7,width:60,children:(0,u.jsx)(l.Ee,{alt:m._('Image of album art', 'web.closeup.musicAttibutionModal.albumArt', 'Alt text for image of album art for associated song'),color:"darkWash",naturalHeight:1,naturalWidth:1,src:a})}),(0,u.jsxs)(l.xu,{direction:"column",display:"flex",justifyContent:"center",paddingX:2,children:[(0,u.jsx)(l.xv,{weight:"bold",children:n??""}),(0,u.jsx)(l.xv,{size:"100",children:i??""})]})]},e||`${t}`))})})]})}},502447:function(e,a,n){n.d(a,{Z:()=>o}),n(167912);var i,t=n(782881),l=n(28427),r=n(7872);let s=(void 0!==i||(i=n(881010)).hash&&"120c47eff2cf4911de716b514608718f"!==i.hash&&console.error("The definition of 'useIsBoardOwnerOrCollaborator_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function o({pinKey:e,orbacActingAs:a,viewer:n}){let i=(0,l.Z)(s,e),o=!!i.pinner?.entityId&&(0,r.D3)(n,i.pinner.entityId,a),d=!!(i.board?.collaboratedByMe||i.board?.owner?.entityId)&&(0,t.Z)(i.board.collaboratedByMe,i.board.owner?.entityId,n);return o||d}},96733:function(e,a,n){n.d(a,{ZP:()=>ry,l6:()=>rg});var i,t,l,r,s,o,d,u,c,p,m,g,h,y,_,f,x=n(281098),k=n(667294),P=n(581722),S=n(825332),v=n(130845),b=n(873707);let C=Object.freeze(["JP"]);var I=n(20256),w=n(414772);n(167912);var T=n(934645),A=n(28427),F=n(351607),E=n(431338),j=n(785893);let L=(void 0!==i||(i=n(934191)).hash&&"9fe338bb0275ffff2818b274fce014af"!==i.hash&&console.error("The definition of 'CloseupMainPinImpression_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);var R=n(228121),K=n(688379),Z=n(728371),D=n(878709),M=n(149739),B=n(478086),O=n(19585),N=n(302148);let z=e=>{if(!e)return null;let{categorizedIngredients:a}=e.recipe;return a&&a.length>0?{...e,categorizedIngredients:a}:null};var V=n(643875),U=n(665827),W=n(176465),G=n(594414),H=n(706563),$=n(63749),Y=n(324307),X=n(601686),q=n(785195),J=n(846051),Q=n(213967),ee=n(872353);let ea=(void 0!==t||(t=n(957661)).hash&&"c6b0de206743312221bd0e0b89d2f0aa"!==t.hash&&console.error("The definition of 'CardSourceDescriptionText_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),t),en=function(e){let{onUpdate:a,showMore:n,pinKey:i,isArticle:t,showSponsorshipAttribution:l,hasAffiliateLink:r,hasAffiliateProducts:s,instagramPostLink:o,onToggle:d}=e;(0,k.useEffect)(()=>{a?.()},[a]),(0,k.useEffect)(()=>{a?.()},[n,a]);let u=(0,O.ZP)(),c=(0,A.Z)(ea,i),{closeupWithinMasonryEnabled:p,peekCloseupEnabled:m}=(0,X.x4)(),{carouselInfo:g}=(0,D.G)(),{closeupUnifiedDescription:h,userMentionTags:y,richMetadata:_,storyPinData:f}=c,x=(h||"").trim(),P=g?.carouselData;if(P){let e=P.carousel_slots??[],a=P.index??0;e[a]&&e[a].details&&(x=e[a].details)}let S=_?.tutorial?.description,v=c.pinAdditionalNote||"",b=`${x}

${v}`;b=x?b:v;let C=(x=v?b:x)&&S&&S.trim()===x,w=x?x.replace(/\s+/g," "):"",T=w=!n&&w&&w.length?(0,Y.ZP)(w,t?195:200):w;w&&y&&(T=(0,j.jsx)(B.Z,{description:w,mentionLinkColor:"shopping",pinKey:c,shouldAdjustOffset:!0}));let F=x&&x.length>(t?195:200),E=null,L=z((0,V.Z)((0,U.Z)((0,W.Z)(e)))),R=f?.metadata?.basics;if(R){let e,{keyValueBlocks:a,listBlocks:n}=R;c&&c.domain&&c.link&&(e={domain:c.domain,url:c.link});let i=[];e?.domain&&(i=[...i,e.domain]);let t=(a||[]).map(e=>(0,J.Z)(e.categoryType,e.value,u)).filter(e=>""!==e);t.length>0&&(i=[...i,...t]),(n??[]).forEach(({heading:e,blocks:a})=>{e&&(i=[...i,e]),(a??[]).forEach(e=>{"StoryPinListBlock"===e.__typename&&e.blocks&&(e.blocks??[]).forEach(e=>{"text"in e&&e.text&&(i=[...i,e.text])})})}),E=(0,Q.Z)(i)}else if(L){let{prepTime:e,cookTime:a,totalTime:n,servingSummary:i,serves:t}=L.recipe,l=n||a||e;if(a&&e){let n=a.h||0,i=a.m||0;l={h:n+(e.h||0),m:i+(e.m||0)}}let r=l?(0,$.Z)((0,H.X)(l),u):null,s=c.richMetadata?.recipe?.aggregateRating?.reviewCount;i&&(E=t?(0,j.jsxs)(I.xv,{inline:!0,size:M.n,children:[t," ",u._('servings', 'closeup.CardSourceDescriptionText.servesLabel', 'Label for servings')]},"recipe"):(0,j.jsx)(I.xv,{inline:!0,size:"200",children:i},"recipe")),r&&(E=E?(0,N.nk)("{{ timeLabel }}  {{ description }}",{timeLabel:r,description:E}):r),"number"==typeof s&&s>0&&(E=E?(0,N.nk)(u._('{{ reviewCount }} reviews \xB7 {{ description }}', 'number of reviews on a recipe and the description', 'number of reviews on a recipe and the description'),{reviewCount:s,description:E}):s);let o=c.richMetadata?.recipe?.aggregateRating?.ratingValue,d=Number(o);Number.isNaN(d)&&(d=0),d>=.25&&(E=E?(0,N.nk)("{{ ratings }} {{ description }}",{ratings:(0,j.jsx)(G.Z,{max_rating:c.richMetadata?.recipe?.aggregateRating?.bestRating,rating:o},o),description:E}):(0,j.jsx)(G.Z,{max_rating:c.richMetadata?.recipe?.aggregateRating?.bestRating,rating:o},o))}if(!w||C)return null;let en=4;return p?en=0:m&&(en=2),x?(0,j.jsxs)(I.xu,{marginBottom:p?0:l&&(r||s)?2:4,marginTop:en,children:[(0,j.jsxs)(Z.Z,{descriptionDir:(0,ee.j)(x),children:[(0,j.jsx)(K.Z,{description:x||"",enableAdditionalNoteSpace:""!==v,pinKey:c}),o]}),l&&(0,j.jsx)(I.xu,{marginTop:1,children:(0,j.jsx)(q.Z,{hasAffiliateLink:r,hasAffiliateProducts:s})})]}):(0,j.jsxs)("span",{children:[(0,j.jsx)(I.xv,{color:p?"subtle":void 0,inline:!0,size:"200",children:(0,j.jsx)(I.xu,{dangerouslySetInlineStyle:{__style:{display:"inline"}},"data-test-id":"description",children:E?(0,N.nk)("{{ recipeInfo }}  {{ description }}",{recipeInfo:E,description:T}):T})}),F&&!n&&(0,j.jsx)(I.xu,{"data-test-id":"more-button",display:"inlineBlock",marginStart:1,children:(0,j.jsx)(I.iP,{fullWidth:!1,onTap:d,children:(0,j.jsx)(I.xv,{inline:!0,size:"200",weight:"bold",children:u._('More', ' - ', ' -- ')})})})]})},ei=(e,a)=>e.length>300?e:e.length+a.length+3>300?`${e} ${a}...`:`${e} ${a}`,et=(void 0!==l||(l=n(354418)).hash&&"d6d83b429981e4bc762e3872608eedbd"!==l.hash&&console.error("The definition of 'Description_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l);function el(e){(0,k.useEffect)(()=>{(0,x.Z)("Description","/app/common/react/components/closeup/Description.tsx")},[]);let[a,n]=(0,k.useState)(!1),{pinKey:i,onUpdate:t,showSponsorshipAttribution:l,hasAffiliateLink:r,hasAffiliateProducts:s,instagramPostLink:o}=e,d=(0,A.Z)(et,i);if(!d.entityId)return null;let u=!!d.aggregatedPinData,c=!!d.description,p=d.pinAdditionalNote||"",m=!!d.richMetadata?.recipe,g=!!d.richMetadata?.article,h=d.richMetadata?.article?.description,y=!!d.richMetadata?.tutorial,_=g&&!m&&!y;return(0,j.jsx)(k.Fragment,{children:(0,j.jsx)("span",{className:"richPinInformation","data-test-id":"richPinInformation-description",children:c||p||u?(0,j.jsx)(en,{hasAffiliateLink:r,hasAffiliateProducts:s,instagramPostLink:o,isArticle:_,onToggle:()=>n(!0),onUpdate:t,pinKey:d,showMore:a,showSponsorshipAttribution:l}):_&&h&&(0,j.jsx)(I.xu,{marginBottom:3,children:(0,j.jsx)(I.xv,{children:h.split(" ").map(e=>e.trim()).reduce(ei,"")})})})})}var er=n(758516);function es({mediaAttribution:{author:e,authorUrl:a,ccUrl:n,link:i,mediaType:t,providerName:l}}){(0,k.useEffect)(()=>{(0,x.Z)("MaybeMediaAttribution","/app/common/react/components/closeup/Description/MaybeMediaAttribution.tsx")},[]);let r=(0,O.ZP)(),s=!!(l&&i);if(!e&&!s)return null;let o=s?r._('from {{ provider }}', 'closeup.attribution.imageWithProvider', 'Image source attribution withprovider but no author on pin closeup'):null;return e&&(o="VIDEO"===t?s?r._('Video by {{ author }} on {{ provider }}', 'closeup.attribution.videoWithAuthorProvider', 'Video source attribution on pin closeup'):r._('Video by {{ author }}', 'closeup.attribution.videoWithAuthor', 'Video source attribution on pin closeup when there is an author but no provider'):s?r._('Photo by {{ author }} on {{ provider }}', 'closeup.attribution.photoWithAuthorProvider', 'Photo source attribution on pin closeup'):r._('Photo by {{ author }}', 'closeup.attribution.photoWithAuthor', 'Photo source attribution on pin closeup when there is an author but no providers')),(0,j.jsx)(I.xu,{"data-test-id":"media-attribution",display:"inlineBlock",children:(0,j.jsxs)(I.xv,{color:"default",size:"200",children:[!!o&&(0,j.jsx)(er.Z,{text:(0,N.nk)(o,{author:(0,j.jsx)(I.rU,{display:"inlineBlock",href:a??"",rel:"nofollow",underline:"hover",children:(0,j.jsx)(I.xv,{size:"200",weight:"bold",children:e})},"author"),provider:s?(0,j.jsx)(I.xu,{display:"inlineBlock",marginEnd:1,children:(0,j.jsx)(I.rU,{display:"inlineBlock",href:i??"",rel:"nofollow",underline:"always",children:l},"provider")}):null})}),n&&(0,j.jsx)(I.rU,{href:n,rel:"nofollow",children:r._('(cc)', 'creative commons link text', 'creative commons link text')})]})})}function eo({attribution:{authorName:e,authorUrl:a,ccUrl:n,providerName:i,url:t},embed:l}){(0,k.useEffect)(()=>{(0,x.Z)("MaybePhotoAttribution","/app/common/react/components/closeup/Description/MaybePhotoAttribution.tsx")},[]);let r=(0,O.ZP)(),s=!!(i&&t);if(!e&&!s)return null;let o=null;return s?o=e?l?.src&&"gif"!==l.type&&"pinstory"!==l.subtype?r._('Video by {{ author }} on {{ provider }}', 'closeup.attribution.videoWithAuthorProvider', 'Video source attribution on pin closeup'):r._('Photo by {{ author }} on {{ provider }}', 'closeup.attribution.photoWithAuthorProvider', 'Photo source attribution on pin closeup'):r._('from {{ provider }}', 'closeup.attribution.imageWithProvider', 'Image source attribution withprovider but no author on pin closeup'):e&&(o=l?.src&&"gif"!==l.type&&"pinstory"!==l.subtype?r._('Video by {{ author }}', 'closeup.attribution.videoWithAuthor', 'Video source attribution on pin closeup when there is an author but no provider'):r._('Photo by {{ author }}', 'closeup.attribution.photoWithAuthor', 'Photo source attribution on pin closeup when there is an author but no providers')),(0,j.jsx)(I.xu,{"data-test-id":"photo-attribution",display:"inlineBlock",children:(0,j.jsxs)(I.xv,{color:"default",size:"200",children:[!!o&&(0,j.jsx)(er.Z,{text:(0,N.nk)(o,{author:(0,j.jsx)(I.rU,{display:"inlineBlock",href:a??"",rel:"nofollow",underline:"hover",children:(0,j.jsx)(I.xv,{size:"200",weight:"bold",children:e})},"author"),provider:s?(0,j.jsx)(I.xu,{display:"inlineBlock",marginEnd:1,children:(0,j.jsx)(I.rU,{display:"inlineBlock",href:t??"",rel:"nofollow",underline:"always",children:i},"provider")}):null})}),n&&(0,j.jsx)(I.rU,{href:n,rel:"nofollow",children:r._('(cc)', 'creative commons link text', 'creative commons link text')})]})})}let ed=(void 0!==r||(r=n(799379)).hash&&"7142df6a7a3c1aee54267c5441d3d50b"!==r.hash&&console.error("The definition of 'CloseupAttributionAndDescription_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r),eu=e=>{(0,k.useEffect)(()=>{(0,x.Z)("CloseupAttributionAndDescription","/app/common/react/components/closeup/CloseupBody/CloseupAttributionAndDescription.tsx")},[]);let{isStoryPin:a,pinKey:n,onUpdate:i,instagramPostLink:t}=e,l=(0,A.Z)(ed,n),r=l.entityId&&(!!l.attribution?.providerUrl&&!!l.attribution.providerName||!!l.attribution?.authorName),s=l.entityId&&(!!l.mediaAttribution?.link&&!!l.mediaAttribution.providerName||!!l.mediaAttribution?.author),o=null;if(r||s){let{closeupUnifiedDescription:e}=l,a=(e||"").trim()?"{{ credit }}":"{{ credit }}";o=l.mediaAttribution?(0,N.nk)(a,{credit:l.mediaAttribution&&(0,j.jsx)(es,{mediaAttribution:{author:l.mediaAttribution.author,authorUrl:l.mediaAttribution.authorUrl,ccUrl:l.mediaAttribution.ccUrl,link:l.mediaAttribution.link,mediaType:l.mediaAttribution.mediaType,providerName:l.mediaAttribution.providerName}},"article-pin")}):(0,N.nk)(a,{credit:l.attribution&&(0,j.jsx)(eo,{attribution:{authorName:l.attribution.authorName,authorUrl:l.attribution.authorUrl,ccUrl:l.attribution.ccUrl,providerName:l.attribution.providerName,url:l.attribution.url},embed:l.embed&&{type:l.embed.type,src:l.embed.src,subtype:l.embed.subtype}},"article-pin")})}return(0,j.jsxs)(I.xv,{inline:!0,children:[o,!a&&(0,j.jsx)(el,{instagramPostLink:t,onUpdate:i,pinKey:l})]})};var ec=n(952018),ep=n(886981);function em({creatorId:e,children:a}){let{data:n}=(0,ep.Z)({name:"UserResource",options:{field_set_key:"grid_item",user_id:e}});return a(n)}var eg=n(995415),eh=n(453179),ey=n(776250),e_=n(675973),ef=n(355919),ex=n(8512);function ek({hasOfficialUser:e,domain:a,hasLinkDomainOfficialUser:n,hasLinkUserWebsiteOfficialUser:i,hasNativeCreator:t,hasThirdPartyPinOwner:l,isPromoted:r,pinnerDomainUrl:s,pinnerDomainVerified:o}){return(i||n||l||e||o&&s===a)&&!r||!!t}let eP=(void 0!==s||(s=n(543996)).hash&&"b640d34fae5bf66634c4dffcbb8ea6d4"!==s.hash&&console.error("The definition of 'useCloseupBodyUtils_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),s);function eS(e){let a=(0,A.Z)(eP,e),{checkExperiment:n}=(0,e_.Z)(),i=n("closeup_attribution_overhaul").anyEnabled,{currentDomain:t}=(0,eg.Z)({carouselData:a.carouselData&&{carouselSlots:a.carouselData.carouselSlots&&a.carouselData.carouselSlots.map(e=>({domain:e.domain,link:e.link})),index:a.carouselData?.index},domain:a.domain}),l=!!a?.isGoLinkless,r=!!a.link&&a.link.startsWith("https://i.pinimg.com"),s=(0,k.useCallback)(e=>!l&&(e&&!r?!!a.link:!a.isEligibleForPdp&&!!(0,eh._S)(t)&&!r),[t,a.isEligibleForPdp,a.link,l,r]),o=(0,ey.Z)({hasPin:!!a,hasPinRichMetadata:!!a.richMetadata,hasPinRichMetadataProducts:!!a.richMetadata?.products,hasPinRichMetadataArticle:!!a.richMetadata?.article,hasPinRichMetadataRecipe:!!a.richMetadata?.recipe,hasPinStoryPinData:!!a.storyPinData}),d=(0,k.useCallback)(e=>e||o,[o]),u=a.linkDomain,c=!!a.nativeCreator,p=!!a.originPinner,m=!!a.thirdPartyPinOwner,g=!!a.linkUserWebsite?.officialUser,h=!!u,y=!!u?.officialUser,_=!!a.creatorClass,f=a.pinner;f=c?a.nativeCreator:h&&u?.officialUser?u.officialUser:a.originPinner||a.pinner;let{pinCreditLink:x,pinCredit:P}=(0,ex.Xe)({hasLinkDomain:h,hasNativeCreator:c,hasOriginPinner:p,pinDomain:a.domain,sourceUserUsername:f?.username??null,sourceUserFullName:f?.fullName??null}),S=!!f,v=!!x&&!!P,b=!!a.closeupAttribution;return{getShowClickthroughLink:s,getViewParameter:d,makeDetailsArgs:(0,k.useCallback)(e=>({isShopTheLook:!!a.aggregatedPinData?.isShopTheLook,showCreatorCard:i?!!a.closeupUnifiedAttribution?.entityId:ek({hasOfficialUser:b,domain:a.domain??"",hasLinkDomainOfficialUser:y,hasLinkUserWebsiteOfficialUser:g,hasNativeCreator:c,hasThirdPartyPinOwner:m,isPromoted:!!a.isPromoted,pinnerDomainUrl:a.pinner?.domainUrl??"",pinnerDomainVerified:!!a.pinner?.domainVerified})||!b&&S&&v,creatorId:i?a.closeupUnifiedAttribution?.entityId??null:a.closeupAttribution?.entityId??f?.entityId??null,showCanonicalComments:!!a.isEligibleForAggregatedComments,showReactions:(0,ef.J6)({board:a.board?.isCollaborative||a.board?.collaboratedByMe?{isCollaborative:a.board.isCollaborative??null,collaboratedByMe:a.board.collaboratedByMe??null}:null,videos:a.videos?.entityId?{entityId:a.videos.entityId}:null,isDownstreamPromotion:a.isDownstreamPromotion,isPromoted:a.isPromoted,storyPinDataId:a.storyPinDataId},e),isCreatorClassPin:_}),[_,y,g,c,m,b,v,S,a.aggregatedPinData?.isShopTheLook,a.board?.collaboratedByMe,a.board?.isCollaborative,a.closeupAttribution?.entityId,a.domain,a.isDownstreamPromotion,a.isEligibleForAggregatedComments,a.isPromoted,a.pinner?.domainUrl,a.pinner?.domainVerified,a.storyPinDataId,a.videos?.entityId,f?.entityId,i,a.closeupUnifiedAttribution?.entityId])}}var ev=n(592821),eb=n(998951),eC=n(139707),eI=n(569437),ew=n(314021),eT=n(703528),eA=n(980787),eF=n(617778),eE=n(355940),ej=n(506662),eL=n(15667),eR=n(821806),eK=n(627925),eZ=n(644493),eD=n(271910),eM=n(7872),eB=n(611499),eO=n(685178);function eN({children:e}){(0,k.useEffect)(()=>{(0,x.Z)("CreatorCardLayout","/app/www/CreatorCard/CreatorCardLayout.tsx")},[]);let{closeupWithinMasonryEnabled:a,peekCloseupEnabled:n}=(0,X.x4)(),i=8,t=4;return n?(i=0,t=eB.O5):a&&(i=void 0,t=void 0),(0,j.jsx)(I.xu,{marginBottom:i,marginTop:t,children:e})}var ez=n(78762);let eV=(0,ez.Z)(()=>n.e("35563").then(n.bind(n,72526)),void 0,e=>72526,"app-www-closeup-duplo-PinRecipeRating",e=>["35563"]),eU=(0,ez.Z)(()=>Promise.resolve().then(n.bind(n,417827)),void 0,e=>417827,"app-common-react-components-closeup-CloseupCommentModule-UnifiedCommentModule",e=>[]),eW=(0,k.lazy)(()=>n.e("96615").then(n.bind(n,396837))),eG=(void 0!==o||(o=n(265532)).hash&&"6a99555fe621b7c9afe6cd504d857930"!==o.hash&&console.error("The definition of 'DefaultMetadata_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),o),eH=(0,k.memo)(function({pinKey:e,clientTrackingParams:a,inCommentsPopoverExp:n,isStoryPin:i,isDeletedStoryPin:t,viewParameter:l,trafficSource:r,details:s,viewer:o,onClickThrough:d,onCloseupBodyUpdate:u,orbacActingAs:c,outerPaddingSize:p,viewportSize:m,shouldShowPartnerModule:g,trendsData:h,showTrendsOnPinCloseup:y,showPinStats:_,showShoppingModule:f}){let x,P=(0,O.ZP)(),{checkExperiment:v}=(0,e_.Z)(),{logContextEvent:b}=(0,eA.u)(),{carouselInfo:C}=(0,D.G)(),w=(0,A.Z)(eG,e),{getShowClickthroughLink:T,makeDetailsArgs:F}=eS(w),{creatorId:E,showCreatorCard:L}=F(!!t),{sideBySideFullWidthCTAEnabled:M}=(0,eC.Z)(),B=T(i),N=(0,eI.Z)({pinKey:w,pinId:w.entityId,viewParameter:l,trafficSource:r}),{closeupUnifiedDescription:z,closeupUserNote:V,commentsDisabled:U,pinAdditionalNote:W}=w,G=z?.trim(),H=w.storyPinData?.metadata?.basics?.keyValueBlocks?.map(({categoryType:e,value:a})=>({categoryType:e,value:a}))??[],$=H.length>0,Y=(0,eb.Z)(V)||!!w.richMetadata,J=w.richMetadata?.recipe?.name&&w.richMetadata.recipe.categorizedIngredients&&w.richMetadata.recipe.categorizedIngredients.length>0,{closeupWithinMasonryEnabled:Q,peekCloseupEnabled:ea}=(0,X.x4)(),en=(0,eM.q6)(o,w.pinner?.entityId,c),[ei,et]=(0,k.useState)(!1),el=(0,S.TH)(),{isAuthenticated:er,userAgent:{isMobile:es}}=(0,eL.B)(),eo=n&&!U,ed=(0,j.jsx)(eD.q,{children:({hovered:e,onMouseEnter:n,onMouseLeave:i})=>(0,j.jsx)(eF.Z,{clientTrackingParams:a,hovered:e,pinKey:w,trafficSource:r,viewType:3,children:(0,j.jsx)(I.xu,{onMouseEnter:n,onMouseLeave:i,children:(0,j.jsx)(eO.Z,{carouselInfo:C,isLink:B,onClick:N,onTitleCheck:et,pinKey:w})})})}),ep=()=>L&&(0,j.jsx)(ec.Z,{"data-testid":"closeup-metadata-creator",marginTop:Q?(p??eB.ER)/2:0,paddingBottom:Q?(p??eB.ER)/2:0,paddingRight:8*!Q,children:(0,j.jsx)(em,{creatorId:E,children:e=>!!e&&(0,j.jsx)(eN,{children:(0,j.jsx)(ew.default,{clientTrackingParams:a,componentType:126,impressionType:"User",input:w,isORBACProfileManager:en,loggingId:E,officialUser:e,slotIndex:0,viewParameter:l,viewType:3})})})}),eg=v("dweb_closeup_links").anyEnabled,ey=w.isInstagramApi&&w.nativeCreator?.websiteUrl&&w.nativeCreator?.isPrimaryWebsiteVerified&&w.nativeCreator?.isDirectToSiteAllowed,{link:ef,trackedLink:ex,utmLink:ek}=w||{};if(C&&C.carouselData&&C.carouselData.id){let{carousel_slots:e=[],index:a=0}=C.carouselData;x=e[a]&&e[a].link}let eP=x||(0,eh.Zt)({trackedLink:ex,link:ef,utmLink:ek})||"",ez=eP;ey&&eg?ez=w.nativeCreator.websiteUrl:w.showRecipeCta||(ez=(0,eZ.Z)(eP)??eP);let eH=!er&&(0,ej.am)(el),e$=!!(w.promoter&&!w.isDownstreamPromotion)&&w.promoter?.entityId===w.nativeCreator?.entityId,{sponsorship:eY,storyPinData:eX,affiliateLink:eq}=w,eJ=!!eq,eQ=!!eX?.hasAffiliateProducts,e0=(!!eY?.sponsor||eQ||eJ)&&(ez||f)&&!e$&&!eH,e1=o.isAuth&&w.originPin?.originPinner?.entityId===o.id,e2=B&&ez&&(e1||!w.isGoLinkless),e3=ea&&!Q?p??eB.ER:0,e6=w.showRecipeCta?P._('See recipe', 'closeup.defaultMetadata.visitButton', 'Button to visit recipe link on Pin'):P._('Visit site', 'closeup.defaultMetadata.visitButton', 'Button to visit link on Pin'),e8=()=>e2&&(0,j.jsx)(ec.Z,{marginTop:ea?p??eB.ER:void 0,paddingBottom:ea?(p??eB.ER)/2:void 0,paddingRight:e3,children:(0,j.jsx)(I.xu,{"data-test-id":"visit-site-button",children:(0,j.jsx)(eT.Z,{clientTrackingParams:a,color:"gray",fullWidth:M,link:ez,onClickThrough:()=>{eg&&b({event_type:102,element:162,component:4,aux_data:{is_claimed_domain:ey}}),d()},pinKey:w,text:e6})})});return(0,j.jsxs)(I.xu,{marginTop:Q?4:void 0,children:[g&&(i||Q)&&(0,j.jsx)(ec.Z,{paddingRight:(p??eB.ER)/2,children:(0,j.jsx)(I.xu,{"data-test-id":"PartnerModule",width:"100%",children:(0,j.jsx)(eE.Z,{name:"SafeSuspense_Closeup_PartnerModule",children:(0,j.jsx)(eR.Z,{children:(0,j.jsx)(eW,{borderStyle:ev.te,isStoryPin:i,pinKey:w,showPinStats:_,trendsData:y?h?.data?.results:null,viewportSize:m})})})})}),(0,j.jsxs)(I.xu,{alignItems:Q?"start":void 0,display:Q?"flex":void 0,justifyContent:Q?"between":void 0,children:[(0,j.jsxs)(I.kC.Item,{flexBasis:Q&&e2?"77%":"100%",children:[!ei&&(0,j.jsx)(ec.Z,{paddingRight:Q?void 0:p,children:(0,j.jsx)(I.xu,{color:"light","data-test-id":"closeup-title",display:"inlineBlock",children:ed})}),ea&&ep(),(0,j.jsx)(I.xu,{direction:ea?"column":void 0,display:ea?"flex":void 0,height:ea?"100%":void 0,children:(0,j.jsxs)(ec.Z,{paddingRight:p,children:[$&&(0,j.jsx)(I.xu,{marginTop:Q?eB.O5:4,children:(0,j.jsx)(R.Z,{hasMetadataTemplateType:!!w.storyPinData?.metadata?.templateType,keyValueBlocks:H})}),!$&&!!J&&(0,j.jsx)(I.xu,{marginTop:Q?eB.O5:void 0,tabIndex:0,children:(0,j.jsx)(eV,{boldText:!1,fallback:(0,j.jsx)(I.xH,{accessibilityLabel:P._('Loading Pin recipe rating', 'closeupDefaultMetadata.PinRecipeRating.loading.label', 'Spinner indicates pin recipe rating is loading'),show:!0}),pinKey:w,textSize:"300"})}),(0,j.jsxs)(k.Fragment,{children:[!!(i&&G&&Y)&&(0,j.jsx)(I.xu,{marginTop:Q?eB.O5:8,width:Q?"100%":void 0,children:(0,j.jsx)(Z.Z,{descriptionDir:(0,ee.j)(G),children:(0,j.jsx)(K.Z,{description:G||"",pinKey:w})})}),!i&&(w.attribution||G||W)&&Q&&(0,j.jsx)(I.kC,{alignItems:"baseline",direction:"row",justifyContent:"start",children:(0,j.jsx)(I.xu,{marginBottom:Q&&!J?eB.O5:void 0,marginTop:Q?eB.O5:void 0,width:"100%",children:(0,j.jsx)(eu,{instagramPostLink:(0,j.jsx)(eK.Z,{closeupLinkEnabled:eg,nativeCreatorCloseupLinkEligible:!!ey,peekCloseupEnabled:ea,uriComponent:eP}),isStoryPin:i,onUpdate:u,pinKey:w})})}),e0&&(es||Q)&&(0,j.jsx)(I.xu,{marginTop:2,children:(0,j.jsx)(q.Z,{hasAffiliateLink:eJ,hasAffiliateProducts:eQ})})]})]})}),Q&&ep()]}),Q&&(0,j.jsx)(I.xu,{alignItems:"stretch",display:M?"block":"flex",flex:"grow",justifyContent:"end",children:e8()})]}),ea&&e8(),eo&&(0,j.jsx)(eU,{inCommentsPopoverExp:n,pinKey:w,viewParameter:l}),(0,j.jsx)(k.Fragment,{children:s})]})});function e$(e){return(0,k.useEffect)(()=>{(0,x.Z)("DefaultMetadata","/app/common/react/components/closeup/CloseupBody/DefaultMetadata.tsx")},[]),(0,j.jsx)(eH,{...e})}var eY=n(295483),eX=n(546345),eq=n(439122),eJ=n(502447);let eQ=e=>({isEligibleForStaticImageIdeaPin:!!e});var e0=n(492841);let e1=(0,k.lazy)(()=>n.e("99339").then(n.bind(n,157720))),e2=(0,k.memo)(function({inCommentsImprovedDropdownExp:e,inCommentsPopoverExp:a,isStoryPin:n,isVideoPin:i,isDeletedStoryPin:t,orbacActingAs:l,orbacSubjectId:r,onCommentSectionClick:s,onCloseupBodyUpdate:o,outerPaddingSize:d=eB.g9,pin:u,viewer:c,shouldShowStlCarouselForOwnPin:p,storyPinTaggedProducts:m=[],taggedProducts:g,closeupContext:h,isLoadingNewlyCreatedComment:y,viewParameter:_,detailsScrollContainerRef:f}){let{makeDetailsArgs:x}=eS({type:"Legacy",data:u}),{checkExperiment:P}=(0,e_.Z)(),{isShopTheLook:v,showCanonicalComments:b}=x(!!t),C=(0,O.ZP)(),w=(0,S.TH)(),{isAuthenticated:T}=(0,eL.B)(),A=P("dweb_closeup_links").anyEnabled,F=u.is_instagram_api&&u.native_creator?.website_url&&u.native_creator?.is_primary_website_verified,{link:E,utm_link:L,tracked_link:R}=u,K=(0,eh.Zt)({utmLink:L,link:E,trackedLink:R}),Z=z((0,V.Z)((0,U.Z)((0,W.Z)({pin:u})))),D=(g||[]).filter(e=>(function(e){if("pin_tag"===e.type){let{x_percent:a,y_percent:n}=e;if(a>0&&a<=100&&n>0&&n<=100)return!0}return!1})(e)),M=(0,eM.q6)(c,u.pinner?.id,l),{closeupWithinMasonryEnabled:B,peekCloseupEnabled:N}=h,G=!T&&(0,ej.am)(w),H=!!(u.promoter&&!u.is_downstream_promotion)&&u.promoter?.id===u.native_creator?.id,{sponsorship:$,story_pin_data:Y,affiliate_link:X}=u,J=!!X,Q=!!Y?.has_affiliate_products,ee=(!!$||Q||J)&&!H&&!G,ea=(u.aggregated_pin_data?.comment_count??0)+(u.aggregated_pin_data?.did_it_data?.images_count??0),en=!t&&b&&(e?!u.comments_disabled:!a),ei=(e?!!ea:!N)||(u.aggregated_pin_data?.comment_count??0)>0,et=!n&&(!((u.rich_summary?.products??[]).length||(u.rich_metadata?.products??[]).length)&&v&&D.length>0||p)&&!i,el=n&&m&&m.length>0,er=(0,eJ.Z)({pinKey:{type:"Legacy",data:u},orbacActingAs:l,viewer:c}),{isEligibleForStaticImageIdeaPin:es}=eQ(u.story_pin_data_id),eo=es&&m&&m.length>0,{paddingLeft:ed,paddingRight:ep,marginTop:em,marginBottom:eg}=B?{paddingLeft:0,paddingRight:0,marginTop:0,marginBottom:e&&en?0:2}:N?{paddingLeft:0,paddingRight:d/2,marginTop:2,marginBottom:2}:{paddingLeft:d/2,paddingRight:d,marginTop:10,marginBottom:6},ey=u.favorited_by_me?C._('Remove from favorites', 'closeup.metadataDetails.removeFromFavorites', 'Text for button allowing users to unfavorite a saved Pin'):C._('Add to favorites', 'closeup.metadataDetails.addToFavorites', 'Text for button allowing users to favorite a saved Pin'),ef=[...et||el||eo?[(0,j.jsx)(ec.Z,{paddingLeft:B?void 0:d/2,paddingRight:B?void 0:d,children:(0,j.jsx)(eE.Z,{name:"SafeSuspense_CloseupBody_StlCloseupModule",children:(0,j.jsx)(eR.Z,{children:(0,j.jsx)(e1,{closeupImageSignature:u.image_signature??"",isOwnCreatedPin:p,pin:u,pinId:u.id,taggedObjects:el||eo?m:D,type:et?"stl":"story",viewParameter:_})})})},"closeupStlModuleMetadataPadding")]:[],...Z?[(0,j.jsx)(ec.Z,{paddingLeft:0,paddingRight:B?void 0:d/2,children:(0,j.jsx)(e0.Z,{recipeProps:Z})},"closeupRecipeMetadataPadding")]:[],...!t&&er?[(0,j.jsx)(ec.Z,{paddingRight:B?void 0:d/2,children:(0,j.jsxs)(I.xu,{alignItems:"center",display:"flex",justifyContent:"between",marginBottom:2*!B,marginTop:2*!B,children:[B?(0,j.jsx)(I.xv,{size:"300",weight:"bold",children:ey}):(0,j.jsx)(I.xv,{weight:"bold",children:ey}),(0,j.jsx)(eX.Z,{pinKey:{type:"Legacy",data:u}})]})},"closeupFavoriteBarMetadataPadding")]:[]];return(0,j.jsx)(k.Fragment,{children:(0,j.jsxs)(I.kC,{alignItems:"stretch","data-testid":"closeup-metadata-details-flex",direction:"column",flex:"grow",height:N?"100%":void 0,justifyContent:"start",children:[B?null:(0,j.jsxs)(ec.Z,{"data-testid":"closeup-metadata-details",paddingLeft:B?void 0:N?0:d/2,paddingRight:B?void 0:d/2,children:[(0,j.jsx)(I.kC,{alignItems:"baseline",direction:"row",justifyContent:"start",children:(0,j.jsx)(I.xu,{marginTop:N?void 0:2,width:"100%",children:(0,j.jsx)(eu,{instagramPostLink:(0,j.jsx)(eK.Z,{closeupLinkEnabled:A,nativeCreatorCloseupLinkEligible:!!F,peekCloseupEnabled:N,uriComponent:K}),isStoryPin:n,onUpdate:o,pinKey:{type:"Legacy",data:u}})})}),ee&&!B&&(0,j.jsx)(q.Z,{hasAffiliateLink:J,hasAffiliateProducts:Q})]}),(0,j.jsx)(k.Fragment,{children:ef.map((e,a)=>(0,j.jsxs)(k.Fragment,{children:[e,B&&(0,j.jsx)(I.xu,{marginBottom:2,marginTop:2,width:"100%",children:(0,j.jsx)(eq.Z,{show:!!(en&&ei||a<ef.length-1),surface:"closeup-metadata-details"})})]},`detailFragment-${e.key}`))}),!ef.length&&!a&&(0,j.jsx)(I.xu,{marginBottom:2,marginTop:en&&ei?2:0,width:"100%",children:(0,j.jsx)(eq.Z,{show:B&&en&&ei,surface:"closeup-metadata-details"})}),en&&(0,j.jsx)(eE.Z,{name:"CanonicalCard",children:(0,j.jsx)(ec.Z,{paddingLeft:ed,paddingRight:ep,children:(0,j.jsx)(I.xu,{marginBottom:eg,marginTop:em,children:(0,j.jsx)(eY.Z,{aggregatedPinId:u.aggregated_pin_data?.id,closeupAttributionId:u.closeup_attribution?.id,closeupAttributionUsername:u.closeup_attribution?.username,commentCount:u.aggregated_pin_data?.comment_count??0,commentsDisabled:u.comments_disabled,inCommentsImprovedDropdownExp:e,isLoadingNewCreatedComment:y,isORBACProfileManager:M,isShopTheLook:v,isVideo:!!u.videos?.video_list,onCommentSectionClick:s,orbacSubjectId:r,photoCount:u.aggregated_pin_data?.did_it_data?.images_count??0,pinId:u.id,pinKey:{type:"Legacy",data:u},pinnerId:u.pinner?.id,scrollContainerRef:f,shouldShowHeading:ei,storyPinDataId:u.story_pin_data?.id,viewParameter:_})})})})]})})});function e3(e){return(0,k.useEffect)(()=>{(0,x.Z)("MetadataDetails","/app/common/react/components/closeup/CloseupBody/MetadataDetails.tsx")},[]),(0,j.jsx)(e2,{...e})}var e6=n(974446);function e8({maxHeight:e,pin:a,showShoppingModule:n,trafficSource:i,viewParameter:t}){(0,k.useEffect)(()=>{(0,x.Z)("PeekVariantShoppingModule","/app/common/react/components/closeup/CloseupBody/PeekVariantShoppingModule.tsx")},[]);let l={height:"48px",padding:"80px 4px 16px 4px",pointerEvents:"none",transition:"opacity 0.1s ease-in-out",width:"100%",zIndex:1},[r,s]=(0,k.useState)(!1),[o,d]=(0,k.useState)(!0),u=(0,k.useRef)(null),c=()=>{let e=u.current;if(!e)return;let{scrollTop:a,scrollHeight:n,clientHeight:i}=e;s(0!==a),d(a+i!==n)};return(0,k.useEffect)(()=>{let e=u.current;if(e)return e.addEventListener("scroll",c),()=>{e.removeEventListener("scroll",c)}},[]),n&&(0,j.jsxs)(I.xu,{ref:u,dangerouslySetInlineStyle:{__style:{borderLeft:ev.tc}},"data-test-id":"peek-variant-shopping-module-container",height:"auto",maxHeight:e,overflow:"scrollY",children:[(0,j.jsx)(I.xu,{dangerouslySetInlineStyle:{__style:{...l,background:"linear-gradient(0deg, rgba(255, 255, 255, 0.00) 0%, #FFF 100%)",opacity:+!!r}},"data-test-id":"peek-variant-top-gradient",position:"absolute",top:!0}),(0,j.jsx)(e6.Z,{moduleWidth:ev.LV,pinKey:{type:"Legacy",data:a},trafficSource:i,viewParameter:t}),(0,j.jsx)(I.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...l,background:"linear-gradient(180deg, rgba(255, 255, 255, 0.00) 0%, #FFF 100%)",opacity:+!!o}},position:"absolute"})]})}var e4=n(341742),e7=n(25837);let e5=e7.cI+16,e9=`calc(100vh - ${e5}px)`;function ae(e=100){let[a,n]=(0,k.useState)(e9),i=(0,k.useRef)(null),t=`calc(${e??"100"}vh - ${e5}px)`;return(0,e4.Z)(()=>{if(!window)return;let a=window.innerHeight-e5,l=i.current?.clientHeight||0;l>a*(e??100)/100&&(t=l.toString()),n(a>l?t:l)}),{descriptionContentMaxHeight:a,visualContentContainerRef:i}}function aa(){let[e,a]=(0,k.useState)(""),n=(0,k.useRef)(null),i=(0,k.useRef)(null),t=(0,k.useRef)(null),l=(0,k.useRef)(null);return(0,k.useEffect)(()=>{let a=()=>{e&&n.current&&n.current.handleEgSurveyClick(e)};return window.addEventListener("focus",a),()=>window.removeEventListener("focus",a)},[e]),{clickthroughComponentForSurvey:e,setClickthroughComponentForSurvey:a,webLinkSurveyRef:n,imageContainerRef:i,legoLinkClickthroughAnchorRef:t,maybeLinkRef:l}}var an=n(96413);let ai=({children:e})=>((0,k.useEffect)(()=>{(0,x.Z)("ImagePadding","/app/common/react/components/closeup/CloseupBody/VisualContent/ImagePadding.tsx")},[]),(0,j.jsx)(I.xu,{display:"flex",height:"100%",justifyContent:"center",padding:5,width:"100%",children:e}));var at=n(918920),al=n(85574);let ar=({embedUrl:e,isWideVideo:a,paddingBottom:n="50%",shouldPadImage:i})=>{(0,k.useEffect)(()=>{(0,x.Z)("EmbeddedVideoContent","/app/common/react/components/closeup/CloseupBody/VisualContent/EmbeddedVideoContent/EmbeddedVideoContent.tsx")},[]);let t=(0,O.ZP)(),l=(0,eL.B)(),r=a?eB.KP:eB.Gg,{showCloseupContentRight:s,closeupWithinMasonryEnabled:o,viewportSize:d}=(0,X.x4)(),u=e?.replace("http://","https://");u&&u.startsWith("https://www.youtube.com/embed/")&&(u=u.replace("https://www.youtube.com/embed/","https://www.youtube-nocookie.com/embed/"));let c=(0,j.jsx)("div",{style:{height:0,overflow:"hidden",position:"relative",width:"100%",paddingBottom:n,...(0,al.Z)({isSideBySide:!a,isPadded:i,isRTL:l.isRTL,closeupWithinMasonryEnabled:o})?.borderStyle},children:(0,j.jsx)("iframe",{allowFullScreen:!0,id:at.ZP.VIDEO_IFRAME_ID,src:u,style:{border:0,height:"100%",left:0,position:"absolute",top:0,width:"100%"},title:t._('Embedded content', 'Accessible content for the embedded content iframe', 'Accessible content for the embedded content iframe')})}),p=s&&"lg"===d?(0,j.jsx)(I.xu,{marginBottom:6,marginEnd:a||i?0:6,width:r,children:c}):c;return i?(0,j.jsx)(ai,{children:p}):p};var as=n(501392),ao=n(112931),ad=n(527895);n(422578);var au=n(869985),ac=n(521009);let ap=(void 0!==d||(d=n(505370)).hash&&"510195e37611b9b69a16eccfeb13e9cf"!==d.hash&&console.error("The definition of 'CarouselVideoItem_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),d),am=({contextLogData:e,height:a,isFocused:n,videoList:i,onFocus:t,onUnfocus:l,pinId:r,pinKey:s,width:o})=>{(0,k.useEffect)(()=>{(0,x.Z)("CarouselVideoItem","/app/common/react/components/common/Carousel/CarouselItem/CarouselVideoItem.tsx")},[]);let d=(0,ac.Z)(),u=(0,A.Z)(ap,s),{V_720P:c,V_HLSV4:p,V_HLSV3_MOBILE:m}=i,{height:g=1,width:h=1,thumbnail:y}=c||p||m||{},_=h/g,f="100%";_<1&&"number"==typeof a&&"number"==typeof o&&(f=`${Math.min(a*_,o)}px`),(0,k.useEffect)(()=>{n&&t?t():l&&l()},[n,t,l]),(0,k.useEffect)(()=>{n&&d({component:e.component,event_type:13,object_id_str:e.objectId,view_parameter:e.viewParameter,view_type:e.view})},[n,e,d]);let P=(0,k.useCallback)(()=>{d({component:e.component,event_type:3621,object_id_str:e.objectId,view_parameter:e.viewParameter,view_type:e.view})},[e,d]);return(0,j.jsx)(I.kC,{alignItems:"center",height:"100%",justifyContent:"center",width:"100%",children:(0,j.jsx)(I.xu,{"data-testid":"carousel-video-item",height:"100%",width:f,children:(0,j.jsx)(au.Z,{autoplay:n,contextLogData:e,customThumbnail:y,disabled:!n,loop:!0,muted:!1,objectFit:"contain",onPlay:P,pinId:r,pinKey:u,preferMp4:!0,showControls:"hover",variant:"default",video:{mp4:c,hls:p,hlsv3:m}})})})};var ag=n(273094),ah=n(482694),ay=n(956077),a_=n(104659),af=n(300685),ax=n(974297),ak=n(712172);function aP({fit:e,highResOnly:a,onError:n,onLoad:i,slot:t,slotIndex:l}){(0,k.useEffect)(()=>{(0,x.Z)("CarouselImageItem","/app/www/common/Carousel/CarouselItem/CarouselImageItem.tsx")},[]);let r=(0,O.ZP)(),{details:s=""}=t,{url:o="",width:d=1,height:u=1}=(0,ax.Z)(t.images)||{};return o&&(0,j.jsx)(I.Ee,{alt:(0,ak.GH)(s,r,l),fit:e,naturalHeight:u??1,naturalWidth:d??1,onError:n,onLoad:i,src:o,srcSet:(0,ak.gA)({slot:t,highResOnly:a})})}let aS=(void 0!==u||(u=n(621539)).hash&&"83e61e6fc89222c2a0b03276839f44a5"!==u.hash&&console.error("The definition of 'CloseupCarousel_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),u);function av({borderStyle:e,displayHeight:a,displayWidth:n,pinKey:i}){(0,k.useEffect)(()=>{(0,x.Z)("CloseupCarousel","/app/common/react/components/closeup/CloseupBody/CloseupCarousel/CloseupCarousel.tsx")},[]);let{logContextEvent:t}=(0,eA.u)(),{closeupWithinMasonryEnabled:l,isCloseupMediaViewerOpen:r,showProductDetailPage:s,peekCloseupEnabled:o}=(0,X.x4)(),{pauseAutoplay:d,setCurrentVideo:u}=(0,a_.G)(),{isEnabled:c}=(0,as.Z)({dangerouslySkipActivation:!1}),{carouselInfo:p,mainImage:m}=(0,D.G)(),{carouselData:g,handleCarouselSwipe:h}=p||{},{index:y=0}=g||{},{height:_,width:f}=m,P=(0,A.Z)(aS,i),S=(0,T.Z)({showProductDetailPage:!!P.isEligibleForPdp}),{entityId:v}=P,b=(0,k.useRef)(null),C=(0,E.Z)(P),w=P.isEligibleForPdp?C():void 0,F=P.isEligibleForPdp?144:void 0,L=P.isEligibleForPdp?3:void 0,R=(0,k.useCallback)(e=>{e>=1&&(0,ay.Nx)("image")},[]),K=(0,k.useMemo)(()=>({viewParameter:s?144:156,view:3,component:s?14012:179,objectId:v}),[v,s]),Z=(0,k.useCallback)(()=>{u({pinId:v,isPromoted:!1})},[u,v]),M=(0,k.useCallback)(()=>{d({pinId:v,isPromoted:!1})},[d,v]);(0,k.useEffect)(()=>{g?.carousel_slots?.find(e=>e.videos?.video_list)&&t({event_type:120,view_type:K.view,view_parameter:K.viewParameter,component:K.component,object_id_str:K.objectId})},[t,g?.carousel_slots,K]);let B=b.current&&o,O=(0,k.useCallback)((i,t,l,s,o)=>{let d,u;return i.videos?.video_list?(d=(0,j.jsx)(am,{contextLogData:K,height:a,isFocused:l,onFocus:s,onUnfocus:o,pinId:v,pinKey:P,videoList:i.videos.video_list,width:n}),u=i.videos.id):(d=(0,j.jsx)(ad.Z,{_enableViewTransitions:!0,borderStyle:e,suppressViewTransitionTags:r||t!==y,type:"image",children:(0,j.jsx)(aP,{fit:"cover",onLoad:()=>R(t),slot:i,slotIndex:t})}),u=i.image_signature),(0,j.jsx)(I.xu,{height:"100%",width:"100%",children:d},`${v}-${u||t}`)},[e,y,r,v,K,a,P,n,R]);return(0,j.jsx)(I.xu,{ref:b,dangerouslySetInlineStyle:{__style:{aspectRatio:l?(0,ao.GJ)(f,_):void 0,contain:"strict",justifySelf:"center"}},height:"100%",overflow:l?"hidden":void 0,rounding:l&&!S?4:void 0,width:l?void 0:"100%",children:c?(0,j.jsxs)(k.Fragment,{children:[(0,j.jsx)(ag.Z,{carouselData:{...g,type:"canonical"},contextLogData:w,height:a,id:v,impressionType:"Pin",index:y,slideWidth:n,view:L??3,viewParameter:F??156}),(0,j.jsx)(ah.Z,{itemHeight:a,items:g?.carousel_slots||[],itemWidth:n,mode:"single",onIndexChange:({nextIndex:e})=>h?.(e),renderItem:({item:e,index:a,isFocused:n,onFocus:i,onUnfocus:t})=>O(e,a,n,i,t),selectedIndex:y,showNavigationButtons:!0,showScrollMarkers:!P.isEligibleForPdp})]}):(!o||B)&&(0,j.jsx)(af.Z,{containerRef:b.current,contextLogData:w,height:a,id:v,index:y,responsiveSizing:l,slideWidth:n,view:L,viewParameter:F,children:(g?.carousel_slots||[]).map((e,a)=>O(e,a,y===a,Z,M))})})}var ab=n(573631),aC=n(291892);let aI=(0,k.memo)(function({borderStyle:e,dominantColor:a,imageWithPreview:n,fit:i,sizes:t,srcSet:l}){let{closeupWithinMasonryEnabled:r,isCloseupMediaViewerOpen:s,showProductDetailPage:o}=(0,X.x4)(),{fiftyPercentWidth:d}=(0,ev.Re)(),u=(0,T.Z)({showProductDetailPage:o}),c=(0,ab.b)(),p="closeup-image-main",m=""!==n.mainImage.src?(0,j.jsx)(I.xu,{"data-test-id":p,height:"100%",width:"100%",children:(0,j.jsx)(aC.Z,{_enableViewTransitions:!0,_fixCompletedOnLoad:!0,alt:n.mainImage.alt,borderStyle:u?void 0:e,color:a,elementTiming:`${p}-MainPinImage`,fetchPriority:"high",fit:i,naturalHeight:n.naturalHeight,naturalWidth:n.naturalWidth,onLoad:()=>{(0,ay.Nx)("image")},sizes:t,src:n.mainImage.src,srcSet:l,suppressViewTransitionTags:s})}):null;return(0,j.jsx)(I.xu,{dangerouslySetInlineStyle:{__style:{aspectRatio:r?(0,ao.GJ)(n.naturalWidth,n.naturalHeight):void 0,contain:"strict",justifySelf:r?"center":void 0}},height:"100%",maxWidth:d,overflow:r?"hidden":void 0,rounding:u?void 0:6,width:r?void 0:"100%",children:!c&&n.previewImage?.src?(0,j.jsx)(I.Ee,{alt:n.previewImage?.alt??"",color:a,fetchPriority:"high",fit:i,naturalHeight:n.naturalHeight,naturalWidth:n.naturalWidth,role:"img",src:n.previewImage.src,children:m}):m})}),aw=e=>((0,k.useEffect)(()=>{(0,x.Z)("CloseupImage","/app/common/react/components/closeup/CloseupBody/CloseupImage/CloseupImage.tsx")},[]),(0,j.jsx)(aI,{...e}));var aT=n(364674),aA=n(856782),aF=n(899678);let aE=112+aA.Z;function aj({digitalMediaType:e,shouldMoveAILabel:a,isViewedByOwnerEmployeeOrAgency:n}){return(0,k.useEffect)(()=>{(0,x.Z)("AICloseupLabelWrapper","/app/common/react/components/closeup/CloseupBody/CloseupImage/AICloseupLabelWrapper.tsx")},[]),(0,j.jsxs)(k.Fragment,{children:[(0,j.jsx)(I.xu,{height:`calc(100% - ${a?aE:56}px)`}),(0,j.jsx)(I.xu,{display:"flex",justifyContent:"start",maxWidth:"225px",paddingX:aA.Z,children:(0,j.jsx)(eR.Z,{children:(0,j.jsx)(aF.Z,{children:(0,j.jsx)(aT.Z,{digitalMediaType:e,isViewedByOwnerEmployeeOrAgency:n})})})})]})}var aL=n(520585);let aR=({children:e,horizontalOffset:a=0,name:n,verticalOffset:i=0})=>{(0,k.useEffect)(()=>{(0,x.Z)("OverlayLayer","/app/common/react/components/closeup/CloseupBody/CloseupImage/OverlayLayer.tsx")},[]);let t=new I.Ry(1),{closeupWithinMasonryEnabled:l}=(0,X.x4)(),{mainImage:r}=(0,D.G)(),{height:s,width:o}=r;return(0,j.jsx)(I.xu,{bottom:!l,dangerouslySetInlineStyle:{__style:{aspectRatio:l?o/s:void 0,justifySelf:l?"center":void 0,pointerEvents:"none",padding:l?void 0:`${i}px ${a}px`}},"data-test-id":`closeup-image-overlay-layer-${n}`,height:"100%",left:!0,marginEnd:"auto",marginStart:"auto",position:"absolute",right:!0,top:!l,zIndex:t,children:e})};var aK=n(629178),aZ=n(821342),aD=n(218831);function aM({carouselData:e,children:a,disableAnimations:n=!1,displayWidth:i,hide:t}){(0,k.useEffect)(()=>{(0,x.Z)("AnimatedFab","/app/www/common/Carousel/AnimatedFab.tsx")},[]);let l=(0,k.useCallback)(()=>(({carouselData:e,containerWidth:a,slotWidth:n})=>{let{index:i,carousel_slots:t}=e||{},l=Math.floor(n);return void 0===i||!t||i>=t.length-1?0:a-l})({carouselData:e,containerWidth:i,slotWidth:i}),[e,i]),[r,s]=(0,k.useState)(l()),[o,d]=(0,k.useState)(n),[u,c]=(0,k.useState)(),p=(0,k.useCallback)(()=>{s(l())},[l]);return(0,k.useEffect)(()=>{let e=!0;return n||(d(!1),c(a=>(clearTimeout(a),setTimeout(()=>{e&&(p(),t||d(!0))},500)))),()=>{e=!1}},[e?.index,n,p,t]),(0,k.useEffect)(()=>()=>clearTimeout(u),[u]),(0,j.jsx)(I.xu,{dangerouslySetInlineStyle:{__style:{marginRight:r,transition:n?void 0:"opacity 500ms, visibility 500ms ease-in-out",visibility:o?"visible":"hidden"}},"data-test-id":"animated-fab",opacity:+!!o,children:a})}var aB=n(828942);let aO=(0,k.lazy)(()=>Promise.resolve().then(n.bind(n,448372))),aN=(0,k.lazy)(()=>Promise.resolve().then(n.bind(n,458684))),az=(0,k.lazy)(()=>n.e("74993").then(n.bind(n,613047))),aV=(0,k.lazy)(()=>n.e("95804").then(n.bind(n,984723))),aU=(0,k.lazy)(()=>Promise.resolve().then(n.bind(n,935410))),aW=(0,k.lazy)(()=>n.e("85050").then(n.bind(n,966421))),aG=({auxData:e,carouselInfo:a,domain:n,handleMediaButtonClick:i,isHovered:t,link:l,mediaViewerExpandButtonRef:r,onImageClick:s,pin:o,showCarouselControls:d,showCarouselEllipsis:u,showCloseupShopDomainLinkButton:c,showDebugSignalsFeedbackButton:p,showDomainLink:m,showDomainLinkButton:g,showFlashlightButton:h,showPinTagButton:y,trafficSource:_,maxCloseupImageWidth:f,shouldPadImage:P,verticalOffset:S,horizontalOffset:v})=>{(0,k.useEffect)(()=>{(0,x.Z)("CloseupImageOverlay","/app/common/react/components/closeup/CloseupBody/CloseupImage/CloseupImageOverlay.tsx")},[]);let{isRelatedPins10PercentVisible:b}=(0,aD.K)(),{mainImage:C,mediaViewerImage:w}=(0,D.G)(),A=(0,aZ.Z)(),{peekRedesignFastFollowsEnabled:F}=(0,eC.Z)(C),{isEnabled:E}=(0,as.Z)({dangerouslySkipActivation:!1}),L=(0,T.Z)({showProductDetailPage:!!o.is_eligible_for_pdp}),[R,K]=(0,k.useState)(!1),Z=t||R,M=(0,k.useCallback)(()=>K(!0),[]),B=(0,k.useCallback)(e=>{e.currentTarget.contains(e.relatedTarget)||K(!1)},[]),{containerWidth:O}=(0,ao.ZP)({carouselData:a?.carouselData,mainImage:C,maxCloseupImageWidth:f,shouldPadImage:P,pinKey:{type:"Legacy",data:o}}),N=4*aA.Z,z=N+(b||L?0:56),V=48+z+8,U=e=>F?{bottom:e,position:b?"absolute":"sticky",transition:b?"position 100ms cubic-bezier(0, 0, 1, 1)":"position 50ms cubic-bezier(0, 0, 1, 1)"}:{bottom:e,position:"sticky"},{isCloseupMediaViewerEnabled:W}=(0,aK.Z)({isShufflePin:!!o?.shuffle,carouselContainsVideo:o.carousel_data?.carousel_slots?.some(e=>!!e.videos)??!1}),G=o&&o.origin_pinner&&A.isAuth&&A.id===o.origin_pinner.id||!o?.is_go_linkless,H=(0,ex.zX)(o.digital_media_source_type),$=(g||c)&&G,Y=$&&!l.startsWith("https://i.pinimg.com"),X=!a||0===a.carouselData.index;return(0,j.jsxs)(I.xu,{dangerouslySetInlineStyle:{__style:{display:"contents"}},onBlur:B,onFocus:M,children:[m&&(0,j.jsx)(aR,{horizontalOffset:v,name:"domain-link",verticalOffset:S,children:(0,j.jsxs)(I.kC,{alignItems:"center",height:"100%",justifyContent:"center",width:"100%",children:[(0,j.jsx)(I.xu,{paddingX:1,children:(0,j.jsx)(I.JO,{accessibilityLabel:"",color:"inverse",icon:"arrow-up-right",size:16})}),(0,j.jsx)(I.xu,{paddingX:1,children:(0,j.jsx)(I.xv,{color:"inverse",weight:"bold",children:n})})]})}),d&&a&&!E&&(0,j.jsxs)(aR,{horizontalOffset:v,name:"carousel-controls",verticalOffset:S,children:[(0,j.jsx)(eE.Z,{name:"SafeSuspense_CloseupImageOverlay_CarouselSliders",children:(0,j.jsx)(eR.Z,{children:(0,j.jsx)(aN,{backNode:(0,j.jsx)(aB.Z,{backgroundColor:"default",hoverColor:"secondary",iconColor:"default",iconType:"back",showFab:Z}),carouselData:{carouselSlots:a.carouselData.carousel_slots?.map(({id:e,title:a})=>({id:e,title:a})),entityId:a.carouselData.id??"",index:a.carouselData.index},carouselIndex:a.carouselData&&a.carouselData.index,componentType:a.componentType,forwardNode:(0,j.jsx)(aB.Z,{backgroundColor:"default",hoverColor:"secondary",iconColor:"default",iconType:"forward",showFab:Z}),handleCarouselSwipe:a.handleCarouselSwipe,pinKey:{type:"Legacy",data:o},sliderStyleOverride:{padding:"30px 12px"},viewParameter:a.viewParameter,viewType:a.viewType})})}),(0,j.jsx)(I.xu,{alignItems:"end",bottom:!0,display:"flex",height:405,justifyContent:"center",left:!0,padding:aA.Z,position:"absolute",right:!0,children:!g&&u&&(0,j.jsx)(eE.Z,{name:"SafeSuspense_CloseupImageOverlay_CarouselEllipsis",children:(0,j.jsx)(eR.Z,{children:(0,j.jsx)(aF.Z,{children:(0,j.jsx)(aO,{carouselData:{carouselSlots:a.carouselData.carousel_slots?.map(({id:e,title:a})=>({id:e,title:a})),entityId:a.carouselData.id??"",index:a.carouselData.index},carouselIndex:a.carouselData&&a.carouselData.index,componentType:a.componentType,handleCarouselSwipe:a.handleCarouselSwipe,isCloseup:!0,pinKey:{type:"Legacy",data:o},variant:"default",viewParameter:a.viewParameter,viewType:a.viewType})})})})})]}),h&&(0,j.jsxs)(aR,{horizontalOffset:v,name:"flashlight-button",verticalOffset:S,children:[(0,j.jsx)(I.xu,{height:`calc(100% - ${48+N}px)`}),(0,j.jsx)(I.xu,{dangerouslySetInlineStyle:{__style:U(z)},display:"flex",justifyContent:"end",paddingX:aA.Z,right:!0,children:(0,j.jsx)(eE.Z,{name:"SafeSuspense_CloseupImageOverlay_ShopButton",children:(0,j.jsx)(eR.Z,{children:(0,j.jsx)(aF.Z,{children:(0,j.jsx)(aV,{imageSignature:o.image_signature,pinId:o.id,show:X,trafficSource:_})})})})})]}),W&&(0,j.jsxs)(aR,{horizontalOffset:v,name:"media-viewer-button",verticalOffset:S,children:[(0,j.jsx)(I.xu,{height:`calc(100% - ${h?(48+N)*2:N+48}px)`}),(0,j.jsx)(I.xu,{dangerouslySetInlineStyle:{__style:U(V)},display:"flex",justifyContent:"end",paddingX:aA.Z,right:!0,children:(0,j.jsx)(aM,{carouselData:a?.carouselData,disableAnimations:!0,displayWidth:O,children:(0,j.jsx)(eE.Z,{name:"SafeSuspense_CloseupImageOverlay_MediaViewerButton",children:(0,j.jsx)(eR.Z,{children:(0,j.jsx)(aF.Z,{children:(0,j.jsx)(aU,{ref:r,animateOnMount:!1,dataTestId:"media-viewer-button",icon:"maximize",imageSignature:o.image_signature,onMouseDown:()=>{new Image().src=w.url},onTap:i,variant:"view-larger"})})})})})})]}),p&&(0,j.jsxs)(aR,{horizontalOffset:v,name:"debug-signals-feedback",verticalOffset:S,children:[(0,j.jsx)(I.xu,{dangerouslySetInlineStyle:{__style:{height:"calc(100% - 115px)"}}}),(0,j.jsx)(I.xu,{dangerouslySetInlineStyle:{__style:U(z)},display:"flex",justifyContent:"end",paddingX:aA.Z,right:!0,children:(0,j.jsx)(eR.Z,{children:(0,j.jsx)(aW,{pinKey:{type:"Legacy",data:o}})})})]}),o.digital_media_source_type&&H&&(0,j.jsx)(aR,{horizontalOffset:v,name:"ai-generated-label",verticalOffset:S,children:(0,j.jsx)(aj,{digitalMediaType:o.digital_media_source_type,isViewedByOwnerEmployeeOrAgency:o.is_viewed_by_owner_or_employee_or_partner_of_business||!1,shouldMoveAILabel:Y&&Z})}),$&&(0,j.jsxs)(aR,{horizontalOffset:v,name:"domain-link-button",verticalOffset:S,children:[(0,j.jsx)(I.xu,{height:`calc(100% - ${48+N}px)`}),(0,j.jsx)(I.xu,{dangerouslySetInlineStyle:{__style:{...U(z),opacity:+!!Z,pointerEvents:Z&&!a?"auto":"none"}},display:"flex",justifyContent:"start",maxWidth:"calc(100% - 88px)",paddingX:aA.Z,tabIndex:-1,children:(0,j.jsx)(aL.Z,{auxData:e,domain:n,link:l,onClick:s,pinKey:{type:"Legacy",data:o},trafficSource:_})})]}),y&&(0,j.jsx)(aR,{horizontalOffset:v,name:"tag-button",verticalOffset:S,children:(0,j.jsx)(eE.Z,{name:"SafeSuspense_CloseupImageOverlay_CloseupTagButton",children:(0,j.jsx)(eR.Z,{children:(0,j.jsx)(aF.Z,{children:(0,j.jsx)(az,{pin:o})})})})})]})};var aH=n(516202),a$=n(846721);function aY({showProductDetailPage:e=!1,mainImage:a,skipAspectRatioCheck:n=!1}={}){let{viewportSize:i}=(0,X.x4)();if(!(0,T.Z)({showProductDetailPage:e}))return{maxHeight:void 0};if(!n&&a){let{height:e=0,width:n=0}=a;if(n/e<.25)return{maxHeight:void 0}}return{maxHeight:"sm"===i?eB.E$:eB.Id}}var aX=n(979904),aq=n(102134),aJ=n(890479),aQ=n(673616),a0=n(721214),a1=n(790427),a2=n(44344),a3=n(756334);let a6=(0,ez.Z)(()=>Promise.all([n.e("57207"),n.e("19838"),n.e("95853"),n.e("71309")]).then(n.bind(n,964763)),void 0,e=>964763,"app-common-react-components-closeup-CloseupShuffle-CloseupShuffle",e=>["57207","19838","95853","71309"]),a8=(0,k.memo)(({borderStyle:e,closeupWithinMasonryEnabled:a,imageWithPreview:n,peekRedesignFastFollowsEnabled:i,sizes:t,srcSet:l})=>(0,j.jsx)(a3.Z,{metricName:"CloseupImage",children:(0,j.jsx)(aJ.Z,{id:"CloseupImage",children:(0,j.jsx)(aw,{borderStyle:e,dominantColor:ev.yc,fit:i||a?void 0:"contain",imageWithPreview:n,sizes:t,srcSet:l})})}));function a4({onImageClick:e,isHovered:a,mediaViewerExpandButtonRef:n,pin:i,shouldPadImage:t,trafficSource:l,viewParameter:r,isORBACProfileManager:s,handleMediaButtonClick:o}){let d,u;(0,k.useEffect)(()=>{(0,x.Z)("CloseupImageContainer","/app/common/react/components/closeup/CloseupBody/CloseupImage/CloseupImageContainer.tsx")},[]);let c=(0,O.ZP)(),{originalImageUrl:p,imageSignature:m,link:g,isScenePin:h,disablePinTagButton:y,showProductDetailPage:_,maxCloseupImageWidth:f,imageWithPreview:P}=(0,a$.Z)({pinKey:{type:"Legacy",data:i}}),S=(0,aZ.Z)(),{mainImage:v,carouselInfo:b,srcSet:C,srcSizes:w}=(0,D.G)(),A=(0,aq.Z)(),{peekRedesignFastFollowsEnabled:F}=(0,eC.Z)(v),L=(0,k.useRef)(null),{domain:R,shuffle:K}=i,Z=!!b?.carouselData,{naturalWidth:M,naturalHeight:B}=P,{closeupWithinMasonryEnabled:N,clientTrackingParams:z,showCloseupContentRight:V,viewportSize:U,setCalculatedImageHeight:W}=(0,X.x4)(),G=(0,T.Z)({showProductDetailPage:!!i.is_eligible_for_pdp}),{isRTL:H}=(0,eL.B)();(0,k.useEffect)(()=>{L.current&&W&&W(L.current.clientHeight)},[L,W]);let $=(0,k.useMemo)(()=>P,[P]),{borderStyle:Y}=(0,k.useMemo)(()=>(0,al.Z)({isSideBySide:V,isPadded:t,isRTL:H,closeupWithinMasonryEnabled:N,blendedUIEnabled:G}),[V,t,H,N,G]),{containerHeight:q,containerWidth:J,horizontalOffset:Q,verticalOffset:ee}=(0,ao.ZP)({carouselData:b?.carouselData,mainImage:v,maxCloseupImageWidth:f,shouldPadImage:t,pinKey:{type:"Legacy",data:i}}),[ea,en]=(0,k.useState)({width:J,height:q}),ei=(0,k.useCallback)(()=>{let e=J>q?q/J:1,a=L.current;if(!a)return;let n=a.offsetWidth*e;en(e=>{let i={height:a.offsetHeight||n,width:a.offsetWidth};return e.height!==i.height||e.width!==i.width?i:e})},[q,J]);(0,a2.Z)(ei,L);let et=!!K&&A(),el=(0,aQ.Z)({isHiddenPin:i.is_hidden,isUnsafePin:i.is_unsafe}),{currentDomain:er}=(0,eg.Z)({carouselData:i.carousel_data&&{carouselSlots:i.carousel_data.carousel_slots&&i.carousel_data.carousel_slots.map(e=>({domain:e.domain,link:e.link})),index:i.carousel_data?.index},domain:i.domain}),es=er||R,eo={carousel_slot_id:void 0,carousel_data_id:void 0,carousel_slot_index:void 0,commerce_data:void 0};if(b&&b.carouselData&&b.carouselData.id){let{carousel_slots:e=[],id:a,index:n=0}=b.carouselData;d=e[n]&&e[n].link,eo.carousel_slot_id=e[n]&&e[n].id,eo.carousel_data_id=a,eo.carousel_slot_index=n,es=e[n]&&e[n].domain||es}let ed=(0,E.Z)({type:"Legacy",data:i})();ed&&(eo.commerce_data=ed.commerce_data);let eu=d||g||p||"",ec=(0,j.jsx)(a8,{borderStyle:Y,closeupWithinMasonryEnabled:N,imageWithPreview:$,peekRedesignFastFollowsEnabled:F,sizes:w,srcSet:C}),ep=ec;Z&&(ep=(0,j.jsx)(av,{borderStyle:Y,displayHeight:ea?.height,displayWidth:ea?.width,pinKey:{type:"Legacy",data:i}})),et&&(ep=(0,j.jsx)(a6,{clientTrackingParams:z,naturalHeight:B,naturalWidth:M,pinId:i.id,shuffleId:K?.id,children:(0,j.jsx)(I.xu,{width:"100%",children:ec})}));let{maxHeight:em,fiftyPercentWidth:eh,fiftyPercentHeight:ey}=(0,ev.Re)(),{maxHeight:e_}=(0,aX.Z)({pinKey:{type:"Legacy",data:i}}),{maxHeight:ef}=aY({showProductDetailPage:!!i.is_eligible_for_pdp,mainImage:v,skipAspectRatioCheck:Z}),{showCarouselControls:ex,showCloseupShopDomainLinkButton:ek,showDebugSignalsFeedbackButton:eP,showDomainLink:eS,showDomainLinkButton:eb,showFlashlightButton:eI,showPinTagButton:ew}=(0,aH.Z)({carouselInfo:b,disablePinTagButton:y,domain:es||"",hasMetTrustAndSafetyCheck:el,isCollageEnabled:et,isEmployee:S.isAuth&&!!S.isEmployee,isORBACProfileManager:s,isScenePin:h,navLink:eu,pinKey:{type:"Legacy",data:i},showProductDetailPage:_});return G?u=ef:N?u=e_:F||(u="sm"===U?ey:em),(0,j.jsxs)(I.xu,{ref:L,alignItems:"stretch",alignSelf:N?"center":void 0,dangerouslySetInlineStyle:{__style:{aspectRatio:(0,ao.GJ)(M,B),backgroundColor:N?void 0:ev.yc}},"data-test-id":"closeup-body-image-container",display:"flex",height:N?"100%":q,maxHeight:u,maxWidth:eh,position:"relative",width:N?"100%":J,children:[(0,j.jsxs)(I.xu,{"aria-label":Z?c._('Carousel of Pins', 'CloseupImageContainer.section.ariaLabel', 'Accessibility label that helps define where the carousel starts or ends.'):void 0,as:Z?"section":void 0,dangerouslySetInlineStyle:{__style:{...Y,display:N?"grid":"block"}},"data-test-id":"closeup-image",height:"auto",id:`closeup-image-container-${i.id}`,overflow:"hidden",width:"100%",children:[ep,(0,j.jsx)(aG,{auxData:eo,carouselInfo:b,domain:es??R??"",handleMediaButtonClick:o,horizontalOffset:Q,imageSignature:m,isHovered:a,link:eu,maxCloseupImageWidth:f,mediaViewerExpandButtonRef:n,onImageClick:e,pin:i,shouldPadImage:t,showCarouselControls:ex,showCarouselEllipsis:!_,showCloseupShopDomainLinkButton:ek,showDebugSignalsFeedbackButton:eP,showDomainLink:eS,showDomainLinkButton:eb,showFlashlightButton:eI,showPinTagButton:ew,trafficSource:l,verticalOffset:ee,viewParameter:r})]}),n&&(0,j.jsx)(I.mh,{zIndex:a1.lI,children:(0,j.jsx)(a0.Qp,{anchor:n.current,experienceIds:[506692],flyoutSize:"md",idealDirection:"up",placementId:12,showCaret:!0,textWeight:"normal"})})]})}var a7=n(123317);let a5=[a7.h8.COMMENT_REPLY_STICKER,a7.h8.GENERIC_STICKER,a7.h8.HEADING,a7.h8.IMAGE,a7.h8.MENTION_STICKER,a7.h8.PARAGRAPH,a7.h8.PRODUCT_STICKER,a7.h8.VIDEO,a7.h8.VTO_MAKEUP_STICKER],a9=e=>{if("object"!=typeof e||null===e)return!1;let a=e.image?.images;return!!a&&Object.keys(a).length>0};function ne({storyPinBlocks:e=[],blocksToRender:a=a5}){let n=[],i=[],t=[];return e.forEach(e=>{null!=e.type&&a.includes(String(e.type))||a9(e)?e.type===a7.h8.PARAGRAPH||e.type===a7.h8.HEADING?i.push(e):t.push(e):n.push(e)}),t.push(...i),{nonRenderableBlocks:n,textBlocks:i,blocks:t}}var na=n(67831),nn=n(716920),ni=n(724084),nt=n(543561),nl=n(239728),nr=n(458460);let ns=(e,a)=>e?13799:0===a?227:228;var no=n(71157),nd=n(248762),nu=n(123998);function nc({activePageIndex:e,clientTrackingParams:a,closeupStoryPinViewability:n,customEndCard:i,fontsLoaded:t,horizontalOffset:l,isActive:r,isPreview:s,muteVideos:o,onEnded:d,onFlyoutOpen:u,onUpdateVideoInfo:c,ownerId:p,page:m,pageAspectRatio:g,pageHeight:h,pageIndex:y,pageWidth:_,pin:f,pinId:P,productPins:S,shouldLogTimeSpent:v=!0,stillLoading:b=!1,verticalOffset:C,videoPinProgress:w,viewParameter:T,viewType:A}){(0,k.useEffect)(()=>{(0,x.Z)("StoryPinPage","/app/common/react/components/closeup/StoryPin/renderer/StoryPinPage.tsx")},[]);let{nonRenderableBlocks:F,blocks:E}=ne({storyPinBlocks:m?.blocks??[]}),L=!!E.find(e=>e.type===a7.h8.VIDEO),R=!!E.find(e=>!!e.video&&e.type===a7.h8.VIDEO&&e.video_signature),K=F.find(e=>e.type===a7.h8.MUSIC),Z=K?.type==="story_pin_music_block"?K.provider_recording_id:void 0,D=()=>(0,j.jsx)(I.xu,{dangerouslySetInlineStyle:{__style:{background:ev.yc}},height:"100%",children:!s&&E.filter(e=>!L||R||e.type===a7.h8.VIDEO).map((a,s)=>{let x=(S||[]).find(e=>[e.id,e.cacheable_id].includes(a.pin_id));return(0,j.jsx)(nd.Z,{activePageIndex:e,block:a,closeupStoryPinViewability:n,customEndCard:i,disableProductStickers:!0,fontsLoaded:t,horizontalOffset:l,isActive:r,isSplitLayout:m?.layout===3,musicRecordingId:Z,muteVideos:o,onEnded:d,onFlyoutOpen:u,onUpdateVideoInfo:c,ownerId:p,pageAspectRatio:g,pageHeight:h,pageIndex:y,pageWidth:_,pin:f,pinId:P,pinKey:null!=x?{type:"Legacy",data:x}:null,stillLoading:b,verticalOffset:C,videoPinProgress:w},`${m?.id??""}-${a.type??""}-${s}`)})});return v?(0,j.jsx)(nu.Z,{auxData:{story_pin_page_id:y},clientTrackingParams:a,component:0===y?227:228,shouldUseGrandparentId:!0,view:A,viewParameter:T,children:D()}):D()}var np=n(906498),nm=n(281106);function ng({height:e,isDenseView:a,rounding:n,width:i,color:t}){(0,k.useEffect)(()=>{(0,x.Z)("UnavailableIdeaPin","/app/packages/story-pin/Closeup/UnavailableIdeaPin.tsx")},[]);let l=(0,O.ZP)();return(0,j.jsx)(I.xu,{alignItems:"center",color:t||"default","data-test-id":"unavailable-pin",display:"flex",height:e,justifyContent:"center",overflow:"hidden",position:"relative",rounding:n,width:i,children:(0,j.jsxs)(I.kC,{alignItems:"center",direction:"column",children:[(0,j.jsx)(I.xu,{paddingY:a?2:4,children:(0,j.jsx)(I.JO,{accessibilityLabel:l._('Pin not available', 'story-pin.Closeup.UnavailableIdeaPin.icon.accessibilityLabel', 'Accessibility label on icon'),color:"default",icon:"alert",size:20})}),(0,j.jsx)(I.xv,{weight:"bold",children:l._('Unavailable', 'story-pin.Closeup.UnavailableIdeaPin.Unavailable', 'Text on an unavailable idea Pin that has been deleted')}),!a&&(0,j.jsx)(I.xu,{paddingY:1,children:(0,j.jsx)(I.xv,{children:l._('Removed by the creator', 'story-pin.Closeup.UnavailableIdeaPin.Removed', 'Text on an unavailable idea Pin explaining it has been removed by its creator')})})]})})}var nh=n(181663),ny=n(445698),n_=n(589357);let nf={backgroundImage:"linear-gradient(to bottom, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",paddingTop:"30px",top:0};function nx({onImageClick:e,isHovered:a,pin:n,shouldPadImage:i,trafficSource:t,viewParameter:l,isORBACProfileManager:r,handleMediaButtonClick:s}){let o;(0,k.useEffect)(()=>{(0,x.Z)("SIIPMediaContainer","/app/common/react/components/closeup/StaticImageIdeaPin/SIIPMediaContainer.tsx")},[]);let{originalImageUrl:d,imageSignature:u,link:c,isScenePin:p,disablePinTagButton:m,maxCloseupImageWidth:g,imageWithPreview:h}=(0,a$.Z)({pinKey:{type:"Legacy",data:n}}),y=(0,aZ.Z)(),{closeupWithinMasonryEnabled:_,peekCloseupEnabled:f,viewportSize:P,clientTrackingParams:S,showCloseupContentRight:v}=(0,X.x4)(),{isRTL:b}=(0,eL.B)(),C=(0,k.useRef)(null),{maxHeight:w,fiftyPercentHeight:A,fiftyPercentWidth:F}=(0,ev.Re)(),{maxHeight:L}=(0,aX.Z)({pinKey:{type:"Legacy",data:n}}),[R,K]=(0,k.useState)(!1),Z=(0,T.Z)({showProductDetailPage:!!n.is_eligible_for_pdp}),{group:M}=(0,np.Z)(),B="enabled_idea_pin"===M,{borderStyle:O}=(0,al.Z)({isSideBySide:v,isPadded:i,isRTL:b,closeupWithinMasonryEnabled:_,blendedUIEnabled:Z}),N=(0,aQ.Z)({isHiddenPin:n.is_hidden,isUnsafePin:n.is_unsafe}),{mainImage:z,srcSizes:V,srcSet:U}=(0,D.G)(),{domain:W="",id:G,story_pin_data:H}=n,$={carousel_slot_id:void 0,carousel_data_id:void 0,carousel_slot_index:void 0,commerce_data:void 0},Y=(0,E.Z)({type:"Legacy",data:n})();Y&&($.commerce_data=Y.commerce_data);let q=c||d||"",{data:J=[]}=(0,ep.Z)({name:"StoryPinTaggedProductsResource",options:{id:n.id},noCache:!0}),{pages:Q=[]}=H||{},ee=[5,6,2],ea=Q.filter(e=>{let a=e?.layout;return void 0!==a&&!ee.includes(a)||(e?.blocks??[]).some(e=>a9(e))}),{activePageIndex:en,captions:ei,currentPage:et,handleMute:el,handlePageChange:er,handlePause:es,handlePausePlay:eo,handlePlay:ed,handleUpdateVideoInfo:eu,handleVideoEnd:ec,handleVideoScrubbingNewPage:em,handleWatchAgain:eg,isActive:ey,isSeeking:e_,mute:ef,progressInfo:ex,showEndCard:ek}=function({pages:e,viewType:a,viewParameter:n,pinId:i}){let{clearSeekTime:t}=(0,ni.RC)(),{setIdeaPinActivePage:l}=(0,nr.Ut)(),[r,s]=(0,k.useState)(0),[o,d]=(0,k.useState)(!0),[u,c]=(0,k.useState)(!0),[p,m]=(0,k.useState)(!1),[g,h]=(0,k.useState)(null),y=(0,ac.Z)(),_=e[r],f=(0,nn.g)(),x=(0,na.A)(),P=(0,k.useRef)(null),{blocks:[S]=[null]}=ne({storyPinBlocks:_?.blocks||[],blocksToRender:[a7.h8.VIDEO]}),{seekTimes:v}=(0,ni.Hx)(),b=v&&v[i],C=S?.type===a7.h8.VIDEO&&S?.video,I=(0,eL.B)().locale.toLowerCase(),w=C&&(C?.video_list?.V_720P?.captions_urls||C?.video_list?.V_HLSV3_MOBILE?.captions_urls)||{},T=I&&w[I]||Object.values(w)[0]||"",A=(0,k.useCallback)(i=>{(0,ay.sX)("startNewPwt"),x&&x.abort("startNewPwt"),f&&(f.abort("startNewPwt"),f.start(),f.addBinaryAnnotation("page.current.index",i,"I16"),f.addBinaryAnnotation("page.count",e.length,"I16"),f.addBinaryAnnotation("view.type",a,"I32"),f.addBinaryAnnotation("view.parameter",n,"I32"))},[e.length,x,f,n,a]),F=(0,k.useCallback)(e=>{e&&e instanceof nt.B7&&(e.clear(),e=null)},[]),E=(0,k.useCallback)(a=>{F(P.current),!C&&e.length>1&&(P.current=new nt.B7(e=>{h({currentTime:e<1?e:1,duration:1})},()=>{a<e.length-1?(F(P.current),L(a+1)):(m(!0),d(!1))},eh.oN))},[e]),j=(0,k.useCallback)(e=>{h({currentTime:0,duration:1}),E(e)},[E]);(0,e4.Z)(()=>(x&&(x.addBinaryAnnotation("page.current.index",r,"I16"),x.addBinaryAnnotation("page.count",e.length,"I16"),x.addBinaryAnnotation("view.type",a,"I32"),x.addBinaryAnnotation("view.parameter",n,"I32")),(0,ay.rt)("page.current.index",r,"I16"),(0,ay.rt)("page.count",e.length,"I16"),(0,ay.rt)("view.type",a,"I32"),(0,ay.rt)("view.parameter",n,"I32"),j(r),()=>{P.current&&P.current instanceof nt.B7&&P.current.clear()}));let L=(0,k.useCallback)(e=>{o||d(!0),p&&m(!1),j(e),e!==r&&t(),s(e),l(e),A(e)},[r,t,j,o,l,p,A]);(0,k.useEffect)(()=>{if(p&&m(!1),P.current&&b){let e=P.current;e.pause(),e.remaining=eh.oN-b*nl.gJ,h({currentTime:b/eh.P6,duration:1})}},[b]);let R=()=>{d(!1),P.current&&P.current.pause(),y({event_type:9324,view_type:a,view_parameter:n,component:ns(p,r),object_id_str:i,aux_data:{story_pin_page_id:r}})},K=()=>{if(d(!0),P.current){let e=P.current;b&&b>0&&t(),e.resume()}else g||j(r);m(!1),y({event_type:9323,view_type:a,view_parameter:n,component:ns(p,r),object_id_str:i,aux_data:{story_pin_page_id:r}})};return{activePageIndex:r,captions:T,currentPage:_,handleMute:()=>{c(e=>!e)},handlePageChange:L,handlePause:R,handlePausePlay:()=>{p||(o?R():K())},handlePlay:K,handleUpdateVideoInfo:e=>{h({currentTime:e?.currentTime??0,duration:e?.duration??1})},handleVideoEnd:t=>{t===e.length-1&&(m(!0),d(!1),l(0)),t===r&&r<e.length-1&&(L(r+1),y({event_type:101,view_type:a,view_parameter:n,component:ns(p,r),element:12261,object_id_str:i}))},handleVideoScrubbingNewPage:e=>{p&&m(!1),j(e),s(e),l(e),A(e)},handleWatchAgain:()=>{L(0)},isActive:o,isSeeking:!!b,mute:u,progressInfo:g,setMute:c,showEndCard:p}}({pages:ea,viewType:3,viewParameter:l,pinId:G}),{blocks:[eP]=[null]}=ne({storyPinBlocks:et?.blocks||[],blocksToRender:[a7.h8.IMAGE,a7.h8.VIDEO]}),eS=eP?.type===a7.h8.VIDEO,eb=eS||ea.length>1,{fontsLoaded:eC,mediaDataReceived:eI}=(0,ny.tq)({hasPin:!!n,pages:Q}),{showCloseupShopDomainLinkButton:ew,showDebugSignalsFeedbackButton:eT,showDomainLink:eA,showDomainLinkButton:eF,showFlashlightButton:ej,showPinTagButton:eK}=(0,aH.Z)({disablePinTagButton:m,domain:W,hasMetTrustAndSafetyCheck:N,isEmployee:y.isAuth&&!!y.isEmployee,isScenePin:p,navLink:q,pinKey:{type:"Legacy",data:n},isORBACProfileManager:r}),{containerHeight:eZ,containerWidth:eD,horizontalOffset:eM,letterBoxAspectRatio:eB,letterBoxedHeight:eO,letterBoxedWidth:eN,verticalOffset:ez}=(0,ao.ZP)({mainImage:z,maxCloseupImageWidth:g,pinKey:{type:"Legacy",data:n}}),{height:eV,width:eU}=z;if(n.story_pin_data?.is_deleted)return(0,j.jsx)(ng,{color:"secondary",height:640,rounding:4,width:508});let eW=!!h?.mainImage?.src||!!h?.previewImage?.src,eG=eP?.type===a7.h8.IMAGE&&eW;return _?o=L:f&&(o="sm"===P?A:w),(0,j.jsx)(I.xu,{alignSelf:_?"center":void 0,dangerouslySetInlineStyle:{__style:{...O,aspectRatio:_?(0,ao.GJ)(eU,eV):void 0,background:ev.yc}},"data-test-id":"closeup-body-image-container",height:_?"100%":eZ,maxHeight:Z?void 0:o,maxWidth:F,onMouseEnter:()=>{eb&&K(!0)},onMouseLeave:()=>{K(!1)},position:"relative",width:_?"100%":eD,children:et||B?(0,j.jsxs)(k.Fragment,{children:[!eb&&(0,j.jsx)(aG,{auxData:$,domain:W,handleMediaButtonClick:s,imageSignature:u,isHovered:a,link:q,maxCloseupImageWidth:g,mediaViewerExpandButtonRef:C,onImageClick:e,pin:n,shouldPadImage:i,showCloseupShopDomainLinkButton:ew,showDebugSignalsFeedbackButton:eT,showDomainLink:eA,showDomainLinkButton:eF,showFlashlightButton:ej&&eI,showPinTagButton:eK,trafficSource:t,viewParameter:l}),(R||!ey)&&(0,j.jsxs)(I.xu,{children:[(0,j.jsx)(I.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...n_.Ul,flexDirection:"column-reverse"}},display:"flex",height:n_.hy,paddingX:6,position:"absolute",width:"100%",zIndex:a7.Gf,children:(0,j.jsx)(nh.Z,{activePageIndex:en,captionsUrl:ei,handleMute:el,handlePause:es,handlePausePlay:eo,handlePlay:ed,handleVideoScrubbingNewPage:em,handleWatchAgain:eg,inMilliseconds:!0,isMuted:ef,isPanelOpen:!0,isPlaying:ey,isStoryPin:!0,onPageSelect:e=>er(e),pageCount:ea.length,pages:ea,pinId:G,progressInfo:ex,showEndCard:ek,showVideoControls:!0,viewParameter:156})}),(0,j.jsx)(I.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{...nf}},"data-test-id":"music-attribution",display:"flex",justifyContent:"center",overflow:"hidden",paddingY:5,position:"absolute",width:"100%",zIndex:a7.Gf,children:(0,j.jsx)(an.Z,{handlePause:es,handlePlay:ed,musicAttributions:et?.music_attributions,shouldMute:et?.should_mute,showEndCard:ek})})]}),B&&eG?(0,j.jsx)(I.xu,{dangerouslySetInlineStyle:{__style:{display:"grid",height:"100%",left:"0%",top:"0%",width:"100%"}},"data-test-id":"story-pin-image-block",overflow:"hidden",position:"absolute",children:(0,j.jsx)(aw,{borderStyle:O,dominantColor:ev.yc,imageWithPreview:h,sizes:V,srcSet:U})}):(0,j.jsxs)(I.iP,{disabled:!R||ek,fullHeight:!0,onTap:eo,children:[(0,j.jsx)(nc,{activePageIndex:en,clientTrackingParams:S,customEndCard:!0,fontsLoaded:eC,horizontalOffset:eM,isActive:ey,muteVideos:ef,onEnded:ec,onUpdateVideoInfo:eu,ownerId:n.native_creator?.id??"",page:et,pageAspectRatio:eB,pageHeight:eO,pageIndex:en,pageWidth:eN,pin:n,pinId:G,productPins:J,shouldLogTimeSpent:!0,stillLoading:!eI,verticalOffset:ez,videoPinProgress:ex,viewParameter:l,viewType:3}),!ek&&!e_&&ea.length>1&&!eS&&(0,j.jsx)(nm.Z,{playing:ey})]}),ek&&n.native_creator&&(0,j.jsx)(eE.Z,{name:"SIIPMediaContainer_VideoEndCard",children:(0,j.jsx)(eR.Z,{children:(0,j.jsx)(I.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,zIndex:a7.s5,children:(0,j.jsx)(no.default,{clientTrackingParams:n.trackingParams||n.tracking_params,imageSrc:n.image_url??"",pinDescription:n.description??"",pinId:n.id,rounded:!1,watchAgain:eg})})})})]}):et?null:(0,j.jsx)(aw,{dominantColor:ev.yc,fit:"contain",imageWithPreview:h})})}let nk=e=>{(0,k.useEffect)(()=>{(0,x.Z)("ImageContent","/app/common/react/components/closeup/CloseupBody/VisualContent/ImageContent.tsx")},[]);let{isHovered:a,onImageClick:n,pin:i,shouldPadImage:t,trafficSource:l,viewParameter:r,isORBACProfileManager:s,handleMediaButtonClick:o,mediaViewerButtonRef:d}=e,{isEligibleForStaticImageIdeaPin:u}=eQ(i.story_pin_data_id),c=u?(0,j.jsx)(nx,{handleMediaButtonClick:o,isHovered:a,isORBACProfileManager:s,onImageClick:n,pin:i,shouldPadImage:t,trafficSource:l,viewParameter:r}):(0,j.jsx)(a4,{handleMediaButtonClick:o,isHovered:a,isORBACProfileManager:s,mediaViewerExpandButtonRef:d,onImageClick:n,pin:i,shouldPadImage:t,trafficSource:l,viewParameter:r});return t?(0,j.jsx)(ai,{children:c}):c};var nP=n(935410),nS=n(294851),nv=n(219057),nb=n(298638);let nC=(0,k.lazy)(()=>n.e("74993").then(n.bind(n,613047))),nI=({children:e,name:a,verticalOffset:n=0,horizontalOffset:i=0})=>(0,j.jsx)(I.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none",padding:`${n}px ${i}px`}},"data-test-id":`experimental-closeup-image-overlay-layer-${a}`,left:!0,position:"absolute",right:!0,top:!0,children:e}),nw=(void 0!==c||(c=n(971203)).hash&&"89029511c11617e1150976d1002228db"!==c.hash&&console.error("The definition of 'VideoContent_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),c),nT=({closeupIsFirstPageInHistoryStack:e,customThumbnail:a,imageContainerRef:n,isWideVideo:i,mediaViewerButtonRef:t,pin:l,pinKey:r,shouldPadImage:s,flyoutShareProps:o,video:d,isORBACProfileManager:u,handleMediaButtonClick:c})=>{(0,k.useEffect)(()=>{(0,x.Z)("VideoContent","/app/common/react/components/closeup/CloseupBody/VisualContent/VideoContent.tsx")},[]);let p=(0,A.Z)(nw,r),m=!!l.promoter&&!l.is_downstream_promotion,g=m&&!l.is_eligible_for_web_closeup,{access:h,should_mute:y}=l||{},_=!!h&&h.includes("tag")||u,{closeupWithinMasonryEnabled:f}=(0,X.x4)(),{closeupBodyWidth:P}=(0,aD.K)(),{checkExperiment:S}=(0,e_.Z)(),v=(0,nv.Z)(),{fiftyPercentWidth:b}=(0,ev.Re)(),{maxHeight:C}=(0,aX.Z)({pinKey:p}),{isCloseupMediaViewerEnabled:w}=(0,aK.Z)({isShufflePin:!!l?.shuffle}),T=Math.max((P??1)/("number"==typeof C?C:1),(d.hls?.width??d?.mp4?.width??0)/(d.hls?.height??d?.mp4?.height??0)),F=f?P:eB.Gg-eB.d2,E=(0,k.useMemo)(()=>w&&S("media_viewer_videos").anyEnabled,[w,S]),L=(0,j.jsxs)(nb.Z,{isVideo:!0,isWideVideo:i,shouldPadImage:s,styleOverrides:s&&!f?{maxWidth:{maxWidth:F},minWidth:{minWidth:F},height:{},borderRadius:16}:{},variant:"default",children:[(0,j.jsx)(I.xu,{ref:n,"data-test-id":"closeup-video-with-visibility",maxHeight:C,maxWidth:b,width:"100%",children:(0,j.jsx)(nS.Z,{aspectRatio:f?T:void 0,autoplay:!v,customThumbnail:a,flyoutShareProps:o,isPromoted:m,loop:g,muted:y||e,objectFit:f?"contain":void 0,pinId:l.id,pinKey:p,shouldMute:y,variant:"default",video:d})}),_&&(0,j.jsx)(nI,{name:"tag-button",children:(0,j.jsx)(eE.Z,{name:"SafeSuspense_VideoContent_CloseupTagButton",children:(0,j.jsx)(eR.Z,{children:(0,j.jsx)(aF.Z,{children:(0,j.jsx)(nC,{pin:l})})})})}),E&&(0,j.jsxs)(nI,{name:"media-viewer-button",verticalOffset:136,children:[(0,j.jsx)(I.xu,{height:"100%"}),(0,j.jsx)(I.xu,{display:"flex",justifyContent:"end",paddingX:aA.Z,right:!0,children:(0,j.jsx)(eE.Z,{name:"SafeSuspense_CloseupImageOverlay_MediaViewerButton",children:(0,j.jsx)(eR.Z,{children:(0,j.jsx)(aF.Z,{children:(0,j.jsx)(nP.default,{ref:t,animateOnMount:!1,dataTestId:"media-viewer-button",icon:"maximize",imageSignature:l.image_signature,onTap:c,variant:"view-larger"})})})})})]})]});return s?(0,j.jsx)(ai,{children:L}):L},nA=e=>{(0,k.useEffect)(()=>{(0,x.Z)("VisualContent","/app/common/react/components/closeup/CloseupBody/VisualContent/VisualContent.tsx")},[]);let{clientTrackingParams:a,closeupIsFirstPageInHistoryStack:n,imageContainerRef:i,flyoutShareProps:t,isWideVideo:l,pin:r,shouldPadImage:s,trafficSource:o,isORBACProfileManager:d,isHovered:u,mediaViewerButtonRef:c,onImageClick:p,viewParameter:m,handleMediaButtonClick:g}=e,{video:h,imgSrc:y,isEmbeddedVideo:_,isYoutubePin:f}=(0,D.G)(),{closeupWithinMasonryEnabled:P}=(0,X.x4)(),S=(0,T.Z)({showProductDetailPage:!!r.is_eligible_for_pdp}),{checkExperiment:v}=(0,e_.Z)(),b=(0,j.jsx)(aJ.Z,{id:"ContextMenuClickthroughLogging",children:(0,j.jsx)(eF.Z,{clientTrackingParams:a,hovered:u,pinKey:{type:"Legacy",data:r},viewType:3,children:(0,j.jsx)(aJ.Z,{id:"ImageContent",children:(0,j.jsx)(nk,{handleMediaButtonClick:g,isHovered:u,isORBACProfileManager:d,mediaViewerButtonRef:c,onImageClick:p,pin:r,shouldPadImage:s,trafficSource:o,viewParameter:m})})})});h&&(b=(0,j.jsx)(aJ.Z,{id:"VideoContent",children:(0,j.jsx)(nT,{closeupIsFirstPageInHistoryStack:n,customThumbnail:y,flyoutShareProps:t,handleMediaButtonClick:g,imageContainerRef:i,isORBACProfileManager:d,isWideVideo:l,mediaViewerButtonRef:c,pin:r,pinKey:{type:"Legacy",data:r},shouldPadImage:s,video:h})}));let C="50%";if(_){let e=r.attribution&&(r.attribution.author_name||r.attribution.url)?r.attribution.provider_name:null;"soundcloud"===e?C="30%":"vin"===e&&(C="100%"),b=(0,j.jsx)(aJ.Z,{id:"EmbeddedVideoContent",children:(0,j.jsx)(ar,{embedUrl:r.embed?.src,isWideVideo:l,paddingBottom:C,shouldPadImage:s})})}let w=v("web_closeup_youtube_player").group;if(f&&["enabled","enabled_autoplay","enabled_delay","employees"].includes(w)){let e=(0,eh.Mt)(r.link),a=["enabled_autoplay","enabled_delay"].includes(w),n=`https://www.youtube.com/embed/${e}?autoplay=${+!!a}&mute=${+!!a}&fs=0`;b=(0,j.jsx)(aJ.Z,{id:"EmbeddedVideoContent-2",children:(0,j.jsx)(ar,{embedUrl:n,isWideVideo:l,paddingBottom:C,shouldPadImage:s})})}let A=(0,E.Z)({type:"Legacy",data:r}),F=r.is_eligible_for_pdp?A():void 0;return(0,j.jsx)(nu.Z,{auxData:F,clientTrackingParams:a,component:85,viewParameter:m,children:(0,j.jsx)(I.xu,{dangerouslySetInlineStyle:{__style:{overflow:P?"clip":void 0}},rounding:P&&!S?4:void 0,children:b})})};var nF=n(555242),nE=n(390843),nj=n(448505);let nL=(0,k.lazy)(()=>n.e("18364").then(n.bind(n,206837))),nR=(0,k.lazy)(()=>n.e("71002").then(n.bind(n,154709)));function nK({handleImageClickThrough:e,imageContainerRef:a,isStoryPin:n,isWideVideo:i,onSaveButtonClick:t,pin:l,setClickthroughComponentForSurvey:r,showRepinOnInitialRender:s,trafficSource:o,viewParameter:d,viewParameterType:u,visualContentContainerRef:c={current:null},isDeletedStoryPin:p=!1,isOnSecretBoard:m=!1}){(0,k.useEffect)(()=>{(0,x.Z)("VisualContentContainer","/app/common/react/components/closeup/CloseupBody/VisualContent/VisualContentContainer.tsx")},[]);let g=(0,k.useRef)(null),[h,y]=(0,k.useState)(!1),{previous:_}=(0,nE.ou)(),f=(0,X.x4)(),P=(0,nj.Z)(),S=(0,D.G)(),v=(0,aZ.Z)(),{getViewParameter:b}=eS({type:"Legacy",data:l}),C=(0,ac.Z)(),w=0===_.length,{imgSrc:A,video:F}=S,{isCloseupMediaViewerEnabled:E}=(0,aK.Z)({isShufflePin:!!l?.shuffle}),{executeWithViewTransition:L}=(0,nF.Z)({_enableViewTransitions:E}),R=(0,T.Z)({showProductDetailPage:!!l.is_eligible_for_pdp}),{anyEnabled:K}=(0,np.Z)(),Z=()=>{y(e=>!e)},M=()=>{y(!1)},B=e=>({gridDescription:l.description,imageSrc:e,isFlyoutOpen:h,onFlyoutDismiss:M,onToggleFlyout:Z,pinId:l.id}),{clientTrackingParams:O,paneWidth:N,closeupWithinMasonryEnabled:z,peekCloseupEnabled:V,setIsCloseupMediaViewerOpen:U}=f,{fiftyPercentWidth:W}=(0,ev.Re)(),{maxHeight:G}=(0,aX.Z)({pinKey:{type:"Legacy",data:l}}),H=(0,k.useCallback)(()=>{e&&e(),r("imageContainer")},[e,r]);if(n)return null;let{domain:$,music_attributions:Y,pinner:q,should_mute:J}=l,Q=!!$&&!!l.link&&!l.link.startsWith("https://i.pinimg.com"),ee=()=>{C({aux_data:{image_signature:l.image_signature},component:128,event_type:101,element:E?15864:15865,view_type:3}),L(()=>{U(!0)})},ea=(0,eM.q6)(v,q?.id,P);return(0,j.jsxs)(I.xu,{ref:c,dangerouslySetInlineStyle:{__style:{containerType:K?"inline-size":"normal",display:V||R?"flex":"block",height:V||R?"100%":void 0}},"data-test-id":"visual-content-container",children:[(0,j.jsx)(aJ.Z,{id:"ElementUIStateController",children:(0,j.jsx)(eD.q,{children:({hovered:e,onMouseEnter:n,onMouseLeave:t})=>(0,j.jsxs)(I.xu,{alignSelf:V||R?"center":void 0,direction:z?"column":void 0,display:"flex",justifyContent:"center",maxHeight:R?void 0:G,maxWidth:W,onMouseEnter:n,onMouseLeave:t,position:"relative",width:"100%",children:[F&&Y?.length!==0&&(0,j.jsx)(I.xu,{alignItems:"center","data-test-id":"music-attribution",display:"flex",justifyContent:"center",marginTop:6,overflow:"hidden",paddingY:8,position:"absolute",top:!0,width:N,zIndex:a7.Ls,children:(0,j.jsx)(aJ.Z,{id:"MusicAttribution",children:(0,j.jsx)(an.Z,{musicAttributions:Y,shouldMute:!!J})})}),(0,j.jsx)(aJ.Z,{id:"VisualContent",children:(0,j.jsx)(nA,{clientTrackingParams:O,closeupIsFirstPageInHistoryStack:w,flyoutShareProps:B(A),handleMediaButtonClick:ee,imageContainerRef:a,isHovered:e,isORBACProfileManager:ea,isWideVideo:i,mediaViewerButtonRef:g,onImageClick:H,pin:l,shouldPadImage:!1,showDomainLink:Q,trafficSource:o,viewParameter:b(u)})}),l&&l.showFeedback&&(0,j.jsx)(aJ.Z,{id:"VisualContentObscuredOverlay",children:(0,j.jsx)(eR.Z,{children:(0,j.jsx)(nL,{pin:l})})})]})})}),(0,j.jsx)(I.mh,{zIndex:a1.lI,children:(0,j.jsx)(aJ.Z,{id:"ExperienceTooltip",children:(0,j.jsx)(a0.Qp,{anchor:c.current,experienceIds:[506204],flyoutSize:"md",forceDirection:!z,idealDirection:z?"right":"down",placementId:12,showCaret:!0,textWeight:"normal"})})}),E&&(0,j.jsx)(eE.Z,{name:"SafeSuspense_CloseupImageOverlay_MediaViewer",children:(0,j.jsx)(aJ.Z,{id:"CloseupMediaViewer",children:(0,j.jsx)(eR.Z,{children:(0,j.jsx)(nR,{flyoutShareProps:B(A),isDeletedStoryPin:p,isOnSecretBoard:m,onClose:({isExitButton:e,isClick:a})=>{C({aux_data:{image_signature:l.image_signature},component:128,event_type:a?101:97,element:e?15867:15866,view_type:3}),L(()=>{U(!1),g.current?.focus()})},onImageClick:()=>{e&&e()},onSaveButtonClick:t,pin:l,rounding:24,showRepinOnInitialRender:s,trafficSource:o,viewParameter:d})})})})]})}var nZ=n(289032);let nD={__style:{marginBottom:"0",marginTop:"0",maxWidth:eB.KP,minWidth:eB.Gg}},nM=(0,k.memo)(function({children:e,isWideVideo:a}){let{showCloseupContentRight:n,maxWidth:i,paneWidth:t,peekCloseupEnabled:l,closeupWithinMasonryEnabled:r,viewportSize:s}=(0,X.x4)(),{maxHeight:o}=(0,ev.Re)(),{mainImage:d}=(0,D.G)(),{peekRedesignFastFollowsEnabled:u}=(0,eC.Z)(d),c=n||a?i:t;return c=r&&"sm"!==s||l?void 0:c,r?(0,j.jsx)(I.xu,{"data-test-id":"closeup-lego-container",height:"100%",children:e}):(0,j.jsx)(I.xu,{"data-test-id":"closeup-lego-container",display:"flex",height:"100%",maxHeight:u?void 0:o,maxWidth:c,position:"relative",rounding:8,width:"100%",children:(0,j.jsx)("div",{onClick:e=>{e.stopPropagation()},style:{display:"flex"},children:(0,j.jsx)(I.xu,{dangerouslySetInlineStyle:{__style:{cursor:"auto"}},display:"flex",children:(0,j.jsx)(I.xu,{dangerouslySetInlineStyle:a?nD:{},display:"flex",children:e})})})})});function nB(e){return(0,k.useEffect)(()=>{(0,x.Z)("ResponsiveBodyContainer","/app/www/closeup/desktop/responsiveContainers/ResponsiveBodyContainer.tsx")},[]),(0,j.jsx)(nM,{...e})}var nO=n(327387),nN=n(477464),nz=n(603316);let nV=(0,ez.Z)(()=>Promise.all([n.e("86934"),n.e("9767")]).then(n.bind(n,347353)),{ssr:!1},e=>347353,"ChangeBoardModalCommon",e=>["86934","9767"]),nU=(0,ez.Z)(()=>Promise.all([n.e("44880"),n.e("55759")]).then(n.bind(n,523226)),void 0,e=>523226,"CloseupActionBarCommon",e=>["44880","55759"]),nW=(0,ez.Z)(()=>n.e("62220").then(n.bind(n,809702)),void 0,e=>809702,"app-common-react-components-closeup-LeadGen-LeadGenCloseupBodyContent",e=>["62220"]),nG=(0,ez.Z)(()=>n.e("30644").then(n.bind(n,596423)),void 0,e=>596423,"app-common-react-components-closeup-CloseupBody-CloseupInlineCommentComposer",e=>["30644"]),nH=(0,k.lazy)(()=>n.e("90657").then(n.bind(n,156020))),n$=({children:e,metadataContainerRef:a,closeupWithinMasonryEnabled:n})=>n?(0,j.jsx)(I.xu,{ref:a,width:"100%",children:e}):(0,j.jsx)(k.Fragment,{children:e}),nY=(0,k.memo)(({children:e,clientTrackingParams:a,pinKey:n,pinImageUrl:i,closeupNavigationType:t})=>{(0,k.useEffect)(()=>{(0,x.Z)("CloseupMainPinImpression","/app/common/react/components/closeup/CloseupBody/CloseupMainPinImpression.tsx")},[]);let l=(0,A.Z)(L,n),r=(0,T.Z)({showProductDetailPage:!!l.isEligibleForPdp}),s=(0,k.useMemo)(()=>l,[l]),o=(0,E.Z)(s),{entityId:d}=l,u=(0,k.useMemo)(()=>o(),[o]),c=(0,k.useMemo)(()=>l.isEligibleForPdp?u:{},[u,l.isEligibleForPdp]),p=(0,k.useMemo)(()=>({imageURL:i,clientTrackingParams:a}),[a,i]),m=(0,k.useMemo)(()=>({pin_id:d}),[d]);return(0,j.jsx)(F.Fw,{clientTrackingParams:a,closeupImpressionType:13,closeupNavigationType:t,componentType:85,contextLogData:c,impressionAuxFields:p,impressionType:"Pin",loggingId:d,slotIndex:-1,viewData:m,viewType:3,children:({impressionTrackerRef:a})=>(0,j.jsx)(I.xu,{ref:a,"data-test-id":"closeup-visual-container",width:r?"100%":void 0,children:e})})}),nX=(0,k.memo)(nK);function nq({isWideVideo:e,didShortClickThrough:a,webLinkSurveyState:{webLinkSurveyRef:n,imageContainerRef:i,legoLinkClickthroughAnchorRef:t,maybeLinkRef:l},pin:r,outerBodyStyle:s,inCommentsImprovedDropdownExp:o,inCommentsPopoverExp:d,isEligibleForPinReactions:u,isStoryPin:c,trafficSource:p,visualContentContainer:m,outerPaddingSize:g,isInStream:h,metadataContainerRef:y,onClickThrough:_,viewParameter:f,metadata:v,viewer:b,orbacSubjectId:C,setIsLoadingNewlyCreatedComment:w=()=>{},descriptionContentMaxHeight:A,marginBottom:F=0,isDeletedStoryPin:E,onSaveButtonClick:L,showRepinOnInitialRender:R,goBack:K,onUpdate:Z,routePush:D,closeupActionBarMaxWidth:M,visualContentContainerRef:B,showPDPComments:N,actionBarContainerRef:z,blendedUIScrollContainerRef:V}){let U;(0,k.useEffect)(()=>{(0,x.Z)("CloseupBody","/app/common/react/components/closeup/CloseupBody/CloseupBody.tsx")},[]);let{descriptionPaneWidth:W,viewportSize:G,clientTrackingParams:H,closeupWithinMasonryEnabled:$,peekCloseupEnabled:Y,showCloseupContentRight:q}=(0,X.x4)(),J=(0,P.v9)(({changeBoardFromToast:e})=>e)||{},Q=(0,e6.F)(r.id),{makeDetailsArgs:ee}=eS({type:"Legacy",data:r}),{showCanonicalComments:ea}=ee(!!E),en=Q?.data&&0!==Q.data.length,ei=(0,O.ZP)(),et=(0,S.TH)(),el=(0,S.ur)(),er=(0,k.useRef)(null),{setCloseupBodyWidth:es}=(0,aD.K)(),eo=(0,k.useCallback)(()=>{let e=y.current;e&&es(a=>{let n=e.offsetWidth;return a!==n?n:a})},[y,es]);(0,a2.Z)(eo,y);let ed=(0,nj.Z)(),{is_eligible_for_aggregated_comments:eu,pinner:ec}=r,ep=(0,eM.q6)(b,ec?.id,ed),em=r.comments_disabled?0:(r.aggregated_pin_data?.comment_count??0)+(r.aggregated_pin_data?.did_it_data?.images_count??0),eg=!(ep&&!C)&&(!r.is_eligible_for_pdp||!!N)&&!r.comments_disabled&&!!eu&&!(o||d),eh=!!r.promoted_is_lead_ad,ey=0!==Object.keys(r).length,e_=B?.current?.clientHeight||0,[ef,ex]=(0,k.useState)(!0);(0,k.useEffect)(()=>{let e=(0,nZ.Z)(()=>{$&&ex(0===window.scrollY)},50);return window.addEventListener("scroll",e,{passive:!0}),()=>{window.removeEventListener("scroll",e)}},[$]),(0,e4.Z)(()=>{r.closeup_attribution?.id&&(0,nz.nP)("web.closeup.has_attribution.yes"),(0,nz.nP)("web.closeup.has_attribution.no")});let ek=(0,k.useMemo)(()=>(0,nN.Z)(el,et.search,et.key,p),[el,et.search,et.key,p]),eP=(0,k.useMemo)(()=>(r.images&&r.images["236x"]?.url)??"",[r.images]),eb=(0,k.useMemo)(()=>({type:"Legacy",data:r}),[r]),eC=(0,j.jsx)(aJ.Z,{id:"CloseupMainPinImpressionAuthDesktop",children:(0,j.jsx)(nY,{clientTrackingParams:H,closeupNavigationType:ek,pinImageUrl:eP,pinKey:eb,children:m})}),{fiftyPercentWidth:eI,fiftyPercentHeight:ew}=(0,ev.Re)(),eT=e&&!$?eB.KP:void 0;eT=Y?eI:eT;let eA=(c||$)&&!Y?void 0:A;Y&&(eA="sm"===G?ew:Math.max(ev.ql,B?.current?.clientHeight??0));let eF={...s,boxShadow:"unset",border:ev.tc,overflow:"clip"},ej=o?ea&&!r.comments_disabled:!d,eL=$&&g&&!ej?g:0,eK=(0,T.Z)({showProductDetailPage:!!r.is_eligible_for_pdp}),eZ="sm"===G,{maxHeight:eD}=aY({showProductDetailPage:!!r.is_eligible_for_pdp,skipAspectRatioCheck:!0}),eO=(0,k.useMemo)(()=>(0,j.jsx)(aJ.Z,{id:"CloseupInlineCommentComposer",children:(0,j.jsx)(nG,{aggregatedPinDataId:r.aggregated_pin_data?.id,closeupAttributionId:r.closeup_attribution?.id,commentCount:em,disablePhotoCommentSelection:!!r.done_by_me,inCommentsImprovedDropdownExp:o,isEligibleForPinReactions:u,isPDP:r.is_eligible_for_pdp,orbacSubjectId:C,pinId:r.id,privatePin:"secret"===r.privacy,reactionByMe:r.reaction_by_me||0,reactionCounts:r.reaction_counts,setIsLoadingNewlyCreatedComment:w,showCommentComposer:eg,showReactBackground:!$,storyPinDataId:r.story_pin_data_id,viewParameter:f})}),[r.aggregated_pin_data?.id,r.closeup_attribution?.id,em,r.done_by_me,o,u,r.is_eligible_for_pdp,C,r.id,r.privacy,r.reaction_by_me,r.reaction_counts,w,eg,$,r.story_pin_data_id,f]),eN=(0,k.useMemo)(()=>(!$||eK)&&eg?q?(0,j.jsx)(I.Le,{bottom:0,children:eO}):eO:null,[$,eK,eg,q,eO]);return U=eK&&!eZ?"100%":e||$?void 0:W,(0,j.jsx)(k.Fragment,{children:(0,j.jsxs)(I.xu,{height:"100%",marginBottom:F,position:"relative",width:"100%",children:[(0,j.jsx)(nB,{isWideVideo:e,children:(0,j.jsxs)(I.xu,{display:$?void 0:"flex",position:"relative",children:[!a&&(0,j.jsx)(eR.Z,{children:(0,j.jsx)(aJ.Z,{id:"WebLinkSurvey",children:(0,j.jsx)(nH,{ref:n,imageContainerRef:i,legoLinkClickthroughAnchorRef:t,maybeLinkRef:l,pin:{aggregatedPinData:r.aggregated_pin_data&&{isShopTheLook:r.aggregated_pin_data.is_shop_the_look},board:r.board&&{entityId:r.board.id,owner:r.board.owner&&{entityId:r.board.owner.id??""}},entityId:r.id,imageSignature:r.image_signature,isDownstreamPromotion:r.is_downstream_promotion,isPromoted:r.is_promoted,link:r.link,recommendationReason:r.recommendation_reason&&{reason:r.recommendation_reason.reason}}})})}),(0,j.jsx)(I.xu,{color:ey?"default":"transparent",dangerouslySetInlineStyle:{__style:{...eF}},"data-test-id":"closeup-body-style",display:"flex",paddingX:$&&!eK?4:void 0,position:"relative",children:(0,j.jsx)(n$,{closeupWithinMasonryEnabled:$,metadataContainerRef:y,children:(0,j.jsx)(I.kC,{alignItems:"stretch",height:$?"100%":void 0,justifyContent:"start",children:(0,j.jsx)(nO.Z,{children:ey?(0,j.jsx)(k.Fragment,{children:r.promoted_is_lead_ad?(0,j.jsx)(aJ.Z,{id:"LeadGenCloseupBodyContent",children:(0,j.jsx)(nW,{clientTrackingParams:H,pin:r,data:!!r,goBack:K,onUpdate:Z,viewParameter:f,onSaveButtonClick:L,showRepinOnInitialRender:R,actionBarContainerRef:z,trafficSource:p,onClickThrough:_,isStoryPin:c,descriptionPaneWidth:W,metadataContainerRef:y,visualContentContainer:m,visualContentContainerHeight:e_,showLeadPinStdBeta:eh})}):(0,j.jsxs)(k.Fragment,{children:[(0,j.jsxs)(I.xu,{alignContent:"center",alignItems:"stretch",alignSelf:"center",dangerouslySetInlineStyle:{__style:eK?{overflowY:"auto",overflowX:"hidden"}:{}},direction:"column",display:"flex",justifyContent:"start",maxHeight:eD,width:"100%",children:[!eK&&$&&(0,j.jsx)(I.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{...!ef?eB.fF:{},borderTop:ef?void 0:ev.tc,position:"sticky",top:"80px"}},"data-test-id":"closeup-action-bar",display:"flex",height:"64px",justifyContent:"center",marginEnd:-4,marginStart:-4,overflow:"visible",paddingX:4,zIndex:a1.$8,children:(0,j.jsx)(aJ.Z,{id:"CloseupActionBar",children:(0,j.jsx)(nU,{actionBarContainerRef:z,goBack:K,gridDescription:r.description??"",inCommentsImprovedDropdownExp:o,inCommentsPopoverExp:d,isDeletedStoryPin:!!E,isEligibleForAggregatedComments:!!eu,isEligibleForPinReactions:u,isOnSecretBoard:!1,isStoryPin:c,onEditSubmit:Z,onSaveButtonClick:L,outerPaddingSize:g,pin:r,routePush:D,scrollContainerRef:V?.current||y.current,showRepinOnInitialRender:R,viewParameter:f})})}),eC]}),(0,j.jsx)(I.xu,{dangerouslySetInlineStyle:{__style:{containerType:eK&&q?"size":void 0,overflow:Y&&eZ?"scroll":void 0}},"data-test-id":"description-content-container",direction:"column",display:"flex",flex:"grow",height:eK&&eZ?void 0:"100%",maxHeight:eK?eB.Id:eA,maxWidth:eT,minHeight:eK&&!eZ?eB.dm:void 0,paddingX:eK?4:void 0,width:U,children:r?(0,j.jsxs)(k.Fragment,{children:[(!h&&!$||eK)&&(0,j.jsx)(eE.Z,{name:"SafeSuspense_CloseupBody_CloseupActionBar",children:(0,j.jsx)(nU,{actionBarContainerRef:er,goBack:K,gridDescription:r.description??"",inCommentsImprovedDropdownExp:o,inCommentsPopoverExp:d,isDeletedStoryPin:!!E,isEligibleForAggregatedComments:!!eu,isEligibleForPinReactions:u,isOnSecretBoard:!1,isStoryPin:c,maxWidth:M,onEditSubmit:Z,onSaveButtonClick:L,outerPaddingSize:g,pin:r,routePush:D,scrollContainerRef:V?.current||y.current,showRepinOnInitialRender:R,viewParameter:f})}),(0,j.jsx)(I.xu,{dangerouslySetInlineStyle:{__style:{paddingLeft:$?void 0:Y?ev.Gd:eB.g9,paddingBottom:$?eL:void 0}},direction:"column",display:"flex",flex:"grow",children:(0,j.jsxs)(I.xu,{ref:$?void 0:y,alignItems:"stretch",direction:"column",display:"flex",flex:"grow",justifyContent:"start",overflow:$||eK?void 0:"auto",children:[(0,j.jsx)(I.xu,{alignItems:"stretch",dangerouslySetInlineStyle:{__style:{rowGap:$?4*eB.O5:void 0}},direction:"column",display:"flex",height:Y||eK?"100%":void 0,justifyContent:"start",width:Y?"100%":void 0,children:v}),$&&!eK&&eg&&eO]})}),eN]}):(0,j.jsx)(I.xu,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",paddingY:4,children:(0,j.jsx)(I.xH,{accessibilityLabel:ei._('Pin details loading', ' - ', ' -- '),show:!0})})}),Y&&"lg"===G&&(0,j.jsx)(aJ.Z,{id:"PeekVariantShoppingModule",children:(0,j.jsx)(e8,{maxHeight:B?.current?.clientHeight,pin:r,showShoppingModule:en,trafficSource:p,viewParameter:f})})]})}):(0,j.jsx)(I.kC,{alignItems:"center",height:300,justifyContent:"center",width:"100%",children:(0,j.jsx)(I.xH,{accessibilityLabel:ei._('Pin loading', ' - ', ' -- '),show:!0})})})})})})]})}),J.shouldOpenModal&&J.newPin&&J.originalPinId===r.id&&(0,j.jsx)(eE.Z,{name:"SafeSuspense_CloseupBody_ChangeBoardModal",children:(0,j.jsx)(aJ.Z,{id:"ChangeBoardModal",children:(0,j.jsx)(nV,{experience:J.experience,pinKey:{type:"Legacy",data:J.newPin}})})})]})})}let nJ=(0,k.memo)(nq),nQ=(0,k.memo)(function({isStoryPin:e,isVideoPin:a,isWideVideo:n,pin:i,taggedProducts:t,trafficSource:l,viewParameterType:r,onClickThrough:s,didShortClickThrough:o,goBack:d,isCloseupMaximized:u=!1,isInStream:c=!1,isDeletedStoryPin:p,onSaveButtonClick:m,onUpdate:g,outerBodyStyle:h,outerPaddingSize:y,routePush:_,showRepinOnInitialRender:f,viewType:x,onCommentSectionClick:P,onCloseupBodyUpdate:S,shouldShowStlCarouselForOwnPin:v,storyPinTaggedProducts:b,clientTrackingParams:C,viewportSize:T,shouldShowPartnerModule:A,trendsData:F,showTrendsOnPinCloseup:E,showPinStats:L}){let{checkExperiment:R}=(0,e_.Z)(),[K,Z]=(0,k.useState)(!1),D=(0,k.useRef)(null),M=(0,k.useRef)(null),B=(0,X.x4)(),{closeupWithinMasonryEnabled:O}=B,N=(0,aZ.Z)(),z=O&&!!i.is_eligible_for_aggregated_comments&&"enabled_popover"===R("ce_dweb_new_closeup_comment_module").group,V=O&&!!i.is_eligible_for_aggregated_comments&&"enabled_dropdown"===R("ce_dweb_new_closeup_comment_module").group,U=!i.is_promoted&&!i.is_downstream_promotion&&!p,W=(0,nj.Z)(),G=(0,eM.lJ)(N,W),H=aa(),$=(0,k.useCallback)(()=>{s&&s({componentType:129}),H.setClickthroughComponentForSurvey("legoMaybeLink")},[s,H]),Y=ae(),{getViewParameter:q}=eS({type:"Legacy",data:i}),J=q(r),{setClickthroughComponentForSurvey:Q,imageContainerRef:ee}=H,{group:ea}=R("webpack_react_profiler");if("enabled_slow_closeupbody"===ea){let e=performance.now(),a=e;for(;a-e<30;)a=performance.now()}let en=(0,k.useCallback)(()=>{s({wasImageClicked:!0})},[s]),ei=(0,k.useMemo)(()=>i,[i]),et=(0,k.useMemo)(()=>l,[l]),el=(0,k.useMemo)(()=>J,[J]),er=(0,k.useMemo)(()=>r,[r]),es=(0,j.jsx)(nX,{handleImageClickThrough:en,imageContainerRef:ee,isDeletedStoryPin:p,isOnSecretBoard:!1,isStoryPin:e,isWideVideo:n,onSaveButtonClick:m,pin:ei,setClickthroughComponentForSurvey:Q,showRepinOnInitialRender:f,trafficSource:et,viewParameter:el,viewParameterType:er,visualContentContainerRef:Y.visualContentContainerRef}),eo=(0,j.jsx)(aJ.Z,{id:"MetadataDetails",children:(0,j.jsx)(e3,{closeupContext:B,detailsScrollContainerRef:M.current,inCommentsImprovedDropdownExp:V,inCommentsPopoverExp:z,isDeletedStoryPin:p,isLoadingNewlyCreatedComment:K,isStoryPin:e,isVideoPin:a,onCloseupBodyUpdate:S,onCommentSectionClick:P,orbacActingAs:W,orbacSubjectId:G,outerPaddingSize:y,pin:i,shouldShowStlCarouselForOwnPin:v,storyPinTaggedProducts:b,taggedProducts:t,viewer:N,viewParameter:J})}),ed=(0,k.useMemo)(()=>({type:"Legacy",data:i}),[i]),eu=(0,j.jsx)(aJ.Z,{id:"DefaultMetadata",children:(0,j.jsx)(e$,{clientTrackingParams:C,details:eo,inCommentsPopoverExp:z,isDeletedStoryPin:p,isStoryPin:e,onClickThrough:s,onCloseupBodyUpdate:S,orbacActingAs:W,outerPaddingSize:y,pinKey:ed,shouldShowPartnerModule:A,showPinStats:L,showTrendsOnPinCloseup:E,trafficSource:l,trendsData:F,viewer:N,viewParameter:J,viewportSize:T})}),ec=(0,j.jsx)(nJ,{actionBarContainerRef:D,descriptionContentMaxHeight:Y.descriptionContentMaxHeight,didShortClickThrough:o,goBack:d,inCommentsImprovedDropdownExp:V,inCommentsPopoverExp:z,isCloseupMaximized:u,isEligibleForPinReactions:U,isInStream:c,isStoryPin:e,isWideVideo:n,metadata:eu,metadataContainerRef:M,onClickThrough:$,onSaveButtonClick:m,onUpdate:g,orbacSubjectId:G,outerBodyStyle:h,outerPaddingSize:y,pin:i,routePush:_,setIsLoadingNewlyCreatedComment:Z,showRepinOnInitialRender:f,trafficSource:l,viewer:N,viewParameter:J,viewType:x,visualContentContainer:es,visualContentContainerRef:Y.visualContentContainerRef,webLinkSurveyState:H}),ep=(0,j.jsx)(aJ.Z,{id:"CloseupPostDownloadUpsellProvider",children:(0,j.jsx)(w.z8,{pin:i,children:ec})}),em=(0,k.useMemo)(()=>({web_gestalt_calico:{anyEnabled:!0,group:"enabled"}}),[]);return i?.ad_data?.exclude_from_grid_rep_tests&&R("web_exclude_from_grid_rep_tests").anyEnabled?(0,j.jsx)("div",{className:"excludeFromGridRepTests",children:(0,j.jsx)(I.II,{value:em,children:ep})}):ep});function n0(e){return(0,k.useEffect)(()=>{(0,x.Z)("CloseupBody","/app/common/react/components/closeup/CloseupBody/CloseupBody.tsx")},[]),(0,j.jsx)(nQ,{...e})}var n1=n(86295);let n2=[n1.gO.ADMIN,n1.gO.CAMPAIGN_MANAGER];var n3=n(753261),n6=n(774721),n8=n(222555),n4=n(611282),n7=n(776777),n5=n(169053);let n9=e=>{let a=(0,O.ZP)(),{sourceUrl:n,clientTrackingParams:i,linkText:t,displayUrl:l,image:r,pageId:s,canonicalUrl:o,pinId:d,onTouch:u,onClickThrough:c,isLoading:p}=e,m={story_pin_page_id:s,story_pin_data_id:(0,P.v9)(a=>e.pinId&&a.pins?.[e.pinId]?.story_pin_data_id),src_url:n,canonical_url:o},g=(0,j.jsxs)(I.xu,{alignItems:"center",borderStyle:"sm",display:"flex",overflow:"hidden",rounding:2,children:[(0,j.jsx)(I.xu,{alignItems:"center",color:p||r&&r.url?void 0:"secondary",dangerouslySetInlineStyle:{__style:{borderRight:"1px solid lightGray"}},display:"flex",flex:"none",height:80,justifyContent:"center",minWidth:80,width:80,children:p?(0,j.jsx)(I.xH,{accessibilityLabel:a._('Loading website', 'a11y for loading spinner', 'a11y for loading spinner'),show:!0}):r&&r.url?(0,j.jsx)(I.Ee,{alt:t,fit:"cover",naturalHeight:r.height??1,naturalWidth:r.width??1,src:r.url}):(0,j.jsx)(I.JO,{accessibilityLabel:a._('Default link block icon', 'Icon for default link blocks without an image', 'Icon for default link blocks without an image'),color:"subtle",icon:"link",size:35})}),(0,j.jsxs)(I.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap",textOverflow:"ellipsis"}},flex:"grow",overflow:"hidden",paddingX:5,children:[(0,j.jsx)(I.xv,{lineClamp:1,weight:"bold",children:t}),(0,j.jsx)(I.xv,{color:"shopping",size:"200",children:l})]})]}),h=(0,n5.S6)()(d),y=(0,n4.Z)({href:{pathname:n,state:{trackingParams:i}},target:"blank",clientTrackingParams:i,externalData:h?{pin:h&&{attributionSourceId:h.attribution_source_id,board:h.board&&{url:h.board.url},campaignId:h.campaign_id,entityId:h.id,isDownstreamPromotion:h.is_downstream_promotion,isPromoted:h.is_promoted,pinner:h.pinner&&{username:h.pinner.username},pinPromotionId:h.pin_promotion_id,promoter:h.promoter&&{entityId:h.promoter.id},storyPinDataId:h.story_pin_data_id,trackingParams:h.tracking_params,advertiserId:h.advertiser_id}}:void 0});return u?(0,j.jsx)(I.iP,{onTap:u,rounding:2,children:g}):(0,j.jsx)(I.Tg,{href:n,onTap:({event:e,dangerouslyDisableOnNavigation:a})=>{a(),c&&c({auxData:m}),y({event:e})},rel:"nofollow",rounding:2,target:"blank",children:g})},ie=e=>((0,k.useEffect)(()=>{(0,x.Z)("StoryPinLinkModule","/app/common/react/components/closeup/StoryPin/StoryPinLinkModule.tsx")},[]),(0,j.jsx)(n7.Z,{...e,children:(0,j.jsx)(n9,{...e})})),ia=(0,ez.Z)(()=>n.e("15564").then(n.bind(n,125734)),void 0,e=>125734,"app-common-react-components-Activities-Utils-Linkify",e=>["15564"]),ii=({block:e,clientTrackingParams:a,pageId:n,pinId:i,onClickThrough:t})=>{(0,k.useEffect)(()=>{(0,x.Z)("StoryPinBlock","/app/common/react/components/closeup/StoryPin/StoryPinBlock.tsx")},[]);let{logContextEvent:l}=(0,eA.u)();switch(e.type){case a7.h8.LINK:let{canonical_url:r,image:s,normalized_url:o,src_url:d,text:u=""}=e,c=s?.images?.["345x"];if(s&&d&&o&&r)return(0,j.jsx)(I.xu,{marginTop:5,children:(0,j.jsx)(ie,{canonicalUrl:r,clientTrackingParams:a,displayUrl:o,image:c,linkText:u,onClickThrough:t,onVisibilityChanged:e=>{e&&l({event_type:120,view_type:3,view_parameter:157,component:228,element:11157,object_id_str:i,aux_data:{story_pin_page_id:n,srcUrl:d,canonicalUrl:r}})},pageId:n,pinId:i,sourceUrl:d})});return null;case a7.h8.HEADING:{let{text:a=""}=e;return(0,j.jsx)(I.xu,{marginBottom:4,paddingX:2,children:(0,j.jsx)(I.X6,{accessibilityLevel:2,overflow:"normal",size:"600",children:a})})}case a7.h8.PARAGRAPH:{let{text:a=""}=e;return(0,j.jsx)(I.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"pre-line"}},paddingX:2,children:(0,j.jsx)(I.xv,{children:(0,j.jsxs)(ia,{children:[" ",a," "]})})})}default:return null}};var it=n(369416);let il=`
@media (min-height: 0) {
  .StoryPinText {
    padding: 15px;
  }
  .StoryPinText span {
    font-size: 12px;
  }
  .StoryPinText h2 {
    font-size: 18px;
  }
}

@media (min-height: 600px) {
  .StoryPinText {
    padding: 2.5vh;
  }
  .StoryPinText span {
    font-size: 2vh;
  }
  .StoryPinText h2 {
    font-size: 3vh;
  }
}

@media (min-height: 800px) {
  .StoryPinText {
    padding: 20px;
  }
  .StoryPinText span {
    font-size: 16px;
  }
  .StoryPinText h2 {
    font-size: 24px;
  }
}
`,ir=e=>{(0,k.useEffect)(()=>{(0,x.Z)("StoryPinText","/app/common/react/components/closeup/StoryPin/StoryPinText.tsx")},[]);let{blocks:a,clientTrackingParams:n,pageId:i,pinId:t,onClickThrough:l}=e;return(0,j.jsxs)(k.Fragment,{children:[(0,j.jsx)(it.Z,{unsafeCSS:il}),(0,j.jsx)("div",{className:"StoryPinText",children:a.filter(e=>e).map((e,a)=>(0,j.jsx)(ii,{block:e,clientTrackingParams:n,onClickThrough:l,pageId:i,pinId:t},a))})]})};var is=n(179639);let io=ev._B*a7.ap,id=`
.StoryPinTextDrawer {
  background: #fff;
  border-top-left-radius: 32px;
  border-top-right-radius: 32px;
  bottom: 0;
  box-shadow: rgba(0, 0, 0, 0.1) 0 1px 20px 0;
  box-sizing: border-box;

  height: auto;
  max-height: 15%;
  opacity: 0.625;
  position: absolute;
  transition: max-height 0.15s ease-in, opacity 0.15s ease-in;
  width: 100%;
}

.StoryPinTextDrawer:hover {
  max-height: 70%;
  opacity: 1;
  overflow: scroll;
}
`;function iu(e){(0,k.useEffect)(()=>{(0,x.Z)("StoryPinMediaLayout","/app/common/react/components/closeup/StoryPin/StoryPinMediaLayout.tsx")},[]);let a=(0,O.ZP)(),{activePageIndex:n,clientTrackingParams:i,hideText:t,isActive:l,isCoverPage:r,muteVideos:s,onClickThrough:o,page:{image_adjusted:d,image:u,blocks:c,video:p,id:m},pageIndex:g,pageWidth:h,pin:y,pinId:_}=e,{images:f={}}=d||u||{},P=f["750x"],{video_list:S={}}=p||{},v=S.V_HLSV3_MOBILE||S.V_720P;if(!P&&!v)return null;let b=h/ev._B;return(0,j.jsxs)(k.Fragment,{children:[!!p&&!!v&&(0,j.jsx)(is.Z,{activePageIndex:n,blockHeight:io*b,blockWidth:ev._B*b,isPlaying:l,muted:s,pageIndex:g,pin:y,pinId:_,video:p}),P&&P.url&&!v&&(0,j.jsx)(I.Ee,{alt:function(e){let a="";for(let n of e.blocks??[])[1,0].includes(n.block_type)&&(a=n.text?n.text:"");return a??""}(e.page)||a._('Story pin image', 'Alt text for story pin image', 'Alt text for story pin image'),fit:r?"cover":"contain",naturalHeight:P.height??1,naturalWidth:P.width??1,src:P.url}),c&&c.length>0&&!t&&(0,j.jsxs)(k.Fragment,{children:[(0,j.jsx)(it.Z,{unsafeCSS:id}),(0,j.jsx)("div",{className:"StoryPinTextDrawer",children:(0,j.jsx)(ir,{blocks:c,clientTrackingParams:i,onClickThrough:o,pageId:m,pinId:_})})]})]})}let ic=e=>{(0,k.useEffect)(()=>{(0,x.Z)("StoryPinSplitLayout","/app/common/react/components/closeup/StoryPin/StoryPinSplitLayout.tsx")},[]);let{page:{image_adjusted:a,blocks:n}}=e,{images:i={}}=a||{},t=i["750x"];if(!t)return null;let{width:l,height:r}=t;return(0,j.jsx)(k.Fragment,{children:t&&t.url&&(0,j.jsx)(I.Ee,{alt:(n??[]).map(e=>e.text||"").join(),fit:"contain",naturalHeight:r??1,naturalWidth:l??1,src:t.url})})};var ip=n(607600),im=n(885003),ig=n(230543);function ih({children:e,clientTrackingParams:a,closeupStoryPinViewability:n,pin:i,productPins:t,viewParameter:l,viewType:r}){let{previous:s,forward:o}=(0,nE.ou)(),d=0===s.length&&0===o.length,u=(0,ig.t)();return(0,j.jsx)(im.o,{closeupPaneWidth:eB.Gg,headerHeight:u,isLandingPage:d,loadFonts:ip.Z,productPins:t,renderStoryPinMediaLayout:({activePageIndex:e,hideText:n,isActive:t,isCoverPage:l,muteVideos:r,onClickThrough:s,page:o,pageIndex:d,pageWidth:u,pinId:c})=>(0,j.jsx)(iu,{activePageIndex:e,clientTrackingParams:a,hideText:n,isActive:t,isCoverPage:l,muteVideos:r,onClickThrough:s,page:o,pageIndex:d,pageWidth:u,pin:i,pinId:c}),renderStoryPinPage:({activePageIndex:e,customEndCard:t,fontsLoaded:s,isActive:o,muteVideos:d,onEnded:u,onFlyoutOpen:c,onUpdateVideoInfo:p,page:m,pageAspectRatio:g,pageHeight:h,pageWidth:y,ownerId:_,pinId:f,productPins:x,shouldLogTimeSpent:k,stillLoading:P,videoPinProgress:S})=>(0,j.jsx)(nc,{activePageIndex:e,clientTrackingParams:a,closeupStoryPinViewability:n,customEndCard:t,fontsLoaded:s,isActive:o,muteVideos:d,onEnded:u,onFlyoutOpen:c,onUpdateVideoInfo:p,ownerId:_,page:m,pageAspectRatio:g,pageHeight:h,pageIndex:e,pageWidth:y,pin:i,pinId:f,productPins:x,shouldLogTimeSpent:k,stillLoading:P,videoPinProgress:S,viewParameter:l,viewType:r}),renderStoryPinSplitLayout:({page:e})=>(0,j.jsx)(ic,{page:e}),renderStoryPinText:({blocks:e,onClickThrough:n,pageId:i,pinId:t})=>(0,j.jsx)(ir,{blocks:e,clientTrackingParams:a,onClickThrough:n,pageId:i,pinId:t}),children:e})}function iy({clientTrackingParams:e,children:a,isInStream:n,viewType:i,viewParameter:t}){return n?a:(0,j.jsx)(nu.Z,{clientTrackingParams:e,component:85,view:i,viewParameter:t,children:a})}function i_({children:e,pin:a}){return e({productPins:(0,ep.Z)({name:"StoryPinTaggedProductsResource",options:{id:a.id},noCache:!0}).data||[]})}function ix({children:e,clientTrackingParams:a,closeupStoryPinViewability:n,pin:i,isInStream:t=!1,viewType:l,viewParameter:r}){(0,k.useEffect)(()=>{(0,x.Z)("DesktopStoryPinContextProvider","/app/common/react/components/closeup/StoryPin/DesktopStoryPinContextProvider.tsx")},[]);let s=!!i.story_pin_data?.has_product_pins,o=({productPins:t})=>(0,j.jsx)(ih,{clientTrackingParams:a,closeupStoryPinViewability:n,pin:i,productPins:t,viewParameter:r,viewType:l,children:e});return(0,j.jsx)(iy,{clientTrackingParams:a,isInStream:t,viewParameter:r,viewType:l,children:s?(0,j.jsx)(i_,{pin:i,children:o}):o({productPins:[]})})}var ik=n(642407),iP=n(115247),iS=n(728994),iv=n(572227);function ib({appConfig:e}){(0,k.useEffect)(()=>{(0,x.Z)("IdeaPinActions","/app/packages/story-pin/Closeup/IdeaPinActions.tsx")},[]);let a=(0,O.ZP)(),n=(0,iv.Z)(),{isRTL:i}=(0,eL.B)();return(0,j.jsx)(k.Fragment,{children:(0,j.jsx)(I.xu,{dangerouslySetInlineStyle:{__style:{marginTop:16}},"data-test-id":"back-button",left:!i,paddingX:4,position:"absolute",right:i,top:!0,children:"authDesktop"===e.type&&(0,j.jsx)(I.hU,{accessibilityLabel:a._('Back button', 'storyPin.closeup.back', 'Button label to navigate to previous page'),bgColor:"transparent",icon:"directional-arrow-left",iconColor:"darkGray",onClick:()=>{n({action:"click",item:"back-button"}),e.onNavigateBack()},size:"lg"})})})}var iC=n(620427);let iI=(0,k.lazy)(()=>n.e("65443").then(n.bind(n,850447))),iw=(0,k.lazy)(()=>Promise.resolve().then(n.bind(n,71157))),iT=(0,k.lazy)(()=>n.e("32560").then(n.bind(n,817631))),iA=(0,k.lazy)(()=>Promise.all([n.e("25418"),n.e("96415")]).then(n.bind(n,377733))),iF=(0,k.lazy)(()=>Promise.resolve().then(n.bind(n,704300))),iE={backgroundImage:"linear-gradient(to bottom, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",pointerEvents:"none",borderRadius:"32px 32px 0 0"},ij={backgroundImage:"linear-gradient(to top, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",pointerEvents:"none",borderRadius:"0 0 32px 32px",bottom:0},iL={backgroundImage:"linear-gradient(to bottom, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",borderRadius:"32px 32px 0 0",paddingTop:"30px",top:0},iR=[5,6,2];function iK({appConfig:e,clientTrackingParams:a,isInFocus:n,isInStream:i=!1,isStreamMuted:t,isStreamPanelOpen:l=!0,pin:r,storyPinData:s,onIdeaPinCloseupCommentClick:o,setStreamIsMuted:d,streamItemIndex:u,togglePanel:c,variant:p,viewType:m=3,viewParameterType:g,onTogglePanel:h}){let y,_=(0,im.c)(),{peekCloseupEnabled:f,viewportSize:x}=(0,X.x4)(),P=(0,O.ZP)(),S=(0,ac.Z)(),v=(0,nn.g)(),b=(0,na.A)(),{setIdeaPinActivePage:C,setIdeaPinDynamicWidth:w}=(0,nr.Ut)(),{activePage:T}=(0,nr.H8)(),{clearSeekTime:A}=(0,ni.RC)(),{seekTimes:F}=(0,ni.Hx)(),{closeupPaneWidth:E,headerHeight:L,isLandingPage:R,renderStoryPinMediaLayout:K,renderStoryPinPage:Z,renderStoryPinSplitLayout:D,renderStoryPinText:M,productPins:B}=_||{},{id:N}=r,z=F&&F[r.id],V=!!s?.is_deleted,{pages:U=[],metadata:W={}}=s||{},{canvas_aspect_ratio:G,version:H}=W,$=G??a7.ap,[Y,q]=(0,k.useState)(0),J=(0,k.useRef)(0),Q=(0,k.useRef)(null),[ee,ea]=(0,k.useState)("closeup"===p&&n),[en,ei]=(0,k.useState)(375),et="calc(100% - 32px)",el=(0,k.useRef)(null),[er,es]=(0,k.useState)(!1),[eo,ed]=(0,k.useState)(!1),[eu,ec]=(0,k.useState)(!0);(0,k.useEffect)(()=>{h&&h(eu)},[eu,h]),(0,k.useEffect)(()=>{ec(l)},[l]);let{should_mute:ep=!0,music_attributions:em=[]}=U[Y],[eg,e_]=(0,k.useState)(R||ep),ef=void 0!==d?d:e_,ex=void 0!==t?t:eg;(0,k.useEffect)(()=>{ep&&ef(!0)},[ep,ef]);let ek=U.filter(e=>!iR.includes(e.layout)),eP=ek.length,eS=ek[Y],eb=g||(0,ey.Z)({hasPin:!!r,hasPinRichMetadata:!!r.rich_metadata,hasPinRichMetadataProducts:!!r.rich_metadata?.products,hasPinRichMetadataArticle:!!r.rich_metadata?.article,hasPinRichMetadataRecipe:!!r.rich_metadata?.recipe,hasPinStoryPinData:!!r.story_pin_data}),eC=L+64,{getNormalizedPinImage:eI}=(0,iS.Z)({pinKey:{type:"Legacy",data:r},maxWidth:ik.Wm}),ew="closeup"===p,eT=()=>{if("undefined"!=typeof window){let e=window.innerWidth-(eu?E:0)-216;if(ew)ei(function({availableWidth:e,pageAspectRatio:a,unavailableHeight:n,windowInnerHeight:i}){let t=i-n,l=Math.min(Math.max(650,Math.min((i-n)*a,e)),1e3);return l/a>=t&&(l=t*a),l}({availableWidth:e,pageAspectRatio:$,unavailableHeight:eC,windowInnerHeight:window.innerHeight}));else{let{width:e}=eI();ei(e),w(e)}}};(0,e4.Z)(()=>(window.addEventListener("resize",eT),eT(),()=>{window.removeEventListener("resize",eT)}));let[eA,eF]=(0,k.useState)(!1),[ej,eL]=(0,k.useState)(null),[eK,eZ]=(0,k.useState)(!1);(0,k.useEffect)(()=>{!eK&&n&&(S({event_type:7588,view_type:m,view_parameter:eb,component:13801,object_id_str:N,aux_data:{..."number"==typeof u?{grid_index:u}:{}}}),eZ(!0))},[eK,n,S,N,m,eb,u]);let eD=(0,k.useCallback)(e=>{let{blocks:a}=U[e]||{},i=a?.find(e=>3===e.block_type);el.current&&el.current instanceof nt.B7&&(el.current.clear(),el.current=null),!i&&n&&(el.current=new nt.B7(e=>{eL({currentTime:e<1?e:1,duration:1})},()=>{let a="closeup"===p?e:T;a<eP-1?(el.current&&el.current instanceof nt.B7&&(el.current.clear(),el.current=null),eO(a+1)):(es(!0),ea(!1))},eh.oN))},[n,eP,U,T,p]),eM=e=>{eL({currentTime:0,duration:1}),eD(e)};(0,k.useEffect)(()=>{J.current=Y},[Y]),(0,k.useEffect)(()=>{Q.current=ee},[ee]),(0,e4.Z)(()=>(eM(Y),()=>{el.current&&el.current instanceof nt.B7&&Q.current&&el.current.clear()}));let eB=e=>{b&&(b.abort("startNewPwt"),(0,ay.sX)("startStoryPinStepPwt")),v&&(v.abort("startNewPwt"),v.start(),v.addBinaryAnnotation("page.current.index",e,"I16"),v.addBinaryAnnotation("page.count",U.length,"I16"),v.addBinaryAnnotation("view.type",m,"I32"),v.addBinaryAnnotation("view.parameter",eb,"I32"))};(0,e4.Z)(()=>{b&&(b.addBinaryAnnotation("page.current.index",Y,"I16"),b.addBinaryAnnotation("page.count",U.length,"I16"),b.addBinaryAnnotation("view.type",m,"I32"),b.addBinaryAnnotation("view.parameter",eb,"I32")),(0,ay.rt)("page.current.index",Y,"I16"),(0,ay.rt)("page.count",U.length,"I16"),(0,ay.rt)("view.type",m,"I32"),(0,ay.rt)("view.parameter",eb,"I32")});let eO=e=>{ee||ea(!0),er&&es(!1),eM(e),e!==Y&&A(),q(e),C(e),eB(e)};(0,k.useEffect)(()=>{if(er&&es(!1),el.current&&z){let e=el.current;e.pause(),e.remaining=eh.oN-z*nl.gJ,eL({currentTime:z/eh.P6,duration:1})}},[z]),(0,k.useEffect)(()=>{C(T)},[C,T]),(0,k.useEffect)(()=>{"related-products"===p&&(q(T),eO(T))},[T,p]);let eN=()=>er?13799:0===Y?227:228,ez=()=>{Y<eP-1&&(eO(Y+1),S({event_type:101,view_type:m,view_parameter:eb,component:eN(),element:12261,object_id_str:N}))},eV=e=>{let{keyCode:a,target:n}=e,i=!!n&&"isContentEditable"in n&&n.isContentEditable||!!n&&"contentEditable"in n&&"true"===n.contentEditable;37!==a||i?39!==a||i||ez():Y===eP-1&&er?(eO(Y),S({event_type:101,view_type:m,view_parameter:eb,component:eN(),element:12260,object_id_str:N})):Y>0&&(eO(Y-1),S({event_type:101,view_type:m,view_parameter:eb,component:eN(),element:12260,object_id_str:N}))};(0,k.useEffect)(()=>(document.addEventListener("keydown",eV),()=>document.removeEventListener("keydown",eV)),[Y]);let{fontsLoaded:eU,mediaDataReceived:eW}=(0,ny.tq)({hasPin:!!r,pages:U}),eG=H?(0,nt.n4)(H,"0.8.0"):null,eH=null!=eG&&eG>=0,e$=e=>{e===eP-1&&(es(!0),ea(!1),C(0)),e===Y&&ez()},eY=e=>{eL({currentTime:e?.currentTime??0,duration:e?.duration??1})},eX=()=>{ed(!0),ea(!1),el.current&&!el.current.paused&&el.current.pause()},eq=a=>U[a]?eH?Z({activePageIndex:Y,fontsLoaded:eU,customEndCard:!0,isActive:a===Y&&ee,muteVideos:ex,onChangeMuteVideo:ef,onEnded:e$,onFlyoutOpen:eX,videoPinProgress:Y===a?ej:void 0,onUpdateVideoInfo:eY,ownerId:r.native_creator?.id??"",page:U[a],pageAspectRatio:$,pageIndex:a,pageHeight:en/$,pageWidth:en,pinId:r.id,productPins:B,shouldLogTimeSpent:n,stillLoading:!eW}):(a=>{let n=0===a.layout;switch(a.layout){case 0:case 1:return K({activePageIndex:Y,hideText:n,isActive:!0,isCoverPage:n,muteVideos:ex,onClickThrough:e.onClickThrough,page:a,pageIndex:Y,pageWidth:en,pinId:N});case 4:return a.blocks.length>0&&M({blocks:a.blocks,pageId:`text-${Y}`,page:a,pinId:N,onClickThrough:e.onClickThrough});case 3:return D({page:a});default:return null}})(eS):null,eJ=()=>{ea(!1),el.current&&el.current.pause(),S({event_type:9324,view_type:m,view_parameter:eb,component:eN(),object_id_str:N,aux_data:{story_pin_page_id:Y}})},eQ=()=>{if(ea(!0),el.current){let e=el.current;z&&z>0&&A(),e.resume()}else ej||eM(Y);S({event_type:9323,view_type:m,view_parameter:eb,component:eN(),object_id_str:N,aux_data:{story_pin_page_id:Y}})},e0=()=>{er||(ed(!1),ee?eJ():eQ())};(0,k.useEffect)(()=>{"closeup"===p&&(!n||er||ee?!n&&ee&&eJ():eQ())},[n,p]),(0,k.useEffect)(()=>{"related-products"===p&&eJ()},[]);let e1=()=>{eO(0)},{fiftyPercentWidth:e2,fiftyPercentHeight:e3}=(0,ev.Re)(64),{maxHeight:e6}=(0,ev.Re)(0,32),{fiftyPercentWidth:e8}=(0,ev.Re)();return f&&(y="sm"===x?e3:e6),(0,j.jsxs)(I.xu,{dangerouslySetInlineStyle:{__style:ew?{top:L,height:`calc(100vh - ${L}px)`,position:"sticky",pointerEvents:"none",minHeight:632,maxHeight:f?y:void 0,zIndex:eu?"auto":3}:{}},display:"flex",left:!0,children:[(0,j.jsxs)(I.xu,{alignItems:"center",color:"default",dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",minWidth:f&&"sm"!==x?e8:void 0}},display:"flex",flex:"grow",justifyContent:"center",position:"relative",children:[ew&&(0,j.jsx)(I.xu,{bottom:!0,color:"secondary",left:!0,position:"absolute",right:!0,top:!0}),V?(0,j.jsx)(ng,{height:en/a7.ap,rounding:a7.yR,width:en}):(0,j.jsxs)(k.Fragment,{children:[eW&&(0,j.jsx)(I.xu,{height:1,left:!0,marginTop:-1,overflow:"hidden",position:"absolute",top:!0,width:1,children:(()=>{let e=[];for(let a=1;a<=U.length;a+=1)Y+a<U.length&&e.push(eq(Y+a));return e})()}),(0,j.jsx)(I.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{marginLeft:ew?void 0:`${a7.YL}px`}},display:"flex",onMouseLeave:()=>{eF(!1)},onMouseOver:()=>eF(!0),position:"relative",children:(0,j.jsxs)(I.xu,{paddingX:4,children:[(0,j.jsx)(I.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...ij,flexDirection:"column-reverse"}},display:"flex",height:128,paddingX:6,position:"absolute",width:et,zIndex:a7.Gf,children:(0,j.jsx)(nh.Z,{activePageIndex:Y,handleMute:()=>{ep||ef(!ex)},handlePanelChange:()=>{ec(!eu)},handlePause:eJ,handlePausePlay:e0,handlePlay:eQ,handleVideoScrubbingNewPage:e=>{er&&es(!1),eM(e),q(e),C(e),eB(e)},handleWatchAgain:e1,inMilliseconds:!0,isMuted:ex,isPanelOpen:eu,isPlaying:ee,onPageSelect:e=>eO(e),pageCount:eP,pages:ek,pinId:r.id,progressInfo:ej,showEndCard:er,showVideoControls:eA,viewParameter:eb})}),(0,j.jsx)(I.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{...!eu?{paddingLeft:"26px",bottom:0}:iL,marginBottom:eu?void 0:"88px",maxWidth:e2}},"data-test-id":"music-attribution",display:"flex",justifyContent:eu?"center":"start",overflow:"hidden",paddingY:eu?5:void 0,position:"absolute",width:en,zIndex:a7.Gf,children:(0,j.jsx)(an.Z,{handlePause:eJ,handlePlay:eQ,musicAttributions:em,shouldMute:ep,showEndCard:er})}),!er&&!eu&&(0,j.jsxs)(I.xu,{alignItems:"start",dangerouslySetInlineStyle:{__style:eu?{}:iE},display:"flex",height:128,justifyContent:"between",padding:4,position:"absolute",top:!0,width:et,zIndex:a7.Gf,children:[(0,j.jsxs)(I.kC,{alignItems:"stretch",direction:"row",children:[!eu&&(0,j.jsx)(eE.Z,{name:"SafeSuspense_IdeaPinCloseup_IdeaPinSecondarySendButton",children:(0,j.jsx)(eR.Z,{children:(0,j.jsx)(iF,{imageSrc:r.image_url??"",pinDescription:r.description??"",pinId:r.id})})}),!eu&&r.is_eligible_for_aggregated_comments&&(0,j.jsx)(eE.Z,{name:"SafeSuspense_IdeaPinCloseup_CommentButton",children:(0,j.jsx)(eR.Z,{children:(0,j.jsx)(iI,{onCommentClick:()=>{S({event_type:101,view_type:m,view_parameter:eb,component:13801,element:10944,object_id_str:r.id}),i&&c?c():ec(!0),o&&o();let e=document.getElementById(`canonical-card-${r.id}`);e&&e.scrollIntoView({behavior:"smooth",block:"end"})}})})}),!eu&&(0,j.jsx)(eE.Z,{name:"SafeSuspense_IdeaPinCloseup_ReactionPickerContainer",children:(0,j.jsx)(eR.Z,{children:(0,j.jsx)(I.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},"data-test-id":"pointer-events-wrapper",children:(0,j.jsx)(iA,{clientTrackingParams:a,component:13801,iconColor:"white",pinId:r.id,reactionByMe:r.reaction_by_me,showTooltip:!0,viewParameter:eb,viewType:m})})})})]}),!eu&&(0,j.jsx)(eE.Z,{name:"SafeSuspense_IdeaPinCloseup_PinSaveButton",children:(0,j.jsx)(eR.Z,{children:(0,j.jsx)(I.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},"data-test-id":"pointer-events-wrapper",children:(0,j.jsx)(iT,{clientTrackingParams:a,isCloseupPin:!0,onClickCallback:()=>{S({event_type:101,view_type:m,view_parameter:eb,component:13801,element:0,object_id_str:r.id})},pinKey:{type:"Legacy",data:r},size:"lg"})})})})]}),(0,j.jsx)(I.xu,{"data-test-id":"story-pin-closeup-container",position:"relative",children:(0,j.jsx)(I.iP,{accessibilityLabel:ee?P._('Pause', 'storyPin.closeup.pauseButton.accessibilityLabel', 'Button label for pause tap area'):P._('Play', 'storyPin.closeup.playButton.accessibilityLabel', 'Button label for play tap area'),disabled:er,onTap:e0,rounding:a7.yR,children:(0,j.jsxs)(I.xu,{dangerouslySetInlineStyle:{__style:{maxWidth:e2,maxHeight:y}},"data-test-id":"story-pin-closeup-page",height:en/$,overflow:"hidden",position:"relative",rounding:a7.yR,width:en,children:[eq(Y),!er&&!eo&&!z&&(0,j.jsx)(nm.Z,{playing:ee}),"authDesktop"===e.type&&er&&r.native_creator&&(0,j.jsx)(eE.Z,{name:"IdeaPinCloseup_EndCard",children:(0,j.jsx)(eR.Z,{children:(0,j.jsx)(I.xu,{bottom:!0,left:!0,padding:4,position:"absolute",right:!0,rounding:a7.yR,top:!0,zIndex:a7.s5,children:(0,j.jsx)(iw,{clientTrackingParams:r.trackingParams||r.tracking_params,imageSrc:r.image_url??"",pinDescription:r.description??"",pinId:r.id,watchAgain:e1})})})})]})})})]})})]}),!i&&ew&&(0,j.jsx)(ib,{appConfig:e})]}),eu&&ew&&(0,j.jsx)(I.xu,{flex:"none",height:"100%",position:"relative",width:E,children:"duplo"===e.type&&e.storyPinDetails})]})}function iZ(e){(0,k.useEffect)(()=>{(0,x.Z)("IdeaPinCloseup","/app/packages/story-pin/Closeup/IdeaPinCloseup.tsx")},[]);let{pin:a,viewType:n=3,viewParameterType:i}=e,[t,l]=(0,k.useState)({isInFocus:!0,viewability:0}),{isInFocus:r,viewability:s}=t,o=i||(0,ey.Z)({hasPin:!!a,hasPinRichMetadata:!!a.rich_metadata,hasPinRichMetadataProducts:!!a.rich_metadata?.products,hasPinRichMetadataArticle:!!a.rich_metadata?.article,hasPinRichMetadataRecipe:!!a.rich_metadata?.recipe,hasPinStoryPinData:!!a.story_pin_data}),d=(0,S.TH)(),u=e.clientTrackingParams||(0,iC.Z)((d?.state||{}).trackingParams,a.trackingParams||a.tracking_params);return(0,j.jsx)(nn.T,{children:(0,j.jsx)(iP.Z,{onVisibilityChange:e=>{if(e&&e.length>0){let{intersectionRatio:a}=e[0];l({isInFocus:a>.5,viewability:a})}},options:{threshold:[0,.5,.8,.99,1]},children:i=>(0,j.jsx)(I.xu,{ref:i,children:(0,j.jsx)(ix,{clientTrackingParams:u,closeupStoryPinViewability:s,pin:a,viewParameter:o,viewType:n,children:r?(0,j.jsx)(nu.Z,{clientTrackingParams:u,component:13801,objectId:a.id,view:n,viewParameter:o,children:(0,j.jsx)(iK,{...e,isInFocus:r})}):(0,j.jsx)(iK,{...e,isInFocus:r})})})})})}var iD=n(462585);let iM=(0,ez.Z)(()=>n.e("96615").then(n.bind(n,396837)),{ssr:!1},e=>396837,"CloseupPartnerModule",e=>["96615"]),iB=(0,ez.Z)(()=>n.e("54347").then(n.bind(n,15863)),{ssr:!1},e=>15863,"SponsorshipApprovalModule",e=>["54347"]),iO=(0,k.memo)(function({permissions:e,pinId:a,sponsorshipStatus:n,creatorUsername:i}){return(0,j.jsx)(I.xu,{"data-test-id":"sponsorship-approval-module",display:"flex",children:(0,j.jsx)(eE.Z,{name:"SafeSuspense_Closeup_SponsorshipApprovalModule",children:(0,j.jsx)(iB,{business_role:e,creatorUsername:i??"",pinId:a,sponsorshipStatus:n})})})}),iN=(0,k.memo)(function({borderStyle:e,isStoryPin:a,closeupWidth:n,isWideVideo:i,viewportSize:t,pinKey:l,showPinStats:r,trendsData:s}){return(0,j.jsx)(I.xu,{"data-test-id":"PartnerModule",width:"lg"===t&&i?n:"100%",children:(0,j.jsx)(eE.Z,{name:"SafeSuspense_Closeup_PartnerModule",children:(0,j.jsx)(iM,{borderStyle:e,isStoryPin:a,pinKey:l,showPinStats:r,trendsData:s,viewportSize:t})})})}),iz=(0,k.memo)(function({clientTrackingParams:e,closeupWithinMasonryEnabled:a,didShortClickThrough:n,executeClickthrough:i,handleBackButtonClick:t,handleCarouselSwipe:l,handleCloseupBodyContainerRef:r,handleIdeaCloseupCommentIconClick:s,handleSaveClicked:o,isCloseupMaximized:d,isEligibleForStaticImageIdeaPin:u,isLimitedLogin:c,maxWidth:p,onToggleIdeaPinCloseupPanel:m,peekCloseupEnabled:g,pin:h,pinDerivedData:y,pinResource:_,routePush:f,shopping:x,showRepinOnInitialRender:P,storyPinTaggedProducts:S,trafficSource:v,trendsData:C,updateViewportSize:w,userBusinessRoleResource:T,viewportSize:A}){let F,E=(0,eL.B)(),L=(0,aZ.Z)(),{checkExperiment:R}=(0,e_.Z)(),K=(0,nj.Z)(),{id:Z,sponsorship:D,story_pin_data_id:M,story_pin_data:B}=h,O=!!M&&!u,N=!!B?.is_deleted,{creator:z,sponsor:V,status:U}=D||{},{username:G}=z||{},{username:H}=V||{},{refresh:$}=_,Y=(0,eM.lJ)(L,K),{data:X}=T||{},q=!h.is_repin&&!!H,J=H===(L.isAuth?L.username:void 0)?[n1.V3.OWNER]:X?.permissions,Q=(0,k.useMemo)(()=>H===(L.isAuth?L.username:void 0)?[n1.V3.OWNER]:X?.permissions,[X?.permissions,H,L]),ee=H===(L.isAuth?L.username:void 0)||!!J?.find(e=>n2.includes(e)),ea=H===(L.isAuth?L.username:void 0)||!!J?.find(e=>n2.includes(e)),{isWideVideo:en}=(0,n8.Z)((0,W.Z)({pin:h}))||{},ei=(0,n6.Z)({type:"Legacy",data:h},L,Y),et=(0,b.CA)(C?.data),el=q&&L.isAuth&&R("mweb_web_android_ios_backend_clbc_display_controls").anyEnabled&&(ee&&0===U||ea&&1===U),er=h.link_domain?.official_user?.username||h.native_creator?.username,es=(0,eM.Ms)(L,K)===er&&(0,eM.nl)(L,K)&&E.experimentsClient.checkExperiment("web_stl_tooling").anyEnabled,eo=O&&(B?.pages?.length??0)>0,ed=(0,n3.WE)(L,A,ei,et,C,el);F=O?{boxShadow:void 0,borderRadius:void 0}:a?ev.ko:ev.te;let eu=el&&"number"==typeof U,ec=ed&&!O&&!a,ep=(0,k.useMemo)(()=>et?C?.data?.results:null,[et,C]),em=(0,k.useMemo)(()=>({type:"Legacy",data:h}),[h]);return(0,j.jsx)(I.xu,{dangerouslySetInlineStyle:{__style:O?{...ev.BI.storyPinGradientStyle}:{}},"data-test-id":"gradient",display:"flex",flex:g?void 0:"grow",id:"gradient",justifyContent:"center",marginBottom:4*!a,width:g?void 0:"100%",children:(0,j.jsxs)(k.Fragment,{children:[eo&&B&&(0,j.jsx)(iZ,{appConfig:{type:"authDesktop",onClickThrough:i,onNavigateBack:t},clientTrackingParams:e,onIdeaPinCloseupCommentClick:()=>{s(!0)},onTogglePanel:m,pin:h,storyPinData:B,variant:"closeup",viewParameterType:157,viewType:3}),(0,j.jsx)(iD.Z,{isStoryPin:O,isWideVideo:en,children:(0,j.jsx)(eE.Z,{name:"CloseupBody",children:(0,j.jsxs)(I.xu,{ref:r,color:"default",direction:"column",display:"flex",height:"100%",width:"100%",children:[(0,j.jsxs)(I.xu,{alignItems:en?"center":void 0,direction:en?"column":void 0,display:en?"flex":void 0,children:[eu&&(0,j.jsx)(iO,{creatorUsername:G,permissions:Q,pinId:Z,sponsorshipStatus:U}),ec&&(0,j.jsx)(iN,{borderStyle:F,closeupWidth:p,isStoryPin:O,isWideVideo:en,pinKey:em,showPinStats:ei,trendsData:ep,viewportSize:A})]}),(0,j.jsx)(I.xu,{"data-test-id":"closeup-body",flex:"grow",children:(0,j.jsx)(aJ.Z,{id:"CloseupBody",children:(0,j.jsx)(n0,{clientTrackingParams:e,didShortClickThrough:n,goBack:t,handleCarouselSwipe:l,isCloseupMaximized:d,isDeletedStoryPin:!!N,isStoryPin:O,isVideoPin:y.isVideoPin,isWideVideo:!!en,onClickThrough:i,onCloseupBodyUpdate:w,onCommentSectionClick:s,onSaveButtonClick:o,onUpdate:$,outerBodyStyle:F,outerPaddingSize:eB.ER,pin:h,routePush:f,shopping:x,shouldShowPartnerModule:ed,shouldShowStlCarouselForOwnPin:es,showPinStats:ei,showRepinOnInitialRender:!c&&P,showTrendsOnPinCloseup:et,storyPinTaggedProducts:S,trafficSource:v,trendsData:C,viewParameterType:eo?157:void 0,viewportSize:A,viewType:3})})})]})})})]})})});function iV(e){return(0,k.useEffect)(()=>{(0,x.Z)("CloseupBodyContainer","/app/common/react/components/closeup/CloseupBody/CloseupBodyContainer.tsx")},[]),(0,j.jsx)(iz,{...e})}function iU({url:e,images:a,id:n,label:i,onPinClick:t,position:l=0}){(0,k.useEffect)(()=>{(0,x.Z)("RecentlyViewedPinRep","/app/common/react/components/BreadCrumbs/RecentlyViewedPinRep.tsx")},[]);let[r,s]=(0,k.useState)(!1),{logContextEvent:o}=(0,eA.u)();return(0,j.jsx)(I.xu,{"aria-selected":r?"true":"false","data-test-id":"recent-pin",id:n,role:"option",children:(0,j.jsx)(I.Tg,{href:e,onMouseEnter:()=>{s(!0),o({event_type:105,component:15421,element:18070,aux_data:{position:l.toString()}})},onMouseLeave:()=>{s(!1)},onTap:()=>{o({event_type:101,component:15421,element:18070,aux_data:{position:l.toString()}}),t&&t()},rounding:3,tabIndex:-1,tapStyle:"compress",children:(0,j.jsx)(I.zd,{height:137,rounding:3,wash:r,width:103,children:a["236x"]?.url&&(0,j.jsx)(I.Ee,{alt:i,fit:"cover",naturalHeight:a["236x"]?.height??1,naturalWidth:a["236x"]?.width??1,src:a["236x"].url})})})})}let iW={backdropFilter:"blur(4px)",backgroundColor:"rgba(255, 255, 255, 0.90)"},iG={...iW,transitionDuration:"0.3s",transitionTimingFunction:"cubic-bezier(0.34, 1.56, 0.64, 1)",transitionProperty:"transform, opacity",transformOrigin:"bottom left"},iH={...iW};function i$({toggle:e,recentPins:a,onPinClick:n,l2Interest:i,isAnimatingOut:t,handleMouseLeave:l}){var r;(0,k.useEffect)(()=>{(0,x.Z)("BreadCrumbsExpanded","/app/common/react/components/BreadCrumbs/BreadCrumbsExpanded.tsx")},[]);let s=(0,O.ZP)(),o=(0,k.useRef)(null),d=(0,I.JZ)(),[u,c]=(0,k.useState)(!1),{logContextEvent:p}=(0,eA.u)();(0,e4.Z)(()=>{c(!0)});let m=(0,k.useMemo)(()=>{let e=d?iH:iG;if(d){let a=0;return t?a=0:u&&(a=1),{...e,opacity:a,transform:"scale(1)"}}let a=0,n=.9;return t?(a=0,n=.9):u&&(a=1,n=1),{...e,opacity:a,transform:`scale(${n})`}},[d,u,t]);r=()=>{e()},(0,k.useEffect)(()=>{let e=e=>{!o.current||o.current.contains(e.target)||r(e)},a=e=>{"Escape"===e.key&&r(e)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),document.addEventListener("keydown",a),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e),document.removeEventListener("keydown",a)}},[o,r]);let g=(0,k.useMemo)(()=>s._('Compare ideas', 'breadcrumbs.expanded.compareIdeas', 'Title shown when users can view recently viewed pins in the breadcrumbs'),[s]);return(0,j.jsxs)(I.xu,{ref:o,alignItems:"start",borderStyle:"shadow",dangerouslySetInlineStyle:{__style:m},"data-test-id":"breadcrumbs-expanded",direction:"column",display:"flex",justifyContent:"center",onMouseLeave:l,padding:4,rounding:5,children:[(0,j.jsxs)(I.kC,{alignItems:"center",justifyContent:"between",width:"100%",children:[(0,j.jsx)(I.xv,{weight:"bold",children:g}),(0,j.jsx)(I.hU,{accessibilityLabel:s._('Close breadcrumbs', 'breadcrumbs.expanded.closeBreadcrumbs', 'Label for the button that closes the expanded breadcrumbs view'),icon:"minimize",iconColor:"darkGray",onClick:()=>{p({event_type:101,component:15421,element:18071}),e()},size:"sm"})]}),(0,j.jsx)(I.xv,{color:"subtle",size:"100",children:i?(0,N.nk)(s._('Recently viewed {{ interestName }} ideas', 'breadcrumbs.expanded.recentlyViewedInterestIdeas', 'Subtitle shown above the list of recently viewed ideas for a specific interest in the breadcrumbs, interestName: the name of the interest category'),{interestName:i.toLowerCase()}).join(""):s._('Recently viewed Pins', 'breadcrumbs.expanded.recentlyViewedPins', 'Subtitle shown above the list of recently viewed pins in the breadcrumbs')}),(0,j.jsx)(I.xu,{marginTop:2,children:(0,j.jsx)(I.kC,{gap:2,children:a.map((e,a)=>(0,j.jsx)(iU,{...e,onPinClick:n,position:a},e.id))})})]})}let iY={backdropFilter:"blur(4px)",backgroundColor:"rgba(255, 255, 255, 0.90)",animationDelay:"100ms",transitionDelay:"100ms",transitionDuration:".85s",transitionTimingFunction:"cubic-bezier(.19, 1.32, .48, 1)",transitionProperty:"transform, opacity",filter:"drop-shadow( 0px 0px 8px rgba(0,0,0,0.1))",shrink:0},iX={backdropFilter:"blur(4px)",backgroundColor:"rgba(255, 255, 255, 0.90)",transitionProperty:"opacity",transitionDuration:".85s",transitionTimingFunction:"ease-out",filter:"drop-shadow( 0px 0px 8px rgba(0,0,0,0.1))"},iq={...iY,transform:"translateY(200px)",opacity:0},iJ={...iY,transform:"translateY(0)",opacity:1},iQ={...iX,transform:"translateY(200px)",opacity:0},i0={...iX,transform:"translateY(0)",opacity:1},i1={...iY,transform:"translateY(0)",opacity:1},i2={...iX,transform:"translateY(0)",opacity:1},i3={border:"1px solid white",transform:"rotate(-3deg)",borderRadius:"9px",transition:"transform 0.2s ease-out",marginBottom:"1px"},i6={border:"1px solid white",transform:"rotate(-3deg)",borderRadius:"9px"};function i8({toggle:e,recentPins:a,shouldShow:n,showFirstTimeUI:i,isHovered:t=!1,isAnimatingOut:l,handleMouseLeave:r,handleMouseEnter:s}){(0,k.useEffect)(()=>{(0,x.Z)("BreadCrumbsMinified","/app/common/react/components/BreadCrumbs/BreadCrumbsMinified.tsx")},[]);let o=(0,k.useMemo)(()=>a.slice(0,3),[a]),[d,u]=(0,k.useState)(!1),c=(0,I.JZ)(),p=(0,ab.b)(),m=(0,O.ZP)(),{logContextEvent:g}=(0,eA.u)();(0,k.useEffect)(()=>{u(!0)},[]);let h=(0,k.useMemo)(()=>71,[]),y=(0,k.useMemo)(()=>l?{...c?i2:i1,opacity:1}:p?c?{...n?i0:iQ,opacity:d&&n?1:0}:{...n?iJ:iq,opacity:d&&n?1:0}:{...c?i2:i1,opacity:+!!d},[n,c,p,d,l]),_=(0,k.useCallback)(()=>{g({event_type:101,component:15421,element:18069}),e()},[e,g]),f=(0,k.useCallback)(e=>{let a=`${-(14*e)}px`;if(c)return{...i6,transform:`rotate(-3deg) translateX(${a})`};if(!(i||t))return{...i3,transform:`rotate(-3deg) translateX(${a})`};switch(e){case 0:return{...i3,transform:`rotate(-5deg) translateX(${-(14*e)-2}px) translateY(0px)`};case 1:return{...i3,transform:`rotate(-3deg) translateX(${-(14*e)}px) translateY(-2px)`};case 2:return{...i3,transform:`rotate(1deg) translateX(${-(14*e)+2}px) translateY(1px)`};default:return{...i3,translate:a}}},[t,c,i]);return(0,j.jsx)(I.iP,{accessibilityLabel:m._('Recently viewed Pins', 'breadcrumbs.minified.recentlyViewedPins', 'Accessibility label for the breadcrumbs minified component'),onMouseEnter:s,onMouseLeave:r,onTap:_,rounding:5,children:(0,j.jsx)(I.xu,{borderStyle:"shadow",dangerouslySetInlineStyle:{__style:y},"data-test-id":"breadcrumbs-minified",direction:"column",display:"flex",justifyContent:"center",paddingX:3,paddingY:2,role:"button",rounding:5,children:(0,j.jsxs)(I.kC,{alignItems:"center",direction:"row",gap:2,children:[(0,j.jsx)(I.kC,{gap:0,justifyContent:"between",width:h,children:o.map(({images:e,id:a,label:n},i)=>{let t=e["236x"],l=t?.url;return(0,j.jsx)(I.xu,{borderStyle:"raisedBottomShadow",dangerouslySetInlineStyle:{__style:f(i)},height:44,width:33,zIndex:new I.Ry(3-i),children:(0,j.jsx)(I.zd,{height:42,rounding:2,width:31,children:l?(0,j.jsx)(I.Ee,{alt:n||`Pin ${i+1}`,fit:"cover",naturalHeight:t.height??1,naturalWidth:t.width??1,src:t.url}):(0,j.jsx)(I.xu,{height:"100%",width:"100%"})})},a)})}),i&&(0,j.jsx)(I.xv,{overflow:"noWrap",size:"300",weight:"bold",children:m._('Compare ideas', 'breadcrumbs.expanded.compareIdeas', 'Title shown when users can view recently viewed pins in the breadcrumbs')})]})})})}var i4=n(111330),i7=n(366291),i5=n(753143),i9=n(77836);function te({l2Interest:e,pinId:a}){(0,k.useEffect)(()=>{(0,x.Z)("BreadCrumbs","/app/common/react/components/BreadCrumbs/BreadCrumbs.tsx")},[]);let[n,i]=(0,k.useState)(!1),[t,l]=(0,k.useState)(!1),[r,s]=(0,k.useState)(!1),[o,d]=(0,k.useState)(!1),[u,c]=(0,k.useState)(!1),p=(0,k.useRef)(null),{logContextEvent:m}=(0,eA.u)(),{experience:g}=(0,a0.Ow)(12);(0,e4.Z)(()=>{let e=setTimeout(()=>{l(!0)},1e3);return()=>clearTimeout(e)}),(0,e4.Z)(()=>{m({event_type:120,component:15421}),g?.experience_id===507740&&d(!0)}),(0,k.useEffect)(()=>{try{let e=(0,i5.M0)().getItem(i4.GT);"true"===e&&(i(!0),(0,i5.M0)().removeItem(i4.GT))}catch{(0,nz.nP)("web.closeup.breadcrumbs.localStorage_errors",{tags:{operation:"getItem"}})}},[]);let{data:h,refresh:y,isFetching:_,isLoaded:f}=(0,i7.Z)({url:"/v3/users/me/recent/engaged/pin/stories/",params:{pin_preview_count:6,l2_interest:e,fields:"pin.description,pin.id,pin.images[236x]"},enabledRouteRefresh:!0,noCache:!0});(0,k.useEffect)(()=>{y()},[a,y]);let P=(0,k.useMemo)(()=>{if(!h||!Array.isArray(h))return[];let e=h?.find(e=>"user_recently_viewed_pins"===e.story_type)?.objects?.map(({id:e,images:a,description:n})=>({images:a,id:e,label:n,url:`/pin/${e}`}))||[],n=h?.find(e=>"user_recently_saved_pins"===e.story_type)?.objects?.map(({id:e,images:a,description:n})=>({images:a,id:e,label:n,url:`/pin/${e}`}))?.filter(a=>!e.some(e=>e.id===a.id))||[],i=[...e,...n].filter(e=>e.id!==a).slice(0,5);return(0,nz.nP)(`web.closeup.breadcrumbs.displayed_pins.${i.length}`),i},[h,a]),S=(0,k.useCallback)(()=>{d(!1),n?(s(!0),c(!1),setTimeout(()=>{i(!1),s(!1)},300)):i(!0)},[n]),v=(0,k.useCallback)(()=>{c(!0),m({event_type:105,element:18069,component:15421})},[m]),b=(0,k.useCallback)(()=>{c(!1)},[]),C=(0,k.useCallback)(()=>{if(n||r)try{(0,i5.M0)().setItem(i4.GT,"true")}catch{(0,nz.nP)("web.closeup.breadcrumbs.localStorage_errors",{tags:{operation:"setItem"}})}},[n,r]),w=(0,k.useMemo)(()=>({toggle:S,recentPins:P,shouldShow:t,l2Interest:e,onPinClick:C,isAnimatingOut:r,isHovered:u,showFirstTimeUI:o,handleMouseLeave:b,handleMouseEnter:v}),[S,P,t,e,C,r,u,o,b,v]);return!e||P.length<3||_||!f?null:(0,j.jsx)(eE.Z,{name:"BreadCrumbs",children:(0,j.jsxs)(eR.Z,{children:[(0,j.jsxs)(I.xu,{position:"relative",children:[(0,j.jsx)(I.xu,{ref:p,bottom:!0,left:!0,position:"absolute",children:(0,j.jsx)(i8,{...w})}),(n||r)&&(0,j.jsx)(I.xu,{bottom:!0,left:!0,position:"absolute",zIndex:new I.Ry(1),children:(0,j.jsx)(i$,{...w})})]}),(0,j.jsx)(I.mh,{zIndex:i9.pS,children:(0,j.jsx)(a0.N,{anchors:{3022:p.current},idealDirection:"up",onAnchorTouch:"complete",placementId:12,scrollToDismiss:!0})})]})})}var ta=n(93966),tn=n(159527),ti=n(368974),tt=n(74459);function tl({pin:e,pinResource:a,topLevelTrafficSource:n,firstLoadComplete:i,relatedModulesContent:t,onWrapperClick:l,beforeBodyContent:r,afterBodyContent:s,isVideoPin:o,bodyContent:d,backButton:u}){(0,k.useEffect)(()=>{(0,x.Z)("CloseupContent","/app/common/react/components/closeup/CloseupContent.tsx")},[]);let c=(0,na.A)(),{closeupWithinMasonryEnabled:p,peekCloseupEnabled:m,viewportSize:g}=(0,X.x4)(),{mainImage:h}=(0,D.G)(),{sideBySideRedesignFastFollowsEnabled:y}=(0,eC.Z)(),_=(0,ig.t)(),f=(0,tt.Z)(),{isAuth:P}=(0,aZ.Z)(),{checkExperiment:S}=(0,e_.Z)(),[v,b]=(0,k.useState)(!1),C=S("closeup_dweb_breadcrumbs_by_vertical").anyEnabled&&e.l2_dominant_interest,w=(0,T.Z)({showProductDetailPage:!!e.is_eligible_for_pdp});(0,k.useEffect)(()=>{let e;return C&&(e=setTimeout(()=>{b(!0)},1e3)),()=>clearTimeout(e)},[C]),(0,e4.Z)(()=>{e.l2_dominant_interest?(0,nz.nP)("web.closeup.breadcrumbs.has_vertical.yes"):(0,nz.nP)("web.closeup.breadcrumbs.has_vertical.no")});let{error:A}=a,{story_pin_data_id:F}=e||{},[E,L]=(0,k.useState)(p||!o);(0,k.useEffect)(()=>{let e=E?void 0:setTimeout(()=>L(!0),1e3*!p);return()=>clearTimeout(e)},[p,E]);let{isEligibleForStaticImageIdeaPin:R}=eQ(e.story_pin_data_id),K=(0,k.useRef)(null),Z=(0,k.useRef)(null),[M,B]=(0,k.useState)(void 0),O=ta.yF+ta.oX,N=Math.floor((M??1)/O),z=O*N-ta.oX,V=(0,k.useCallback)(()=>{K.current&&Z.current&&B(window.innerWidth)},[]);(0,a2.Z)(()=>{window&&(0,nz.nP)("web.closeup.closeup_redesign.handleResize",{sampleRate:.1,tags:{sideBySideEnabled:y,isStoryPin:!!F,isVideoPin:o,windowHeight:window.innerHeight,windowWidth:window.innerWidth}}),m&&V()},K),(0,e4.Z)(()=>{window&&(0,nz.nP)("web.closeup.closeup_redesign.initialRender",{sampleRate:.1,tags:{sideBySideEnabled:y,isStoryPin:!!F,isVideoPin:o,windowHeight:window.innerHeight,windowWidth:window.innerWidth}})}),(0,k.useEffect)(()=>{m&&V()},[V,m]);let[U,W]=(0,k.useState)(!1);(0,k.useEffect)(()=>{let e=(0,tn.Z)(function(){h&&window&&(window.scrollY>h.height?W(!0):W(!1))},150);return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[h]);let{maxWidth:G}=(0,ev.Re)();if(0===Object.keys(e).length&&A)return(0,j.jsx)(ti.Z,{});let H=!!F&&!R,$=E&&t,Y=(0,ey.Z)({hasPin:!!e,hasPinRichMetadata:!!e?.rich_metadata,hasPinRichMetadataProducts:!!e?.rich_metadata?.products,hasPinRichMetadataArticle:!!e?.rich_metadata?.article,hasPinRichMetadataRecipe:!!e?.rich_metadata?.recipe,hasPinStoryPinData:!!e?.story_pin_data}),q=(0,j.jsx)("div",{ref:Z,className:"Closeup Module","data-test-id":i?"closeup-data-loaded":"",onClick:e=>{!P&&(H||l(e),(0,ay.sX)("closefakemodal"),c&&c?.abort("closefakemodal"))},role:"presentation",style:{cursor:P?void 0:"zoom-out",display:"flex",width:"100%",maxWidth:G,margin:m?"0 auto":void 0},children:(0,j.jsxs)(I.kC,{alignItems:"stretch",direction:"row",flex:"grow",justifyContent:"center",children:[m?(0,j.jsxs)(I.xu,{dangerouslySetInlineStyle:{__style:{flexDirection:"column"}},display:"flex",marginTop:5,children:[u,r]}):(0,j.jsx)(k.Fragment,{children:r}),d,s]})},"closeup-content");return(0,j.jsxs)(I.xu,{ref:K,width:"100%",children:[(0,j.jsxs)(I.kC,{direction:p?"row":"column",justifyContent:"center",children:[!p&&q,p&&!w&&(u||r)&&(0,j.jsx)(I.xu,{alignItems:"center","data-test-id":i?"closeup-data-loaded":"",direction:"column",display:"flex",marginStart:4,children:(0,j.jsxs)(I.Le,{top:_+2,children:[u,(0,j.jsx)(I.xu,{"aria-hidden":U,dangerouslySetInlineStyle:{__style:{transition:"opacity 300ms ease-in-out"}},opacity:+!U,children:r})]})}),(0,j.jsx)(I.kC.Item,{flex:"grow",children:(0,j.jsxs)(I.xu,{alignItems:"stretch",dangerouslySetInlineStyle:{__style:{paddingRight:p&&!w?"80px":void 0}},direction:"column",display:"flex",justifyContent:"center",paddingX:4*!p,width:"100%",children:[m&&z&&"lg"!==g&&(0,j.jsx)(I.kC.Item,{alignSelf:"center",children:(0,j.jsx)(aJ.Z,{id:"ShoppingModule",children:(0,j.jsx)(e6.Z,{moduleWidth:z,pinKey:{type:"Legacy",data:e},trafficSource:n,viewParameter:Y})})}),w&&(0,j.jsx)(I.xu,{dangerouslySetInlineStyle:{__style:{marginLeft:`${f+24}px`,marginTop:`${_+8}px`}},left:!0,position:"fixed",top:!0,zIndex:new I.Ry(1),children:u}),$]})})]}),v&&(0,j.jsx)(I.Le,{bottom:0,children:(0,j.jsx)(I.xu,{bottom:!0,left:!0,padding:4,position:"absolute",children:(0,j.jsx)(aJ.Z,{id:"BreadCrumbs",children:(0,j.jsx)(te,{l2Interest:e.l2_dominant_interest?.label,pinId:e.id})})})})]})}var tr=n(762802),ts=n(704088);let to=(0,ez.Z)(()=>Promise.resolve().then(n.bind(n,437320)),{ssr:!1},e=>437320,"ExperienceHeroCommon",e=>[]),td=function({abortNoActionPlacementTimeout:e,classProps:a,classState:n,commerceData:i,showCloseupContentRight:t,showProductDetailPage:l,paneWidth:r,maxWidth:s,descriptionPaneWidth:o,handleCarouselSwipe:d,handleFocus:u,setIsCommentAttachmentSelectorOpen:c,setIsCommentComposerFocused:p,setIsCommentPopoverInteractionActive:m,setIsCommentThreadExpanded:g,setIsCloseupMediaViewerOpen:h,setIsMediaViewerOpen:y,setIsProductDetailsExpanded:_,setIsShoppingModuleExpanded:f,handleBackButtonClick:x,closeupContent:P,isCommentAttachmentSelectorOpen:S,isCommentComposerFocused:v,isCommentPopoverInteractionActive:b,isCommentThreadExpanded:C,isCloseupMediaViewerOpen:I,isMediaViewerOpen:w,isProductDetailsExpanded:T,isShoppingModuleExpanded:A,closeupWithinMasonryEnabled:F,peekCloseupEnabled:E,setAbortNoActionPlacementTimeout:L,clientTrackingParams:R,calculatedImageHeight:K,setCalculatedImageHeight:Z}){let{pin:M,pinId:B}=a,{visualState:{carouselData:O,mainImage:N,previewImage:z},viewportSize:V}=n,U=!w&&!I&&!S&&!F,G=(0,k.useMemo)(()=>({showCloseupContentRight:t,showProductDetailPage:l,viewportSize:V,paneWidth:r,maxWidth:s,descriptionPaneWidth:o,isCommentAttachmentSelectorOpen:S,isCommentComposerFocused:v,isCommentPopoverInteractionActive:b,isCommentThreadExpanded:C,isCloseupMediaViewerOpen:I,isMediaViewerOpen:w,isProductDetailsExpanded:T,isShoppingModuleExpanded:A,setIsCommentAttachmentSelectorOpen:c,setIsCommentComposerFocused:p,setIsCommentPopoverInteractionActive:m,setIsCommentThreadExpanded:g,setIsCloseupMediaViewerOpen:h,setIsMediaViewerOpen:y,setIsProductDetailsExpanded:_,setIsShoppingModuleExpanded:f,closeupWithinMasonryEnabled:F,peekCloseupEnabled:E,setAbortNoActionPlacementTimeout:L,clientTrackingParams:R,calculatedImageHeight:K,setCalculatedImageHeight:Z}),[K,R,F,o,I,S,v,b,C,w,T,A,s,r,E,L,Z,h,c,p,m,g,y,_,f,t,l,V]),H=(0,k.useMemo)(()=>({mainImage:N,previewImage:z,carouselInfo:O&&{carouselData:O,handleCarouselSwipe:d,viewType:I?675:3,componentType:M.is_eligible_for_pdp?14186:85,viewParameter:(0,ey.Z)({hasPin:!0,hasPinRichMetadata:!!M.rich_metadata,hasPinRichMetadataProducts:!!M.rich_metadata?.products,hasPinRichMetadataArticle:!!M.rich_metadata?.article,hasPinRichMetadataRecipe:!!M.rich_metadata?.recipe,hasPinStoryPinData:!!M.story_pin_data})}}),[O,d,I,N,M.is_eligible_for_pdp,M.rich_metadata,M.story_pin_data,z]);return(0,j.jsx)(X.bq,{value:G,children:(0,j.jsxs)(D.A,{overrideValue:H,pinKey:{type:"Legacy",data:M},children:[(0,j.jsx)(a0.k6,{placementId:1000141}),(0,j.jsx)(a0.k6,{placementId:1000499}),(0,j.jsx)(a0.H6,{placementId:1000140}),(0,j.jsx)(a0.OR,{abortNoActionPlacementTimeout:e,extraContext:{pin_id:B,is_promoted:M.is_promoted},placementId:1000564}),(0,j.jsx)(a0.iH,{placementId:12}),(0,j.jsx)(a0.b9,{placementId:12}),(0,j.jsx)(a0.nj,{placementId:12}),(0,j.jsx)(a0._f,{placementId:12}),(0,j.jsx)(ts.Z,{placementId:12}),(0,j.jsx)(nu.Z,{auxData:i,clientTrackingParams:R,objectId:B,view:3,viewParameter:(0,W.Z)(a)?(0,ey.Z)({hasPin:!!M,hasPinRichMetadata:!!M.rich_metadata,hasPinRichMetadataProducts:!!M.rich_metadata?.products,hasPinRichMetadataArticle:!!M.rich_metadata?.article,hasPinRichMetadataRecipe:!!M.rich_metadata?.recipe,hasPinStoryPinData:!!M.story_pin_data}):void 0,children:(0,j.jsxs)("div",{className:"reactCloseupScrollContainer","data-test-id":"closeup-layout",onFocus:u,children:[(0,j.jsx)(eE.Z,{name:"SafeSuspense_Closeup_ExperienceHero",children:(0,j.jsx)(to,{placementId:12})}),(0,j.jsx)(a0.O9,{placementId:12}),P,U&&(0,j.jsx)(tr.Z,{onClose:x}),(0,j.jsx)(a0.RK,{placementId:12})]})})]})})};var tu=n(127753);let tc=(0,ez.Z)(()=>Promise.resolve().then(n.bind(n,589183)),void 0,e=>589183,"app-common-react-components-closeup-CloseupRelatedModules-CloseupRelatedModulesInclusiveFilters",e=>[]),tp=(0,ez.Z)(()=>n.e("82713").then(n.bind(n,204204)),void 0,e=>204204,"app-common-react-components-closeup-CloseupRelatedModules-CloseupRelatedModuleOneTapConfiguration",e=>["82713"]),tm=(0,ez.Z)(()=>n.e("99743").then(n.bind(n,412098)),void 0,e=>412098,"app-common-react-components-closeup-CloseupRelatedModules-CloseupRelatedModulesHeader",e=>["99743"]),tg=(void 0!==p||(p=n(718611)).hash&&"535b0dce979f4e368b354c1d7db63f73"!==p.hash&&console.error("The definition of 'CloseupRelatedModule_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),p),th=(0,k.forwardRef)(({clientTrackingParams:e,pinKey:a,searchQuery:n,setRelatedPinsHeaderRef:i,slotIndex:t,story:l,trafficSource:r,viewParameter:s,viewportSize:o},d)=>{let u=(0,A.Z)(tg,a),{closeupWithinMasonryEnabled:c}=(0,X.x4)();if(!l)return null;let{story_type:p}=l,m=(0,tu.oV)(p);return"related_products_collage"===p?(0,j.jsx)(I.xu,{alignSelf:"center","data-test-id":"related-modules-one-tap-configuration",children:(0,j.jsx)(tp,{pinKey:u,searchQuery:n,slotIndex:t,storyKey:{type:"Legacy",data:l},trafficSource:r,viewParameter:s,viewportSize:o})}):(0,tu.HM)(p)&&m?!c&&(0,j.jsx)(I.xu,{alignSelf:"center",children:(0,j.jsx)(tc,{filter:m,story:l,viewParameter:s})}):"related_modules_header"===p?(0,j.jsx)(I.xu,{ref:i,"data-test-id":"related-modules-header",children:(0,j.jsx)(tm,{ref:d,clientTrackingParams:e,slotIndex:t,storyId:l.id,storyType:p,title:l.title?.format,viewParameter:s})}):null});var ty=n(181993);function t_(){(0,k.useEffect)(()=>{(0,x.Z)("CloseupEndOfFilteredFeed","/app/common/react/components/closeup/CloseupEndOfFilteredFeed.tsx")},[]);let e=(0,O.ZP)();return(0,j.jsxs)(I.xu,{paddingY:16,children:[(0,j.jsxs)(I.kC,{alignItems:"center",direction:"column",gap:4,children:[(0,j.jsx)(I.xv,{align:"center",size:"500",weight:"bold",children:e._('You\'ve reached the end', 'closeup.filteredFeed.enfOfFeed.title', 'message to let users know they have reached the end of the filtered feed in closeup')}),(0,j.jsx)(I.xv,{align:"center",children:e._('Try removing a few filters to help us show more results.', 'closeup.filteredFeed.enfOfFeed.actionOne', 'message to let users know they can remove filters to see more results')})]}),(0,j.jsx)(ty.Z,{})]})}function tf(){(0,k.useEffect)(()=>{(0,x.Z)("CloseupFilteredFeedNoResultsFound","/app/common/react/components/closeup/CloseupFilteredFeedNoResultsFound.tsx")},[]);let e=(0,O.ZP)();return(0,j.jsx)(I.xu,{paddingY:16,children:(0,j.jsxs)(I.kC,{alignItems:"center",direction:"column",gap:4,children:[(0,j.jsx)(I.xv,{align:"center",size:"500",weight:"bold",children:e._('No results found', 'closeup.filteredFeed.noResultsFound.title', 'message to let users know there are no results found for the selected filters in closeup')}),(0,j.jsx)(I.xv,{align:"center",children:e._('Try removing a few filters to help us show more results.', 'closeup.filteredFeed.noResultsFound.actionOne', 'message to let users know they can remove filters to see more results')}),(0,j.jsx)(ty.Z,{})]})})}var tx=n(589183);let tk={cursor:"auto"},tP=e=>{e.stopPropagation()};function tS({className:e,children:a}){return(0,k.useEffect)(()=>{(0,x.Z)("FakeModalPageContent","/app/common/react/components/closeup/FakeModalPageContent.tsx")},[]),(0,j.jsx)("div",{className:e,onClick:tP,role:"presentation",style:tk,children:a})}let tv=["closeup_module","shopping_module","inclusive_filters_module"];function tb(e){return e.filter(e=>"object"==typeof e&&null!==e&&"type"in e&&tv.includes(e.type)).length}function tC(e){if(!e)return"";let[a,n]=e.split(":");return a&&n?a.includes("skin_color")?JSON.stringify({10:{tab_option_selections:[n]}}):a.includes("hair_pattern")?JSON.stringify({11:{tab_option_selections:[n]}}):a.includes("body_type_range")?JSON.stringify({12:{tab_option_selections:[n]}}):"":""}var tI=n(449930),tw=n(142689),tT=n(748065),tA=n(940280);function tF({isFromBackButton:e,referringSource:a,relatedModulesRef:n}){!e&&n?.current&&a===tA.i.SHOPPING_FILTER&&setTimeout(()=>{n.current?.scrollIntoView(),window.scrollBy(0,-100)},10)}var tE=n(184857),tj=n(744862),tL=n(47426),tR=n(661037);function tK({coverImages:e,height:a,isHovered:n,onClick:i,onMouseEnter:t,onMouseLeave:l,textType:r,text:s,url:o,width:d,dataTestId:u}){(0,k.useEffect)(()=>{(0,x.Z)("ActionBubble","/app/www/discover/Bubbles/ActionBubble.tsx")},[]);let c=e&&(e["236x"]||e["280x280"]);return(0,j.jsx)(tR.Z,{backgroundColor:"gray",coverImage:c,height:a,isHovered:n,onClick:i,onMouseEnter:t,onMouseLeave:l,url:o,width:d,children:(0,j.jsx)(I.xu,{alignItems:"center","data-test-id":u,display:"flex",height:a,justifyContent:"center",padding:3,position:"absolute",top:!0,width:d||"100%",children:"text"===r?(0,j.jsx)(I.xu,{alignItems:"center",display:"flex",height:48,padding:3,children:(0,j.jsx)(I.X6,{align:"center",color:"light",size:"600",children:s})}):(0,j.jsx)(I.xu,{alignItems:"center",color:"secondary",display:"flex",height:48,padding:3,rounding:"pill",children:(0,j.jsx)(I.xv,{align:"center",weight:"bold",children:s})})})})}function tZ({data:e}){(0,k.useEffect)(()=>{(0,x.Z)("ShoppingStoryTemplates","/app/common/react/components/shopping/templates/ShoppingStoryTemplates.tsx")},[]);let{action:a,container_type:n,objects:i,title:t}=e||{},{format:l}=t??{},{text:r,url:s,user:o={}}=a??{},{image_large_url:d,full_name:u,avatar_color_index:c}=o,{images:p}=i?.find(e=>"pin"===e.type)||{},m=null,g=(0,tL.Z)({url:s})?"nofollow":"none";return 81===n&&(m=(0,j.jsxs)(I.kC,{direction:"column",gap:{row:0,column:2},children:[(0,j.jsxs)(I.xu,{position:"relative",children:[(0,j.jsx)(tK,{coverImages:p??void 0,height:ta.yF,text:l??"",textType:"text",url:s??""}),o.imageUrl&&(0,j.jsx)(I.xu,{left:!0,padding:2,position:"absolute",top:!0,children:(0,j.jsx)(tj.qE,{color:c||void 0,name:u||"",outline:!0,size:"md",src:d??""})})]}),(0,j.jsx)(I.ZP,{fullWidth:!0,href:s??"",rel:g,size:"lg",text:r??""})]})),m}let tD=[81,"UPSELL_PACKAGE_SQUARE"];var tM=n(624076),tB=n(469167),tO=n(806438),tN=n(355363),tz=n(849233),tV=n(517250),tU=n(955421),tW=n(378888),tG=n(725191),tH=n(78187),t$=n(947543);let tY=(0,ez.Z)(()=>n.e("75139").then(n.bind(n,793760)),void 0,e=>793760,"app-packages-StructuredFeed-ModuleReps-utils-StructuredFeedStoryModule",e=>["75139"]);function tX(e){return"columnSpan"in e?e.columnSpan:"story"===e.type?e.display_options?.content_display?.grid_layout?.cols??1:1}let tq=(void 0!==m||(m=n(327060)).hash&&"3fa8620068a79dc4a73dbbcde3f352f9"!==m.hash&&console.error("The definition of 'CloseupRelatedPins_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),m),tJ=({closeupBody:e,surface:a="RelatedPinGrid",clientTrackingParams:n,isFilteredFeed:i,lfvExperiences:t,relatedPinsResource:l,setHasRelatedPins:r,i18n:s,closeupWithinMasonryEnabled:o,logContextEvent:d,relatedPinsInRow:u,pin:c,relatedPinsContainerRef:p,topLevelTrafficSource:m,viewParameter:g,relatedModulesStopwatch:h})=>{let y,[_,f]=(0,k.useState)(l.auxData?.grid_layout?.w_h_ratio),[x,P]=(0,k.useState)(!0),v=(0,k.useRef)(null),b=(0,k.useRef)(null),C=(0,tT.Z)(),w=(0,k.useMemo)(()=>(l.data||[]).filter(e=>"pin"!==e.type&&[tH.Mq.SKIN,tH.Mq.HAIR,tH.Mq.BODY].includes(e.story_type??"")).find(e=>(0,tu.HM)(e.story_type??"")),[l]),{closeupMasonryModules:T,hasShoppingModule:A,inclusiveFilters:F}=(0,tI.ZP)({pinId:c.entityId,inclusiveModuleToCache:w,showProductDetailPage:!1}),E=F?(0,tu.oV)(F.story_type??""):"",{inInclusiveEfficientRefinements:L}=(0,tw.Z)(E),{search:R}=(0,S.TH)(),K=tC(new URLSearchParams(R).get("filters")??""),Z=o&&L&&K,D=(0,ep.Z)(Z?{name:"ApiResource",options:{url:`/v3/pins/${c.entityId}/related/pins/filter/`,data:{fields:tE.Z,related_pins_tabs_selections:K}}}:null),M=Z?D:l,{isAtEnd:B,fetchMore:O,data:N,isFetching:z,nextBookmark:V}=M;(0,e4.Z)(()=>{d({event_type:13,view_parameter:g,view_type:3,component:86,clientTrackingParams:n})}),(0,k.useEffect)(()=>{!_&&M.auxData?.grid_layout?.w_h_ratio&&(f(M.auxData.grid_layout.w_h_ratio),v.current=window)},[o,_,M]);let U=`relatedPins:${c.entityId}`,W=(0,k.useMemo)(()=>["related_products_button_footer","related_domain_carousel","related_products_feed_header"],[]),G=(N&&N?.findIndex(e=>"pin"===e.type))??0,H=(N||[]).slice(G).filter(e=>"pin"===e.type||!W.includes(e?.story_type??"")),$=(0,k.useMemo)(()=>[...o?T:[],...H||[]],[o,T,H]),Y=(0,k.useMemo)(()=>(N||[]).slice(G).filter(e=>"pin"===e.type||!W.includes(e?.story_type??"")),[N,G,W]),X=(0,k.useMemo)(()=>{let e=[];return o&&e.push(...T),e.push(...Y),e},[T,o,Y]),q=C?X:$,J=L&&A&&!!F,Q=(0,k.useMemo)(()=>({pin_id:c.entityId}),[c.entityId]),ee=(0,k.useMemo)(()=>tb(q),[q]),ea=({data:n,itemIdx:i})=>{let l,r=(0,ey.Z)({hasPin:!!c,hasPinRichMetadata:!!c.richMetadata,hasPinRichMetadataProducts:!!c.richMetadata?.products,hasPinRichMetadataArticle:!!c.richMetadata?.article,hasPinRichMetadataRecipe:!!c.richMetadata?.recipe,hasPinStoryPinData:!!c.storyPinData}),s=i-ee;if(J&&("shopping_module"===n.type||"inclusive_filters_module"===n.type))"shopping_module"===n.type&&(l=(0,j.jsxs)(I.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",children:[(0,j.jsx)(e6.Z,{moduleWidth:"100%",pinKey:c,trafficSource:m,viewParameter:r}),F?.story_type&&E&&(0,j.jsx)(I.xu,{marginTop:2,children:(0,j.jsx)(tx.default,{filter:E,story:F,viewParameter:r})})]}));else switch(n.type){case"closeup_module":l=e;break;case"shopping_module":l=(0,j.jsx)(e6.Z,{moduleWidth:"100%",pinKey:c,trafficSource:m,viewParameter:r});break;case"inclusive_filters_module":E&&(l=(0,j.jsx)(tx.default,{filter:E,story:F,viewParameter:r}));break;case"story":switch((0,nz.nP)("web_story_card_type",{sampleRate:1,tags:{story_type:n.story_type||"unknown",surface:"closeup"}}),n.story_type){case"BUBBLE_ONE_COL":l=(0,j.jsx)(tG.default,{bubbles:n.objects,id:n.id??"",referringSource:n.referring_source,slotIndex:s,storyType:n.story_type,title:n.title,viewParameter:r,viewType:3});break;case"related_query_shop_upsell_closeup":l=(0,j.jsx)(tM.default,{itemIdx:s,story:n,viewParameter:r,viewType:3});break;default:l=null}n.container_type&&(tD.includes(n.container_type)?l=(0,j.jsx)(tZ,{data:n}):(0,tU.Z)(n.container_type)&&(l=(0,j.jsx)(tY,{initialSlotIndex:s,story:n,storyKey:{type:"Legacy",data:n},styleOverrides:{showModuleBorder:(()=>{let e=tX(n);return"number"!=typeof e||e>1})()},view:3,viewParameter:r})));break;default:{let e=(0,tO.Z)(t);l=(0,j.jsx)(t$.Z,{componentType:13007,duploQueryRef:null,imageOnlyOption:e?"image-only":"default",pinId:n.id,pinImageCrop:_?{height:tV.zX*_,width:tV.zX}:null,slotIndex:s,surface:a,trackingParams:n?.tracking_params,viewData:C?Q:{pin_id:c.entityId},viewParameter:r,viewType:3})}}return(0,j.jsx)(tS,{children:l})},en=M.data?M.data.length:0;(0,k.useEffect)(()=>{r(0!==en)},[en,r]);let ei=(0,k.useRef)(!0),et=(0,k.useRef)(0),el=()=>{et.current=performance.now()};(0,k.useEffect)(()=>{ei.current&&(x||(h?.abort(),ei.current=!1),0!==en&&(B&&(h?.stop(),ei.current=!1),et.current>0&&(h?.stop(et.current),ei.current=!1)))},[x,B,h,h?.isTiming,en]);let er=(i||!!Z)&&V===tz.qx,es=(0,aQ.Z)({isHiddenPin:c?.isHidden,isUnsafePin:c?.isUnsafe}),eo=!!(o&&(1===q.length||A&&2===q.length)),ed=(0,k.useMemo)(()=>o?(0,tI.fz)(L):void 0,[o,L]);return C?y=ed:o&&(y=(0,tI.fz)(!!L)),(0,j.jsx)(iP.Z,{onVisibilityChange:e=>{P(e.some(e=>e.isIntersecting))},options:{threshold:[0]},children:e=>(0,j.jsx)(I.xu,{ref:e,children:(0,j.jsx)(I.xu,{ref:p,children:(0,j.jsx)(nu.Z,{clientTrackingParams:n,component:86,viewParameter:(0,ey.Z)({hasPin:!!c,hasPinRichMetadata:!!c.richMetadata,hasPinRichMetadataProducts:!!c.richMetadata?.products,hasPinRichMetadataArticle:!!c.richMetadata?.article,hasPinRichMetadataRecipe:!!c.richMetadata?.recipe,hasPinStoryPinData:!!c.storyPinData}),children:(0,j.jsxs)(k.Fragment,{children:[(0,j.jsx)(tN.Z,{isAtEndOfFeed:B,isPlaceholderGrid:z&&(!q.length||eo),itemCount:q.length,stopwatchContext:h,stopwatchSetVisuallyCompleteResult:el,children:(0,j.jsx)(tB.default,{_getResponsiveModuleConfigForSecondItem:y,align:o?"center":void 0,cacheKey:U,getColumnSpanConfig:o?tX:void 0,isFetching:z,isGridCentered:u,isLoadedAccessibilityLabel:q.length>0?s._('Loaded more related product results', 'closeup.relatedProducts.results', 'Accessibility label for loaded more related product results'):s._('Loaded related products result', 'closeup.relatedProducts.results', 'Accessibility label for loaded related products result'),isLoadingAccessibilityLabel:q.length>0?s._('Loading more related products results', 'closeup.relatedProducts.loading', 'Accessibility label for loading more related products results'):s._('Loading related products results', 'closeup.relatedProducts.loading', 'Accessibility label for loading related products results'),isLoadingStateEnabled:es,items:q,layout:"basic",loadItems:O,masonryRef:b,minCols:o?2:void 0,renderItem:ea,scrollContainerRef:v,serverRender:!0,virtualize:tI.o1})}),er&&en>0&&(0,j.jsx)(t_,{}),er&&0===en&&(0,j.jsx)(tf,{})]})})})})})};function tQ({pinKey:e,relatedModulesRef:a,...n}){(0,k.useEffect)(()=>{(0,x.Z)("CloseupRelatedPins","/app/common/react/components/closeup/CloseupRelatedPins.tsx")},[]);let i=(0,O.ZP)(),t=(0,ac.Z)(),{clientTrackingParams:l,closeupWithinMasonryEnabled:r}=(0,X.x4)(),s=(0,S.TH)(),o=(0,S.ur)(),d=(0,A.Z)(tq,e),u=(0,tW.mB)(s.search).rs,c="POP"===o;return(0,k.useEffect)(()=>{tF({isFromBackButton:c,referringSource:u,relatedModulesRef:a})},[c,s,u,a]),(0,j.jsx)(tJ,{...n,clientTrackingParams:l,closeupWithinMasonryEnabled:r,i18n:i,logContextEvent:t,pin:d,relatedPinsInRow:r})}var t0=n(231760),t1=n(458963);let t2=new Set([...ev.aW,"related_domain_carousel","related_products_collage",tH.Mq.SKIN,tH.Mq.HAIR,tH.Mq.BODY]),t3=(void 0!==g||(g=n(824065)).hash&&"8b3eeb9b4671e020ac715d9513179386"!==g.hash&&console.error("The definition of 'CloseupRelatedModulesContainer_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),g);function t6({clientTrackingParams:e,closeupBody:a,isVideoPin:n,isYoutubePin:i,pinKey:t,relatedResourceOptions:l,searchQuery:r,relatedPinsContainerRef:s,setRelatedPinsHeaderRef:o,topLevelTrafficSource:d,trafficSource:u,viewParameter:c,viewportSize:p,relatedModulesStopwatch:m}){let{closeupWithinMasonryEnabled:g}=(0,X.x4)(),[h,y]=(0,k.useState)(!n),{checkExperiment:_}=(0,e_.Z)(),{search:f}=(0,S.TH)(),x=new URLSearchParams(f).get("utm_source"),P=(0,ep.Z)(h&&"ads_manager"!==x?l:null),v=(0,t1.Z)(),b=(0,k.useRef)(null),C=(0,k.useCallback)(e=>{e&&(b.current=e)},[]),[w,T]=(0,k.useState)(!0);(0,k.useEffect)(()=>{let e=h?void 0:setTimeout(()=>y(!0),g&&(n||i&&"enabled_delay"===_("web_closeup_youtube_player").group)?1e3:0);return()=>clearTimeout(e)},[g,n,h,_,i]);let F=(0,A.Z)(t3,t);return(0,j.jsx)(a3.Z,{metricName:"RelatedModulesFeed",children:(0,j.jsxs)(I.xu,{ref:C,"data-test-id":"relatedPins",direction:"column",display:"flex",flex:"grow",position:"relative",children:[w&&(P.data||[]).filter(e=>"story_type"in e&&null!=e.story_type&&t2.has(e.story_type)).map((a,n)=>(0,j.jsx)(I.xu,{"data-test-id":`related-module-${a.id}`,direction:"column",display:"flex",children:(0,j.jsx)(th,{ref:b,clientTrackingParams:e,pinKey:F,searchQuery:r,setRelatedPinsHeaderRef:o,slotIndex:n,story:a,trafficSource:u,viewParameter:c,viewportSize:p})},`related-module-${a.id}`)),(0,j.jsx)(tQ,{closeupBody:a,lfvExperiences:v,pinKey:F,relatedModulesRef:b,relatedModulesStopwatch:m,relatedPinsContainerRef:s,relatedPinsResource:P,setHasRelatedPins:T,topLevelTrafficSource:d,viewParameter:c})]})})}function t8(e){(0,k.useEffect)(()=>{(0,x.Z)("CloseupRelatedModulesContainer","/app/common/react/components/closeup/CloseupRelatedModules/CloseupRelatedModulesContainer.tsx")},[]);let a=(0,ab.b)(),n=(0,t0.B6)(a?"related_feed_pageload":"related_feed");return(0,e4.Z)(()=>{n?.start()}),(0,j.jsx)(t6,{...e,relatedModulesStopwatch:n})}let t4=["236x","474x","564x","736x"];function t7({carouselData:e,images:a,product:n,shouldUnifyImageSizes:i}){return e?.carousel_slots?.length?e:n?.additional_images?.length?function(e,a,n,i,t){let l=[...e?[{images:e}]:[],...(a??[]).map(({canonical_images:e,image_signature:a})=>({images:e||void 0,image_signature:a||void 0}))];return{carousel_slots:i?function(e){function a(e,{imageKey:a,height:n,width:i}){return e.images&&e.images[a]&&(e={...e,images:{...e.images,[a]:{...e.images[a],height:n,width:i}}}),e}let n=t4.map(function(a){let n=Math.min(...e.map(e=>e.images&&e.images[a]&&e.images[a].height||1/0)),i=Math.min(...e.map(e=>e.images&&e.images[a]&&e.images[a].width||1/0));return{imageKey:a,height:n,width:i}});return e.map(e=>n.reduce(a,e))}(l):l,index:n||0,id:t}}(a,n.additional_images,e?.index,i,n.id):e||void 0}var t5=n(607652);let t9=e=>{let{url:a,width:n,height:i}=e||{};return a&&n&&i?{url:a,width:n,height:i}:void 0};function le(e){let{pin:a,pinId:n,pinResource:i}=e,t=(0,k.useMemo)(()=>a,[a]),l=(0,k.useMemo)(()=>({pinKey:{type:"Legacy",data:t}}),[t]),{mainPinImage:r}=(0,t5.Z)(l);return(0,k.useMemo)(()=>(e=>{let a={...e.pin,...e.pinResource.data},n=t7({carouselData:a.carousel_data,images:a.images,product:(a.rich_metadata||a.rich_summary)?.products?.[0]});return{availableWidthForContentOnRight:!1,backButtonLabelFitInScreen:null,closeupBodyContainerHeight:0,closeupContainerHeight:0,firstLoadComplete:!1,didLongClickThrough:!1,didPinClickThrough:!1,didShortClickThrough:!1,didMountAfterSavePlacement:!1,isCloseupMaximized:!1,isCommentSectionOpen:!0,isOverRelatedPins:null,isRelatedInterestsBannerDismissed:!1,intervalId:null,landOnCurrentPage:!1,loginModalOptions:null,modalOpen:!1,myTry:e.pin?{isDoneByMe:!!e.pin.done_by_me}:null,newshubCloseupCapBackButtonCount:0,passScrollThreshold:!1,pin:a,pinId:e.pinId,campaignCreationTriggered:!1,relatedPinsUpsellShown:!1,showBackButton:!0,showProductDetailPage:!!a.is_eligible_for_pdp,shopping:{catalogId:-1,variantId:void 0},viewportSize:"lg",visualState:{carouselData:n&&{...n,index:e.pin.carousel_data?.index||0},mainImage:e.mainImage,previewImage:t9(a.images?.["236x"])},v1DeprecationModalDismissed:!1}})({pin:t,pinId:n,pinResource:i,mainImage:r}),[r,t,n,i])}let la=(0,a0.RL)(12,(e,a)=>({pin_id:e.pinId,email_id:e.emailId,did_long_clickthrough:a.didLongClickThrough||!1,did_pin_clickthrough:a.didPinClickThrough||!1,did_repin:a.didRepin||!1,is_own_or_group_pin:a.is_own_or_group_pin||!1,login_page_type:a.loginPageType||"unknown",scroll_to_threshold:a.scrollToThreshold,pin_image_signature:a.pin_image_signature,is_creator_card_shown:!!ek({domain:e.pin.domain??"",hasLinkDomainOfficialUser:!!e.pin.link_domain?.official_user,hasLinkUserWebsiteOfficialUser:!!e.pin.link_user_website?.official_user,hasNativeCreator:!!e.pin.native_creator,hasThirdPartyPinOwner:!!e.pin.third_party_pin_owner,isPromoted:!!e.pin.is_promoted,pinnerDomainUrl:e.pin.pinner?.domain_url??"",pinnerDomainVerified:!!e.pin.pinner?.domain_verified}),creator_username:e.pin?.closeup_attribution?.full_name}));var ln=n(518285),li=n(782881),lt=n(30216),ll=n(686319),lr=n(278533),ls=n(761256),lo=n(503863),ld=n(817309),lu=n(887946),lc=n(91479),lp=n(87853),lm=n(973940),lg=n(322888);let lh=(void 0!==h||(h=n(208540)).hash&&"efee9cd30f69b524ed9920746ed65ceb"!==h.hash&&console.error("The definition of 'useHandleBackButtonClick_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),h);function ly({logCommerceAuxData:e,deepLinkBackGoesToBoard:a,element:n,goBack:i,pinKey:t,routePush:l,trafficSource:r,viewer:s,requestContext:o,viewType:d,viewParameterType:u,componentType:c},p){let m=(0,A.Z)(lh,t),g=(0,E.Z)(m),h=s.isAuth&&s.partner;return{onHandleBackButtonClick:(0,k.useCallback)(()=>{let t=m.promotedLeadForm?.leadId,s=e?g():null;m.promotedIsLeadAd?(p({event_type:4100,view_type:175,view_parameter:null,component:null,object_id_str:m.entityId,aux_data:{...s,lead_form_id:t,is_lead_ad:1}}),p({event_type:10369,view_type:175,view_parameter:null,component:14307,duration_ns:13606e6,object_id_str:m.entityId,aux_data:{lead_form_id:t,is_lead_ad:1}})):p({aux_data:s,event_type:101,view_type:d||3,view_parameter:u||(0,ey.Z)({hasPin:!0,hasPinRichMetadata:!!m.richMetadata,hasPinRichMetadataProducts:!!m.richMetadata?.products,hasPinRichMetadataArticle:!!m.richMetadata?.article,hasPinRichMetadataRecipe:!!m.richMetadata?.recipe,hasPinStoryPinData:!!m.storyPinData}),...c?{component:c}:void 0,element:n||34});let y="deep_linking"===r&&!a,{utm_source:_,news_hub_id:f}=function(e){let a=e.searchParams;return{utm_source:a.get("utm_source")??"",utm_medium:a.get("utm_medium")??"",utm_campaign:a.get("utm_campaign")??"",news_hub_id:a.get("news_hub_id")??""}}(new URL(o.fullPath,o.origin));return"31"==`${_}`&&f?l(`/news_hub/${f}`):y?l(h?"/homefeed/":"/"):i()},[c,a,n,g,i,e,p,m.entityId,m.promotedIsLeadAd,m.promotedLeadForm?.leadId,m.richMetadata,m.storyPinData,o.fullPath,o.origin,l,r,u,d,h])}}var l_=n(199593),lf=n(314011);function lx({conversation_id:e,senderId:a,pinId:n}){(0,ll.Z)({url:`/v3/conversations/${e}/message/mark_seen/`,method:"POST",data:{sender:a,pin:n}})}function lk(e){(0,k.useEffect)(()=>{(0,x.Z)("Closeup","/app/common/react/components/closeup/Closeup.tsx")},[]);let{clientTrackingParams:a,closeupWithinMasonryEnabled:n=!1,conversation_id:i,conversationOpen:t,didRepin:l,getStringifiedCommerceAuxData:r,isEligibleForStaticImageIdeaPin:s,isLandingPage:o,logContextEvent:d,onHandleBackButtonClick:u,openInbox:c,orbacActingAs:p,peekCloseupEnabled:m=!1,pin:g,pinDerivedData:h,pinId:y,pinResource:_,relatedPinsContainerRef:f,senderId:P,setAbortNoActionPlacementTimeout:S,setIsCommentThreadExpanded:v,setMostRecentPinId:b,setMostRecentPinImage:C,setPlacementExtraContext:I,shouldShowInbox:w,storyPinTaggedProductsResource:T,verticalNavWidth:A,viewer:F}=e,{pin:E,shopping:L,visualState:R,isCloseupMaximized:K=!1,isCommentSectionOpen:Z=!1,didShortClickThrough:D=!1,didPinClickThrough:M=!1,firstLoadComplete:B=!1,intervalId:O,viewportSize:N="lg",isOverRelatedPins:z=!1}=e.initialState||{},[V,U]=(0,k.useState)(E),[G,H]=(0,k.useState)(R),[$,Y]=(0,k.useState)(K),[X,q]=(0,k.useState)(Z),[J,Q]=(0,k.useState)(D),[ee,ea]=(0,k.useState)(M),[en,ei]=(0,k.useState)(B),[et,el]=(0,k.useState)(O),[er,es]=(0,k.useState)(N),[eo,ed]=(0,k.useState)(z),eu=(0,k.useRef)(!1),ec=(0,k.useRef)(!1),ep=(0,k.useRef)(0),em=(0,k.useRef)(null),eg=(0,k.useRef)(null),e_=(0,lm.Z)(y),ef=(0,lm.Z)(l),ex=(0,lm.Z)(o),ek=(0,k.useCallback)(e=>{em.current=e},[]),eP=(0,k.useCallback)(e=>{eg.current=e},[]),eS=(0,k.useCallback)(()=>{if(!ec.current)return;let{BREAKPOINT:e,EXP_SM_BREAKPOINT:a,SM_BREAKPOINT:i}=(0,ev.le)({verticalNavWidth:A}),t=n?a:i,l="lg";"undefined"!=typeof window&&window.innerWidth<e&&(l=window.innerWidth<t?"sm":"md"),es(l)},[n,A]),eb=(0,k.useMemo)(()=>(0,tn.Z)(eS,50),[eS]),eC=(0,k.useCallback)(()=>{clearInterval(et),I&&I({didLongClickThrough:!0})},[et,I]),{pinFormattedLink:eI,trafficSource:ew,isCloseupMediaViewerOpen:eT}=e,eA=(0,k.useCallback)(e=>{let n=!!g?.story_pin_data_id&&s,{wasImageClicked:i,auxData:t,componentType:l=n?228:4,elementType:o=i?35:n?11157:361,viewType:u=eT?675:3}=e||{},c=(0,ey.Z)({hasPin:!!g,hasPinRichMetadata:!!g?.rich_metadata,hasPinRichMetadataProducts:!!g?.rich_metadata?.products,hasPinRichMetadataArticle:!!g?.rich_metadata?.article,hasPinRichMetadataRecipe:!!g?.rich_metadata?.recipe,hasPinStoryPinData:!!g?.story_pin_data}),p={...r?.(),...t||{},is_promoted:g?.is_promoted};F?.isAuth&&!ee&&I&&(I({didPinClickThrough:!0}),ea(!0)),n&&d?.({event_type:102,view_type:132,view_parameter:3549,element:12971,aux_data:{pin_id:g?.id,url:eI}}),d?.({event_type:101,object_id_str:y,component:l,element:o,clientTrackingParams:a,aux_data:{...r?.(),...t||{}}}),d?.({event_type:12,object_id_str:y,view_type:u,view_parameter:c,component:l,element:o,aux_data:{...p,...(0,ld.Z)(g.link_utm_applicable_and_replaced)},clientTrackingParams:a}),d?.({event_type:8948,view_type:u,view_parameter:c,component:l,element:o,object_id_str:y,clientTrackingParams:a,aux_data:{click_type:"clickthrough",closeup_navigation_type:ew&&(0,eh.sV)(ew)?"deeplink":"click",...r?.(),...t||{}}}),i&&el(window.setInterval(eC,12e4)),ep.current=Date.now(),J&&Q(!1),S(!0)},[eI,F,ew,d,r,s,eT,g,ee,I,y,a,J,S,eC]),eF=(0,k.useCallback)(()=>{clearInterval(et),I&&I({didLongClickThrough:!1})},[et,I]),eE=(0,k.useCallback)(()=>{ep.current>0&&(Q(Date.now()-ep.current<5e3),ep.current=0)},[]),ej=(0,k.useCallback)(()=>{d?.({event_type:101,object_id_str:V?.id,component:4,element:0,clientTrackingParams:a,aux_data:{...r?.()}}),S(!0)},[d,V?.id,a,r,S]),eL=(0,k.useCallback)(()=>{u()},[u]),{isEnabled:eR}=(0,as.Z)({dangerouslySkipActivation:!0}),eK=(0,k.useCallback)(e=>{en&&((0,nz.nP)(`closeup.dweb.css_carousel.${eR?"enabled":"control"}.global_carousel_index_update`,{sampleRate:1,tags:{index:e}}),H(a=>({...a,carouselData:{...a.carouselData||{},index:e}})))},[en,eR]),eZ=(0,k.useMemo)(()=>(0,tn.Z)(()=>{if(!eg.current)return;let e=e7.hu,a=(eg.current?.getBoundingClientRect().top??0)<=e;ed(e=>!!a||e&&a),!a&&eo&&ed(!1)},10),[eo]),eD=(0,k.useCallback)(e=>{Y(!e),em&&(em.ariaHidden=!e)},[Y]),eO=(0,k.useCallback)(e=>{e.stopPropagation(),eL()},[eL]),eN=(0,k.useCallback)(e=>{q(!!e),v?.(!!e),e&&d?.({component:13464,element:11981,event_type:10554,view_type:3})},[d,v]),ez=(0,k.useCallback)(()=>{let a=g?.board||{},n=e.viewer,i=a.is_collaborative&&(0,li.Z)(a?.collaborated_by_me,a?.owner?.id,n);return!!(n.isAuth&&g?.pinner?.id===n.id||i)},[g?.board,g?.pinner?.id,e.viewer]),eV=(0,k.useCallback)(()=>{let a,{mainImage:n}=e;if(!en)return;let i=t7({carouselData:g?.carousel_data,images:g?.images,product:g?.rich_metadata?.products?.[0]||g?.rich_summary?.products?.[0]}),t=(i?.carousel_slots||[])[0]||{},l=(0,ax.Z)(t.images),r=G.carouselData,s=G.mainImage||{url:""},o=r?.index||0;a=i&&(i.carousel_slots?.length||0)>1?{mainImage:n,carouselData:{...i,index:o},previewImage:t9(g?.images?.["236x"])}:l?.url?{mainImage:{url:l.url,height:l.height||1,width:l.width||1}}:{mainImage:n,previewImage:t9(g?.images?.["236x"])};let d=a.carouselData?.id,u=r?.id,c=a.carouselData?.carousel_slots,p=r?.carousel_slots,m=a.mainImage?.url??"",h=s.url??"";(u!==d||JSON.stringify(p)!==JSON.stringify(c)||h!==m)&&H(a)},[g,e,en,G]);(0,k.useEffect)(()=>{let{didRepin:a,isLandingPage:n,pinResource:{data:t},pwtSurfaceContext:l}=e;eV(),en&&!eu.current&&(l?.removeConstraint?.("thumbnailsLoaded"),(0,ay.l7)("thumbnailsLoaded"),eu.current=!0),t&&!en&&(t.carousel_data&&(t.carousel_data.index=G.carouselData?.index||0),U(t),ei(!0)),i&&P&&y&&e_!==y&&lx({conversation_id:i,senderId:P,pinId:y});let r={};((0,i5.M0)().getItem(i4.W3)||"").includes(`/pin/${y}`)&&n&&(r.loginPageType="pin"),a&&(r.didRepin=!0),g?.image_signature&&(r.pin_image_signature=g.image_signature),r.is_own_or_group_pin=ez();let s=ef!==a||e.isLandingPage!==ex||e_!==y;!(0,ls.Z)(r)&&s&&I&&I({...r})},[y,P,i,e,en,eu,G.carouselData,I,e_,eV,g.image_signature,ez,ef,ex]),(0,e4.Z)(()=>(ec.current=!0,i&&P&&y&&lx({conversation_id:i,senderId:P,pinId:y}),i&&(t?.(i),w&&c?.()),g?.image_signature&&C?.(g.image_signature),y&&b?.(y),I&&I({is_own_or_group_pin:ez()}),eS(),window.addEventListener("resize",eb),window.addEventListener("focus",eE),window?.location?.search?.includes("invite_code=")&&(0,lr.Z)(),()=>{window.removeEventListener("resize",eb),window.removeEventListener("focus",eE),ec.current=!1}));let eU=eB.u6,eW=e.isCommentThreadExpanded||!1,{recommendation_reason:eG}=g,{contextPinIds:eH,experimentsClient:{checkExperiment:e$},landingContext:eY,searchQuery:eX,topLevelTrafficSource:eq,topLevelTrafficSourceDepth:eJ}=e,eQ={name:"RelatedModulesResource",options:{additional_fields:(0,k.useCallback)(()=>{let e=[],a=e$("hfp_gen_ai_topics_opt_out_dweb",{dangerouslySkipActivation:!0}).group;return a&&(["control_pwt","enabled_pwt"].includes(a)&&e$("hfp_gen_ai_topics_opt_out_dweb"),"control_pwt"!==a&&e&&!e.includes("pin.gen_ai_topics")&&(e=[...e,"pin.gen_ai_topics"])),e},[e$])(),pin_id:g.id||y,context_pin_ids:eH,homefeed_source_sig:eG&&["NAVBOOST_P2P","NAVBOOST_PFY","INSTANT_PFY_NON_MATERIALIZABLE","P2P","P2P_CLICKTHROUGH","FRESH_TEXT_EMBEDDINGS","INTENTIONAL_DISTRIBUTION_GEMINI_V5"].includes(eG.reason||"")&&eG.reason_id,page_size:12,search_query:eX,source:ew,top_level_source:eq,top_level_source_depth:eJ,is_pdp:!1,landing_context:eY}},e0=(0,eM.q6)(F,g.pinner?.id,p),e1=(!!g.id||!!y)&&!e0||n,{data:e2}=T||{},{isLimitedLogin:e3,routePush:e6,showRepinOnInitialRender:e8,trendsData:e5,userBusinessRoleResource:e9}=e,ae=(0,j.jsx)(iV,{clientTrackingParams:a,closeupWithinMasonryEnabled:n,didShortClickThrough:J,executeClickthrough:eA,handleBackButtonClick:eL,handleCarouselSwipe:eK,handleCloseupBodyContainerRef:ek,handleIdeaCloseupCommentIconClick:eN,handleSaveClicked:ej,isCloseupMaximized:$,isEligibleForStaticImageIdeaPin:s,isLimitedLogin:e3,maxWidth:eU,onToggleIdeaPinCloseupPanel:eD,peekCloseupEnabled:m,pin:g,pinDerivedData:h,pinResource:_,routePush:e6,shopping:L,showRepinOnInitialRender:e8,storyPinTaggedProducts:e2,trafficSource:ew,trendsData:e5,updateViewportSize:eS,userBusinessRoleResource:e9,viewportSize:er}),aa=(0,j.jsx)(lc.Z,{handleScroll:eZ,onClick:eL,showShadow:eo}),an=(0,j.jsx)(tl,{backButton:aa,bodyContent:ae,firstLoadComplete:en,isVideoPin:h.isVideoPin,onWrapperClick:eO,pin:g,pinResource:_,relatedModulesContent:e1?(0,j.jsx)(t0._m,{children:(0,j.jsx)(t0.IQ,{children:(0,j.jsx)(t8,{clientTrackingParams:a,closeupBody:ae,isVideoPin:h.isVideoPin,isYoutubePin:h.isYoutubePin,pinKey:{type:"Legacy",data:g},relatedPinsContainerRef:f,relatedResourceOptions:eQ,searchQuery:eX,setRelatedPinsHeaderRef:eP,topLevelTrafficSource:eq,trafficSource:ew,viewParameter:(0,ey.Z)({hasPin:!!g,hasPinRichMetadata:!!g?.rich_metadata,hasPinRichMetadataProducts:!!g?.rich_metadata?.products,hasPinRichMetadataArticle:!!g?.rich_metadata?.article,hasPinRichMetadataRecipe:!!g?.rich_metadata?.recipe,hasPinStoryPinData:!!g?.story_pin_data}),viewportSize:er})})}):(0,j.jsx)(k.Fragment,{})}),{abortNoActionPlacementTimeout:ai,calculatedImageHeight:at,isCommentAttachmentSelectorOpen:al,isCommentComposerFocused:ar,isCommentPopoverInteractionActive:ao,isMediaViewerOpen:ad,isShoppingModuleExpanded:au,setCalculatedImageHeight:ac,setIsCloseupMediaViewerOpen:ap,setIsCommentAttachmentSelectorOpen:am,setIsCommentComposerFocused:ag,setIsCommentPopoverInteractionActive:ah,setIsMediaViewerOpen:a_,setIsShoppingModuleExpanded:af}=e;return(0,j.jsx)(td,{abortNoActionPlacementTimeout:ai,calculatedImageHeight:at,classProps:e,classState:{...e.initialState,pin:V,shopping:L,visualState:G,isCloseupMaximized:$,isCommentSectionOpen:X,didShortClickThrough:J,didPinClickThrough:ee,firstLoadComplete:en,intervalId:et,viewportSize:er,isOverRelatedPins:eo},clientTrackingParams:a,closeupContent:an,closeupWithinMasonryEnabled:n,descriptionPaneWidth:eU-eB.Gg-4*!!n,handleBackButtonClick:eL,handleCarouselSwipe:eK,handleFocus:eF,isCloseupMediaViewerOpen:eT,isCommentAttachmentSelectorOpen:al,isCommentComposerFocused:ar,isCommentPopoverInteractionActive:ao,isCommentThreadExpanded:eW,isMediaViewerOpen:ad,isShoppingModuleExpanded:au,maxWidth:eU,paneWidth:eB.Gg,peekCloseupEnabled:m,setAbortNoActionPlacementTimeout:S,setCalculatedImageHeight:ac,setIsCloseupMediaViewerOpen:ap,setIsCommentAttachmentSelectorOpen:am,setIsCommentComposerFocused:ag,setIsCommentPopoverInteractionActive:ah,setIsCommentThreadExpanded:v,setIsMediaViewerOpen:a_,setIsShoppingModuleExpanded:af,showCloseupContentRight:!n&&(({isWideVideo:e,viewportSize:a,peekCloseupEnabled:n})=>!["md","sm"].includes(a)&&!e||n&&"sm"!==a)({isWideVideo:!!(0,n8.Z)((0,W.Z)({pin:g}))?.isWideVideo,viewportSize:er,peekCloseupEnabled:m}),showProductDetailPage:!1})}let lP=la(function(e){var a;(0,k.useEffect)(()=>{(0,x.Z)("Closeup","/app/common/react/components/closeup/Closeup.tsx")},[]);let{logContextEvent:n}=(0,eA.u)(),{pin:i,viewer:t,pinResource:l,pinId:r,goToCampaignCreation:s,deepLinkBackGoesToBoard:o,goBack:d,routePush:u,trafficSource:c}=e,p=(0,O.ZP)(),m=(0,e_.Z)(),g=(0,iv.Z)(),h=(0,eL.B)(),[y,_]=(0,k.useState)(!1),[f,P]=(0,k.useState)(!1),[v,I]=(0,k.useState)(!1),[w,T]=(0,k.useState)(!1),[A,F]=(0,k.useState)(!1),[L,R]=(0,k.useState)(!1),[K,Z]=(0,k.useState)(!1),[D,M]=(0,k.useState)(0),[B,N]=(0,k.useState)(!1),z=(0,tt.Z)(),V=(0,k.useRef)(null),{isRelatedPins10PercentVisible:U,setIsRelatedPins10PercentVisible:W}=(0,aD.K)();(0,k.useEffect)(()=>{let e=new IntersectionObserver(([e])=>{W(!!e&&e.isIntersecting)},{root:null,rootMargin:"-100px 0px 0px 0px",threshold:[0,.01,.02,.03,.04,.05,.06,.07,.08,.09,.1]}),a=V?.current;return V?.current&&e.observe(V?.current),()=>{a&&e.unobserve(a)}},[V,W]);let{setMostRecentPinId:G,setMostRecentPinImage:H}=(0,lf.R)(),$=(0,E.Z)({type:"Legacy",data:i}),Y=(0,eh.sY)(i.embed?.type)&&"gif"||i.is_eligible_for_pdp&&"productPin"||i.rich_summary?.type_name==="recipe"&&"recipePin"||!!i.story_pin_data_id&&"storyPin"||!!i.videos?.video_list&&"video"||"image",{conversationOpen:X}=(0,l_.Z)(),q=(0,nj.Z)(),J=(0,ln.Z)(),Q=(0,na.A)(),ee=(0,S.TH)(),ea=(0,lp.dI)(),[en,ei]=(0,k.useState)(!1),{advertiser:et}=h,el=(0,lg.F0)(et,r),er=(0,lu.Z)({type:"Legacy",data:i}),{landingContext:es}=(0,lo.Z)(),eo=(0,eM.lJ)(t,q),ed=(0,lt.Z)({pinKey:{type:"Legacy",data:i}}),{onHandleBackButtonClick:eu}=ly({logCommerceAuxData:i.promoted_is_lead_ad,deepLinkBackGoesToBoard:o,goBack:d,routePush:u,trafficSource:c,viewer:t,requestContext:h,pinKey:{type:"Legacy",data:i}},n);(0,k.useEffect)(()=>{l.data&&!en&&s&&ei(!0)},[l.data,en,s]);let ec=!!i,em=(0,k.useRef)(!1);ec&&Q&&!em.current&&(Q.addBinaryAnnotation("pinType",Y,"STRING"),(0,ay.rt)("pinType",Y,"STRING"),em.current=!0);let eg=i.sponsorship?.sponsor?.id,ey=!i.is_repin&&!!eg,ef=(0,ep.Z)(eg&&ey&&t.isAuth&&"storyPin"===Y?{name:"ApiResource",options:{url:`/ads/v4/business_access/businesses/${eg}/me/ad_accounts_permissions/`}}:null),ex=t.isAuth&&(a=t.country,!C.includes(a))&&(0,b.Gv)({orbacSubjectId:eo,pinIsRepin:i.is_repin,pinPinnerId:i.pinner?.id,viewerId:t.id,viewerIsPartner:t.isPartner}),{data:ek,isLoaded:eP}=(0,ep.Z)(ex?{name:"ApiResource",options:{url:`/v3/trends/partner/${t.id||""}/trends_for_pin/${i.id}/`,data:{number_terms_to_return:10}}}:null),{sideBySideRedesignFastFollowsEnabled:eS}=(0,eC.Z)(),ev=(0,k.useMemo)(()=>({data:ek,isLoaded:!ex||eP}),[ek,eP,ex]),eb=!!i.story_pin_data_id,eI=le({pin:i,pinId:r,pinResource:l}),{mainPinImage:ew}=(0,t5.Z)({pinKey:{type:"Legacy",data:i}});return en?(window.location.assign(el),(0,j.jsx)(k.Fragment,{})):(0,j.jsx)(lk,{...e,abortNoActionPlacementTimeout:B,calculatedImageHeight:D,clientTrackingParams:ed,closeupWithinMasonryEnabled:eS,conversationOpen:X,experimentsClient:m,getSterlingURL:J,getStringifiedCommerceAuxData:$,i18n:p,initialState:eI,isCloseupMediaViewerOpen:A,isCommentAttachmentSelectorOpen:y,isCommentComposerFocused:f,isCommentPopoverInteractionActive:v,isCommentThreadExpanded:w,isEligibleForStaticImageIdeaPin:eb,isMediaViewerOpen:L,isRelatedPins10PercentVisible:U,isShoppingModuleExpanded:K,landingContext:es,location:ee,logContextEvent:n,mainImage:ew,onHandleBackButtonClick:eu,orbacActingAs:q,peekCloseupEnabled:!eS,pinFormattedLink:er,pwtSurfaceContext:Q,relatedPinsContainerRef:V,requestContext:h,setAbortNoActionPlacementTimeout:N,setCalculatedImageHeight:M,setIsCloseupMediaViewerOpen:F,setIsCommentAttachmentSelectorOpen:_,setIsCommentComposerFocused:P,setIsCommentPopoverInteractionActive:I,setIsCommentThreadExpanded:T,setIsMediaViewerOpen:R,setIsShoppingModuleExpanded:Z,setMostRecentPinId:G,setMostRecentPinImage:H,toastManager:ea,trackInteraction:g,trendsData:ev,userBusinessRoleResource:ef,verticalNavWidth:z})});function lS(e){(0,k.useEffect)(()=>{(0,x.Z)("Closeup","/app/common/react/components/closeup/Closeup.tsx")},[]);let a=(0,ep.Z)({name:"StoryPinTaggedProductsResource",options:{noCache:!0,id:e.pin.id}});return(0,j.jsx)(lP,{...e,storyPinTaggedProductsResource:a})}var lv=n(877956);function lb(e){let{previous:a}=(0,nE.ou)(),n=0===a.length,{children:i}=e,t=(0,S.TH)(),l=(0,aZ.Z)(),r=(0,P.I0)(),{isBot:s}=(0,eL.B)(),{dropdownOpen:o}=(0,l_.Z)(),d=(0,n5.JC)(),u=!!d[e.pinId]&&(d[e.pinId].saved||!!d[e.pinId].savedInfo),c=d[e.pinId]||e.pinResource.data||{},p=e.pinResource.data?.story_pin_data?.pages?.[0]?.blocks?.[0]?.video,m=c?.story_pin_data?.pages?.[0]?.blocks?.[0];p&&m&&!m?.video&&((c?.story_pin_data?.pages?.[0]?.blocks?.[0]).video=p);let g="inbox"===(0,tW.mB)(t.search).tab;return i({isLandingPage:n,isLimitedLogin:!!l.isAuth&&l.isLimitedLogin,didRepin:u,openInbox:o,pin:c,shouldShowInbox:g,updateExperienceForPlacement:e=>{r((0,lv.pz)([e],s))}})}var lC=n(115939),lI=n(770545);let lw=`
      ::view-transition-group(image),
      ::view-transition-group(video) {
        animation-timing-function: cubic-bezier(0.55, 0, 0, 1);
      }
      ::view-transition-old([view-transition-name="video"]) {
        display: none;
      }
      ::view-transition-new([view-transition-name="video"]) {
        animation: none;
      }
    `,lT=function({children:e}){return(0,j.jsxs)(k.Fragment,{children:[(0,j.jsx)(it.Z,{unsafeCSS:lw}),e]})};var lA=n(249013),lF=n(67484),lE=n(780879);let lj={display:"block",position:"relative",cursor:"auto"};var lL=n(371941),lR=n(734871);function lK(e){(0,k.useEffect)(()=>{(0,x.Z)("ProductStickyContainer","/app/common/react/components/shopping/ProductDetailPage/ProductStickyContainer.tsx")},[]);let{disabled:a,height:n,top:i=0,zIndex:t}=e,l=(0,k.useRef)(null),r=(0,lR.Z)();if(a)return e.children;let s=l.current?.getBoundingClientRect().top||0;return(0,j.jsx)(I.xu,{ref:l,"data-test-id":"product-sticky-container",id:"product-sticky-container ",children:(0,j.jsx)(I.Le,{height:n,top:r+i+s,zIndex:t,children:e.children})})}function lZ({isStoryPin:e,isWideVideo:a,pin:n,trafficSource:i,viewParameterType:t,onClickThrough:l,showStructuredDescription:r,didShortClickThrough:s,goBack:o,isInStream:d=!1,isDeletedStoryPin:u,onSaveButtonClick:c,onUpdate:p,outerBodyStyle:m,routePush:g,showPartnerModule:h,showPinStats:y,showTrendsOnPinCloseup:_,showRepinOnInitialRender:f,trendsData:P,viewType:S}){(0,k.useEffect)(()=>{(0,x.Z)("ProductDetailPageBody","/app/common/react/components/ProductDetailPage/ProductDetailPageBody.tsx")},[]);let v=(0,k.useRef)(null),b=(0,k.useRef)(null),C=(0,k.useRef)(null),I=(0,aZ.Z)(),{closeupWithinMasonryEnabled:w,clientTrackingParams:T}=(0,X.x4)(),{checkExperiment:A}=(0,e_.Z)(),F=(0,nj.Z)(),E=(0,eM.lJ)(I,F),L=ae(90),R=aa(),{isCloseupMediaViewerEnabled:K}=(0,aK.Z)({isShufflePin:!!n?.shuffle}),Z=(0,k.useCallback)(()=>{l&&l({componentType:129}),R.setClickthroughComponentForSurvey("legoMaybeLink")},[l,R]),[D,M]=(0,k.useState)(!1),B=!!n.is_eligible_for_aggregated_comments,O=w&&B&&"enabled_dropdown"===A("ce_dweb_new_closeup_comment_module").group,N=w&&B&&"enabled_popover"===A("ce_dweb_new_closeup_comment_module").group,{setClickthroughComponentForSurvey:z,imageContainerRef:V}=R,{getViewParameter:U}=eS({type:"Legacy",data:n}),W=U(t),G=(0,k.useCallback)(()=>{l({wasImageClicked:!0})},[l]),H=eB.ER,$=(0,j.jsx)(aJ.Z,{id:"VisualContentContainer",children:(0,j.jsx)(nK,{handleImageClickThrough:G,imageContainerRef:V,isStoryPin:e,isWideVideo:a,onSaveButtonClick:c,pin:n,setClickthroughComponentForSurvey:z,trafficSource:i,viewParameter:W,viewParameterType:t,visualContentContainerRef:B?L.visualContentContainerRef:void 0})}),Y=(0,j.jsx)(aJ.Z,{id:"ProductStickyContainer-2",children:(0,j.jsx)(lK,{disabled:!1,top:-16,zIndex:a1.mS,children:$})}),q=r&&!K?Y:$,J=(0,eJ.Z)({pinKey:{type:"Legacy",data:n},orbacActingAs:F,viewer:I}),Q=(0,j.jsx)(k.Fragment,{children:(0,j.jsx)(aJ.Z,{id:"ProductMetadata",children:(0,j.jsx)(lL.Z,{blendedUIScrollContainerRef:C,clientTrackingParams:T,detailsScrollContainerRef:v.current,inCommentsImprovedDropdownExp:O,inCommentsPopoverExp:N,isBoardOwnerOrCollaborator:J,isLoadingNewlyCreatedComment:D,onClickThrough:l,outerPaddingSize:H,pinKey:{type:"Legacy",data:n},showPartnerModule:h,showPDPComments:B,showPinStats:y,showStructuredDescription:r,showTrendsOnPinCloseup:_,trendsData:P,viewParameter:W})})});return(0,j.jsx)(aJ.Z,{id:"CloseupBodyLayout",children:(0,j.jsx)(nq,{actionBarContainerRef:b,blendedUIScrollContainerRef:C,closeupActionBarMaxWidth:w?void 0:eB.CI,descriptionContentMaxHeight:B?L.descriptionContentMaxHeight:void 0,didShortClickThrough:s,disableLeadPin:!0,goBack:o,inCommentsImprovedDropdownExp:O,inCommentsPopoverExp:N,isCloseupMaximized:!1,isDeletedStoryPin:u,isEligibleForPinReactions:!n.is_promoted&&!n.is_downstream_promotion&&!u,isInStream:d,isStoryPin:e,isWideVideo:a,marginBottom:8*!w,metadata:Q,metadataContainerRef:v,onClickThrough:Z,onSaveButtonClick:c,onUpdate:p,orbacSubjectId:E,outerBodyStyle:m,outerPaddingSize:H,pin:n,routePush:g,setIsLoadingNewlyCreatedComment:M,showPDPComments:B,showRepinOnInitialRender:f,trafficSource:i,viewer:I,viewParameter:W,viewType:S,visualContentContainer:q,visualContentContainerRef:B?L.visualContentContainerRef:void 0,webLinkSurveyState:R})})}let lD=(0,ez.Z)(()=>n.e("96615").then(n.bind(n,396837)),{ssr:!1},e=>396837,"CloseupPartnerModule",e=>["96615"]),lM=(0,ez.Z)(()=>n.e("54347").then(n.bind(n,15863)),{ssr:!1},e=>15863,"SponsorshipApprovalModule",e=>["54347"]),lB={boxShadow:"0 1px 20px 0 rgba(0, 0, 0, 0.1)",borderRadius:32},lO={boxShadow:void 0,borderRadius:16},lN=({closeupWithinMasonryEnabled:e,didShortClickThrough:a,executeClickthrough:n,handleBackButtonClick:i,handleSaveButtonClick:t,isLimitedLogin:l,maxWidth:r,orbacActingAs:s,pin:o,pinResource:d,routePush:u,showRepinOnInitialRender:c,showStructuredDescription:p,trendsData:m,userBusinessRoleResource:g,trafficSource:h,viewer:y,viewportSize:_})=>{(0,k.useEffect)(()=>{(0,x.Z)("ProductDetailPageBodyContainer","/app/common/react/components/ProductDetailPage/ProductDetailPageBodyContainer.tsx")},[]);let{checkExperiment:f}=(0,e_.Z)(),{id:P,sponsorship:S,story_pin_data_id:v,story_pin_data:C}=o,w=!!v,T=!!C?.is_deleted,{creator:A,sponsor:F,status:E}=S||{},{username:L}=A||{},{username:R}=F||{},{refresh:K}=d,Z=(0,eM.lJ)(y,s),{data:D}=g||{},M=!o.is_repin&&!!R,B=R===y.username?[n1.V3.OWNER]:D?.permissions,O=R===y.username||!!B?.find(e=>n2.includes(e)),N=R===y.username||!!B?.find(e=>n2.includes(e)),{isWideVideo:z}=(0,n8.Z)((0,W.Z)({pin:o}))||{},V=(0,n6.Z)({type:"Legacy",data:o},y,Z),U=(0,b.CA)(m?.data),G=M&&y.isAuth&&f("mweb_web_android_ios_backend_clbc_display_controls").anyEnabled&&(O&&0===E||N&&1===E),H=w&&(C?.pages?.length??0)>0,$=(0,n3.WE)(y,_,V,U,m,G),Y=e?lO:lB;return(0,j.jsx)(I.xu,{dangerouslySetInlineStyle:{__style:w?{...lj,width:"100%"}:{}},"data-test-id":"gradient",display:"flex",id:"gradient",justifyContent:"center",children:(0,j.jsx)(k.Fragment,{children:(0,j.jsx)(aJ.Z,{id:"ResponsiveCloseupContainer",children:(0,j.jsx)(iD.Z,{isStoryPin:w,isWideVideo:z,children:(0,j.jsx)(eE.Z,{name:"CloseupBody",children:(0,j.jsxs)(I.xu,{children:[(0,j.jsxs)(I.xu,{alignItems:z?"center":void 0,direction:z?"column":void 0,display:z?"flex":void 0,children:[G&&"number"==typeof E&&(0,j.jsx)(I.xu,{"data-test-id":"sponsorship-approval-module",display:"flex",children:(0,j.jsx)(eE.Z,{name:"SafeSuspense_Closeup_SponsorshipApprovalModule",children:(0,j.jsx)(aJ.Z,{id:"SponsorshipApprovalModule",children:(0,j.jsx)(eR.Z,{children:(0,j.jsx)(lM,{business_role:B,creatorUsername:L??"",pinId:P,sponsorshipStatus:E})})})})}),$&&!e&&(0,j.jsx)(I.xu,{"data-test-id":"PartnerModule",width:"lg"===_&&z?r:"100%",children:(0,j.jsx)(eE.Z,{name:"SafeSuspense_Closeup_PartnerModule",children:(0,j.jsx)(aJ.Z,{id:"PartnerModule",children:(0,j.jsx)(eR.Z,{children:(0,j.jsx)(lD,{borderStyle:Y,isStoryPin:w,pinKey:{type:"Legacy",data:o},showPinStats:V,trendsData:U?m?.data?.results:null,viewportSize:_})})})})})]}),(0,j.jsx)(aJ.Z,{id:"ProductDetailPageBody",children:(0,j.jsx)(lZ,{didShortClickThrough:a,goBack:i,isDeletedStoryPin:!!T,isStoryPin:w,isWideVideo:!!z,onClickThrough:n,onSaveButtonClick:t,onUpdate:K,outerBodyStyle:w?null:Y,pin:o,routePush:u,showPartnerModule:$,showPinStats:V,showRepinOnInitialRender:!l&&c,showStructuredDescription:p,showTrendsOnPinCloseup:U,trafficSource:h,trendsData:m,viewParameterType:H?157:void 0,viewType:3})})]})})})})})})},lz=(0,ez.Z)(()=>n.e("75139").then(n.bind(n,793760)),void 0,e=>793760,"StructuredFeedStoryModule",e=>["75139"]),lV=(0,ez.Z)(()=>n.e("65346").then(n.bind(n,667980)),void 0,e=>667980,"app-common-react-components-closeup-CloseupRelatedModules-DomainModule",e=>["65346"]),lU=(0,ez.Z)(()=>Promise.resolve().then(n.bind(n,589183)),void 0,e=>589183,"app-common-react-components-closeup-CloseupRelatedModules-CloseupRelatedModulesInclusiveFilters",e=>[]),lW=(0,ez.Z)(()=>n.e("99743").then(n.bind(n,412098)),void 0,e=>412098,"app-common-react-components-closeup-CloseupRelatedModules-CloseupRelatedModulesHeader",e=>["99743"]),lG=(void 0!==y||(y=n(149627)).hash&&"cce8a8d5ad05c8e6c1137bf7c8845c2a"!==y.hash&&console.error("The definition of 'ProductDetailPageRelatedModule_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),y),lH=(0,k.forwardRef)(({clientTrackingParams:e,pinKey:a,setRelatedPinsHeaderRef:n,slotIndex:i,story:t,topLevelTrafficSource:l,viewParameter:r,viewportSize:s},o)=>{let d=(0,A.Z)(lG,a),{closeupWithinMasonryEnabled:u}=(0,X.x4)();if(!t)return null;let{container_type:c,story_type:p}=t,m=(0,tu.oV)(p);if((0,tU.Z)(c)){let e=88===c,a=90===c;return(0,j.jsx)(I.xu,{marginBottom:e||a?0:12,paddingX:12*!!a,children:(0,j.jsx)(lz,{componentFallback:13176,initialSlotIndex:i,story:t,storyKey:{type:"Legacy",data:t},surface:"ShoppingDynamicHeightGrid",view:3,viewParameter:r})})}return(0,tu.HM)(p)&&m?!u&&(0,j.jsx)(I.xu,{alignSelf:"center",children:(0,j.jsx)(lU,{filter:m,story:t,viewParameter:r})}):["related_products_feed_header","related_modules_header"].includes(p)?(0,j.jsx)(I.xu,{ref:n,"data-test-id":"related-modules-header",children:(0,j.jsx)(lW,{ref:o,clientTrackingParams:e,slotIndex:i,storyId:t.id,storyType:p,title:t.title?.format,viewParameter:r})}):"related_domain_carousel"===p?(0,j.jsx)(I.xu,{display:"flex",justifyContent:"center",marginBottom:12,children:(0,j.jsx)(lV,{closeupImageSignature:d.imageSignature||"",data:t,slotIndex:i,storyId:t.id,storyType:p,topLevelTrafficSource:l,viewParameter:r,viewportSize:s})}):null});var l$=n(713705),lY=n(75301);let lX=(0,ez.Z)(()=>n.e("75139").then(n.bind(n,793760)),void 0,e=>793760,"app-packages-StructuredFeed-ModuleReps-utils-StructuredFeedStoryModule",e=>["75139"]),lq=()=>(0,j.jsx)(k.Fragment,{children:Array(12).fill(void 0).map((e,a)=>(0,j.jsx)(I.xu,{marginEnd:4,width:l$.j},`empty-pin-${a}`))}),lJ=(void 0!==_||(_=n(502396)).hash&&"86cb4963f4714e2184c01e13236c3616"!==_.hash&&console.error("The definition of 'ProductDetailPageRelatedPins_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),_);function lQ(e){return 154===e.container_type?2:e.columnSpan??e.display_options?.content_display?.grid_layout?.cols??1}function l0({surface:e="PdpRelatedPinGrid",closeupBody:a,closeupInclusiveFilters:n,isFetching:i=!1,pinKey:t,relatedPins:l,showResponsiveInclusiveFilters:r,topLevelTrafficSource:s}){(0,k.useEffect)(()=>{(0,x.Z)("ProductDetailPageRelatedPins","/app/common/react/components/ProductDetailPage/ProductDetailPageRelatedModules/ProductDetailPageRelatedPins.tsx")},[]);let o=(0,O.ZP)(),{closeupWithinMasonryEnabled:d}=(0,X.x4)(),u=(0,A.Z)(lJ,t),c=(0,t1.Z)(),p=(0,k.useRef)(null),m=(0,ey.Z)({hasPin:!!u,hasPinRichMetadata:!!u.richMetadata,hasPinRichMetadataProducts:!!u.richMetadata?.products,hasPinRichMetadataArticle:!!u.richMetadata?.article,hasPinRichMetadataRecipe:!!u.richMetadata?.recipe,hasPinStoryPinData:!!u.storyPinData}),g=(0,k.useMemo)(()=>tb(l),[l]),h=({data:i,itemIdx:t})=>{let l=(0,tO.Z)(c),r=t-g,o=null;switch(i.type){case"closeup_module":o=a;break;case"shopping_module":o=(0,j.jsx)(e6.Z,{moduleWidth:"100%",pinKey:u,trafficSource:s,viewParameter:m});break;case"inclusive_filters_module":o=n;break;case"story":switch(154===i.container_type&&(o=(0,j.jsx)(lY.Z,{slotIndex:r,story:i,viewParameter:m,viewType:3})),i.story_type){case"BUBBLE_ONE_COL":o=(0,j.jsx)(tG.default,{bubbles:i.objects,id:i.id,referringSource:i.referring_source,slotIndex:r,storyType:i.story_type,title:i.title,viewParameter:m,viewType:3});break;case"related_query_shop_upsell_closeup":o=(0,j.jsx)(tM.default,{itemIdx:r,story:i,viewParameter:m,viewType:3})}(0,tU.Z)(i.container_type)&&(o=(0,j.jsx)(lX,{initialSlotIndex:r,story:i,storyKey:{type:"Legacy",data:i},styleOverrides:{showModuleBorder:lQ(i)>1},view:3,viewParameter:m}));break;default:o=(0,j.jsx)(t$.r,{componentType:13176,imageOnlyOption:l?"image-only":"default",pinId:i.id,pinKey:{type:"Legacy",data:i},slotIndex:r,surface:e,trackingParams:i.tracking_params,viewData:{pin_id:u.entityId},viewParameter:m,viewType:3})}return(0,j.jsx)(tS,{children:o})},y={isLoadedAccessibilityLabel:l.length>0?o._('Loaded more related product results', 'closeup.relatedProducts.results', 'Accessibility label for loaded more related product results'):o._('Loaded related products result', 'closeup.relatedProducts.results', 'Accessibility label for loaded related products result'),isLoadingAccessibilityLabel:l.length>0?o._('Loading more related products results', 'closeup.relatedProducts.loading', 'Accessibility label for loading more related products results'):o._('Loading related products results', 'closeup.relatedProducts.loading', 'Accessibility label for loading related products results')},_=d?(0,j.jsx)(tB.default,{_getResponsiveModuleConfigForSecondItem:(0,tI.fz)(!!r),align:"center",getColumnSpanConfig:lQ,isFetching:i,isLoadingStateEnabled:!0,items:l,layout:"basic",masonryRef:p,minCols:2,renderItem:h,serverRender:!0,virtualize:tI.o1,...y}):(0,j.jsxs)(I.xu,{dangerouslySetInlineStyle:{__style:{marginLeft:"5px"}},children:[(0,j.jsx)(tB.default,{getColumnSpanConfig:lQ,isFetching:i,isLoadingStateEnabled:!0,items:l,renderItem:h,...y}),(0,j.jsx)(lq,{})]});return(0,j.jsx)(a3.Z,{metricName:"RelatedModulesFeed",children:(0,j.jsx)(nu.Z,{component:86,viewParameter:m,children:_})})}var l1=n(598579),l2=n(730647);let l3=(void 0!==f||(f=n(937046)).hash&&"85ae0703574c2bc161bc13206c3184f8"!==f.hash&&console.error("The definition of 'ProductDetailPageRelatedModules_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),f),l6=(0,k.forwardRef)(({clientTrackingParams:e,closeupBody:a,excludeStories:n,initialSlotIndex:i=0,isFilteredFeed:t,pinKey:l,relatedModulesFeedResource:r,setRelatedPinsHeaderRef:s,topLevelTrafficSource:o,viewParameter:d,viewportSize:u},c)=>{let p=(0,A.Z)(l3,l),{search:m}=(0,S.TH)(),{closeupWithinMasonryEnabled:g}=(0,X.x4)(),h=tC(new URLSearchParams(m).get("filters")??""),y=(0,k.useMemo)(()=>(r.data||[]).filter(e=>["SKIN_TONE_FILTER_QUERIES","hair_pattern_filter_queries","inclusive_onebar_pills_on_closeup"].includes(e?.story_type??"")).find(e=>(0,tu.HM)(e?.story_type??"")),[r]),{closeupMasonryModules:_,inclusiveFilters:f}=(0,tI.ZP)({pinId:p.entityId,inclusiveModuleToCache:y,showProductDetailPage:!0}),x=f?(0,tu.oV)(f.story_type??""):"",{inInclusiveEfficientRefinements:P}=(0,tw.Z)(x),v=g&&P&&h,b=(0,ep.Z)(v?{name:"ApiResource",options:{url:`/v3/pins/${p.entityId}/related/pins/filter/`,data:{fields:tE.Z,related_pins_tabs_selections:h}}}:null),{data:C,isAtEnd:w,isFetching:T,fetchMore:F,nextBookmark:E}=v?b:r,L=(0,k.useMemo)(()=>(C||[]).filter(e=>!(n&&"story"===e.type&&e.story_type&&n.includes(e.story_type))),[C,n]),R=t&&E===tz.qx,K=C?C.length:0,Z=(0,k.useMemo)(()=>(0,l2.Z)(L),[L]),D=(0,k.useCallback)(e=>!!("pin"===e.type||"story"===e.type&&(l1.v8.has(e.story_type)||l1.AW.has(e.story_type)||154===e.container_type)),[]),M=(0,S.ur)(),B=(0,k.useRef)(i),O=(0,tW.mB)(m).rs,N="POP"===M;(0,k.useEffect)(()=>{tF({isFromBackButton:N,referringSource:O,relatedModulesRef:c})},[N,m,O,c]);let z=(0,k.useMemo)(()=>f&&x?(0,j.jsx)(tx.default,{filter:x,story:f,viewParameter:d}):null,[f,x,d]),{storyModules:V,allPins:U}=(0,k.useMemo)(()=>{let a=[],n=[..._],i=0;return Z.length>0&&Z.forEach((t,l)=>{0===l&&(B.current=0,i=0);let r=0;Array.isArray(t)?(r+=t.length,n.push(...t.filter(D))):"story"===t.type&&(r+="objects"in t&&Array.isArray(t.objects)?t.objects.length:1,a.push((0,j.jsx)(I.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",children:(0,j.jsx)(lH,{ref:c,clientTrackingParams:e,pinKey:p,setRelatedPinsHeaderRef:s,slotIndex:i,story:t,topLevelTrafficSource:o,viewParameter:d,viewportSize:u})},Array.isArray(t)?t[0]?.id:t.id))),B.current=i+=r}),{storyModules:a,allPins:n}},[_,Z,D,e,p,s,o,d,u,c]);return(0,j.jsxs)(k.Fragment,{children:[V,(0,j.jsx)(aJ.Z,{id:"ProductDetailPageRelatedPins",children:(0,j.jsx)(l0,{closeupBody:a,closeupInclusiveFilters:z,initialSlotIndex:B.current,isFetching:T,pinKey:p,relatedPins:U,showResponsiveInclusiveFilters:P,surface:t?"ShoppingDynamicHeightGrid":void 0,topLevelTrafficSource:o})}),(0,j.jsx)(I.gr,{fetchMore:F,isAtEnd:w,isFetching:T}),R&&K>0&&(0,j.jsx)(t_,{}),R&&0===K&&(0,j.jsx)(tf,{})]})});function l8({relatedPinsContainerRef:e,relatedResourceOptions:a,viewParameter:n,...i}){(0,k.useEffect)(()=>{(0,x.Z)("ProductDetailPageRelatedModules","/app/common/react/components/ProductDetailPage/ProductDetailPageRelatedModules/ProductDetailPageRelatedModules.tsx")},[]);let{search:t}=(0,S.TH)(),l=new URLSearchParams(t).get("utm_source"),r=(0,ep.Z)("ads_manager"===l?null:a);return(0,j.jsx)(I.xu,{ref:e,"data-test-id":"relatedPins",direction:"column",display:"flex",flex:"grow",position:"relative",children:(0,j.jsx)(aJ.Z,{id:"RelatedModulesFeed",children:(0,j.jsx)(l6,{...i,ref:e,excludeStories:[],initialSlotIndex:0,isFilteredFeed:!1,relatedModulesFeedResource:r,relatedResourceOptions:a,viewParameter:n})})})}var l4=n(374114),l7=n(884620),l5=n(300540),l9=n(97781),re=n(966838);function ra({conversation_id:e,senderId:a,pinId:n}){(0,ll.Z)({url:`/v3/conversations/${e}/message/mark_seen/`,method:"POST",data:{sender:a,pin:n}})}function rn(e){(0,k.useEffect)(()=>{(0,x.Z)("ProductDetailPage","/app/common/react/components/ProductDetailPage/ProductDetailPage.tsx")},[]);let{clientTrackingParams:a,closeupWithinMasonryEnabled:n,conversation_id:i,conversationOpen:t,didRepin:l,dispatch:r,goToCampaignCreation:s,i18n:o,initialState:d,isLandingPage:u,isLimitedLogin:c,logContextEvent:p,mainImage:m,onHandleBackButtonClick:g,openInbox:h,orbacActingAs:y,peekCloseupEnabled:_,pin:f,pinFormattedLink:P,pinId:S,pinResource:v,pwtSurfaceContext:b,requestContext:C,routePush:w,senderId:A,setAbortNoActionPlacementTimeout:F,setMostRecentPinId:L,setMostRecentPinImage:R,setPlacementExtraContext:K,shouldShowInbox:Z,showRepinOnInitialRender:D,showStructuredDescription:M,toastManager:B,trackInteraction:O,trafficSource:N,trendsData:z,userBusinessRoleResource:V,verticalNavWidth:U,viewer:G}=e,{visualState:H,didShortClickThrough:$=!1,isOverRelatedPins:Y=!1,viewportSize:X="lg",firstLoadComplete:q=!1,campaignCreationTriggered:J=!1,intervalId:Q}=d||{},ee=d?.didPinClickThrough||!1,[ea,en]=(0,k.useState)(H),[ei,et]=(0,k.useState)($),[el,er]=(0,k.useState)(X),[es,eo]=(0,k.useState)(Y),[ed,eu]=(0,k.useState)(q),[ec,ep]=(0,k.useState)(J),[em,eg]=(0,k.useState)(Q),[e_,ef]=(0,k.useState)(ee),ex=(0,k.useCallback)(()=>{en(e=>{let a=t7({carouselData:f.carousel_data,images:f.images,product:(f.rich_metadata||f.rich_summary)?.products?.[0]});return{...e,carouselData:a}})},[f]);(0,e4.Z)(()=>{let e=function({richPinData:e={}}){return e?.products?.[0]}({richPinData:f.rich_summary});!ea.carouselData&&(e?.has_multi_images||e?.videos?.length)&&ex()});let[ek,eP]=(0,k.useState)(!1),eS=(0,k.useRef)(!1),ev=(0,k.useRef)(null),eb=(0,k.useRef)(0),eC=(0,k.useMemo)(()=>{let e=(f||{}).board||{},a=e.is_collaborative&&(0,li.Z)(e.collaborated_by_me,e.owner?.id,G);return!!(G.isAuth&&f.pinner?.id===G.id||a)},[f,G]),eI=(0,k.useCallback)(()=>{let{isWideVideo:e}=(0,n8.Z)((0,W.Z)({pin:f}))||{};eS.current&&er(function({isWideVideo:e,hasCarouselData:a,closeupWithinMasonryEnabled:n,verticalNavWidth:i}){let{BREAKPOINT:t,WIDE_VIDEO_BREAKPOINT:l,WIDE_PDP_BREAKPOINT:r,SM_BREAKPOINT:s,EXP_SM_BREAKPOINT:o,SM_WITH_CAROUSEL_BREAKPOINT:d}=(({verticalNavWidth:e})=>({BREAKPOINT:1056+e,WIDE_VIDEO_BREAKPOINT:998+e,WIDE_PDP_BREAKPOINT:1300+e,SM_BREAKPOINT:680+e,EXP_SM_BREAKPOINT:860+e,SM_WITH_CAROUSEL_BREAKPOINT:960+e,BACK_BUTTON_WIDE_BREAKPOINT:1135+e,BACK_BUTTON_WIDE_CAROUSEL_BREAKPOINT:1465+e,BACK_BUTTON_WITH_LABEL_WIDE_BREAKPOINT:1340+e,BACK_BUTTON_WITH_LABEL_WIDE_CAROUSEL_BREAKPOINT:1640+e,BACK_BUTTON_NARROW_CAROUSEL_BREAKPOINT:780+e,BACK_BUTTON_NARROW_BREAKPOINT:630+e}))({verticalNavWidth:i}),u=t,c=n?o:s;return(e&&(u=l),a&&(u=r,c=n?d:c),window?.innerWidth<c)?"sm":window?.innerWidth<u?"md":"lg"}({isWideVideo:!!e,hasCarouselData:!!ea?.carouselData,closeupWithinMasonryEnabled:n,verticalNavWidth:U}))},[n,f,U,ea?.carouselData]),ew=(0,k.useCallback)(()=>{eb.current>0&&(et(Date.now()-eb.current<5e3),eb.current=0)},[]);(0,e4.Z)(()=>{eS.current=!0,i&&A&&S&&ra({conversation_id:i,senderId:A,pinId:S}),i&&(t(i),Z&&h()),f.image_signature&&R(f.image_signature),S&&L(S),K&&K({is_own_or_group_pin:eC});let e=(0,i5.M0)().getItem(i4.M8)||"";return e&&e===S&&((0,i5.M0)().removeItem(i4.M8),O({action:"trigger",item:"unauth-save-button-quicksave"}),(0,l4.Z)({description:f.description,entityId:f.id,link:f.link,promotedIsRemovable:f.promoted_is_removable,title:f.title},o).then(e=>{let{id:a,url:n,name:i}=e;r((0,re.d)({boardId:a,url:n,title:i||"",pinId:S,nodeId:f.node_id})),B.showToast(({hideToast:a})=>(0,j.jsx)(l9.Z,{boardName:e.name,boardUrl:e.url,onHide:a,pinImageUrl:f.images?.["236x"]?.url??""}))})),eI(),window.addEventListener("resize",eI),window.addEventListener("focus",ew),window?.location?.search?.includes("invite_code=")&&(0,lr.Z)(),()=>{window.removeEventListener("resize",eI),window.removeEventListener("focus",ew),eS.current=!1}});let eT=(0,k.useCallback)(()=>{let{advertiser:e}=C,a=(0,lg.F0)(e,S);ep(!0),window.location.assign(a)},[S,C]),eA=(0,k.useCallback)((e,a)=>{let n={visualState:ea,didShortClickThrough:ei,didPinClickThrough:e_,isOverRelatedPins:es,firstLoadComplete:ed,campaignCreationTriggered:ec,intervalId:em,viewportSize:el,backButtonLabelFitInScreen:!1,closeupBodyContainerHeight:0,closeupContainerHeight:0},i=function(e,a){switch(a.type){case"gallerySelect":return{shopping:a.select};case"pinLoaded":{let n=e.myTry?{}:{myTry:{isDoneByMe:a.pin.done_by_me}};return{pin:a.pin,...n,firstLoadComplete:!0}}case"tryChange":return{myTry:{isDoneByMe:a.isDoneByMe}};default:throw"impossible"}}(n,e);i.visualState!==n.visualState&&i.visualState&&en(i.visualState),i.didShortClickThrough!==n.didShortClickThrough&&i.didShortClickThrough&&et(i.didShortClickThrough),i.didPinClickThrough!==n.didPinClickThrough&&i.didPinClickThrough&&ef(i.didPinClickThrough),i.isOverRelatedPins!==n.isOverRelatedPins&&i.isOverRelatedPins&&eo(i.isOverRelatedPins),i.firstLoadComplete!==n.firstLoadComplete&&i.firstLoadComplete&&eu(i.firstLoadComplete),i.campaignCreationTriggered!==n.campaignCreationTriggered&&i.campaignCreationTriggered&&ep(i.campaignCreationTriggered),i.intervalId!==n.intervalId&&eg(i.intervalId),i.viewportSize!==n.viewportSize&&i.viewportSize&&er(i.viewportSize),a&&a()},[ea,ei,e_,es,ed,ec,em,el]),eF=(0,k.useCallback)(()=>{let e;if(!ed)return;let a=t7({carouselData:f.carousel_data,images:f.images,product:(f.rich_metadata||f.rich_summary)?.products?.[0]}),n=(a?.carousel_slots||[])[0]||{},i=(0,ax.Z)(n.images),t=ea.carouselData,l=ea.mainImage||{url:""},r=t?.index||0;e=a&&(a.carousel_slots?.length||0)>1?{mainImage:m,carouselData:{...a,index:r},previewImage:t9(f.images?.["236x"])}:i?.url?{mainImage:{url:i.url,height:i.height||1,width:i.width||1}}:{mainImage:m,previewImage:t9(f.images?.["236x"])},(t?.id!==e.carouselData?.id||JSON.stringify(t?.carousel_slots)!==JSON.stringify(e.carouselData?.carousel_slots)||l.url!==e.mainImage.url)&&(en(e),eI())},[ed,f.carousel_data,f.images,f.rich_metadata,f.rich_summary,ea.carouselData,ea.mainImage,m,eI]),eE=(0,k.useCallback)(()=>{let{carouselData:e}=ea;return function({viewportSize:e,hasCarouselData:a}){return a&&["lg","md"].includes(e)}({viewportSize:el,hasCarouselData:!!e})},[el,ea]);(0,k.useEffect)(()=>{eF(),!ed||eE()||ek||(b?.removeConstraint("thumbnailsLoaded"),(0,ay.l7)("thumbnailsLoaded"),eP(!0));let{data:e}=v;e&&!ed&&(e.carousel_data&&(e.carousel_data.index=ea.carouselData?.index||0),eA({type:"pinLoaded",pin:e})),i&&A&&S&&ra({conversation_id:i,senderId:A,pinId:S}),v.data&&!ec&&s&&eT();let a={};((0,i5.M0)().getItem(i4.W3)||"").includes(`/pin/${S}`)&&u&&(a.loginPageType="pin"),l&&(a.didRepin=!0),f.image_signature&&(a.pin_image_signature=f.image_signature),a.is_own_or_group_pin=eC,!(0,ls.Z)(a)&&K&&K({...a})},[ed,ec,v.data,S,ea.carouselData,f.image_signature,i,A,l,u,ek,s,eF,eE,v,eC,K,b,eA,eT]);let ej=(0,k.useCallback)(e=>{ev.current=e||null},[]),eL=(0,k.useCallback)(()=>{clearInterval(em),K&&K({didLongClickThrough:!0})},[em,K]),eR=(0,E.Z)({type:"Legacy",data:f}),eK=(0,k.useCallback)(e=>{let n=!!f.story_pin_data,{wasImageClicked:i,auxData:t,componentType:l=n?228:4,elementType:r=i?35:n?11157:361,viewType:s=3}=e||{},o=(0,ey.Z)({hasPin:!0,hasPinRichMetadata:!!f.rich_metadata,hasPinRichMetadataProducts:!!f.rich_metadata?.products,hasPinRichMetadataArticle:!!f.rich_metadata?.article,hasPinRichMetadataRecipe:!!f.rich_metadata?.recipe,hasPinStoryPinData:!!f.story_pin_data}),d={...eR(),...t||{}};G&&G.isAuth&&!e_&&K&&(K({didPinClickThrough:!0}),ef(!0)),n&&p({event_type:102,view_type:132,view_parameter:3549,element:12971,aux_data:{pin_id:f.id,url:P}}),p({event_type:101,object_id_str:S,component:l,element:r,aux_data:d,clientTrackingParams:a}),p({event_type:12,object_id_str:S,view_type:s,view_parameter:o,component:l,element:r,aux_data:d,clientTrackingParams:a}),p({event_type:8948,view_type:s,view_parameter:o,component:l,element:r,object_id_str:S,aux_data:{click_type:"clickthrough",closeup_navigation_type:N&&(0,eh.sV)(N)?"deeplink":"click",...d}}),p({event_type:12,object_id_str:S,view_type:s,view_parameter:o,component:l,element:r,aux_data:{...d,...(0,ld.Z)(f.link_utm_applicable_and_replaced)},clientTrackingParams:a}),i&&eg(window.setInterval(eL,12e4)),eb.current=Date.now(),ei&&et(!1),F(!0)},[f.story_pin_data,f.rich_metadata,f.id,eR,G,e_,K,p,S,a,N,ei,F,P,eL,f.link_utm_applicable_and_replaced]),eZ=(0,k.useCallback)(()=>{clearInterval(em),K&&K({didLongClickThrough:!1})},[em,K]),eD=(0,k.useCallback)(()=>{p({event_type:101,object_id_str:f.id,component:4,element:13306,clientTrackingParams:a,aux_data:{...eR()}}),F(!0)},[f.id,p,a,eR,F]),eO=(0,k.useCallback)(()=>{g()},[g]),eN=(0,k.useCallback)(e=>{ed&&en(a=>({...a,carouselData:{...a.carouselData||{},index:e}}))},[ed]),ez=(0,k.useCallback)(()=>(0,tn.Z)(()=>{if(!ev.current)return;let e=e7.hu,a=ev.current.getBoundingClientRect().top<=e;es!==a&&eo(a)},10)(),[es]),eV=(0,k.useCallback)(e=>{e.stopPropagation(),eO()},[eO]),{abortNoActionPlacementTimeout:eU,contextPinIds:eW,getAdditionalFields:eG,pinDerivedData:eH,topLevelTrafficSource:e$,topLevelTrafficSourceDepth:eY,searchQuery:eX,isCommentAttachmentSelectorOpen:eq,isCommentComposerFocused:eJ,isCommentPopoverInteractionActive:eQ,isCommentThreadExpanded:e0,isProductDetailsExpanded:e1,setIsCommentAttachmentSelectorOpen:e2,setIsCommentComposerFocused:e3,setIsCommentPopoverInteractionActive:e6,setIsCommentThreadExpanded:e8,setIsProductDetailsExpanded:e5,isCloseupMediaViewerOpen:e9,setIsCloseupMediaViewerOpen:ae,landingContext:aa,relatedPinsContainerRef:an}=e,ai=eR(),{isWideVideo:at}=(0,n8.Z)((0,W.Z)({pin:f}))||{},al=(0,T.Z)({showProductDetailPage:!0}),ar=al?"sm"!==el:!n&&(({isWideVideo:e,viewportSize:a,peekCloseupEnabled:n})=>!["md","sm"].includes(a)&&!e||n&&"sm"!==a)({isWideVideo:!!at,viewportSize:el,peekCloseupEnabled:_}),{recommendation_reason:as}=f,ao=(0,k.useMemo)(()=>({name:"RelatedModulesResource",options:{additional_fields:eG(),pin_id:f.id,context_pin_ids:eW,homefeed_source_sig:as&&["NAVBOOST_P2P","NAVBOOST_PFY","INSTANT_PFY_NON_MATERIALIZABLE","P2P","P2P_CLICKTHROUGH","FRESH_TEXT_EMBEDDINGS","INTENTIONAL_DISTRIBUTION_GEMINI_V5"].includes(as.reason??"")&&as.reason_id,page_size:12,search_query:eX,source:N,top_level_source:e$,top_level_source_depth:eY,is_pdp:f.is_eligible_for_pdp,landing_context:aa}}),[eG,f.id,eW,as,eX,N,e$,eY,f.is_eligible_for_pdp,aa]),ad=(0,eM.q6)(G,f.pinner?.id,y),au=!!f.id&&!ad||n,ac=n?eB.Gg:eB.CI,ap=eE()&&ar?eB.Ch:ac,am=eE()?eB.Gb:eB.Kn,ag=n||"lg"!==el?ap:am-ap,ah=ed&&(eE()||n),a_=ah&&(0,j.jsx)(aJ.Z,{id:"ProductStickyContainer",children:(0,j.jsx)(lK,{disabled:!M||n,children:(0,j.jsx)(aJ.Z,{id:"ImageContainerPerf",children:(0,j.jsx)(l5.Z,{containerId:"InnerScrollContainer",children:(0,j.jsx)(aJ.Z,{id:"SecondaryCarousel",children:(0,j.jsx)(l7.Z,{accessibilityControls:`closeup-image-container-${f.id}`,commerceData:ai,pinId:f.id,size:"sm",surfaceType:"closeup",viewParameter:(0,ey.Z)({hasPin:!!f,hasPinRichMetadata:!!f.rich_metadata,hasPinRichMetadataProducts:!!f.rich_metadata?.products,hasPinRichMetadataArticle:!!f.rich_metadata?.article,hasPinRichMetadataRecipe:!!f.rich_metadata?.recipe,hasPinStoryPinData:!!f.story_pin_data})})})})})})}),af=ah&&(0,j.jsx)(I.xu,{width:80}),ak=(0,k.useMemo)(()=>(0,j.jsx)(aJ.Z,{id:"ProductDetailPageBodyContainer",children:(0,j.jsx)(lN,{closeupWithinMasonryEnabled:n,didShortClickThrough:ei,executeClickthrough:eK,handleBackButtonClick:eO,handleSaveButtonClick:eD,isLimitedLogin:c,maxWidth:am,orbacActingAs:y,pin:f,pinResource:v,routePush:w,showRepinOnInitialRender:D,showStructuredDescription:M,trafficSource:N,trendsData:z,userBusinessRoleResource:V,viewer:G,viewportSize:el})}),[n,ei,eK,eO,eD,c,am,y,f,v,w,D,M,N,z,V,G,el]),aP=(0,j.jsx)(aJ.Z,{id:"CloseupContent",children:(0,j.jsx)(tl,{isVideoPin:eH.isVideoPin,pin:f,pinResource:v,topLevelTrafficSource:e$,didShortClickThrough:ei,firstLoadComplete:ed,viewportSize:el,relatedModulesContent:au?(0,j.jsx)(aJ.Z,{id:"ProductDetailPageRelatedModules",children:(0,j.jsx)(l8,{closeupBody:ak,pinKey:{type:"Legacy",data:f},relatedPinsContainerRef:an,relatedResourceOptions:ao,setRelatedPinsHeaderRef:ej,topLevelTrafficSource:e$,viewParameter:(0,ey.Z)({hasPin:!!f,hasPinRichMetadata:!!f.rich_metadata,hasPinRichMetadataProducts:!!f.rich_metadata?.products,hasPinRichMetadataArticle:!!f.rich_metadata?.article,hasPinRichMetadataRecipe:!!f.rich_metadata?.recipe,hasPinStoryPinData:!!f.story_pin_data}),viewportSize:el})}):(0,j.jsx)(k.Fragment,{}),afterBodyContent:af,beforeBodyContent:a_,bodyContent:ak,onWrapperClick:eV,backButton:(0,j.jsx)(lc.Z,{onClick:eO,size:al?"lg":"xl"}),isProductDetailsExpanded:e1,peekCloseupEnabled:_,setIsCommentAttachmentSelectorOpen:e2,setIsCommentComposerFocused:e3,setIsCommentPopoverInteractionActive:e6,setIsCommentThreadExpanded:e8,setIsCloseupMediaViewerOpen:ae,setIsProductDetailsExpanded:e5,closeupWithinMasonryEnabled:n,setAbortNoActionPlacementTimeout:F})});return(0,j.jsx)(aJ.Z,{id:"CloseupLayout",children:(0,j.jsx)(td,{abortNoActionPlacementTimeout:eU,beforeBodyContent:a_,classProps:{...e,location:{pathname:"",search:"",hash:""}},classState:{...e.initialState,pin:f,visualState:ea,didShortClickThrough:ei,didPinClickThrough:e_,firstLoadComplete:ed,intervalId:em,viewportSize:el,isOverRelatedPins:es},clientTrackingParams:a,commerceData:ai,showCloseupContentRight:ar,showProductDetailPage:!0,paneWidth:ap,maxWidth:am,descriptionPaneWidth:ag,handleCarouselSwipe:eN,handleFocus:eZ,handleScroll:ez,handleBackButtonClick:eO,closeupContent:aP,isCloseupMediaViewerOpen:e9,isCommentAttachmentSelectorOpen:eq,isCommentComposerFocused:eJ,isCommentPopoverInteractionActive:eQ,isCommentThreadExpanded:e0,isProductDetailsExpanded:e1,peekCloseupEnabled:_,setIsCommentAttachmentSelectorOpen:e2,setIsCommentComposerFocused:e3,setIsCommentPopoverInteractionActive:e6,setIsCommentThreadExpanded:e8,setIsCloseupMediaViewerOpen:ae,setIsProductDetailsExpanded:e5,closeupWithinMasonryEnabled:n,setAbortNoActionPlacementTimeout:F})})}let ri=la(function(e){let{clientTrackingParams:a,pin:n,pinResource:i,pinId:t,viewer:l,deepLinkBackGoesToBoard:r,goBack:s,routePush:o,trafficSource:d}=e,{logContextEvent:u}=(0,eA.u)(),c=(0,iv.Z)(),p=(0,O.ZP)(),m=(0,eL.B)(),g=(0,e_.Z)(),{checkExperiment:h}=g,y=!!(n.is_eligible_for_pdp&&!n.story_pin_data&&n.formatted_description?.components),[_,f]=(0,k.useState)(!1),[x,S]=(0,k.useState)(!1),[v,C]=(0,k.useState)(!1),[I,w]=(0,k.useState)(!1),[T,A]=(0,k.useState)(!1),[F,L]=(0,k.useState)(!1),[R,K]=(0,k.useState)(!1),Z=(0,k.useRef)(null),{setMostRecentPinId:D,setMostRecentPinImage:M}=(0,lf.R)(),B=(0,E.Z)({type:"Legacy",data:n}),N=(0,lu.Z)({type:"Legacy",data:n}),z=(0,eh.sY)(n.embed?.type)&&"gif"||!!n.is_eligible_for_pdp&&"productPin"||n.rich_summary?.type_name==="recipe"&&"recipePin"||n.story_pin_data_id&&"storyPin"||!!n.videos?.video_list&&"video"||"image",{conversationOpen:V}=(0,l_.Z)(),U=(0,tt.Z)(),{landingContext:W}=(0,lo.Z)(),G=(0,nj.Z)(),H=(0,eM.lJ)(l,G),$=n.sponsorship?.sponsor?.id,Y=!n.is_repin&&!!$,X=(0,ep.Z)($&&Y&&l.isAuth&&"storyPin"===z?{name:"ApiResource",options:{url:`/ads/v4/business_access/businesses/${$}/me/ad_accounts_permissions/`}}:null),{onHandleBackButtonClick:q}=ly({logCommerceAuxData:!0,deepLinkBackGoesToBoard:r,element:13310,goBack:s,routePush:o,trafficSource:d,viewer:l,requestContext:m,pinKey:{type:"Legacy",data:n}},u),J=l.isAuth&&(0,b.Gv)({orbacSubjectId:H,pinIsRepin:n.is_repin,pinPinnerId:n.pinner?.id,viewerId:l.id,viewerIsPartner:l.isPartner}),{data:Q,isLoaded:ee}=(0,ep.Z)(J?{name:"ApiResource",options:{url:`/v3/trends/partner/${l.id||""}/trends_for_pin/${n.id}/`,data:{number_terms_to_return:10}}}:null),{sideBySideRedesignFastFollowsEnabled:ea}=(0,eC.Z)(),en=le({pin:n,pinId:t,pinResource:i}),{mainPinImage:ei}=(0,t5.Z)({pinKey:{type:"Legacy",data:n}}),et=(0,k.useCallback)(()=>{let e=[],a=h("hfp_gen_ai_topics_opt_out_dweb",{dangerouslySkipActivation:!0}).group;return a&&(["control_pwt","enabled_pwt"].includes(a)&&h("hfp_gen_ai_topics_opt_out_dweb"),"control_pwt"!==a&&e&&!e.includes("pin.gen_ai_topics")&&(e=[...e,"pin.gen_ai_topics"])),e},[h]);return(0,j.jsx)(aJ.Z,{id:"ProductDetailPageInner",children:(0,j.jsx)(rn,{...e,abortNoActionPlacementTimeout:_,clientTrackingParams:a,closeupWithinMasonryEnabled:ea,conversationOpen:V,dispatch:(0,P.I0)(),experimentsClient:g,getAdditionalFields:et,getSterlingURL:(0,ln.Z)(),getStringifiedCommerceAuxData:B,i18n:p,initialState:en,isCloseupMediaViewerOpen:R,isCommentAttachmentSelectorOpen:x,isCommentComposerFocused:v,isCommentPopoverInteractionActive:I,isCommentThreadExpanded:T,isProductDetailsExpanded:F,landingContext:W,logContextEvent:u,mainImage:ei,onHandleBackButtonClick:q,orbacActingAs:G,peekCloseupEnabled:!ea,pinFormattedLink:N,pwtSurfaceContext:(0,na.A)(),relatedPinsContainerRef:Z,requestContext:m,setAbortNoActionPlacementTimeout:f,setIsCloseupMediaViewerOpen:K,setIsCommentAttachmentSelectorOpen:S,setIsCommentComposerFocused:C,setIsCommentPopoverInteractionActive:w,setIsCommentThreadExpanded:A,setIsProductDetailsExpanded:L,setMostRecentPinId:D,setMostRecentPinImage:M,showStructuredDescription:y,toastManager:(0,lp.dI)(),trackInteraction:c,trendsData:{data:Q,isLoaded:!J||ee},userBusinessRoleResource:X,verticalNavWidth:U})})});var rt=n(688170),rl=n(785873),rr=n(669442);function rs(e,a=!1){let n=e||window.location.href;(0,rl.Z)(`/login?next=${a?(0,rr.Z)(n,{type:"signup"}):encodeURIComponent(n)}`)}var ro=n(469978),rd=n(288910),ru=n(990103),rc=n(438235);let rp=(0,ez.Z)(()=>n.e("8479").then(n.bind(n,702042)),void 0,e=>702042,"app-common-react-components-StatusPin-StatusPinCloseup",e=>["8479"]),rm=(0,v.Z)(e=>({isVideoPin:!!e&&(0,eh.iR)(e),isYoutubePin:!!e&&(0,eh.oU)({isVideo:e.is_video,link:e.link})}));function rg({checkExperiment:e,clientTrackingParams:a,currentHistoryStack:n,navigate:i,location:t,params:l,pinResource:r,requestContext:s,searchPinCloseupViewed:o,goToCampaignCreation:d,showRepin:u,closeupComponentToRender:c,...p}){(0,k.useEffect)(()=>{(0,x.Z)("CloseupContainer","/app/common/react/components/closeup/CloseupContainer.tsx")},[]);let m=r.data,g=r.isLoaded,h=(0,k.useRef)(null),y=(0,aZ.Z)(),_="id"in y?y.id:"",f=g&&m&&m.pinner&&y.isAuth&&y.username===m.pinner.username&&g&&m&&"extension"===m.method,{trafficSource:P,topLevelTrafficSource:S,topLevelTrafficSourceDepth:v,contextPinIds:b}=(0,lC.Z)(n,y.isAuth);v>1&&"pin"!==P&&(0,nz.nP)("p2p.traffic_source.client",{sampleRate:.1,tags:{trafficSource:P,topLevelTrafficSource:S,topLevelTrafficSourceDepth:v}});let C=(0,rt._)(n),I=(0,tW.mB)(t.search);(0,k.useEffect)(()=>{h.current!==m&&function({navigate:e,isBot:a,location:n,viewerId:i,viewerIsAuth:t}){!a&&i&&"undefined"!=typeof window&&(0,ro.U)(window.location,i,!1,t,a=>e(a,{state:n.state,replace:!0}))}({navigate:i,isBot:s.isBot,location:t,viewerId:_,viewerIsAuth:y.isAuth}),h.current=m},[i,t,h,m,s.isBot,y.isAuth,y,_]),(0,k.useEffect)(()=>()=>{C&&m?.id&&o(m.id,C)},[m?.id,C,o]);let w=(0,k.useMemo)(()=>({viewType:3,viewParameter:(0,ey.Z)({hasPin:!!m,hasPinRichMetadata:!!m?.rich_metadata,hasPinRichMetadataProducts:!!m?.rich_metadata?.products,hasPinRichMetadataArticle:!!m?.rich_metadata?.article,hasPinRichMetadataRecipe:!!m?.rich_metadata?.recipe,hasPinStoryPinData:!!m?.story_pin_data})}),[m]),T=(0,k.useMemo)(()=>({featuredCommentId:l.comment_id||""}),[l.comment_id]),A=(0,k.useMemo)(()=>(function({boardUrl:e,currentHistoryStack:a,navigate:n,isFromExtension:i=!1,hasViewerPartner:t}){return()=>a.map(e=>{var a;return!!(a=e.location)&&((0,rt.C)(a)||(({pathname:e})=>/^\/pin\/[\w-]+\/activity\/tried\/?$/.test(e))(a))}).find(e=>!0===e)||i?i&&1===a.length?void n(e??""):void n(-1):void(t?n("/homefeed/"):n("/"))})({boardUrl:m?.board?.url,currentHistoryStack:n,navigate:i,isFromExtension:!!f,hasViewerPartner:!!("partner"in y&&y.partner)}),[n,i,f,m?.board?.url,y]);return(0,j.jsx)(aJ.Z,{id:"FeaturedCommentProvider",children:(0,j.jsx)(lA.h,{children:(0,j.jsx)(lF.Q,{value:T,children:(0,j.jsx)(aJ.Z,{id:"SearchParamsContextProvider",children:(0,j.jsx)(rd.v,{value:w,children:(0,j.jsx)(aJ.Z,{id:"OneBarProductFiltersContextProvider",children:(0,j.jsx)(lE.f,{children:(0,j.jsx)(aJ.Z,{id:"ViewTransitionProvider",children:(0,j.jsx)(lT,{children:(0,j.jsx)(aJ.Z,{id:"ExperienceCloseupFeatures",children:(0,j.jsx)(a0.Ig,{children:(0,j.jsx)(aJ.Z,{id:"CloseupBodyContextProvider",children:(0,j.jsx)(aD.C,{children:(0,j.jsx)(aJ.Z,{id:"CloseupReduxWrapper",children:(0,j.jsx)(lb,{pinId:l.id||"",pinResource:r,children:({isLandingPage:e,isLimitedLogin:n,didRepin:t,openInbox:s,pin:o,shouldShowInbox:m,updateExperienceForPlacement:g})=>{let h={clientTrackingParams:a,contextPinIds:b,conversation_id:I.conversation_id,deepLinkBackGoesToBoard:f,emailId:I.e_t,forceSendFeedback:I.fsf,goBack:A,goToCampaignCreation:d,messageId:I.message,onLoginClick:rs,pinId:l.id??"",pinResource:r,routePush:i,searchQuery:C,senderId:I.sender,showRepinOnInitialRender:u,topLevelTrafficSource:S,topLevelTrafficSourceDepth:v,trafficSource:P,viewer:y,didRepin:t,isLandingPage:e,isLimitedLogin:n,openInbox:s,pin:o,pinDerivedData:rm(o),shouldShowInbox:m,updateExperienceForPlacement:g,...p};switch(c){case"ProductDetailPage":return(0,j.jsx)(aJ.Z,{id:"ProductDetailPage",children:(0,j.jsx)(ri,{...h})});case"CloseupWithStoryPinProducts":return(0,j.jsx)(aJ.Z,{id:"CloseupWithStoryPinProducts",children:(0,j.jsx)(lS,{...h})});default:return(0,j.jsx)(aJ.Z,{id:"CloseupDefault",children:(0,j.jsx)(lP,{...h})})}}})})})})})})})})})})})})})})})}function rh(e){(0,k.useEffect)(()=>{(0,x.Z)("CloseupContainer","/app/common/react/components/closeup/CloseupContainer.tsx")},[]);let{pinResource:a}=e,n=a.data,{is_hidden:i,is_unsafe:t}=n||{},l=n?.story_pin_data?.has_product_pins,r=(0,aQ.Z)({isHiddenPin:i,isUnsafePin:t});return(0,j.jsx)(aJ.Z,{id:"CloseupContainerCommon",children:(0,j.jsx)(rg,{...e,closeupComponentToRender:r&&l?"CloseupWithStoryPinProducts":"CloseupDefault"})})}function ry(e){(0,k.useEffect)(()=>{(0,x.Z)("CloseupContainer","/app/common/react/components/closeup/CloseupContainer.tsx")},[]);let a=(0,P.I0)(),n=(0,aZ.Z)(),i=(0,rc.Z)(),t=(0,nE.aX)(),l={...e,navigate:(0,S.s0)(),location:(0,S.TH)(),params:i,requestContext:(0,eL.B)(),searchPinCloseupViewed:(e,n)=>a((0,ru.Y4)(e,n))},{checkExperiment:r}=(0,e_.Z)(),s=(0,k.useMemo)(()=>{let e=[],a=r("hfp_gen_ai_topics_opt_out_closeup",{dangerouslySkipActivation:!0}).group;return a&&(["control_pwt","enabled_pwt"].includes(a)&&r("hfp_gen_ai_topics_opt_out_closeup"),"control_pwt"===a||e.includes("pin.gen_ai_topics")||(e=[...e,"pin.gen_ai_topics"])),e},[r]);return(0,j.jsx)(lI.Z,{addFields:s,orbacSubjectId:(0,eM.lJ)(n,(0,nj.Z)()),pinId:i.id||"",children:({pinResource:e})=>{let a=e&&e.data;return a&&(0,eh._J)(a.video_status)?(0,j.jsx)(X.bq,{children:(0,j.jsx)(rp,{...l,onClickThrough:()=>{},pinKey:{type:"Legacy",data:a}})}):(0,j.jsx)(aJ.Z,{id:"CloseupContainerInner",children:(0,k.createElement)(rh,{...l,key:i.id,checkExperiment:r,currentHistoryStack:t,pinResource:e})})}})}},589183:function(e,a,n){n.r(a),n.d(a,{default:()=>m});var i=n(281098),t=n(667294),l=n(894980),r=n(261458),s=n(980787),o=n(127753),d=n(341742),u=n(601686),c=n(78187),p=n(785893);function m({filter:e,story:a,viewParameter:n}){(0,t.useEffect)(()=>{(0,i.Z)("CloseupRelatedModulesInclusiveFilters","/app/common/react/components/closeup/CloseupRelatedModules/CloseupRelatedModulesInclusiveFilters.tsx")},[]);let{logContextEvent:m}=(0,s.u)(),{closeupWithinMasonryEnabled:g}=(0,u.x4)(),{custom_properties:h,title:y,objects:_}=a,{format:f="",args:x=[]}=y||{},{query:k=""}=x[0]||{},{viewComponentType:P,viewType:S,elementType:v,inInclusiveEfficientRefinements:b,inclusiveFilterParam:C,onClickApplyFilters:I}=(0,r.Z)({filter:e,searchQuery:k,viewParameter:n});if((0,d.Z)(()=>{m({element:v,event_type:13,component:P,view_type:S,view_parameter:n,aux_data:{story_type:P}})}),!e)return null;let w=(()=>{switch(e){case c.ti.BODY:return _;case c.ti.SKIN:return h?.skin_tone_filter_list;case c.ti.HAIR:return(0,o.ZP)(e,h)||[];default:return[]}})();if(!w||w.length<1)return null;let T=g?c.CT.CLOSEUP_FEED:c.CT.CLOSEUP_STACKED,A=b?c.CT.CLOSEUP_RESPONSIVE:T,F=g&&!b;return(0,p.jsx)(l.Z,{currentlyAppliedFiltersParamTerm:F?void 0:b?C:void 0,filter:e,filterList:w,headerTitle:f??"",moduleType:F?c.CT.CLOSEUP_FEED:A,onClickApplyFilters:I,searchQuery:k,showAuthCloseupWithinMasonry:F,viewParameter:n,viewType:S})}},894980:function(e,a,n){n.d(a,{Z:()=>u});var i=n(281098),t=n(667294),l=n(20256),r=n(592821),s=n(8258),o=n(78187),d=n(785893);let u=({filter:e,filterList:a,headerTitle:n,searchQuery:u,viewParameter:c,showAuthCloseupWithinMasonry:p=!1,moduleType:m=o.CT.CLOSEUP_FEED,currentlyAppliedFiltersParamTerm:g,onClickApplyFilters:h,viewType:y})=>{(0,t.useEffect)(()=>{(0,i.Z)("UnifiedInclusiveFiltersModule","/app/common/react/components/closeup/CloseupRelatedModules/UnifiedInclusiveFiltersModule.tsx")},[]);let _=e===o.ti.HAIR,f=(0,d.jsx)(s.Z,{currentlyAppliedFiltersParamTerm:g,filters:a,headerTitle:n,moduleType:m,onClickApplyFilters:h,query:_?u:void 0,showHairPatternEducationIcon:_,type:e,viewParameter:c,viewType:y});return p?(0,d.jsx)(l.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{border:r.tc,gap:"12px"}},"data-test-id":"auth-inclusive-filter",direction:"column",display:"flex",justifyContent:"center",padding:4,rounding:6,children:f}):f}},261458:function(e,a,n){n.d(a,{Z:()=>d});var i=n(825332),t=n(142689),l=n(980787),r=n(490186),s=n(940280),o=n(78187);let d=({filter:e,searchQuery:a,viewParameter:n,unauthCloseupRedesignEnabled:d=!1})=>{let{logContextEvent:u}=(0,l.u)(),c=(0,i.s0)(),{pathname:p,search:m}=(0,i.TH)(),g=new URLSearchParams(m).get("filters"),{inInclusiveEfficientRefinements:h}=(0,t.Z)(e),y=e===o.ti.SKIN?13863:13864,_=e===o.ti.SKIN?13803:14935,f=e===o.ti.SKIN?10418:13358;return{onClickApplyFilters:e=>{let i=d?s.i.RS:s.i.TYPED;if(a&&u({element:f,view_type:3,view_parameter:n,event_type:101,component:_,aux_data:{entered_query:a,filter_value:e,story_type:y}}),h){let a=e?`?filters=${e}`:"";g&&g===e?c(p):c(`${p}${a}`,{replace:!0})}else c((0,r.Z)({query:a||"",rs:i||"",scope:"pins",filters:e}))},viewComponentType:y,viewType:3,clickComponentType:_,elementType:f,inInclusiveEfficientRefinements:h,inclusiveFilterParam:g}}},728371:function(e,a,n){n.d(a,{Z:()=>h});var i=n(281098),t=n(667294),l=n(262508),r=n(20256),s=n(149739),o=n(19585),d=n(369416),u=n(601686),c=n(238187),p=n(937314),m=n(785893);function g({isDarkMode:e,onPress:a,testID:n,label:i,peekCloseupEnabled:t,withShadow:l}){return(0,m.jsxs)(r.xu,{dangerouslySetInlineStyle:{__style:{background:e?"black":"white"}},"data-test-id":n,display:"inlineBlock",position:"relative",children:[l&&(0,m.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{background:e?"linear-gradient(90deg, rgba(0, 0, 0, 0) 0%, black 100%)":"linear-gradient(90deg, rgba(255, 255, 255, 0) 0%, white 100%)",right:"100%"}},height:"100%",position:"absolute",width:"48px"}),(0,m.jsx)(r.iP,{fullWidth:!1,onTap:a,children:(0,m.jsxs)(r.xv,{size:t?"200":s.n,weight:"bold",children:["...",i]})})]})}function h({children:e,isDarkMode:a,descriptionDir:n}){(0,t.useEffect)(()=>{(0,i.Z)("TruncatedDescription","/app/common/react/components/closeup/Description/TruncatedDescription.tsx")},[]);let h=(0,t.useRef)(null),[y,_]=(0,t.useState)(0),[f,x]=(0,t.useState)(0),[k,P]=(0,t.useState)(!0),[S,v]=(0,t.useState)(!1),[b,C]=(0,t.useState)(!1),[I,w]=(0,t.useState)(!1),T=(0,o.ZP)(),{closeupWithinMasonryEnabled:A,peekCloseupEnabled:F}=(0,u.x4)(),E=A||F,j=E?1:3,L=600*!!E;(0,t.useEffect)(()=>{if(h.current&&k){let e,a=(0,c.xW)(h.current),n=(e=h.current).offsetHeight<e.scrollHeight||e.offsetWidth<e.scrollWidth;v(()=>!!n&&(h.current&&(h.current.style.webkitLineClamp="unset",x(h.current?.scrollHeight??0),h.current.style.webkitLineClamp=j.toString()),!0)),P(!1),w(a>=j&&n),_(h.current?.clientHeight)}},[k,P,j,y,f,S]);let R=`${y}px`,K=`${y+f}px`,Z=`
    .TruncatedDescription-enter{
      max-height: ${R};
    }
    .TruncatedDescription-enter-active {
      max-height: ${K};
      transition: max-height ${L}ms cubic-bezier(.25,1,.5,1);
    }
    .TruncatedDescription-enter-done {
      max-height: ${K};
    }
    .TruncatedDescription-exit {
      max-height: ${K};
    }
    .TruncatedDescription-exit-active {
      max-height: ${R};
      transition: max-height ${L}ms cubic-bezier(.25,1,.5,1);
    }
    .TruncatedDescription-exit-done {
      max-height: ${R};
    }
    [data-test-id="truncated-description"] div[role=button] {
      outline-offset: -2px;
      outline-width: 2px;
    }
  `,D=e=>{let n=e?T._('more', 'storyPin.previewText.more', 'Story pin preview more text truncation'):T._('less', 'storyPin.previewText.less', 'Story pin preview less text truncation');return(0,m.jsx)(g,{isDarkMode:a,label:n,onPress:()=>C(e),peekCloseupEnabled:F,testID:`${e?"more":"less"}-description-container`,withShadow:e&&E})},M=(0,t.useRef)(null);return(0,m.jsxs)(t.Fragment,{children:[(0,m.jsx)(d.Z,{unsafeCSS:Z}),(0,m.jsx)(l.Z,{classNames:"TruncatedDescription",in:b,nodeRef:M,onEnter:()=>v(!1),onExited:()=>v(!0),timeout:L,children:(0,m.jsx)(r.xu,{ref:M,"data-test-id":"truncated-description",flex:"grow",overflow:E?"hidden":"visible",position:"relative",width:A?"100%":void 0,children:(0,m.jsx)(p.Z,{dir:n,children:(0,m.jsxs)(r.xv,{ref:h,align:"ltr"===n?"forceLeft":void 0,lineClamp:k||S?j:0,size:F?"200":s.n,children:[e,I?(0,m.jsxs)(t.Fragment,{children:[b&&D(!1),(0,m.jsx)(r.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{transition:E?"opacity 200ms ease-in-out":void 0,visibility:S?"visible":"hidden"}},opacity:+!!S,position:"absolute",right:!0,children:D(!0)})]}):null]})})})})]})}},998951:function(e,a,n){n.d(a,{Z:()=>i});function i(e){return"string"==typeof e&&("function"==typeof e.replaceAll?e.replaceAll(" ",""):e.replace(/ /g,"")).length>0}},846721:function(e,a,n){n.d(a,{Z:()=>k});var i,t=n(667294);n(167912);var l=n(507438),r=n(102134),s=n(878709),o=n(821342),d=n(28427),u=n(19585),c=n(411354),p=n(453179),m=n(675973),g=n(664897),h=n(448505),y=n(7872),_=n(218831),f=n(601686);let x=(void 0!==i||(i=n(224266)).hash&&"c3027cfec56abe15f0990c2bc6707062"!==i.hash&&console.error("The definition of 'useMediaContainer_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function k({pinKey:e}){let a=(0,u.ZP)(),n=(0,o.Z)(),{checkExperiment:i}=(0,m.Z)(),k=(0,h.Z)(),{mainImage:P,carouselInfo:S,previewImage:v,isGif:b,imgSrc:C}=(0,s.G)(),I=(0,r.Z)(),w=(0,d.Z)(x,e),T=(0,g.Z)(),{aggregatedPinData:A,altText:F,autoAltText:E,isEligibleForPdp:j,isEligibleForRelatedProducts:L,pinner:R,richMetadata:K,trackedLink:Z,utmLink:D,link:M,method:B,shuffle:O}=w,N=!j&&S?.carouselData,z=!!A?.isShopTheLook,V=!!O&&I(),U=!!L&&!z&&!j&&!N&&!V,W=(0,y.nl)(n,k)&&i("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,G=w.imageSpec_orig?.url,H=S?.carouselData?function(e){let{carousel_slots:a,index:n}=e;return a&&void 0!==n&&(a[n]||{}).image_signature?a[n].image_signature:null}(S.carouselData):w.imageSignature,$=(0,p.Zt)({trackedLink:Z,link:M,utmLink:D}),Y="catalog_bulk_create"===B||K?.products,X=$&&Y?decodeURIComponent($):$,q=(0,y.Ms)(n,k)===R?.username&&W,{closeupWithinMasonryEnabled:J,paneWidth:Q,showProductDetailPage:ee}=(0,f.x4)(),{closeupBodyWidth:ea}=(0,_.K)(),{height:en,width:ei}=P,et=(0,t.useMemo)(()=>({naturalWidth:ei,naturalHeight:en,alt:(0,l.Z)({altText:F,autoAltText:E,i18n:a}),src:b?C:!T&&C?.startsWith("https://i.pinimg.com/")?(0,c.Z)(C)||v?.url||"":v?.url||""}),[ei,en,F,E,a,b,T,C,v?.url]),el=(0,t.useMemo)(()=>({naturalHeight:et.naturalHeight,naturalWidth:et.naturalWidth,mainImage:{alt:et.alt,src:b?et.src:C},...!b&&{previewImage:{alt:"",src:b?"":et.src}}}),[et.alt,et.naturalHeight,et.naturalWidth,et.src,C,b]);return{disablePinTagButton:q,imageProps:et,imageSignature:H,imageWithPreview:el,isScenePin:U,link:X,maxCloseupImageWidth:J&&ea||Q,originalImageUrl:G,showProductDetailPage:ee}}},770545:function(e,a,n){n.d(a,{Z:()=>g});var i=n(667294),t=n(642411),l=n(980787),r=n(776250),s=n(956077),o=n(886981),d=n(431338),u=n(821342),c=n(67831),p=n(647709),m=n(653621);function g(e){let{logContextEvent:a}=(0,l.u)(),n=(()=>{let e=(0,p.HG)(),{isAuth:a}=(0,u.Z)(),n=a&&e,i=(0,c.A)();return i?e=>{"DEFAULT"!==e&&i.setSegment(e),n&&(({segment:e})=>{let a=(({segment:e})=>m.GL.get(e)??new Set)({segment:e});return new Set([...m.hO].filter(e=>!a.has(e)))})({segment:e}).forEach(e=>{i.removeConstraint(e),(0,s.l7)(e)})}:null})(),g=(0,o.Z)({name:"PinResource",options:(0,t.Z)(e.pinId,e.orbacSubjectId,e.addFields)}),h=g.data,y=(0,d.Z)(null!=h?{type:"Legacy",data:h}:null);return(0,i.useEffect)(()=>{if(!h)return;let e=(0,r.Z)({hasPin:!!h,hasPinRichMetadata:!!h.rich_metadata,hasPinRichMetadataProducts:!!h.rich_metadata?.products,hasPinRichMetadataArticle:!!h.rich_metadata?.article,hasPinRichMetadataRecipe:!!h.rich_metadata?.recipe,hasPinStoryPinData:!!h.story_pin_data});a({event_type:7408,view_parameter:e,object_id_str:h.id,view_type:3,view_data:{pin_id:h.id,closeup_rich_types:h.shopping_flags||[]},aux_data:{...y()}}),h.aggregated_pin_data&&(h.aggregated_pin_data.is_shop_the_look||h.aggregated_pin_data.is_stela)&&a({event_type:7579,view_parameter:e,object_id_str:h.id,view_type:3,aux_data:{commerce_data:JSON.stringify({pin_is_shop_the_look:h.aggregated_pin_data.is_shop_the_look,pin_is_stela:h.aggregated_pin_data.is_stela})}}),(0,s.Nx)("resource");let i="DEFAULT";h.is_eligible_for_pdp?i=h.is_eligible_for_pdp_plus?"product_detail_page_plus":"product_detail_page":h.story_pin_data_id&&(i="story_pin"),"DEFAULT"!==i&&(0,s.Yl)(i),n&&n(i)},[h,y]),e.children({pinResource:g})}},71157:function(e,a,n){n.r(a),n.d(a,{default:()=>m});var i=n(281098),t=n(667294),l=n(20256),r=n(707915),s=n(704300),o=n(521009),d=n(19585),u=n(123317),c=n(341742),p=n(785893);let m=({clientTrackingParams:e,watchAgain:a,imageSrc:n,pinDescription:m,pinId:g,rounded:h=!0})=>{(0,t.useEffect)(()=>{(0,i.Z)("EndCard","/app/common/react/components/closeup/StoryPin/EndCard.tsx")},[]);let y=(0,d.ZP)(),_=(0,o.Z)();(0,c.Z)(()=>{_({event_type:120,view_type:3,component:13799})});let f=()=>{a()};return(0,p.jsx)(l.xu,{alignItems:"center",bottom:!0,color:"dark","data-test-id":"story-pin-end-card",direction:"column",display:"flex",height:"100%",justifyContent:"center",left:!0,opacity:.9,padding:4,position:"absolute",right:!0,rounding:h?u.yR:0,top:!0,width:"100%",children:(0,p.jsx)(l.kC,{alignItems:"center",direction:"column",height:"100%",justifyContent:"center",width:"100%",children:(0,p.jsxs)(l.kC,{alignContent:"start",direction:"column",gap:{row:0,column:8},justifyContent:"start",children:[(0,p.jsx)(l.kC,{alignItems:"center",justifyContent:"start",children:(0,p.jsx)(s.default,{buttonText:y._('Send', 'end.video.send.icon.label', 'Clickable label when pressed opens share sheet after video is finished'),clientTrackingParams:e,imageSrc:n,pinDescription:m,pinId:g,shownWithinMasonry:!0})}),(0,p.jsxs)(l.kC,{alignItems:"center",children:[(0,p.jsx)(r.Z,{accessibilityLabel:y._('Replay button', 'storyPin.closeup.endCard.replay', 'Button label to navigate to previous page'),handleClick:f,icon:"refresh",iconColor:"white",testId:"closeup-replay-button"}),(0,p.jsx)(l.xu,{children:(0,p.jsx)(l.iP,{onTap:f,rounding:2,children:(0,p.jsx)(l.X6,{color:"light",overflow:"normal",size:"400",children:y._('Replay', 'storyPin.closeup.endCard.replay', 'Button label to navigate to previous page')})})})]})]})})})}},974446:function(e,a,n){n.d(a,{F:()=>M,Z:()=>O});var i,t,l,r,s=n(281098),o=n(667294);n(167912);var d=n(20256),u=n(592821),c=n(816533),p=n(581722),m=n(821342),g=n(848171),h=n(28427),y=n(801082),_=n(19585),f=n(351607),x=n(302148),k=n(675973),P=n(886981),S=n(63773),v=n(162903),b=n(647709),C=n(664897),I=n(85363),w=n(766033),T=n(611499),A=n(601686),F=n(607233),E=n(169053),j=n(78762),L=n(785893);let R=(0,j.Z)(()=>Promise.resolve().then(n.bind(n,431870)),void 0,e=>431870,"app-packages-StructuredFeed-ModuleReps-CarouselModule-CarouselModule",e=>[]),K=(void 0!==i||(i=n(263032)).hash&&"9568236b6fff857d42b318f21d466fe8"!==i.hash&&console.error("The definition of 'ShoppingModule_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),Z=(void 0!==t||(t=n(220149)).hash&&"f6b0848713674452581430e71783a253"!==t.hash&&console.error("The definition of 'ShoppingModule_v3GetStelaShoppingCarousel' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),t),D=(void 0!==l||(l=n(650719)).hash&&"b36a131b6573d138a64ac3e9a26683c4"!==l.hash&&console.error("The definition of 'ShoppingModuleQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l);function M(e){let a=(0,m.Z)(),n=a&&a.isAuth,i=(0,b.HG)(),t=(0,w.Z)(),l=function({pinId:e}){return(0,p.v9)(({pinbuilder:a})=>{if(!e)return null;let{pinItems:n,pinTags:i}=a,t=n?.[e];if(!t)return null;let l=t.pinTagIds??[];if(0===l.length)return null;let r=l.map(e=>i?.[e]).filter(Boolean);return r.length>0?r:null})}({pinId:e}),r=(0,E.S6)(),s=(0,P.Z)(t?null:{name:"ApiResource",noCache:!!l,options:{url:n?`/v3/visual_search/stela/pins/${e}/module/`:`/v3/seo/stela/pins/${e}/module/`,data:{fields:(0,F.Z)()}}}),o=(0,y.Z)({strategy:t?"GraphQL":"Legacy",query:D,variables:{pinId:e,isDesktop:i,isAuth:n},options:{fetchPolicy:l?"store-and-network":"network-only"},useGetLegacyData:({pinId:e})=>{let a=s.data?.map(e=>({...e,objects:e?.objects?.map(e=>{if(e?.type==="pin"&&e?.id){let a=r(e?.id||"");if(a)return a}return e})}));return s?{...s,data:a}:null}}),d=o?.v3GetStelaShoppingCarouselQuery?.__typename==="V3GetStelaShoppingCarousel"?o.v3GetStelaShoppingCarouselQuery:null,u=(0,h.Z)(Z,d),c=u?u.data:null;if(t){let e=void 0!==o;return{data:c,isLoading:!e,isLoaded:e}}return{data:c,isLoading:s.isFetching,isLoaded:s.isLoaded}}let B=({children:e,id:a,storyRef:i,viewParameter:t,pinId:l,hasAutoTags:s})=>{let o=(void 0!==r||(r=n(336209)).hash&&"967fc795bbfb9844686a21d73abf35e0"!==r.hash&&console.error("The definition of 'ShoppingModule_story' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r),{contentIds:u,displayOptions:c,slot:p,storyId:m,storyType:g,trackingParams:y}=(0,h.Z)(o,i),_=c?.contentDisplay?.componentType,x=(0,f.ZP)({clientTrackingParams:y,componentType:_,contextLogData:{story_id:m,story_type:g,content_ids:u,has_auto_tags:s,root_pin_id:l},impressionType:"Story",loggingId:m,slotIndex:p||0,viewParameter:t,viewType:3});return(0,L.jsx)(d.xu,{ref:x,children:e},a)};function O({moduleWidth:e,pinKey:a,trafficSource:n,unauthCloseupRedesignEnabled:i,viewParameter:t}){(0,o.useEffect)(()=>{(0,s.Z)("ShoppingModule","/app/common/react/components/closeup/VisualSearch/ShoppingModule.tsx")},[]);let l=(0,_.ZP)(),r=`carousel-${(0,o.useId)()}`,{checkExperiment:p}=(0,k.Z)(),{isAuth:y}=(0,m.Z)(),f=(0,w.Z)(),P=y&&p("web_stl_css_carousel").anyEnabled,{closeupWithinMasonryEnabled:b,peekCloseupEnabled:F,viewportSize:E}=(0,A.x4)(),j=b||i,Z=(0,h.Z)(K,a),D=(0,o.useRef)(null),[O,N]=(0,o.useState)(void 0),{data:z,isLoading:V,isLoaded:U}=M(Z.entityId),W=z?.[0],G=(0,C.Z)()?o.useEffect:o.useLayoutEffect,H=c.Z;G(()=>{if(!P&&D.current&&j){let e=Math.floor((D.current.offsetWidth+8)/H);N(a=>a===e?a:e)}},[U,j,H,P]);let $=(0,o.useMemo)(()=>f?null:function(e){let a=e?(0,g.G5)(e):null;return a&&"LegacyData"===a.kind?a.singularLegacyData:null}(W),[f,W]),Y=(0,I.Z)({cropSource:5,isProductPage:!0,pinId:Z.entityId,requestParams:W?.action?.requestParams??"",trafficSource:n}),X=F&&"lg"===E,q=(0,o.useMemo)(()=>({buttonSizeOverride:"lg",carouselContainerMarginBottom:j?0:void 0,flexDirection:X?"column":"row",gutterWidth:u.Gd,justifyContent:"start",navigationFabSize:32,showPagination:j}),[j,X]),J=(0,o.useMemo)(()=>j?{type:"inline"}:{type:"classic"},[j]),Q=(0,o.useMemo)(()=>{if(!j&&!(F&&"lg"===E))return{};let e={paddingLeft:P?void 0:`${u.Gd}px`};return j?{...e,border:P?void 0:u.tc}:e},[j,F,E,P]);if(V)return(0,L.jsx)(d.xu,{height:1,width:e});if(U&&(!z||0===z.length))return null;let ee="number"==typeof W?.displayOptions?.contentDisplay?.componentType?W.displayOptions?.contentDisplay?.componentType:void 0,ea=(Z?.collectionPin?.itemData||[]).some(e=>e?.source===S.x0),en=e=>{let a=Z?.collectionPin?.itemData?.find(a=>e.entityId===a.pinId),n=a?.source;return{has_auto_tags:n===S.x0,root_pin_id:Z?.entityId,...n?{source:n}:{}}};return(0,L.jsx)(o.Fragment,{children:(0,L.jsx)(d.kC,{alignItems:"center",dataTestId:"shopping-module",direction:"column",justifyContent:"center",width:e,children:(0,L.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:Q},maxWidth:i?e:void 0,rounding:j&&!P?4:0,width:e,children:z?.filter(Boolean).map(e=>{if(null==e)return null;let{action:a,containerType:n,storyId:i}=e;if(139!==n)return null;{let n=e.title?.format||"",s=y&&a?.url?a.url:Y;return(0,L.jsx)(B,{hasAutoTags:ea,id:i,pinId:Z.entityId,storyRef:e,viewParameter:t,children:(0,L.jsxs)(d.xu,{ref:D,children:[(0,L.jsx)(d.xu,{display:"none",id:r,children:(0,x.Wc)(l._('{{heading}} carousel', 'closeup.shoppingModule.carousel.ariaLabel', 'Accessibility label for the shopping carousel, where heading is the title of the carousel. heading: title of the carousel'),{heading:n})}),P?(0,L.jsx)(v.Z,{accessibilityLabelledBy:r,component:ee,getProductTagAuxData:en,heading:n,itemWidth:c.Z,itemWidthHeightRatio:1,parentPinKey:Z,saveButtonOptions:J,showBorder:j,showMarkers:j,showNavigationButtons:!0,storyKey:e,surface:"ShoppingGridSmallCarousel",view:3,viewParameter:t}):(0,L.jsxs)(o.Fragment,{children:[(0,L.jsx)(d.xu,{marginBottom:4,marginStart:2,marginTop:4,children:(0,L.jsx)(d.X6,{accessibilityLevel:2,align:"start",id:"shop-the-look-heading",size:"400",children:n})}),(0,L.jsx)(R,{accessibilityLabelledBy:r,addContentRight:(0,L.jsx)(d.xu,{width:T.g9}),allowHover:!0,contentVisibleItemCountOverride:O,dangerouslySetActionUrl:s,disableHeader:!0,itemWidth:j?H:void 0,itemWidthHeightRatio:1,parentPinKey:Z,productTagParentPinId:Z.entityId,saveButtonOptions:J,story:$,storyKey:e,styleOverrides:q,surface:"ShoppingGridSmallCarousel",view:3,viewParameter:t})]})]})},i)}})})})})}},115939:function(e,a,n){n.d(a,{Z:()=>r});var i=n(378888);let t=/^\/pin\/(.*[^\/])\/$/,l={"/":"feed_home","/homefeed":"feed_home","/pin/:id":"pin","/pin/:id/comments":"pin","/pin/:id/activity/tried":"pin","/pin/:id/activity/comments":"pin","/pin/:id/visual-search":"flashlight","/discover/article/:id":"explore_article","/discover/article/:title/:id":"explore_article","/topics/:interest":"feed_interest","/categories/:interest":"feed_category","/news_hub/:id":"notifications","/explore/:interest":"seo_auth","/interest/:id":"seo_auth","/search/:scope":"search","/following":"feed_following","/:username/pins":"user_pins","/:username/tried":"user_tries","/:username/:slug":"board","/:username/:slug/edit":"board","/:username/:slug/invite":"board","/:username/:slug/:section_slug":"board","/story_feed":"shop_feed"};function r(e,a){let n=["pin"],r=[],s=1,o="unknown",d="unknown",u=!0;for(let a=e.length-1;a>0;a-=1){let t=function(e,a){if(a<=0)return"unknown";let n=e[a-1],t=n?.match?.path||"",r=["stela","stl"].includes((0,i.mB)(n?.location?.search).surfaceType??"");if(t&&"/pin/:id/visual-search"===t&&r)return"shop_feed";let s=t in l?l[t]:"unknown";return t?s:"feed_home"}(e,a);n.splice(0,0,t),u&&("pin"===(o=t)?s+=1:u=!1)}for(let a=e.length-2;a>=0;a-=1){let n=(e[a]?.location?.pathname||"").match(t);if(n&&2===n.length)r.splice(0,0,n[1].split("/")[0]);else break}return 1===n.length?(d="deep_linking",o="deep_linking"):(d=n[n.length-2],"pin"===o&&(o="deep_linking")),"seo_auth"!==d||a||(d="seo_unauth"),"seo_auth"!==o||a||(o="seo_unauth"),("search"===d||"search"===o)&&e.length>=s+1&&"/search/buyable_pins/"===(e[e.length-s-1]?.location?.pathname||"")&&(o="shop_feed","search"===d&&(d="shop_feed")),{trafficSource:d,topLevelTrafficSource:o,topLevelTrafficSourceDepth:s,contextPinIds:r}}},642411:function(e,a,n){n.d(a,{Z:()=>i});let i=(e,a,n,i)=>({id:e,field_set_key:"auth_web_main_pin",add_fields:n?n.join(","):void 0,client_tracking_params:void 0,noCache:!0,fetch_visual_search_objects:!0,...a?{orbac_subject_id:a}:Object.freeze({}),get_page_metadata:!!i})},102134:function(e,a,n){n.d(a,{Z:()=>r});var i=n(675973),t=n(15667),l=n(647709);let r=()=>{let{isAuthenticated:e}=(0,t.B)(),a=(0,l.HG)(),{checkExperiment:n}=(0,i.Z)();return()=>e&&a&&n("auth_dweb_shuffle_renderer_closeup_v2").anyEnabled}},449930:function(e,a,n){n.d(a,{ZP:()=>g,fz:()=>c,mg:()=>m,o1:()=>u});var i=n(667294),t=n(592821),l=n(934645),r=n(974446),s=n(601686);function o(e){return"object"==typeof e&&null!==e&&"type"in e&&"shopping_module"===e.type}function d(e){return"object"==typeof e&&null!==e&&"type"in e&&"inclusive_filters_module"===e.type}let u=e=>"object"!=typeof e||null===e||!("virtualize"in e)||(e.virtualize??!0),c=(e,a)=>n=>{if(!e&&o(n)||e&&(o(n)||d(n))||a&&(o(n)||d(n)))return{min:2,max:9}},p=({inBlendedUIExp:e,isAuth:a=!0})=>{let n=a?t.ne:t.tm;return e?{...n,columnSpan:{...n.columnSpan,...t.DO}}:n};function m(e,a,n){let l=p({inBlendedUIExp:!1,isAuth:!1}),r=(0,i.useMemo)(()=>({...t.tV}),[]),s=(0,i.useMemo)(()=>({...t.MB}),[]);return{closeupMasonryModules:(0,i.useMemo)(()=>{if(!a)return[];let e=[l];return n&&e.push(s),e.push(r),e},[a,l,n,s,r])}}function g({pinId:e,inclusiveModuleToCache:a,showProductDetailPage:n}){let o=(0,r.F)(e),{closeupWithinMasonryEnabled:d}=(0,s.x4)(),u=(0,l.Z)({showProductDetailPage:n}),[c,m]=(0,i.useState)(a);!c&&a&&m(a);let g=(0,i.useMemo)(()=>p({inBlendedUIExp:u}),[u]),h=(0,i.useMemo)(()=>({...t.tV}),[]),y=(0,i.useMemo)(()=>({...t.MB}),[]),_=o?.data&&o.data.length>0,f=(0,i.useMemo)(()=>{let e=[g];return _&&e.push(h),c&&e.push(y),e},[g,_,c,h,y]);return d?{closeupMasonryModules:f,hasShoppingModule:_,inclusiveFilters:c}:{closeupMasonryModules:[],inclusiveFilters:void 0}}},142689:function(e,a,n){n.d(a,{Z:()=>r});var i=n(139707),t=n(675973),l=n(78187);function r(e){let{checkExperiment:a}=(0,t.Z)(),{sideBySideRedesignFastFollowsEnabled:n}=(0,i.Z)(),r=n&&e===l.ti.SKIN&&a("web_closeup_inclusive_refinement",{dangerouslySkipActivation:!0}).anyEnabled,s=n&&e===l.ti.HAIR&&a("web_closeup_hair_refinement",{dangerouslySkipActivation:!0}).anyEnabled,o=n&&e===l.ti.BODY&&a("web_btr_closeup",{dangerouslySkipActivation:!0}).anyEnabled;return{inInclusiveEfficientRefinements:!!(r||s||o)}}},149739:function(e,a,n){n.d(a,{n:()=>i});let i="300"},569437:function(e,a,n){n.d(a,{Z:()=>c}),n(167912);var i,t=n(30216),l=n(980787),r=n(28427),s=n(817309),o=n(453179),d=n(431338);let u=(void 0!==i||(i=n(394292)).hash&&"d38a7b9f18791089cd1df852e3863570"!==i.hash&&console.error("The definition of 'useHandleTitleClick_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),c=function({pinKey:e,pinId:a,viewParameter:n,trafficSource:i}){let{logContextEvent:c}=(0,l.u)(),p=(0,r.Z)(u,e),m=(0,t.Z)({pinKey:p}),g=(0,d.Z)(p);return()=>{let e=g();c({event_type:12,object_id_str:a,view_type:3,component:85,view_parameter:n,clientTrackingParams:m,aux_data:{...e,...(0,s.Z)(p?.linkUtmApplicableAndReplaced)}}),c({event_type:8948,clientTrackingParams:m,view_type:3,view_parameter:n,component:85,object_id_str:a,aux_data:{click_type:"clickthrough",closeup_navigation_type:i&&(0,o.sV)(i)?"deeplink":"click",...e}})}}},713705:function(e,a,n){n.d(a,{i:()=>i,j:()=>t});let i=2,t=236},704300:function(e,a,n){n.r(a),n.d(a,{default:()=>d});var i=n(281098),t=n(667294),l=n(825332),r=n(11919),s=n(378888),o=n(785893);function d({buttonText:e,clientTrackingParams:a,imageSrc:n,pinDescription:d,pinId:u,shownWithinMasonry:c}){(0,t.useEffect)(()=>{(0,i.Z)("IdeaPinSecondarySendButton","/app/common/react/components/social/IdeaPinSecondarySendButton.tsx")},[]);let p=(0,l.TH)(),[m,g]=(0,t.useState)(!!(0,s.mB)(p.search).share);return(0,o.jsx)(r.default,{buttonText:e,controllerOptions:{flyoutDisplayOptions:{showCaret:!0,shownWithinMasonry:c},isFlyoutOpen:m,loggingOptions:{component:228,element:10942,viewParameter:157,viewType:3},onFlyoutDismiss:()=>g(!1),onToggleFlyout:()=>g(!m),sendObject:{type:"pin",description:d,id:u,imageUrl:n,url:`/pin/${u}/`,clientTrackingParams:a}},iconColor:"white"})}},294851:function(e,a,n){n.d(a,{Z:()=>_});var i,t=n(281098),l=n(667294);n(422578);var r=n(890479),s=n(869985),o=n(28427),d=n(776777),u=n(863667),c=n(750092),p=n(104659),m=n(785893);function g(e,a,n){var i;return(a="symbol"==typeof(i=function(e,a){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,a||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(a,"string"))?i:i+"")in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}let h=(void 0!==i||(i=n(3449)).hash&&"60493becbbe037be854a8cd1136fede6"!==i.hash&&console.error("The definition of 'CloseupVideoWithVisibility_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);class y extends l.Component{constructor(...e){super(...e),g(this,"handleVisibilityChanged",e=>{let{pinId:a,isPromoted:n,setCurrentVideo:i,pauseAutoplay:t,videosAutoplaying:l,videoStartTime:r}=this.props,s=(0,c.Z)(a,l);e&&!s?i({pinId:a,isPromoted:!!n,currentTime:r}):!e&&s&&t({pinId:a,isPromoted:!!n,currentTime:this.currentVideoCurrentTime})}),g(this,"handleVideoTimeChange",e=>{let{pinId:a,videosAutoplaying:n}=this.props;(0,c.Z)(a,n)&&(this.currentVideoCurrentTime=e.time)})}componentDidUpdate(e){let{appInFocus:a}=e,{appInFocus:n,pauseAutoplay:i,pinId:t,isPromoted:l,setCurrentVideo:r,videosAutoplaying:s}=this.props,o=(0,c.Z)(t,s),d=(0,u.Z)(t,s);this.currentVideoCurrentTime=d??this.currentVideoCurrentTime,n!==a&&!n&&o?(this.pausedDueToBrowserOutOfFocus=!0,i({pinId:t,isPromoted:!!l,currentTime:this.currentVideoCurrentTime})):this.pausedDueToBrowserOutOfFocus&&n&&(this.pausedDueToBrowserOutOfFocus=!1,r({pinId:t,isPromoted:!!l,currentTime:this.currentVideoCurrentTime}))}componentWillUnmount(){let{pinId:e,isPromoted:a,pauseAutoplay:n}=this.props;n({pinId:e,isPromoted:!!a,currentTime:this.currentVideoCurrentTime})}render(){let{pauseAutoplay:e,pin:a,setCurrentVideo:n,videoStartTime:i,videosAutoplaying:t,...l}=this.props;return(0,m.jsx)(r.Z,{id:"VisibilityChangedWrapper",children:(0,m.jsx)(d.Z,{onVisibilityChanged:this.handleVisibilityChanged,trackFullVisible:!1,...l,children:(0,m.jsx)(r.Z,{id:"CloseupVideo",children:(0,m.jsx)(s.Z,{...l,onTimeChange:this.handleVideoTimeChange,pinKey:a})})})})}componentDidMount(){(0,t.Z)("CloseupVideoWithVisibility","/app/common/react/components/video/closeup/CloseupVideoWithVisibility.tsx")}}function _(e){(0,l.useEffect)(()=>{(0,t.Z)("CloseupVideoWithVisibility","/app/common/react/components/video/closeup/CloseupVideoWithVisibility.tsx")},[]);let{pinId:a,pinKey:n,isPromoted:i}=e,s=(0,o.Z)(h,n),{appUI:{appInFocus:d,videosAutoplaying:u},pauseAutoplay:c,setCurrentVideo:g}=(0,p.G)(),{organicVideosAutoplaying:_,promotedVideosAutoplaying:f}=u,x=i?f[a]:_[a];return(0,m.jsx)(r.Z,{id:"CloseupVideoWithVisibilityInner",children:(0,m.jsx)(y,{...e,appInFocus:d,pauseAutoplay:c,pin:s,setCurrentVideo:g,videosAutoplaying:u,videoStartTime:x?x.currentTime:null})})}},955421:function(e,a,n){n.d(a,{Z:()=>t});let i=new Set([90,88,89,91,101,92,131]);function t(e){return i.has(e)}},730647:function(e,a,n){n.d(a,{Z:()=>r});var i=n(598579);let t=new Set([92]),l=new Set([154]);function r(e){let a=[];return e.forEach(e=>{if("story"===e.type?t.has(e.container_type)||l.has(e.container_type)||i.v8.has(e.story_type)||i.AW.has(e.story_type):1){let n=a[a.length-1];Array.isArray(n)?n.push(e):a.push([e])}else a.push(e)}),a}},681970:function(e,a,n){n.d(a,{Z:()=>p});var i=n(781011),t=n(378888),l=n(669442),r=n(817998);let s={campaignFilter:"all",adGroupFilter:"all",adFilter:"all"},o=e=>{let a={};return e&&(a={objectiveTypes:[e]}),a},d=e=>{let{campaignId:a,objectiveType:n,partialCreate:i,catalogsFeedId:t,managedClientId:r,catalogId:s,productGroupId:o,resumeLastDraft:d}=e,u={};return a&&i&&(u.campaignId=a),n&&(u.objectiveType=n),"CATALOG_SALES"===n&&t&&(u.catalogsFeedId=t),s&&(u.catalogId=s),o&&(u.productGroupId=o),r&&(u.managedClientId=r),d&&(u.resumeLastDraft=!0),(0,l.Z)("/ads/create/",u)},u=e=>{let{campaignToolPreference:a,...n}=e;return(0,l.Z)("/automated/ads/create/",n)},c={overview:()=>"/",reporting:e=>{let a=e.objectiveType||null;delete e.objectiveType;let n={...e,...o(a)};return(0,l.Z)("/reporting/campaigns/",n)},reportingAdGroup:e=>{let{campaignId:a,objectiveType:n,showAllEntities:i,adGroupId:t,message:r}=e,d={campaignIds:[a],...i?s:{},...o(n),...t?{adGroupIds:[t]}:{},message:r};return(0,l.Z)("/reporting/adgroups/",d)},campaign:e=>{let{id:a,objectiveType:n}=e;return(0,l.Z)("/reporting/adgroups/",{campaignIds:[a],...o(n)})},editCampaign:e=>e.isAutomatedCampaign?c.editAutomated({campaignId:e.id,view:"campaign"}):c.editV2({campaignId:e.id,view:"campaign"}),adgroup:e=>{let{id:a,objectiveType:n,showAllEntities:i,pinPromotionId:t,campaignId:r}=e;return"TEMPORARY_SHOPPING"===n||"CATALOG_SALES"===n?(0,l.Z)("/reporting/productgroups/",{adGroupIds:[a],...o(n)}):(0,l.Z)("/reporting/ads/",{adGroupIds:[a],...o(n),...i?s:{},...t?{pinPromotionIds:[t]}:{},...r?{campaignIds:[r]}:{}})},editAdGroup:e=>e.isAutomatedCampaign?c.editAutomated({campaignId:e.id,view:"campaign"}):c.editV2({adGroupId:e.id,view:"adgroup"}),pinPromotion:e=>{let{id:a,adFilter:n}=e;return(0,l.Z)("/reporting/ads/",{pinPromotionIds:[a],...n?{adFilter:n}:{}})},editPinPromotion:e=>{let a=e.isCreatingPins?{isCreatingPins:!0}:{},n=e.pinPromotionId?{pinPromotionId:e.pinPromotionId}:{};return c.editV2({adGroupId:e.adGroupId,view:"ad",...n,...a})},productGroup:e=>{let{id:a,name:n}=e;return(0,l.Z)("/reporting/productgroups/",{productGroupIds:[a],name:n})},campaigns:()=>"/reporting/campaigns/",adgroups:()=>"/reporting/adgroups/",manage_wtb_products:()=>"/manage_products",ads:()=>"/reporting/ads/",bulkEdit:e=>{let{entity_level:a,ids:n}=e;return(0,l.Z)("/ads/bulk_edit/",{entity_level:a,ids:n})},productgroups:()=>"/reporting/productgroups/",productitems:()=>"/reporting/productitems/",campaignNegativeKeywords:()=>"/reporting/campaignNegativeKeywords/",campaignSearchQueries:()=>"/reporting/campaignSearchQueries/",adGroupNegativeKeywords:()=>"/reporting/adGroupNegativeKeywords/",adGroupPositiveKeywords:()=>"/reporting/adGroupPositiveKeywords/",adGroupSearchQueries:()=>"/reporting/adGroupSearchQueries/",ad:e=>c.pinPromotion(e),createPreferred:e=>{switch(e.campaignToolPreference){case r.k.ADS_MANAGER:return d(e);case r.k.AUTOMATED_CAMPAIGN:return u(e);default:return(0,l.Z)("/ads/campaign_mode/",e.managedClientId?{managedClientId:e.managedClientId}:void 0)}},campaignMode:e=>(0,l.Z)("/ads/campaign_mode/",e.managedClientId?{managedClientId:e.managedClientId}:void 0),create:d,createAutomated:u,editV2:e=>(0,l.Z)("/ads/edit/",e),editAutomated:e=>(0,l.Z)("/automated/ads/edit/",e),editDraftCampaign:e=>(0,l.Z)("/ads/edit_draft/",{campaignId:e.campaignId,view:"campaign"}),duplicateCampaign:e=>(0,l.Z)("/ads/duplicate/",e),audiences:e=>(0,l.Z)("/audiences/",e.managedClientId?{managedClientId:e.managedClientId}:void 0),audience_debug:()=>"/audience_debug/",prepaid_spend_campaign_breakdown:()=>"/billing/prepaid_spend_campaign_breakdown/",billing:e=>{let{page:a,subSection:n,nextStepUrl:t}=e,r={};switch(n&&(r.section=n),t&&(r.next_step_link_url=t),a){case i.kM.BILLING_HISTORY:return"/billing/history/";case i.kM.ORDER_LINES:return"/billing/order_lines/";case i.kM.PROMOTIONS:return"/billing/promotions/";case i.kM.DOCUMENTS:return"/billing/documents/";case i.kM.TAX_DOCUMENTS:return"/billing/tax_documents/";case i.kM.PREPAID_CAMPAIGN_SPEND:return"/billing/prepaid_campaign_spend_summary/";case i.kM.BILLING_FORMS:return(0,l.Z)("/billing/payment_settings/",r);case i.kM.SUMMARY:default:return(0,l.Z)("/billing/",r)}},bulk:e=>{let{subSection:a,page:n,jobStarted:t}=e||{};switch(n){case i.fm.UPLOAD_TEMPLATE:return(0,l.Z)("/bulk_editor/upload_template/",{section:a});case i.fm.DOWNLOAD_TEMPLATE:return(0,l.Z)("/bulk_editor/download_template/",{section:a});case i.fm.HISTORY:return(0,l.Z)("/bulk_editor/history/",{section:a,job_started:t});case i.fm.BULK_ID_LIBRARY:return(0,l.Z)("/bulk_editor/bulk_id_library/",{section:a});case i.fm.RESOURCES:return(0,l.Z)("/bulk_editor/resources/",{section:a});default:return"/bulk_editor/"}},experiments:e=>{let{page:a,id:n,campaigns:t}=e;switch(a){case i.S9.CREATE:return"/experiments/create/";case i.S9.MANAGE:return"/experiments/manage/";case i.S9.VIEW_REPORT:return`/experiments/manage/${n}`;case i.S9.AB_TEST_CREATE:return(0,l.Z)("/experiments/ab-test/create",t?{campaigns:t}:void 0);default:return"/experiments/"}},history:e=>(0,l.Z)("/history/",e),shopping:e=>c.reporting(o("TEMPORARY_SHOPPING")),pinterest_tag:e=>{let{page:a,subSection:n,platform:t,source:r,origin:s}=e;switch(a){case i.qp.PINTEREST_EVENTS_OVERVIEW_BEFORE_SETUP:return"/conversions/events-overview/";case i.qp.PINTEREST_EVENT_HISTORY:if(r)return(0,l.Z)("/conversions/event-history/",{source:r});return"/conversions/event-history/";case i.qp.CONVERSION_HEALTH:return"/conversions/health/";case i.qp.PINTEREST_TEST_EVENTS:return(0,l.Z)("/conversions/test-events/",{subPage:n,platform:t});case i.qp.PINTEREST_TAG:return(0,l.Z)("/conversions/tag/",{subPage:n,platform:t});case i.qp.PINTEREST_TAG_MANUAL_SETUP_FLOW:let o=(0,l.Z)("/conversions/tag_manual_setup/",{origin:s});if(t)return(0,l.Z)(o,{platform:t,source:r});return o;case i.qp.CONVERSION_UPLOAD:return(0,l.Z)("/conversions/upload/",{subPage:n});case i.qp.UPLOAD_HISTORY:return(0,l.Z)("/conversions/history/",{subPage:n});case i.qp.PCA_UPLOAD_HISTORY:return(0,l.Z)("/conversions/pca_history/",{subPage:n});case i.qp.PCA_UPLOAD:return(0,l.Z)("/conversions/pca_upload/",{subPage:n});case i.qp.CONVERSIONS_API_MANUAL_SETUP_FLOW:if(r||s)return(0,l.Z)("/conversions/api_manual_setup/",{source:r,origin:s});return"/conversions/api_manual_setup/";case i.qp.CONVERSIONS_API_PARTNER_SETUP_FLOW:if(r||s)return(0,l.Z)("/conversions/api_partner_setup/",{source:r,origin:s});return"/conversions/api_partner_setup/";case i.qp.CONVERSIONS_API_ACCESS_TOKEN:return"/conversions/access_token/";case i.qp.PINTEREST_SETUP_API:return"/conversions/setup-api/";case i.qp.CONVERSIONS_API_DEDUPLICATION:return"/conversions/deduplication/";case i.qp.PAYLOAD_HELPER:return"/conversions/payload-helper/";case i.qp.CONVERSIONS:return"/conversions/";case i.qp.NOCODE_CONVERSIONS_API_SETUP_FLOW:return"/conversions/pinterest_capi_connect/";case i.qp.PINTEREST_EVENT_HISTORY_CAPI_TAB:return"/conversions/event-history/#conversionsAPI";case i.qp.PINTEREST_EVENTS_OVERVIEW_CAPI_TAB:return"/conversions/events-overview/#conversionsAPI";default:return"/conversions/tag/"}},"pin-builder":e=>(0,l.Z)("/pin-builder/",e),purchases:()=>c.reporting(o("PURCHASE")),awareness_reserved:()=>c.reporting(o("IMPRESSION")),engagement:()=>c.reporting(o("BILLABLE_ENGAGEMENT")),videos:()=>c.reporting(o("TEMPORARY_BIDDED_CPM_VIDEO")),videos_reserved:()=>c.reporting(o("TEMPORARY_IMPRESSION_VIDEO")),videos_cpv:()=>c.reporting(o("TEMPORARY_MRC_CPV_VIDEO")),conversions:()=>c.reporting(o("WEB_CONVERSION")),accounts_manager:()=>"/accounts_manager/",reporting_preferences:e=>(0,l.Z)("/reporting/preferences/",e),report_builder:e=>(0,l.Z)("/report-center/builder/",e),report_history:e=>(0,l.Z)("/report-center/history/",e),report_unsubscribe:e=>(0,l.Z)("/report-center/unsubscribe/",e),report_download:e=>(0,l.Z)("/report-center/download/",e),awareness:()=>c.reporting(o("AWARENESS")),traffic:()=>c.reporting(o("TRAFFIC")),app_installs:()=>c.reporting(o("APP_INSTALL")),catalog_sales:()=>c.reporting(o("CATALOG_SALES")),web_conversion:()=>c.reporting(o("WEB_CONVERSION")),video_view:()=>c.reporting(o("VIDEO_VIEW")),recommendations:e=>(0,l.Z)("/recommendations/",e),catalog_view:()=>"/product-catalogs/data-source",campaign_insights:e=>{let a=`/campaign-insights/${e.campaignId}/`;if(e.queryParams){let{start_date:n,end_date:i,comp_start_date:l,comp_end_date:r}=e.queryParams;a+=`?${(0,t.XP)({start_date:n,end_date:i,comp_start_date:l,comp_end_date:r})}`}return a},product_group_reporting:e=>`/campaign-insights/${e.campaignId}/product-group/${e.productGroupId}`,media_planner:e=>(0,l.Z)("/media_planner/",e),ad_spend_optimizer:e=>(0,l.Z)("/msot-optimizer/",e)},p=c},213082:function(e,a,n){n.d(a,{Z:()=>r});var i=n(681970),t=n(694955),l=n(869273);function r(e,a,n){if(!i.Z[e])throw Error(`unknown url key: ${e}`);n||(n={});let r=i.Z[e](n),s=n?.advertiserId||a||null,o=!!n.absolutify;return"string"==typeof s&&(r="/advertiser/"+s+r),o&&(r=(0,l.Z)(r,void 0,t.KUo)),r}},518285:function(e,a,n){n.d(a,{Z:()=>l});var i=n(213082),t=n(15667);function l(){let{advertiser:e}=(0,t.B)();return(a,n)=>(0,i.Z)(a,e?.id,n)}},86295:function(e,a,n){n.d(a,{EF:()=>p,GM:()=>o,Hg:()=>T,Hl:()=>x,IR:()=>_,Je:()=>u,K3:()=>j,O1:()=>Z,Q6:()=>g,QE:()=>i,V3:()=>w,Z4:()=>y,c7:()=>f,cU:()=>r,cZ:()=>C,cg:()=>t,dZ:()=>l,gO:()=>k,hd:()=>v,j$:()=>S,j9:()=>L,kX:()=>P,k_:()=>b,oQ:()=>O,p:()=>B,pg:()=>D,pk:()=>I,pt:()=>E,qq:()=>K,sy:()=>c,tP:()=>A,uE:()=>h,vk:()=>R,w2:()=>d,ww:()=>F,xX:()=>s,xw:()=>M,yR:()=>m});let i=3e3,t=280,l=500,r=1e4,s=250,o=250,d=251,u=50,c=50,p=20,m=20,g={DASHBOARD:"DASHBOARD",PEOPLE:"PEOPLE",PARTNERS:"PARTNERS",AD_ACCOUNTS:"AD_ACCOUNTS",AD_ACCOUNTS_PENDING_TAB:"AD_ACCOUNTS_PENDING_TAB",HISTORY:"HISTORY",PEOPLE_DETAIL:"PEOPLE_DETAIL",PARTNERS_DETAIL:"PARTNERS_DETAIL",SHARED_PARTNERS_DETAIL:"SHARED_PARTNERS_DETAIL",AD_ACCOUNTS_DETAIL:"AD_ACCOUNTS_DETAIL",PENDING_AD_ACCOUNTS_DETAIL:"PENDING_AD_ACCOUNTS_DETAIL",PARTNERS_INVITES:"PARTNERS_INVITES",CHOOSER:"CHOOSER",PROFILES:"PROFILES",PROFILES_DETAIL:"PROFILES_DETAIL",PARTNERS_PENDING_TAB:"PARTNERS_PENDING_TAB",PEOPLE_PENDING_TAB:"PEOPLE_PENDING_TAB",USERS:"USERS",ACOUNTS:"ACCOUNTS",BUSINESS_SECURITY:"BUSINESS_SECURITY",ASSETS:"ASSETS",ASSET_GROUPS:"ASSET_GROUPS",INVOICE_MANAGEMENT:"INVOICE_MANAGEMENT",BUSINESS_HIERARCHY:"BUSINESS_HIERARCHY",BUSINESS_HIERARCHY_BUSINESS_SECURITY:"BUSINESS_HIERARCHY_BUSINESS_SECURITY",MANAGERS:"MANAGERS",AUDIENCES:"AUDIENCES",SHARED_TAGS:"SHARED_TAGS",CATALOGS:"CATALOGS",CATALOGS_DETAIL:"CATALOGS_DETAIL",BRAND_SAFETY:"BRAND_SAFETY",AD_ACCOUNTS_CEE_MIGRATION:"AD_ACCOUNTS_CEE_MIGRATION",BUSINESS_SETTINGS:"BUSINESS_SETTINGS",SYSTEM_USERS:"SYSTEM_USERS",APPS:"APPS",CONVERSION_DATA:"CONVERSION_DATA",MEDIA_NETWORK_DASHBOARD:"MEDIA_NETWORK_DASHBOARD"},h={PARTNER:"PARTNER",PARTNER_ADMIN:"PARTNER_ADMIN"},y={ADVERTISER_OWNED_AD_ACCOUNT:"ADVERTISER_OWNED_AD_ACCOUNT",AGENCY_OWNED_AD_ACCOUNT:"AGENCY_OWNED_AD_ACCOUNT"},_={ASCENDING:"ASCENDING",DESCENDING:"DESCENDING"},f={AD_ACCOUNT:"AD_ACCOUNT",PERSON:"PERSON",PARTNER:"PARTNER",SYSTEM_USER:"SYSTEM_USER",CATALOG:"CATALOG"},x={PERSON:"PERSON",PARTNER:"PARTNER",SYSTEM_USER:"SYSTEM_USER",PROFILE:"PROFILE"},k={ADMIN:"ADMIN",ANALYST:"ANALYST",FINANCE_MANAGER:"FINANCE_MANAGER",AUDIENCE_MANAGER:"AUDIENCE_MANAGER",CAMPAIGN_MANAGER:"CAMPAIGN_MANAGER",CATALOGS_MANAGER:"CATALOGS_MANAGER",FINANCE_EDIT:"FINANCE_EDIT",FINANCE_VIEW:"FINANCE_VIEW"},P={CATALOGS_MANAGER:"CATALOGS_MANAGER",CATALOGS_VIEWER:"CATALOGS_VIEWER"},S=["ADMIN","ANALYST","FINANCE_MANAGER","AUDIENCE_MANAGER","CAMPAIGN_MANAGER","CATALOGS_MANAGER"],v=["ADMIN","ANALYST","AUDIENCE_MANAGER","CAMPAIGN_MANAGER","CATALOGS_MANAGER","FINANCE_EDIT","FINANCE_VIEW"],b=["ADMIN","ANALYST","AUDIENCE_MANAGER","CAMPAIGN_MANAGER","FINANCE_EDIT","FINANCE_VIEW"],C=["ADMIN","ANALYST","FINANCE_MANAGER","AUDIENCE_MANAGER","CAMPAIGN_MANAGER"],I=["CATALOGS_MANAGER","CATALOGS_VIEWER"],w={EMPLOYEE:"EMPLOYEE",BIZ_ADMIN:"BIZ_ADMIN",OWNER:"OWNER"},T=["PROFILE_PUBLISHER"],A={AD_ACCOUNT:0,PROFILE:2,ASSET_GROUP:3,CATALOG:4},F={0:"AD_ACCOUNT",2:"PROFILE",3:"ASSET_GROUP",4:"CATALOG"},E={ACTIVE:0,PENDING:1},j={ACTIVE:"active",PENDING:"pending"},L="filter_type",R={page:1,totalCount:0,limit:10,sortDirection:"ASCENDING",sortBy:void 0,searchBy:void 0,searchTerm:""},K={WARNING:"WARNING",DEFAULT:"DEFAULT"},Z={BUSINESS_INVITE_INVALID:2932,BUSINESS_ACCESS_PERSONAL_ACCOUNT:2936,INVALID_USERNAME:90,ACCESS_DENIED:280,BUSINESS_RELATIONSHIP_ALREADY_EXISTS:2751,ODO_BUSINESS_RELATIONSHIP_ALREADY_EXISTS:53,BUSINESS_RELATIONSHIP_COUNT_EXCEEDED:2769,BUSINESS_NUMBER_MEMBERS_IN_POLICY_EXCEEDS:2938,ODO_BUSINESS_NUMBER_MEMBERS_IN_POLICY_EXCEEDS:66,ODO_BIZ_INVITE_EXISTS:71,INVALID_ODO_REQUEST:2755,BUSINESS_INVITE_STACKED_ERROR:2773,ACL_POLICY_NOT_FOUND:1110,BUSINESS_INVITE_NOT_EXIST:2770,BUSINESS_RELATIONSHIP_PREMATURE_MIGRATION_INVITE:4300,SANCTIONED_COUNTRY_FOR_BUSINESS:2762},D={ALL:"ALL",OWNED:"OWNED",SHARED:"SHARED"},M=new Date("2024-10-31T12:00"),B="Httpool by Aleph",O="pinterest-leads@alephholding.com"},673616:function(e,a,n){n.d(a,{Z:()=>i});function i({isHiddenPin:e,isUnsafePin:a}){return!e&&!a}},628708:function(e,a,n){n.d(a,{Z:()=>p});var i=n(667294),t=n(980787),l=n(821342),r=n(510928),s=n(776777),o=n(785893);function d(e,a,n){var i;return(a="symbol"==typeof(i=function(e,a){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,a||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(a,"string"))?i:i+"")in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}let u=(0,r.Z)()&&(0,r.Z)().debug_impression_log,c={Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},Story:{impressionType:"storyImpression",idType:"idStr",eventType:170},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061}};function p(e){class a extends i.Component{constructor(...e){super(...e),d(this,"currentNs",()=>1e6*Date.now()),d(this,"startTime",0),d(this,"debugPinImpressions",u&&"Pin"===this.props.impressionType&&this.props.viewer.isAuth&&this.props.viewer.isEmployee),d(this,"handleVisibilityChanged",e=>{let{componentType:a,contextLogData:n,impressionAuxFields:i,impressionType:t,loggingId:l,slotIndex:r,viewParameter:s,viewType:o,viewData:d,logContextEvent:u}=this.props;if(e)this.startTime=this.currentNs(),this.debugPinImpressions&&console.log(r+" started timer");else{let e=c[t],p=e.idType,m=this.currentNs(),g={endTime:m,[p]:l,slotIndex:r,time:this.startTime,renderDuration:m-this.startTime,...i};u({event_type:e.eventType,component:a,event_data:{[e.impressionType]:[g]},view_type:o,view_parameter:s,view_data:d,aux_data:{...n}}),this.debugPinImpressions&&console.log(r+" logged for "+(m-this.startTime)/1e9+"s")}})}render(){return(0,o.jsx)(s.Z,{onVisibilityChanged:this.handleVisibilityChanged,...this.props,children:(0,o.jsx)(e,{...this.props})})}}return function(e){let{logContextEvent:n}=(0,t.u)(),i=(0,l.Z)();return(0,o.jsx)(a,{...e,logContextEvent:n,viewer:i})}}},127753:function(e,a,n){n.d(a,{HM:()=>t,ZP:()=>r,oV:()=>l});var i=n(78187);let t=e=>[i.Mq.SKIN,i.Mq.HAIR,i.Mq.BODY].includes(e),l=e=>{switch(e){case i.Mq.SKIN:return i.ti.SKIN;case i.Mq.HAIR:return i.ti.HAIR;case i.Mq.BODY:return i.ti.BODY;default:return""}};function r(e,a){return e===i.ti.SKIN?a.skin_tone_filter_list.options:a.hair_pattern_filter_list}},503863:function(e,a,n){n.d(a,{T:()=>i,Z:()=>l});let{Provider:i,get:t}=(0,n(729434).Z)("NotificationContext"),l=t},753261:function(e,a,n){n.d(a,{G7:()=>r,Nl:()=>o,WE:()=>l,l6:()=>s});var i=n(654937),t=n(473728);function l(e,a,n,i,t,l){return e.isAuth&&!!a&&(n||i)&&!!t?.isLoaded&&!l}function r(e,a){return(0,t.Z)(a.ngettext('Last {{ count }} Day', 'Last {{ count }} Days', e, 'Previous {{ count }} days from current date', 'Previous {{ count }} days from current date'),{count:e})}function s(e,a){return(0,t.Z)(a.ngettext('Last {{ count }} Hour', 'Last {{ count }} Hours', e, 'analytics.utils', 'Previous {{ count }} hours from current time'),{count:e})}function o({i18n:e,isRealtime:a,humanizedTimeSinceLastUpdate:n,displayLifetime:l,numDays:r,selectedDateRange:s,locale:o}){let d=[];if(r){let a=l?(0,t.Z)(e.ngettext('Percent changes are compared to {{n}} day before {{startDate}} \u2013 {{endDate}}.', 'Percent changes are compared to {{n}} days before {{startDate}} \u2013 {{endDate}}.', r, 'pinstats.toplineMetrics.description', 'Label describing how deltas are calculated and when performance over time metrics are updated'),{n:r,startDate:(0,i.ZP)(o,s.startDate,i.kH.NUMERIC),endDate:(0,i.ZP)(o,s.endDate,i.kH.NUMERIC)}):(0,t.Z)(e.ngettext('Percent changes are compared to {{n}} day before the selected date range.', 'Percent changes are compared to {{n}} days before the selected date range.', r, 'pinstats.toplineMetrics.description', 'Label describing how deltas are calculated and when performance over time metrics are updated'),{n:r});d.push(a)}return a?d.push(e._('Metrics are updated in real-time.', 'pinstats.PinnerToplineMetrics.description', 'Label describing when lifetime of pin metrics are updated')):n&&d.push((0,t.Z)(e._('Metrics updated {{ timeSince }}.', 'analytics.header.disclaimer.metricsUpdated', 'Disclaimer describing when data was last updated. timeSince: time period since last update (ex: 1 day)'),{timeSince:n})),d.join(" ")}},774721:function(e,a,n){n.d(a,{Z:()=>r}),n(422578);var i,t=n(918920),l=n(28427);function r(e,a,r){let s=(0,l.Z)((void 0!==i||(i=n(251967)).hash&&"977a37f1bef6ecfbe279db65075e1520"!==i.hash&&console.error("The definition of 'usePinAnalyticsStatus_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),e);if(!a.isAuth||!a.isPartner||null==s)return!1;let{creatorAnalytics:o}=s,d=!!s.storyPinDataId,u=!!s.videos?.videoList,c=!(d||u)&&0!==Object.keys(s.aggregatedPinData?.creatorAnalytics?._30dRealtime||{}).length,p=s.board?.privacy===t.ZP.BoardPrivacy.PUBLIC,m=(s.board?.privacy===t.ZP.BoardPrivacy.PROTECTED||p)&&!s.isRepin&&[a.id,r].includes(s.pinner?.entityId??"");return c||0!==Object.keys(o?._30dRealtime||{}).length||a.isPartner&&m||d&&m}},411354:function(e,a,n){n.d(a,{Z:()=>s});var i=n(603316);let t=e=>{let a=new Image;a.loading="lazy",a.src=e;let{complete:n}=a;return a.src="",n},l=["736x","564x","474x","236x"],r=new RegExp(/\/(\d+x|originals)\//);function s(e){for(let a of l){let n=e.replace(r,`/${a}/`);if(t(n))return(0,i.nP)("web.closeup.cached_preview_image.found",{tags:{resolution:a}}),n}return(0,i.nP)("web.closeup.cached_preview_image.not_found"),null}},643875:function(e,a,n){n.d(a,{f:()=>i,Z:()=>t});let i=e=>{let{h:a,m:n}=e||{},i={hours:a||0,minutes:n||0};return void 0!==a||void 0!==n?{h:a,m:n,time:i,isoDuration:function({hours:e,minutes:a}){return`PT${e}H${a}`}(i)}:null},t=e=>{if(!e)return null;let{richMetadata:a}=e,{recipe:n}=a;return n&&n.name?{...e,recipe:{name:n.name,categorizedIngredients:n.categorized_ingredients,diets:n.diets,fromAggregatedData:n.from_aggregated_data,prepTime:i(n.cook_times?.prep),cookTime:i(n.cook_times?.cook),totalTime:i(n.cook_times?.total),servingSummary:n.servings_summary?.summary,serves:n.servings_summary?.serves,instructions:n.instructions}}:null}},665827:function(e,a,n){n.d(a,{Z:()=>i});let i=e=>{if(!e)return null;let{rich_metadata:a}=e.pin;return a?{...e,richMetadata:a}:null}},222555:function(e,a,n){n.d(a,{Z:()=>l});var i=n(254029),t=n(176465);let l=e=>{if(!e)return null;let{video:a}=(e=>{if(!e)return null;let{videos:a}=e.pin,{id:n,video_list:t={}}=a||{},{V_720P:l,V_HLSV4:r,V_HLSV3_MOBILE:s}=t,o=(0,i.V3)(r),d=(0,i.V3)(s),u=(0,i.V3)(l),c=u||o||d;return n&&c?{...e,video:{id:n,hasVideo:c,mp4:u||void 0,hls:o||void 0,hlsv3:d||void 0}}:null})((0,t.Z)(e))||{},{embed:n}=(e=>{if(!e)return null;let{embed:a}=e.pin,{type:n,src:i,subtype:t}=a||{};return i?{...e,embed:{type:n,src:i,subtype:t}}:null})((0,t.Z)(e))||{},l=!!(a&&(e=>{let{hlsv3:a,hls:n}=e,i=a||n;return!!(i&&(i.width??0)>(i.height??0))})(a))||!!(n&&n.src&&"pinstory"!==n.subtype&&"gif"!==n.type);return{...e,isWideVideo:l}}},887946:function(e,a,n){n.d(a,{Z:()=>o}),n(167912);var i,t=n(28427),l=n(453179),r=n(436475);let s=(void 0!==i||(i=n(545578)).hash&&"b694b913cbcf66451260d78ec78bcccd"!==i.hash&&console.error("The definition of 'usePinFormattedLink_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),o=e=>{let a=(0,t.Z)(s,e),n=(0,r.Z)(a);if(!a?.entityId)return null;let{trackedLink:i,link:o,method:d,utmLink:u}=a,c=(0,l.Zt)({trackedLink:i,link:o,utmLink:u});return c&&("catalog_bulk_create"===d||n)?decodeURIComponent(c):c}},436475:function(e,a,n){n.d(a,{Z:()=>r}),n(167912);var i,t=n(28427);let l=(void 0!==i||(i=n(445662)).hash&&"e1f413e0ba2f9031ea605d85baa14a4b"!==i.hash&&console.error("The definition of 'usePinHasProducts_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),r=e=>{let a=(0,t.Z)(l,e);if(!a?.richMetadata)return!1;let{products:n}=a.richMetadata??{};return!!Array.isArray(n)&&n.some(e=>!!e&&e.name)}},640785:function(e,a,n){n.d(a,{NC:()=>l,Rc:()=>s,WK:()=>d,X9:()=>t,b9:()=>i,f9:()=>o,gu:()=>r});let i="pin-builder-font-faces",t="system-font-faces",l="pin-builder-education-font-faces",r="licensed",s="system",o="brand",d=4},176465:function(e,a,n){n.d(a,{Z:()=>i});let i=e=>e?.pin?.id?e:null},231760:function(e,a,n){n.d(a,{B6:()=>u,IQ:()=>d,_m:()=>r});var i=n(658673);let{Provider:t,get:l}=(0,i.Z)({name:"related_feed",sampleRate:1}),r=t,{Provider:s,get:o}=(0,i.Z)({name:"related_feed_pageload",sampleRate:1}),d=s,u=e=>{let a=l(),n=o();return"related_feed"===e?a:"related_feed_pageload"===e?n:void 0}},287819:function(e,a,n){n.d(a,{Z:()=>t});var i=n(302148);function t({m:e,h:a,rm:n,rh:l},r,s=!1){return e&&(!a||l<=0)?s?(0,i.nk)(r._('{{mins}}min', 'closeup.makeRecipeTimeText.minutes', 'number showing the minutes to complete a recipe'),{mins:n.toString()}):(0,i.nk)(r.ngettext('{{mins}} minute', '{{mins}} minutes', n, 'number showing the minutes to complete a recipe', 'number showing the minutes to complete a recipe'),{mins:n.toString()}):a?s?(0,i.nk)(r._('{{hrs}}hr {{mins}}min', 'closeup.makeRecipeTimeText.hours', 'hrs: number showing the hours to complete a recipe, mins: number showing the minutes to complete a recipe'),{hrs:a.toString(),mins:e.toString()}):(0,i.nk)(r.ngettext('{{hrs}} hour', '{{hrs}} hours', l, 'number showing the hours to complete a recipe', 'number showing the hours to complete a recipe'),{hrs:l.toString()}):null}},63749:function(e,a,n){n.d(a,{Z:()=>r});var i=n(709311),t=n(302148),l=n(785893);function r({m:e,h:a,rm:n,rh:r},s){return e&&(!a||r<=0)?(0,t.nk)(s._('{{mins}}min', 'closeup.makeRecipeText.minutesLabel', 'Minutes label for Rich Pin Recipe'),{mins:(0,l.jsx)(i.Z,{maximumFractionDigits:2,value:n},"recipe-minutes")}):a?(0,t.nk)(s._('{{hrs}}hr', 'closeup.makeRecipeText.hoursLabel', 'Hours label for Rich Pin Recipe'),{hrs:(0,l.jsx)(i.Z,{maximumFractionDigits:2,value:r},"recipe-hours")}):null}},169330:function(e,a,n){n.d(a,{Z:()=>t});var i=n(302148);function t(e,a){return e<60?(0,i.nk)(a._('{{mins}}min', 'recipe.minutes', 'recipe in minutes. mins: recipe duration in minutes'),{mins:e}):(0,i.nk)(a._('{{hrs}}h {{mins}} min', 'recipe.time', 'recipe time. mins: recipe duration in minutes. hrs: recipe duration in hours'),{mins:e%60,hrs:Math.floor(e/60)})}},366291:function(e,a,n){n.d(a,{Z:()=>t});var i=n(886981);function t(e){return(0,i.Z)(function(e){let a;if(!e)return null;let n=e?.url;return Array.isArray(e?.params)?a=e?.params:Object.entries(a={...e?.params??{}}).forEach(([e,i])=>{n?.includes(`{${e}}`)&&(n=n?.replaceAll(`{${e}}`,String(i)),delete a[e])}),{name:"ApiResource",options:{url:n,data:a,...e?.method==="POST"?{postInsteadOfGet:!0}:{}},enabledRouteRefresh:e?.enabledRouteRefresh,headers:e?.headers,noCache:e?.noCache}}(e))}},724084:function(e,a,n){n.d(a,{RC:()=>p,Hx:()=>m,Wr:()=>c});var i=n(667294),t=n(729434),l=n(496406),r=n(914071),s=n(785893);let o=()=>Promise.resolve().then(n.bind(n,496406)),{Provider:d,get:u}=(0,t.Z)("IdeaPinVideoPlayer");function c({children:e}){let[a,n]=(0,r.Z)(o,l.initialState),t=(0,i.useMemo)(()=>({dispatch:n,ideaPinVideoPlayerControls:a}),[n,a]);return(0,s.jsx)(d,{value:t,children:e})}function p(){let{dispatch:e}=u();return(0,i.useMemo)(()=>({updateSeekTime:(a,n)=>{e({type:"UPDATE_SEEK_TIME",payload:{seekTime:a,pinId:n||""}})},clearSeekTime:a=>{e({type:"CLEAR_SEEK_TIME",payload:{seekTime:void 0,pinId:a||""}})}}),[e])}function m(){let{ideaPinVideoPlayerControls:e}=u();return e}},496406:function(e,a,n){n.r(a),n.d(a,{default:()=>t,initialState:()=>i});let i={seekTimes:{},currentProgressInfo:{currentTime:0,duration:0}};function t(e=i,a){switch(a.type){case"UPDATE_SEEK_TIME":return{...e,seekTimes:{...e.seekTimes,[a.payload.pinId]:a.payload.seekTime}};case"CLEAR_SEEK_TIME":return{...e,seekTimes:{}};default:return e}}},885003:function(e,a,n){n.d(a,{c:()=>o,o:()=>s});var i=n(281098),t=n(667294),l=n(785893);let r=(0,t.createContext)(null);function s({children:e,closeupPaneWidth:a,headerHeight:n,isLandingPage:s,loadFonts:o,renderStoryPinMediaLayout:d,renderStoryPinSplitLayout:u,renderStoryPinText:c,renderStoryPinPage:p,productPins:m}){(0,t.useEffect)(()=>{(0,i.Z)("StoryPinContext","/app/packages/story-pin/StoryPinContext.tsx")},[]);let g=(0,t.useMemo)(()=>({closeupPaneWidth:a,headerHeight:n,isLandingPage:s,loadFonts:o,renderStoryPinMediaLayout:d,renderStoryPinSplitLayout:u,renderStoryPinText:c,renderStoryPinPage:p,productPins:m}),[a,n,s,o,d,u,c,p,m]);return(0,l.jsx)(r,{value:g,children:e})}let o=()=>(0,t.useContext)(r)},138758:function(e,a,n){n.d(a,{Z:()=>l});var i=n(97517);let t=/\{\s*(\w+)\s*\}/g;function l({args:e,format:a}){let n,l=(e||[]).reduce((e,a,n)=>({...e,[n]:a.text}),{});return n=a||"",(0,i.Z)(t,n,l)}},91479:function(e,a,n){n.d(a,{Z:()=>c});var i=n(281098),t=n(667294),l=n(20256),r=n(19585),s=n(15667),o=n(601686),d=n(785893);let u=({onClick:e,showShadow:a,size:n="lg",onMouseEnter:i})=>{let s=(0,r.ZP)();return(0,d.jsx)(t.Fragment,{children:(0,d.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{animation:a?"showShadow 1s cubic-bezier(0.165, 0.84, 0.44, 1) forwards":"hideShadow 1s cubic-bezier(0.165, 0.84, 0.44, 1) forwards"}},onMouseEnter:i,rounding:"circle",children:(0,d.jsx)(l.hU,{accessibilityLabel:s._('Back', 'backButton.accessibilityLabel', 'Accessibility label for the button to navigate back to the previous page'),bgColor:"white",dataTestId:"back-icon-button",icon:"directional-arrow-left",iconColor:"darkGray",onClick:e,size:n})},"back-button-icon")})};function c({handleScroll:e,marginTop:a,onClick:n,showShadow:r,onMouseEnter:c,size:p="xl"}){(0,t.useEffect)(()=>{(0,i.Z)("BackButton","/app/packages/ui/BackButton.tsx")},[]);let{closeupWithinMasonryEnabled:m}=(0,o.x4)(),{isRTL:g}=(0,s.B)();return(0,t.useEffect)(()=>e?(window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)):()=>{},[e]),(0,d.jsx)(l.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{...g?{right:0}:{left:m?0:-12}}},"data-test-id":"back-button",display:"flex",position:"relative",children:(0,d.jsx)(u,{marginTop:a,onClick:n,onMouseEnter:c,showShadow:r,size:p})})}},627925:function(e,a,n){n.d(a,{Z:()=>c});var i=n(281098),t=n(667294),l=n(20256),r=n(980787),s=n(19585),o=n(302148),d=n(644493),u=n(785893);function c({closeupLinkEnabled:e,nativeCreatorCloseupLinkEligible:a,peekCloseupEnabled:n,uriComponent:c}){(0,t.useEffect)(()=>{(0,i.Z)("InstagramPostLink","/app/packages/ui/InstagramPostLink.tsx")},[]);let p=(0,s.ZP)(),{logContextEvent:m}=(0,r.u)();return a&&e&&c?(0,u.jsx)(l.xv,{align:"start",size:n?"200":"300",children:(0,o.nk)(p._('See original post on {{ instagramLink }}', 'closeup.defaultMetadata.instagramLink', 'instagramLink: Link to the original Instagram post where the text of the link reads \u2019Instagram\u2019'),{instagramLink:(0,u.jsx)(l.xv,{color:"link",inline:!0,children:(0,u.jsx)(l.rU,{display:"inline",externalLinkIcon:"default",href:(0,d.Z)(c)??c,onClick:()=>{m({event_type:102,element:16198,component:135,aux_data:{is_claimed_domain:a}})},underline:"none",children:p._('Instagram', 'closeup.defaultMetadata.instagramLink-linkText', 'Instagram')})})})}):null}},734871:function(e,a,n){n.d(a,{Z:()=>r});var i=n(667294),t=n(289032),l=n(159527);let r=(e="throttle")=>{let[a,n]=(0,i.useState)(0);return(0,i.useEffect)(()=>{let a="throttle"===e?(0,l.Z)(()=>n(window.scrollY),10):(0,t.Z)(()=>n(window.scrollY),10);return window.addEventListener("scroll",a),()=>{window.removeEventListener("scroll",a)}},[e]),a}},776777:function(e,a,n){n.d(a,{Z:()=>o});var i=n(281098),t=n(667294),l=n(20256),r=n(331854),s=n(785893);function o({onVisibilityChanged:e,children:a,...n}){(0,t.useEffect)(()=>{(0,i.Z)("VisibilityChangedWrapper","/app/packages/useVisibilityChanged/VisibilityChangedWrapper.tsx")},[]);let o=(0,r.Z)({onVisibilityChanged:e,...n});return(0,s.jsx)(l.xu,{ref:o,children:a})}},863667:function(e,a,n){n.d(a,{Z:()=>i});function i(e,a){let{organicVideosAutoplaying:n,promotedVideosAutoplaying:i,videoCarouselModuleAutoplaying:t}=a,l={...n,...i,...t};return l[e]&&l[e].currentTime}},766033:function(e,a,n){n.d(a,{Z:()=>l});var i=n(675973),t=n(647709);function l(){let{checkExperiment:e}=(0,i.Z)();return"desktop"===(0,t.ZP)()?e("dweb_pdm_shopping_module_gql").anyEnabled:e("mweb_shopping_module_gql").anyEnabled}},817998:function(e,a,n){n.d(a,{T:()=>t,k:()=>i});let i={ADS_MANAGER:"ADS_MANAGER",AUTOMATED_CAMPAIGN:"AUTOMATED_CAMPAIGN"},t=e=>Object.values(i).includes(e)},322888:function(e,a,n){n.d(a,{F0:()=>r,GI:()=>l});var i=n(213082),t=n(694955);n(253464);let l=e=>!e||"ENTERPRISE"!==("segmentMetadata"in e?e.segmentMetadata?.salesChannel:e.segment_metadata?.sales_channel),r=(e,a)=>{let n=a?`?pinId=${a}`:"";return l(e)?t.auO+(0,i.Z)("createAutomated")+n:t.auO+(0,i.Z)("create")+n}},285491:function(e,a,n){n.d(a,{Z:()=>y});var i=n(667294),t=n(20256),l=n(744862),r=n(821342),s=n(19585),o=n(675973),d=n(417245),u=n(324307),c=n(233624),p=n(271910),m=n(785195),g=n(149728),h=n(785893);let y=function(e){let a=(0,s.ZP)(),{fullName:n,isVerifiedIdentity:y,imageUrl:_,isPromoted:f,isVerifiedMerchant:x,profileUrl:k,sponsorName:P,sponsorshipStatus:S,sponsorUsername:v="",verified:b,color:C="default",onAvatarClick:I,onNavigateClick:w,onNavigateSponsorClick:T,openNewTab:A}=e,F=(0,o.Z)().checkExperiment("mweb_web_android_ios_backend_clbc_display_controls").anyEnabled,E=(0,r.Z)(),j=E.isAuth?E?.avatar_color_index:void 0,L=(0,d.Z)(a._('{{ fullName }} avatar link', 'creatorCardProfile.avatar.accessibilityLabel', 'Accessibility label for user avatar'),{fullName:n??""}),R=(0,h.jsx)(p.q,{children:({active:e,focused:a,hovered:i,onBlur:r,onFocus:s,onMouseEnter:o,onMouseLeave:d})=>(0,h.jsx)(t.xu,{onBlur:r,onFocus:s,onMouseDown:()=>{I&&I()},onMouseEnter:o,onMouseLeave:d,children:(0,h.jsx)(t.zd,{rounding:"circle",wash:i||e||a,children:(0,h.jsx)(l.qE,{accessibilityLabel:L,color:j,name:n??"",size:E.isAuth?"xs":"md",src:_??"",verified:b})})})}),K=(0,u.ZP)(n,70),Z=(0,h.jsxs)(i.Fragment,{children:[f&&(0,h.jsx)(t.xv,{lineClamp:1,size:"200",weight:"bold",children:a._('Promoted by', 'indicating the username of the person who promoted the pin', 'indicating the username of the person who promoted the pin')}),(0,h.jsx)(t.xu,{"data-test-id":"creator-profile-name",children:(0,h.jsx)(t.xu,{maxWidth:270,children:(0,h.jsx)(t.xv,{color:C,size:"200",weight:"normal",children:y||x?(0,h.jsx)(t.xu,{"data-test-id":"verified-name",children:(0,h.jsx)(g.Z,{badgeSize:"xs",badgeSpacing:2,fullName:K,isVerifiedIdentity:y,isVerifiedMerchant:x})}):n})})})]}),D=v&&P||m.j.includes(S)&&F,M=`/${v??""}/`;return(0,h.jsxs)(t.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},"data-test-id":"creator-card-profile",display:"flex",marginEnd:-1,marginStart:-1,children:[(0,h.jsx)(t.xu,{"data-test-id":"creator-avatar",flex:"none",paddingX:1,children:k?(0,h.jsx)(t.Tg,{dataTestId:"creator-avatar-link",href:k,onTap:w,rel:(0,c.Z)(k)?"none":"nofollow",target:A?"blank":null,children:R}):R}),(0,h.jsxs)(t.xu,{children:[k?(0,h.jsx)(t.xu,{alignItems:"center",direction:"row",display:"flex",flex:"grow",paddingX:1,children:(0,h.jsx)(t.rU,{dataTestId:"creator-profile-link",href:k,onClick:w,rel:(0,c.Z)(k)?"none":"nofollow",target:A?"blank":null,underline:"none",children:Z})}):Z,D&&(0,h.jsx)(t.xu,{"data-test-id":"sponsor-title",display:"flex",paddingX:1,children:(0,h.jsx)(m.Z,{href:M,isPromoted:f,onNavigateSponsorClick:T,sponsorName:P,sponsorshipStatus:S,sponsorUsername:v})})]})]})}},368974:function(e,a,n){n.d(a,{Z:()=>s});var i=n(20256),t=n(209026),l=n(19585),r=n(785893);let s=function(){let e=(0,l.ZP)();return(0,r.jsx)(i.xu,{display:"flex",justifyContent:"center",marginBottom:5,width:"100%",children:(0,r.jsx)(t.Z,{containerSize:320,description:e._('It looks like something went wrong. That\u2019s okay\u2014try refreshing this page.', 'error404.page.gumball.illustrations.description', 'Message displayed under the illustration when 404 error'),illustrationSize:186,message:e._('Something\u2019s a little off', 'error404.page.gumball.illustrations.message', 'Description displayed under the illustration when when 404 error'),name:"gumball",primaryAction:(0,r.jsx)(i.ZP,{color:"red",href:"",onClick:()=>{window.location.reload()},text:e._('Refresh page', 'error404.page.pinjar.illustration', 'Button text for refreshing the page for 404 error')})})})}},458460:function(e,a,n){n.d(a,{H8:()=>m,Ut:()=>p,fr:()=>c});var i=n(667294),t=n(729434),l=n(914071),r=n(987765),s=n(785893);let o=()=>n.e("77027").then(n.bind(n,145581)),{Provider:d,get:u}=(0,t.Z)("IdeaPin");function c({children:e}){let[a,n]=(0,l.Z)(o,r.Z),t=(0,i.useMemo)(()=>({dispatch:n,ideaPin:a}),[n,a]);return(0,s.jsx)(d,{value:t,children:e})}function p(){let{dispatch:e}=u();return(0,i.useMemo)(()=>({setIdeaPinActivePage:a=>{e({type:"IDEA_PIN_ACTIVE_PAGE",payload:{activePage:a}})},setIdeaPinDynamicWidth:a=>{e({type:"IDEA_PIN_DYNAMIC_WIDTH",payload:{dynamicWidth:a}})}}),[e])}function m(){let{ideaPin:e}=u();return e}},987765:function(e,a,n){n.d(a,{Z:()=>i});let i={activePage:0,dynamicWidth:0}},253464:function(e,a,n){n.d(a,{$o:()=>r,GW:()=>i,Jo:()=>l,MS:()=>_,Q8:()=>h,VX:()=>m,Zo:()=>o,aD:()=>d,b2:()=>c,g2:()=>p,s4:()=>s,tK:()=>y,ym:()=>u,zQ:()=>g});let i="/business/hub/?show_vmp=true",t=["FR"],l=["US","GB","CA","AU","DE","FR"].concat(["ES","IT","AT","CH","NL","BR","MX"]).filter(e=>!t.includes(e)),r={APPROVED:"approved",PENDING:"pending",DISAPPROVED:"declined",APPEAL_PENDING:"appeal_pending"},s=Object.freeze({APPLIED:"APPLIED",ACCEPTED:"ACCEPTED",NON_COMPLIANT:"NON_COMPLIANT",SUSPENDED:"SUSPENDED",CANCELLED:"CANCELLED"}),o=Object.freeze({UNSTARTED:"workflow-status-unstarted",IN_PROGRESS:"workflow-status-in-progress",ACCEPTED:"check-circle",ATTENTION:"workflow-status-warning",REJECTED:"workflow-status-problem",RECOMMENDED:"info-circle"}),d=Object.freeze({UNSTARTED:"dark",IN_PROGRESS:"success",ACCEPTED:"success",ATTENTION:"warning",REJECTED:"error",RECOMMENDED:"subtle"}),u="Verified merchant program not yet available in this country",c=2e3,p={can_appeal:!0,is_appeal:!1,appeal_count:0,appeal_comment:"",shipping_policy_url:"",return_policy_url:"",review_status:2,review_reasons:[]},m=Object.freeze({ACCOUNT_AGE:"ACCOUNT_AGE",DOMAIN_AGE:"DOMAIN_AGE",PROFILE_IMAGE:"PROFILE_IMAGE",PROFILE_COVER_IMAGE:"PROFILE_COVER_IMAGE",BIO:"BIO",SHOP_TAB:"SHOP_TAB",PINNER_FEEDBACK:"PINNER_FEEDBACK"}),g=[m.ACCOUNT_AGE,m.DOMAIN_AGE,m.PROFILE_IMAGE,m.PROFILE_COVER_IMAGE,m.BIO,m.SHOP_TAB,m.PINNER_FEEDBACK],h=Object.freeze({PASS:"PASS",FAIL:"FAIL"}),y=30,_=.5},394887:function(e,a,n){n.d(a,{Z:()=>d});var i=n(281098),t=n(667294),l=n(255957),r=n(15667),s=n(653621),o=n(785893);function d({children:e,type:a}){(0,t.useEffect)(()=>{(0,i.Z)("CloseupPwtSurface","/app/www/closeup/CloseupPwtSurface.tsx")},[]);let n=(0,r.B)();return(0,o.jsx)(l.Z,{annotateExperiments:[...n.isAuthenticated?["authDesktop"===a?"auth_dweb_graphql_pin_page":"auth_mweb_graphql_pin_page"]:[],n.isAuthenticated?"web_eager_loadable_auth":"web_eager_loadable_unauth",..."authDesktop"===a?["closeup_dweb_side_by_side_redesign_fast_follow"]:[],..."authDesktop"===a?["auth_dweb_shuffle_renderer_closeup_v2"]:[]],constraints:"authDesktop"===a?[...s.d0]:["PinPageMainImageRendered"],customEnabledNavigationTypes:["initial_app_load","client_route_push","client_route_replace"],surface:"pin_closeup",children:e})}},685178:function(e,a,n){n.d(a,{Z:()=>L});var i,t=n(281098),l=n(667294);n(167912);var r=n(20256),s=n(821342),o=n(28427),d=n(369416),u=n(611282),c=n(453179),p=n(887946),m=n(436475),g=n(54840),h=n(483180),y=n(774429),_=n(611499),f=n(601686),x=n(785893);let k=`
.CloseupTitleCard {
  color: #444;
  font-weight: bold;
}

.CloseupTitleCard .richPinInformation {
  padding: 0 40px 16px;
  padding-top: 0;
  width: 470px; /* 80% of closeup width */
}

.CloseupTitleCard a {
    color: #444;
}

.CloseupTitleCard a:hover,
.CloseupTitleCard a:active {
  color: #444;
}`,P=(void 0!==i||(i=n(176376)).hash&&"e0961d958eda59cad942eda9890b0f5f"!==i.hash&&console.error("The definition of 'TitleDesktop_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),S=e=>{let{clientTrackingParams:a,children:n,isLink:i=!0,onClick:t,pin:l,carouselInfo:o}=e,d=(0,p.Z)(l),m=(0,s.Z)(),{closeupWithinMasonryEnabled:g,peekCloseupEnabled:h}=(0,f.x4)(),_=(0,y.Z)({clickthroughType:"middleClick",location:"closeup.title"}),k=l.imageSpec_orig?.url&&l.imageSpec_orig.width&&l.imageSpec_orig.height?l.imageSpec_orig:null,P=n;if(o){let{carouselData:e}=o||{},{carousel_slots:a=[],index:n}=e||{};a&&null!=n&&a[n]&&(d=a[n].link||d,P=a[n].title||P)}let S=l?.originPinner&&m.isAuth&&m.id===l.originPinner.entityId||!l.isGoLinkless,v=(0,u.Z)({href:{pathname:d??k?.url??"",state:{trackingParams:a}},clientTrackingParams:a,target:"blank",externalData:{pin:l&&{advertiserId:l.advertiserId,attributionSourceId:l.attributionSourceId,board:l.board&&{url:l.board.url},campaignId:l.campaignId,entityId:l.entityId,isDownstreamPromotion:l.isDownstreamPromotion,isPromoted:l.isPromoted,pinner:l.pinner&&{username:l.pinner.username},pinPromotionId:l.pinPromotionId,promoter:l.promoter&&{entityId:l.promoter.entityId},storyPinDataId:l.storyPinDataId,trackingParams:l.trackingParams}}});if(!e.pin.entityId)return null;let b=P&&(0,x.jsx)(r.X6,{accessibilityLevel:1,lineClamp:h?2:void 0,size:g?"400":"600",children:P});return(0,x.jsx)("div",{itemProp:"name",children:(i||d)&&S?(0,x.jsx)(r.rU,{_onAuxClick:({event:e})=>{(0,c.UE)(e)&&(_(),e.preventDefault(),e.stopPropagation(),t&&t(),v({event:e}))},href:d??k?.url??"",onClick:({event:e,dangerouslyDisableOnNavigation:a})=>{a(),t&&t(),v({event:e})},rel:"nofollow",target:"blank",underline:"none",children:b}):b})},v=e=>{if(!e.pin.entityId)return null;let{entityId:a}=e.pin,n=e.pin.imageSpec_736x?.url&&e.pin.imageSpec_736x.width&&e.pin.imageSpec_736x.height?e.pin.imageSpec_736x:null;return(0,x.jsxs)(r.xu,{children:[(0,x.jsx)("meta",{content:`https://${h.Vi}/pin/${a}/`,"data-test-id":"meta-url",itemProp:"url"}),n&&(0,x.jsx)("meta",{content:n.url,"data-test-id":"meta-image",itemProp:"image"})]})},b=e=>{if(!e.pin.entityId)return null;let{pin:a}=e||{},{gridTitle:n,title:i}=a||{},t=n||i;return(0,x.jsx)(l.Fragment,{children:t&&(0,x.jsx)(g.Z,{children:(0,x.jsx)(S,{...e,children:t})})})},C=e=>{if(!e.pin.entityId)return null;let{pin:a}=e||{},{richMetadata:n,gridTitle:i}=a||{},{title:t}=n||{};return(0,x.jsx)(l.Fragment,{children:(i||t)&&(0,x.jsx)(g.Z,{itemType:_.iB.PRODUCT,children:(0,x.jsxs)(S,{...e,children:[i||t,(0,x.jsx)(v,{...e})]})})})},I=e=>{if(!e.pin.entityId)return null;let{pin:a}=e||{},{richMetadata:n,gridTitle:i}=a||{},{title:t}=n||{};return(0,x.jsx)(g.Z,{itemType:_.iB.ARTICLE,children:(0,x.jsx)(S,{...e,children:i||t})})},w=e=>{if(!e.pin.richMetadata?.recipe?.name)return null;let{name:a}=e.pin.richMetadata.recipe;return(0,x.jsx)(g.Z,{itemType:_.iB.RECIPE,children:(0,x.jsx)(S,{...e,children:a})})},T=e=>e.pin.richMetadata?.tutorial?.fromAggregatedData||!e.pin.richMetadata?.tutorial?.name?null:(0,x.jsx)(g.Z,{children:(0,x.jsx)(S,{...e,children:(0,x.jsx)(r.xu,{children:e.pin.richMetadata.tutorial.name})})}),A=e=>{let a=!!e.pin.richSummary?.displayName;return a?(0,x.jsx)(g.Z,{children:(0,x.jsx)(S,{...e,children:(0,x.jsx)(r.xu,{children:a})})}):null},F=e=>{if(!e.pin.entityId)return null;let{gridTitle:a}=e.pin||{};return(0,x.jsx)(g.Z,{itemType:_.iB.ARTICLE,children:(0,x.jsx)(S,{...e,children:a})})};function E(e){let{carouselInfo:a}=e,{carouselData:n}=a||{},{carousel_slots:i}=n||{};return((i||[])[0]||{}).title}let j=e=>{let{pin:a,...n}=e;if(!e.pin.entityId)return null;let i=E(n);return(0,x.jsx)(g.Z,{itemType:_.iB.ARTICLE,children:(0,x.jsx)(S,{...e,children:i})})},L=({pinKey:e,...a})=>{(0,l.useEffect)(()=>{(0,t.Z)("Title","/app/www/closeup/desktop/Title.tsx")},[]);let n=(0,o.Z)(P,e),{carouselInfo:i,onTitleCheck:s}=a,u=!!n.entityId&&!!n.gridTitle,c=!!n.richMetadata?.tutorial?.name,p=!!n.richMetadata?.recipe?.name,g=!!n.richMetadata?.article?.name,h=!!n.richSummary?.displayName,y=(0,m.Z)(n),{clientTrackingParams:_}=(0,f.x4)(),S=F,v=!1;return i&&n.entityId&&E(a)?S=j:y?S=C:(e=>{let{carouselData:a,title:n}=e??{};if(n)return!0;if(a){let{carouselSlots:e,index:n}=a;if(null!=n&&e?.[n]&&e[n].title)return!0}return!1})(n)?S=b:c?S=T:p?S=w:g?S=I:h?S=A:u||(v=!0),(0,l.useEffect)(()=>{s?.(v)},[v,s]),(0,x.jsxs)(l.Fragment,{children:[(0,x.jsx)(d.Z,{unsafeCSS:k}),(0,x.jsx)("div",{className:"CloseupTitleCard",children:(0,x.jsx)(r.xu,{children:(0,x.jsx)(S,{...a,clientTrackingParams:_,pin:n})})})]})}},462585:function(e,a,n){n.d(a,{Z:()=>p});var i=n(281098),t=n(667294),l=n(20256),r=n(592821),s=n(15667),o=n(611499),d=n(601686),u=n(785893);let c=(0,t.memo)(function({children:e,isStoryPin:a=!1,isWideVideo:n=!1}){let i,{showCloseupContentRight:t,showProductDetailPage:c,closeupWithinMasonryEnabled:p,peekCloseupEnabled:m,viewportSize:g,maxWidth:h}=(0,d.x4)(),{fiftyPercentWidth:y}=(0,r.Re)(),_=n?o.KP:h,f=p?o.Gg:o.CI,x=n?o.Gg:c?f:1050,{isRTL:k}=(0,s.B)();return a?(0,u.jsx)(l.xu,{bottom:!0,display:"flex",left:k,position:"absolute",right:!k,top:!0,width:m?y:o.Gg,children:e}):(p||m||(i=(t||n)&&"lg"===g?_:x),(0,u.jsx)(l.xu,{maxWidth:i,width:n||p?"100%":void 0,children:e}))});function p(e){return(0,t.useEffect)(()=>{(0,i.Z)("ResponsiveCloseupContainer","/app/www/closeup/desktop/responsiveContainers/ResponsiveCloseupContainer.tsx")},[]),(0,u.jsx)(c,{...e})}},298638:function(e,a,n){n.d(a,{Z:()=>p});var i=n(281098),t=n(667294),l=n(20256),r=n(934645),s=n(15667),o=n(85574),d=n(611499),u=n(601686),c=n(785893);function p({children:e,isVideo:a=!1,isWideVideo:n,shouldPadImage:p,styleOverrides:m={},variant:g}){(0,t.useEffect)(()=>{(0,i.Z)("ResponsiveImageContainer","/app/www/closeup/desktop/responsiveContainers/ResponsiveImageContainer.tsx")},[]);let{showCloseupContentRight:h,viewportSize:y,paneWidth:_,closeupWithinMasonryEnabled:f,showProductDetailPage:x}=(0,u.x4)(),k=(0,s.B)(),P=(0,r.Z)({showProductDetailPage:x}),S="default"===g;if(!(!f&&(h&&"lg"===y||S||n)))return(0,c.jsx)(l.xu,{children:e});let{borderStyle:v}=(0,o.Z)({isSideBySide:h&&!n,isPadded:p,isRTL:k.isRTL,closeupWithinMasonryEnabled:f}),b=n?d.KP:_,C=n?d.KP:496,I=m.height?.height||"100%",w=m.maxWidth?.maxWidth||b,T=m.minWidth?.minWidth||_;return(0,c.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{borderRadius:P||f?void 0:m.borderRadius||v.borderRadius,...p&&a?{overflow:"hidden"}:{}}},display:S?"flex":void 0,flex:S&&n?"grow":void 0,height:S?I:void 0,justifyContent:S?"center":void 0,marginBottom:S?void 0:6,marginEnd:S?void 0:6*!n,maxWidth:S?w:C,minWidth:S?T:344,rounding:S?void 0:2,children:e})}},327387:function(e,a,n){n.d(a,{Z:()=>d});var i=n(281098),t=n(667294),l=n(20256),r=n(601686),s=n(785893);let o=(0,t.memo)(function({children:e}){let{showCloseupContentRight:a}=(0,r.x4)();return(0,s.jsx)(l.kC,{direction:a?"row":"column",flex:"grow",children:e})});function d(e){return(0,t.useEffect)(()=>{(0,i.Z)("ResponsivePaddingContainer","/app/www/closeup/desktop/responsiveContainers/ResponsivePaddingContainer.tsx")},[]),(0,s.jsx)(o,{...e})}},477464:function(e,a,n){n.d(a,{Z:()=>l});var i=n(453179),t=n(938287);let l=(e,a,n,l)=>{let r=e||void 0,s=(0,t.Z)({url:a});return"PUSH"===r?"click":("POP"!==r||n)&&"news_hub"!==s.entrySource?l&&(0,i.sV)(l)?"deeplink":"click":"deeplink"}},607233:function(e,a,n){n.d(a,{Z:()=>i});function i(){return["aggregatedpindata.aggregated_stats","aggregatedpindata.creator_analytics","aggregatedpindata.id","aggregatedpindata.is_shop_the_look","aggregatedpindata.pin_tags","board.collaborated_by_me","board.followed_by_me","board.id","board.image_thumbnail_url","board.is_collaborative","board.layout","board.name","board.owner()","board.privacy","board.type","board.url","buyableproductmetadata.display_active_max_price","buyableproductmetadata.display_active_min_price","buyableproductmetadata.short_description","buyableproductmetadata.title","comment.commenter()","comment.created_at","comment.deletable_by_me","comment.id","comment.text","comment.type","domain.official_user()","pin.access","pin.ad_destination_url","pin.ad_match_reason","pin.additional_hide_reasons","pin.aggregated_pin_data()","pin.alt_text","pin.attribution","pin.board()","pin.carousel_data()","pin.collection_pin()","pin.comment_count","pin.comments(limit:5,resume:true)","pin.created_at","pin.creator_analytics","pin.debug_info_html","pin.description_html","pin.description","pin.domain","pin.dominant_color","pin.embed","pin.grid_description","pin.grid_title","pin.has_required_attribution_provider","pin.id","pin.image_crop","pin.image_signature","pin.image_square_url","pin.images[170x,136x136,236x,474x,736x,orig]","pin.images[236x]","pin.is_downstream_promotion","pin.is_eligible_for_pdp","pin.is_eligible_for_web_closeup","pin.is_native","pin.is_playable","pin.is_promoted","pin.is_quick_promotable","pin.is_repin","pin.is_uploaded","pin.is_video","pin.is_whitelisted_for_tried_it","pin.link_domain()","pin.link_user_website()","pin.link","pin.manual_interest_tags","pin.method","pin.native_creator()","pin.pinner()","pin.price_currency","pin.price_value","pin.privacy","pin.promoted_is_removable","pin.promoted_lead_form","pin.promoter()","pin.reaction_counts","pin.repin_count","pin.rich_summary()","pin.shopping_flags","pin.product_metadata()","product_metadata.shopping_flags","pin.sponsorship","pin.story_pin_data_id","pin.story_pin_data()","pin.title","pin.tracking_params","pin.type","pin.videos()","pin.view_tags","pincarouselslot.details","pincarouselslot.id","pincarouselslot.images[60x60,136x136,170x,236x,474x,564x,736x,600x315,orig]","pincarouselslot.link","pincarouselslot.title","pintag.pin_tag_key","pintag.pins()","pintag.type","pintag.x_percent","pintag.y_percent","user.blocked_by_me","user.explicitly_followed_by_me","user.full_name","user.id","user.image_large_url","user.image_small_url","user.is_verified_merchant","user.type","user.username","user.verified_identity","userwebsite.official_user()","video.id","video.video_list[V_HLSV4,V_HLSV3_WEB,V_HLSV3_MOBILE,V_EXP3,V_EXP4,V_EXP5,V_EXP6,V_EXP7]"]}},97781:function(e,a,n){n.d(a,{Z:()=>c});var i=n(281098),t=n(667294),l=n(20256),r=n(980787),s=n(475498),o=n(19585),d=n(302148),u=n(785893);function c({boardName:e,boardUrl:a,isBoardlessPin:n,isFromPinBuilder:c,hasNewPin:p,onChangeButtonClick:m,onVisitButtonClick:g=()=>{},onHide:h,onUndo:y,pinImageUrl:_}){let f;(0,t.useEffect)(()=>{(0,i.Z)("PostSavedPinToast","/app/www/common/PinBetterSave/PostSavedPinToast.tsx")},[]);let x=(0,o.ZP)(),{logContextEvent:k}=(0,r.u)();c?f={accessibilityLabel:x._('Visit Pin', 'PostSavedPinToast.a11yVisitButton', 'Accessibility label for Visit Pin saved from PinBuilder'),label:x._('Visit', 'PostSavedPinToast.VisitButton', 'Visit Pin saved from PinBuilder'),size:"lg",onClick:g}:(m||y)&&(f={accessibilityLabel:p&&n&&m?x._('Change Pin destination', 'PostSavedPinToast.a11yChangeButton', 'Change saved pin to a different destination'):x._('Undo Saved Pin', 'PostSavedPinToast.a11yUndoButton', 'Undo Saved Pin'),label:p&&n&&m?x._('Change', 'PostSavedPinToast.ChangeButton', 'Change saved pin to a different destination'):x._('Undo', 'PostSavedPinToast.UndoButton', 'Undo Saved Pin'),size:"lg",onClick:p&&n&&m?()=>m():y});let P=()=>{p&&n&&m&&k({event_type:101,component:14409})};return(0,u.jsx)(s.Z,{duration:n?6e3:3e3,imageUrl:_,onHide:h,primaryAction:f,text:(0,u.jsx)(l.xv,{overflow:"normal",size:"200",children:(0,d.XB)({text:x._('Saved to <a id="1">{{ boardName }}</a>', 'PostSavedPinToast.SavedToBoardToast.Message', 'Saved to label for better save. boardName: url to saved board'),markers:{boardName:e??""},jsxReplacements:{1:({innerHtmlStrings:e})=>(0,u.jsx)(l.rU,{display:"block",href:n?"/me/":a??"",onClick:P,children:(0,u.jsx)(l.xv,{lineClamp:1,size:"200",weight:"bold",children:e},"PostSavedPinToastBoardName")})}})}),thumbnail:n?{icon:(0,u.jsx)(l.JO,{accessibilityLabel:x._('Saved to profile thumbnail', 'PostSavedPinToast.thumbnail.accessibilityLabel', 'Thumbnail for saved to profile.'),color:"default",icon:"history",size:24})}:void 0})}},725191:function(e,a,n){n.r(a),n.d(a,{default:()=>_});var i=n(281098),t=n(667294),l=n(20256),r=n(980787),s=n(93966),o=n(949270),d=n(351607),u=n(675973),c=n(138758),p=n(902293),m=n(601686),g=n(396162),h=n(785893);let y=s.yF;function _({contextLogData:e,bubbles:a,id:n,referringSource:s,slotIndex:_,storyType:f,title:x,titleIcon:k,viewType:P,viewParameter:S}){(0,t.useEffect)(()=>{(0,i.Z)("BubblesGridRep","/app/www/discover/Bubbles/BubblesGridRep.tsx")},[]);let{logContextEvent:v}=(0,r.u)(),{closeupWithinMasonryEnabled:b}=(0,m.x4)(),{checkExperiment:C}=(0,u.Z)(),I=a?.map(({type:e,id:a})=>e+":"+a).join("|"),w=(0,t.useMemo)(()=>({story_type:f,...e,content_ids:I}),[f,e,I]),T=C("web_module_logging_user_sequence_aux_data").anyEnabled,A=!!k&&(0,p.Z)(k);return(0,h.jsx)(d.Fw,{componentType:200,contextLogData:w,impressionType:"Story",loggingId:n,objectIdStr:n,slotIndex:_,viewParameter:S,viewType:P,children:({impressionTrackerRef:e})=>(0,h.jsxs)(l.xu,{ref:e,children:[x&&(0,h.jsxs)(l.xu,{alignItems:"center",display:"flex",justifyContent:"center",marginBottom:1,children:[A&&(0,h.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{paddingTop:1}},marginEnd:2,children:(0,h.jsx)(l.JO,{accessibilityLabel:"",color:"default",icon:A,size:14})}),(0,h.jsx)(l.X6,{accessibilityLevel:2,size:"300",children:(0,h.jsx)(l.xv,{inline:!0,weight:"bold",children:(0,c.Z)(x)})})]}),(0,h.jsx)(l.xu,{role:"list",children:a?.map((e,a)=>(0,h.jsx)(l.xu,{flex:"none",paddingY:1,role:"listitem",children:(0,h.jsx)(g.Z,{bubble:e,contextLogData:w,height:103,onClick:a=>{v({event_type:101,object_id_str:a,view_type:P,view_parameter:S,component:200,aux_data:T?{...w,module_image_signature:function(e){if(!e)return;let a=e.cover_images?.[0]?.originals?.url;return a?(0,o.Z)(a):void 0}(e)||null}:w})},referringSource:s??void 0,slotIndex:a,storyId:n,viewParameter:S,viewType:P,width:b?"100%":y})},`bubble-${e.id}`))})]})})}},44344:function(e,a,n){n.d(a,{Z:()=>u});var i=n(667294),t=n(675973),l=n(15667),r=n(647709),s=n(603316);class o{constructor(){var e,a,n;e="callbacks",a=new Map,(e="symbol"==typeof(n=function(e,a){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,a||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(e,"string"))?n:n+"")in this?Object.defineProperty(this,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):this[e]=a,this.observer=new ResizeObserver(e=>{e.forEach(e=>{let a=this.callbacks.get(e.target);a&&a.forEach(a=>a(e.target))})})}observe(e,a){this.callbacks.has(e)||(this.callbacks.set(e,new Set),this.observer.observe(e)),this.callbacks.get(e).add(a)}unobserve(e,a){let n=this.callbacks.get(e);n&&(n.delete(a),0===n.size&&(this.callbacks.delete(e),this.observer.unobserve(e)))}}let d=null;function u(e,a){let{anyEnabled:n,group:u}=(0,t.Z)().checkExperiment("closeup_web_resize_observer_optimization"),{isAuthenticated:c}=(0,l.B)(),p=(0,r.ZP)(),m=(0,i.useCallback)(a=>{let n=performance.now();e(a);let i=performance.now();(0,s.nP)("closeup.www.resizeObserverCallback",{sampleRate:.1,tags:{isAuthenticated:c,deviceType:p,resizeObserverOptimizationExp:u,duration:Math.round(i-n)}})},[e,c,p,u]);g=n?null:m,(0,i.useEffect)(()=>{if(!a.current||!g)return()=>{};{let e=a.current;if("ResizeObserver"in window){let a=new ResizeObserver(a=>{Array.isArray(a)&&a.length&&g(e)});return a.observe(e),()=>a.unobserve(e)}{let a,n=e.clientHeight,i=e.clientWidth,t=()=>{let l=e.clientHeight,r=e.clientWidth;(n!==l||i!==r)&&(n=l,i=r,g(e)),a=window.requestAnimationFrame(t)};return t(),()=>window.cancelAnimationFrame(a)}}},[a,g]);var g,h=n?m:null;let y=(0,i.useRef)(h);y.current=h;let _=(0,i.useCallback)(e=>{y.current?.(e)},[]);(0,i.useEffect)(()=>{if(!a.current)return;let e="undefined"!=typeof window&&"ResizeObserver"in window?(d||(d=new o),d):null;if(!e)return void(0,s.nP)("closeup.www.resizeObserverCallback.noResizeObserver",{sampleRate:.1,tags:{isAuthenticated:c,deviceType:p}});let n=a.current;return e.observe(n,_),()=>{e.unobserve(n,_)}},[a,_,c,p])}},846051:function(e,a,n){n.d(a,{Z:()=>r});var i=n(706563),t=n(287819),l=n(169330);function r(e,a,n,r){switch(e){case 0:return function({isShortened:e,minutes:a,i18n:n}){if(!a)return"";if(e)return(0,l.Z)(a,n).join("");let r=(0,t.Z)((0,i.X)({m:a}),n);if(!r)return"";let s=r.join(""),o=n._('Cook Time', 'ideapin.basics.cookTime', 'The cook time for the food in this pin');return`${o}: ${s}`}({minutes:parseInt(a,10),i18n:n,isShortened:r});case 1:return function({servingSize:e,i18n:a}){return e?1===e?`${e} ${a._('serving', 'ideapin.basics.servings', 'The number of servings this recipe makes')}`:`${e} ${a._('servings', 'ideapin.basics.servings', 'The number of servings this recipe makes')}`:""}({servingSize:parseInt(a,10),i18n:n});case 2:return function({difficulty:e,i18n:a}){let n={1:a._('Easy', 'closeup.storyPin.basicsLayout.difficulty', 'Easy difficulty level'),2:a._('Intermediate', 'closeup.storyPin.basicsLayout.difficulty', 'Intermediate difficulty level'),3:a._('Expert', 'closeup.storyPin.basicsLayout.difficulty', 'Expert difficulty level')},i=a._('Difficulty', 'ideapin.basics.difficulty', 'The difficulty for the activity in this pin');return`${i}: ${n[e??"1"]}`}({difficulty:a,i18n:n});default:return""}}},213967:function(e,a,n){n.d(a,{Z:()=>i});let i=e=>e.join(` \u2022 `)},589357:function(e,a,n){n.d(a,{Ul:()=>l,VS:()=>i,hy:()=>r,iM:()=>t,j4:()=>s});let i=2,t=[0,.01,.02,.03,.04,.05,.06,.07,.08,.09,.1,.11,.12,.13,.14,.15,.16,.17,.18,.19,.2,.21,.22,.23,.24,.25,.26,.27,.28,.29,.3,.31,.32,.33,.34,.35,.36,.37,.38,.39,.4,.41,.42,.43,.44,.45,.46,.47,.48,.49,.5,.51,.52,.53,.54,.55,.56,.57,.58,.59,.6,.61,.62,.63,.64,.65,.66,.67,.68,.69,.7,.71,.72,.73,.74,.75,.76,.77,.78,.79,.8,.81,.82,.83,.84,.85,.86,.87,.88,.89,.9,.91,.92,.93,.94,.95,.96,.97,.98,.99,1],l={backgroundImage:"linear-gradient(to top, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",pointerEvents:"none",bottom:0},r=128,s=e=>e&&document.querySelector(`video[poster="${e}"]`)||null}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/96488-a4a6cf86819e7618.mjs.map