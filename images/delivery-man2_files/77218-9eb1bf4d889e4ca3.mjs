(self.modernJsonp=self.modernJsonp||[]).push([["77218"],{237666:function(e,t,n){var r=n(667294),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=r.useSyncExternalStore,o=r.useRef,s=r.useEffect,l=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,c){var d=o(null);if(null===d.current){var p={hasValue:!1,value:null};d.current=p}else p=d.current;var m=i(e,(d=l(function(){function e(e){if(!s){if(s=!0,i=e,e=r(e),void 0!==c&&p.hasValue){var t=p.value;if(c(t,e))return o=t}return o=e}if(t=o,a(i,e))return t;var n=r(e);return void 0!==c&&c(t,n)?(i=e,t):(i=e,o=n)}var i,o,s=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]},[t,n,r,c]))[0],d[1]);return s(function(){p.hasValue=!0,p.value=m},[m]),u(m),m}},331103:function(e,t,n){e.exports=n(237666)},576140:function(e,t,n){n.d(t,{q:()=>m});var r=n(667294),a=n(581722),i=n(616550),o=n(400267),s=n(821342),l=n(274320),u=n(378888),c=n(469817),d=n(932370),p=n(261228);let m=()=>{let{checkExperiment:e}=(0,l.r)(),t=e("ap_dweb_nux_hf_use_case_request",{dangerouslySkipActivation:!0}).anyEnabled,n=e("ap_dweb_nux_in_sync_closeup_request",{dangerouslySkipActivation:!0}).group,m="control_baseline"===n||"enabled_closeup"===n,_=e("ap_dweb_nux_revamp_v3_iteration",{dangerouslySkipActivation:!0}).anyEnabled,f=e("activation_foundation_dweb_autofollow_v2",{dangerouslySkipActivation:!0}).anyEnabled,g=(0,i.TH)(),h=(0,s.Z)(),y=(0,a.I0)(),{selectedUseCases:v,selectedPins:E}=(0,d.u)(),b=(0,c.rQ)(v,E);return(0,r.useCallback)(()=>{let e=h.isAuth&&h.firstHomeFeedRequestAfterNux,n=(0,o.Z)({viewerIsPartner:h.isAuth&&h.isPartner,inNux:(e&&y((0,p.H5)(!1)),e),staticFeed:!!(g&&(g.pathname.includes("pwt_performance_testing")||void 0!==(0,u.mB)(g.search).pwt_performance_testing)),inNewsHub:g?.pathname.includes("news_hub")??!1});return{name:"UserHomefeedResource",options:(t||m||_||f)&&b.length>0?{...n,nux_signals_map:b}:n}},[y,h,g,t,m,_,f,b])}},449029:function(e,t,n){n.d(t,{_:()=>s,p:()=>l});var r=n(667294),a=n(729434),i=n(785893);let{Provider:o,get:s}=(0,a.Z)("VisualShopContext");function l({children:e}){let[t,n]=(0,r.useState)({}),[a,s]=(0,r.useState)({}),l=(0,r.useRef)(0),u=(0,r.useRef)("");return(0,i.jsx)(o,{value:{cachedOneBarModules:t,setCachedOneBarModules:n,cachedDescriptorModules:a,setCachedDescriptorModules:s,imageContainerScrollTop:l,imageContainerScrollTopForPinId:u},children:e})}},551383:function(e,t,n){n.d(t,{Z:()=>a,v:()=>r});let r=()=>"undefined"!=typeof navigator&&"getInstalledRelatedApps"in navigator;async function a(){if(!r())return[];try{return await navigator.getInstalledRelatedApps()}catch(e){return[]}}},399573:function(e,t,n){n.d(t,{Z:()=>r});function r(e){return function e(t,n){let r;if(null==t||"object"!=typeof t&&"function"!=typeof t)return t;let a=n.find(e=>e.value===t);if(a)return a.result;let i=Object.prototype.toString.call(t);switch(i){case"[object Array]":r=Array(t.length);break;case"[object Set]":r=new Set;break;case"[object Object]":case"[object Arguments]":r={};break;case"[object Map]":r=new Map;break;default:return t}let o=[...n,{value:t,result:r}];switch(i){case"[object Array]":t.forEach((t,n)=>{r[n]=e(t,o)});break;case"[object Set]":t.forEach(t=>{r.add(e(t,o))});break;case"[object Object]":case"[object Arguments]":Object.entries(t).forEach(([t,n])=>{r[t]=e(n,o)});break;case"[object Map]":t.forEach((t,n)=>{r.set(n,e(t,o))})}return r}(e,[])}},289032:function(e,t,n){n.d(t,{Z:()=>r});function r(e,t,n){let r,a,i,o=!!n?.leading,s=n?.trailing!==!1,l=n?.maxWait?Math.max(n.maxWait,t):void 0,u=null,c=0;function d(t){let n=r;return r=void 0,c=t,n&&(a=e(...n)),a}function p(e){let n=e-(i??0),r=e-c;return void 0===i||n>=t||n<0||void 0!==l&&r>=l}function m(){let e=Date.now();p(e)?(u=null,s&&r)?d(e):r=void 0:u=setTimeout(m,function(e){let n=e-(i??0),r=e-c,a=t-n;return void 0!==l?Math.min(a,l-r):a}(e))}function _(){null!==u&&clearTimeout(u),u=setTimeout(m,t)}function f(...e){let n=Date.now(),s=p(n);if(r=e,i=n,s){if(null===u)return c=n,u=setTimeout(m,t),o?d(n):a;else if(void 0!==l)return _(),d(n)}return null===u&&_(),a}return f.flush=function(){if(null!==u&&r){let e=Date.now();return clearTimeout(u),u=null,d(e)}return a},f.cancel=function(){null!==u&&clearTimeout(u),c=0,r=void 0,i=void 0,u=null},f}},695263:function(e,t,n){n.d(t,{bN:()=>f,BY:()=>m,fs:()=>u,EU:()=>l,kt:()=>_,Ly:()=>p,RC:()=>s,jM:()=>c,eK:()=>d});let r=/\s\s+/g,a=e=>e.replace(r," ");var i=n(324307);let o=Object.freeze(new Set(["sensitive_raw_pin_text","is_sensitive_rich_pin_title"])),s=({storyPinDataMetadataPinTitle:e,pinTitle:t})=>e||t,l=(e,t)=>e?e.trim().length>t?(0,i.ZP)(e.trim(),t).trim():e.trim():"",u=({pinTitle:e,gridTitle:t,richSummaryDisplayName:n,richMetadataTitle:r,storyPinDataId:a,storyPinDataMetadataPinTitle:i})=>{let o=i||e,s=l(t,200);return s||n||r||(a&&o?o:null)},c=({closeupUnifiedDescription:e,pinDescription:t})=>a((0,i.ZP)(e||t||"",496)).trim(),d=e=>{let{richSummaryDisplayName:t}=e,n=e.pinJoinVisualAnnotation||[],r=e.pinJoinAnnotationsWithLinks||{},o=e.richMetadataDescription||"",s=e.closeupUnifiedDescription||"",l=n.map(e=>(r||{})[e]||{name:e,url:""}),u="",c=(t||"").toLocaleLowerCase().trim(),d=o.toLocaleLowerCase().trim(),p=s.toLocaleLowerCase().trim();return s&&s.length>3&&p!==c?u=s:o&&o.length>3&&d!==c&&(u=o),u&&(u=a((0,i.ZP)(u,496)).trim()),{description:u,annotationsWithLinks:l}},p=({pinTitle:e,gridTitle:t,richSummaryDisplayName:n,richMetadataTitle:r,storyPinDataId:a,storyPinDataMetadataPinTitle:i,pinJoinVisualAnnotation:s,seoNoindexReason:c,shouldUseSimplifiedTitle:d=!1})=>o.has(c??"")?s?.[0]??" ":d?l(t,200)||s?.[0]||"":u({pinTitle:e,gridTitle:t,richSummaryDisplayName:n,richMetadataTitle:r,storyPinDataId:a,storyPinDataMetadataPinTitle:i})||s?.[0]||e,m=e=>`/pin/${e}/`,_=(e,t)=>{let n=`Pinterest video from ${t}: `.concat(e);return""===t?e:n},f=({pinId:e,seoUrl:t})=>t&&"string"==typeof t?t:m(e)},950883:function(e,t,n){n.d(t,{X:()=>r});let r="favorited"},20310:function(e,t,n){n.d(t,{kf:()=>g,l5:()=>_,of:()=>p,xC:()=>f,yz:()=>m});var r=n(667294),a=n(729434),i=n(993279),o=n(341742),s=n(664897),l=n(603316),u=n(785893);let{Provider:c,getMaybe:d}=(0,a.Z)("PwaContext"),p=({children:e,initialContext:t})=>{let[n,a]=(0,r.useState)(null),s=t||{pwaType:"unknown",twaType:null},d=s.pwaType;(0,o.Z)(()=>{let e=(0,i.FB)(window)||"unknown";a(e),d!==e&&(0,l.nP)("pwa.type_mismatch",{sampleRate:1,tags:{serverPwaType:d,clientPwaType:e,conflict:"unknown"!==d&&"unknown"!==e}})});let p="unknown"===d&&n?n:d,{twaType:m}=s,_=(0,r.useMemo)(()=>({pwaType:p,twaType:m}),[p,m]);return(0,u.jsx)(c,{value:_,children:e})},m=()=>{let e=d();return e?.pwaType??"unknown"},_=()=>{let e=d();return e?.twaType??null},f=()=>"android-twa"===m(),g=()=>{let e=m(),t=(0,s.Z)();return"unknown"===e&&t?null:"windows"===e}},707079:function(e,t,n){n.d(t,{F_:()=>o,MA:()=>s,ZP:()=>a,y8:()=>i});var r=n(729434);class a{constructor(){var e,t,n;t={},(e="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e="pending","string"))?n:n+"")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t}add(e,t,n){n&&(this.pending[e]={...this.pending[e]??{},[t]:n},n.finally?.(()=>this.remove(e,t)))}remove(e,t){this.pending[e]?.[t]&&(delete this.pending[e][t],0===Object.keys(this.pending[e]).length&&delete this.pending[e])}get(e,t){return this.pending[e]?.[t]??null}}let i=new a,{Provider:o,getMaybe:s}=(0,r.Z)("PendingFetches")},791948:function(e,t,n){n.d(t,{UZ:()=>m,Z8:()=>_,my:()=>f,vL:()=>h,w1:()=>g});var r=n(667294),a=n(581722),i=n(575108),o=n(729434),s=n(72918),l=n(785893);function u(e,t,n){let r=[...t[e][n.payload.name]??[],n.payload.handler],a={...t};return a[e]={...t[e],[n.payload.name]:r},a}function c(e,t,n){if(!t[e][n.payload.name])return t;let r=t[e][n.payload.name].filter(e=>e!==n.payload.handler),a={...t};return a[e]={...t[e],[n.payload.name]:r},a}let{Provider:d,get:p}=(0,o.Z)("ResourceContext");function m({children:e,resourceCreator:t}){let[{listeners:n,moreListeners:a},o]=(0,r.useReducer)((e,t)=>{switch(t.type){case"addListener":return u("listeners",e,t);case"addMoreListener":return u("moreListeners",e,t);case"removeListener":return c("listeners",e,t);case"removeMoreListener":return c("moreListeners",e,t);default:return e}},{listeners:{},moreListeners:{}});i.Z.fetchCompleteCallback=({resource:e,options:t,response:r,normalizedResponse:a,refresh:i,resourceSchema:o})=>{n[e]&&n[e].forEach(n=>n({isRefresh:i,normalizedResponse:a,options:t,schema:o,resource:e,response:r}))},i.Z.fetchMoreCompleteCallback=({resource:e,options:t,response:n,normalizedResponse:r,refresh:i,resourceSchema:o})=>{a[e]&&a[e].forEach(a=>a({isRefresh:i,normalizedResponse:r,options:t,schema:o,resource:e,response:n}))};let s=(0,r.useMemo)(()=>({listenerDispatch:o,resourceCreator:t}),[t]);return(0,l.jsx)(d,{value:s,children:e})}function _(e,t){let{listenerDispatch:n}=p();(0,r.useEffect)(()=>(n({type:"addListener",payload:{name:e,handler:t}}),()=>{n({type:"removeListener",payload:{name:e,handler:t}})}),[n,e,t])}function f(e,t){let{listenerDispatch:n}=p();(0,r.useEffect)(()=>(n({type:"addMoreListener",payload:{name:e,handler:t}}),()=>{n({type:"removeMoreListener",payload:{name:e,handler:t}})}))}function g(){let e=(0,a.I0)();return(0,r.useCallback)((t,n)=>e((0,s.jB)(t,n)),[e])}function h(){return p().resourceCreator}},536652:function(e,t,n){n.d(t,{U:()=>d,b:()=>p});var r=n(575108),a=n(399573),i=n(440568),o=n(849233),s=n(72918),l=n(82347),u=n(954300);function c({addSuspenseResourceSSRData:e,fetchOptions:t,resource:n,resourceCreator:d,retry:p}){return async(_,f)=>{let{bookmark:g,headers:h,options:y,refresh:v,schema:E}=t,b=(0,i.Z)(y);if(f().resources?.[n]?.[b]?.fetching&&!p)return Promise.resolve();let T=p?p.bookmark:g,w=(0,a.Z)(y),M=T?{...w,bookmarks:[T]}:w;_((0,s.LQ)(n,y,!0));try{let a,i,f=d??r.Z.create,b=await f(n,M).callGet(void 0,h);e&&m(b)&&e(n,M,b),m(b)||(a=b.bookmarks?.[0]);let{data:T}=b.resource_response,{normalizedResponse:w,resourceSchema:C}=(0,u.f)({data:T,opts:{bookmark:g,options:y,schema:E},resource:n});if(m(b)){a=b.resource_response.bookmark??"";let e=(0,l.Z)(b);w=e.normalizedResponse,C=e.schema,i=e.response}else i=b;if(Array.isArray(T)&&0===T.length&&a&&a!==o.qx){let e=p?p.count:0;if(!(e>=o.s9))return _(c({resource:n,fetchOptions:t,retry:{count:e+1,bookmark:a},resourceCreator:d}))}i&&(g?(_((0,s.Dm)(n,y,i,w,C)),r.Z.fetchMoreCompleteCallback&&r.Z.fetchMoreCompleteCallback({resource:n,options:y,response:i,normalizedResponse:w,refresh:v,resourceSchema:C})):(_((0,s.Sr)(n,y,i,w,v,C)),r.Z.fetchCompleteCallback&&r.Z.fetchCompleteCallback({resource:n,options:y,response:i,normalizedResponse:w,refresh:v,resourceSchema:C})))}catch(t){if(e){let r=t.http_status??500;e(n,y,{resource:{name:n,options:y},resource_response:{data:null,error:t,http_status:r,status:"failure"}})}_((0,s.Tl)(n,y,t))}}}let d=(e,{bookmark:t,headers:n,options:r,schema:a},i,o)=>c({resource:e,fetchOptions:{bookmark:t,headers:n,options:r,refresh:!1,schema:a},resourceCreator:i,addSuspenseResourceSSRData:o}),p=(e,{headers:t,options:n,schema:r},a)=>c({resource:e,fetchOptions:{headers:t,options:n,refresh:!0,schema:r},resourceCreator:a});function m(e){return"resource"in e}},72918:function(e,t,n){n.d(t,{Dm:()=>u,LQ:()=>o,Sr:()=>l,Tl:()=>s,XM:()=>i,jB:()=>c});var r=n(35831),a=n(23534);function i(e,t,n,a){return{type:r.AF,payload:{resource:e,options:t,response:n,normalizedResponse:a}}}function o(e,t,n){return{type:r.KK,payload:{resource:e,options:t,isFetching:n}}}let s=(e,t,n)=>({type:r.cR,payload:{resource:e,options:t,error:n}});function l(e,t,n,i,o,s){return{type:r.zP,payload:{isRefresh:o,normalizedResponse:i,options:t,resource:e,response:n,schema:s},meta:{[a.s]:!0}}}function u(e,t,n,a,i){return{type:r.aW,payload:{resource:e,options:t,response:n,normalizedResponse:a,schema:i}}}function c(e,t){return{type:r.se,payload:{resource:e,optionsOrOptionsKey:t}}}},82347:function(e,t,n){n.d(t,{Z:()=>o});var r=n(782677),a=n(24315),i=n(954300);function o(e){let{resource:t,resource_response:n}=e,{name:o,options:s}=t,l=(0,a.Z)(n),{data:u,error:c}=n,d=(0,i.J)(o,{options:s});return{error:c,isRefresh:!1,normalizedResponse:d&&u?(0,r.Fv)(u,d):null,options:s,resource:o,response:{auxData:l,bookmarks:n.bookmark?[n.bookmark]:void 0,resource_response:{data:u,error:c}},schema:d}}},943257:function(e,t,n){n.d(t,{Z:()=>p});var r=n(667294),a=n(581722),i=n(616550),o=n(440568),s=n(15667),l=n(536652),u=n(849233),c=n(707079),d=n(791948);function p(e,t,n){let{enabledRouteRefresh:p,headers:m,name:_,noCache:f,options:g,schema:h}=e,y=(0,c.MA)(),v=(0,d.vL)(),E=(0,a.I0)(),b=(0,o.Z)(g),T=(0,r.useRef)(void 0),w=(0,i.k6)(),M=w&&"POP"!==w.action,C=(0,r.useRef)(void 0),R=e=>e[_]?.[b],O=(0,a.v9)(({resources:e})=>R(e)?.data),A=(0,a.v9)(({resources:e})=>R(e)?.error),S=!!A||void 0!==O,k=(0,a.v9)(({resources:e})=>!!R(e)?.fetching),D=(0,a.v9)(({resources:e})=>R(e)?.nextBookmark),N=S&&!k&&D===u.qx,I=!!(S&&p&&M&&!t),[G,P]=(0,r.useState)(I),U=G;(0,a.wU)(O,C.current)||(G&&(C.current||!I)&&(U=!1,P(!1)),C.current=O);let L=(0,r.useCallback)(e=>{let t=E((0,l.U)(_,{options:g,schema:h,bookmark:e,headers:m},v,void 0));e||y?.add(_,b,t)},[E,_,b,h,m]),Z=(0,r.useCallback)(()=>{let e=E((0,l.b)(_,{options:g,schema:h,headers:m},v));y?.add(_,b,e)},[E,_,b,h,m]),x=(0,r.useCallback)(()=>{t||(Z(),P(!0))},[t,Z]),H=(0,r.useCallback)(()=>{!D||N||k||t||L(D)},[t,L,N,k,D]),{isBot:j}=(0,s.B)(),F=(0,r.useCallback)(()=>{if(!(k||y?.get(_,b))&&!t&&T.current!==b){let e=void 0===T.current;T.current=b,!S||n&&e&&A&&(({httpStatus:e})=>!e||e>=500)(A)?L():(!j&&f||I)&&Z()}},[n,L,Z,t,A,j,k,S,I,_,f,b,y]),B=(0,r.useMemo)(()=>({name:_,optionsKey:b}),[_,b]);return(0,r.useMemo)(()=>({fetchResource:F,ref:B,refresh:x,fetchMore:H,isFetching:k,isLoaded:S,isRefreshing:U}),[H,F,k,S,B,U,x])}(0,n(512395).kr)()},886981:function(e,t,n){n.d(t,{Z:()=>l});var r=n(667294),a=n(581722),i=n(440568),o=n(849233),s=n(943257);function l(e){let{enabledRouteRefresh:t,headers:n,name:l,noCache:u,options:c,schema:d}=e??{name:o.fY,options:null},p=(0,i.Z)(c),m=e=>e[l]?.[p],_=(0,a.v9)(({resources:e})=>m(e)?.nextBookmark),f=(0,a.v9)(({resources:e})=>m(e)?.data),g=(0,a.v9)(({resources:e})=>m(e)?.auxData),h=(0,a.v9)(({resources:e})=>m(e)?.error),{fetchResource:y,fetchMore:v,isFetching:E,isLoaded:b,isRefreshing:T,refresh:w}=(0,s.Z)({enabledRouteRefresh:t,headers:n,name:l,noCache:u,options:c,schema:d},!e,!0),M=b&&!E&&_===o.qx;return(0,r.useEffect)(()=>{y()}),(0,r.useMemo)(()=>({auxData:g,data:f,error:h,fetchMore:v,isAtEnd:M,isFetching:E,isLoaded:b,isRefreshing:T,nextBookmark:_,refresh:w}),[g,f,h,v,M,E,b,T,_,w])}},936371:function(e,t,n){n.d(t,{o$:()=>r,ty:()=>a,uH:()=>i});let{Provider:r,MaybeConsumer:a,getMaybe:i}=(0,n(729434).Z)("inviteContext")},710782:function(e,t,n){n.d(t,{M:()=>o,Q:()=>i});var r=n(667294);let a=(0,r.createContext)(null),i=()=>(0,r.useContext)(a),o=a},592900:function(e,t,n){n.d(t,{Z:()=>m});var r=n(111330),a=n(121836),i=n(785873),o=n(695263),s=n(753143),l=n(238589),u=n(941404);let c=new class{constructor(){this.listeners={}}on(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}emit(e,t){this.listeners[e]&&this.listeners[e].forEach(e=>e(t))}},d=new class{constructor(){this.rules={},this.init()}init(){for(let e of[{category:"dweb_max_free_pin_modal",validate:this.validateImageView.bind(this),action:"SHOW_LOGIN_MODAL"},{category:"dweb_save",validate:this.saveRule.bind(this),action:"SHOW_SAVE_MODAL"},{category:"dweb_scroll_banner_dismiss_rule",validate:this.scrollBanerDismissRule.bind(this),action:"BOTTOM_RIGHT_BANNER_DISMISS"},{category:"dweb_scroll_banner_limit_rule",validate:this.scrollBannerLimitRule.bind(this),action:"BOTTOM_RIGHT_BANNER_LIMIT"},{category:"dweb_scroll_banner_show",validate:this.scrollBannerShowRule.bind(this),action:"BOTTOM_RIGHT_BANNER_SHOW"}])this.addRule(e)}initExperiment(e){this.experiment=e}addRule(e){this.rules[e.category]=this.rules[e.category]??[],this.rules[e.category].push(e)}evaluate(e,t){if(!this.rules[e])return null;for(let n of this.rules[e])if(n.validate(t))return n.action;return null}validateImageView(e){let{clickCount:t}=e,{hasSeenLoginModal:n}=e,{hasDismissedLoginModal:r}=e,a=this.experiment?.group==="enabled_relaxation";return a?t+1>=4&&!n&&!r:t+1>=4&&!n}saveRule(e){return"desktop"===e.deviceType}scrollBanerDismissRule(e){return e.scrollTop<64}scrollBannerLimitRule(e){return e.scrollTop<4e3}scrollBannerShowRule(e){let t=this.experiment?.group==="enabled_relaxation";return t?e.isInOpenModalExperience||e.isSafari||e?.state?.scrollSessionCount!==3&&!e.hasDismissedLoginModal:e.isInOpenModalExperience||e.isSafari||e?.state?.scrollSessionCount!==3}};var p=n(669442);let m=new class{constructor(){this.init()}init(){c.on("pinView",this.handlePinView.bind(this)),c.on("pinSave",this.handleSavePin.bind(this)),c.on("showDesktopSignupModal",this.showDesktopSignupModal.bind(this)),c.on("hideDesktopSignupModal",this.hideDesktopSignupModal.bind(this)),c.on("onScrollHybridBanner",this.onScrollHybridBanner.bind(this))}initExperiment(e){this.experiment=e("dweb_upsell_manager_mvp_2"),this.experiment&&d.initExperiment(this.experiment)}emitEvent(e,t){c.emit(e,t)}handlePinView(e){let{history:t,linkTarget:n}=e,c=(0,s.M0)().getItem(r.cu)??0;(0,s.M0)().setItem(r.cu,c+1);let m=(0,l.Nl)().getItem(a.J7);if("SHOW_LOGIN_MODAL"===d.evaluate("dweb_max_free_pin_modal",{clickCount:c,hasSeenLoginModal:m})){let{onUpsellTriggerCallback:r}=e;r(),(0,u.My)("dweb.navigational.upsell.show"),(0,l.Nl)().setItem(a.J7,"true");let s={pinId:e.pinId,seoUrl:e.seoUrl},c=(0,p.Z)((0,o.bN)(s),{mt:"login"});if("fullPageLoad"===n)(0,i.Z)(c,!1);else if("duploClientNav"===n)t.push(c);else{let e=window.open(c,"_blank");e?.focus()}}}handleSavePin(e){if("SHOW_SAVE_MODAL"===d.evaluate("dweb_save",{deviceType:e.deviceType})){let{pinId:t,attributionLabel:n,modalHeadingType:r,showSignupModal:a}=e;a({attributionLabel:"extended_save_out_of_quota"===r?"click_save_button_with_max_unauth_saves":n||"click_save_button_on_closeup",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",mobileOptions:{headingType:r},desktopOptions:{modalType:"signup",modalOptions:{source:"saveButtonExp",container:"save"}},pinId:t})}}showDesktopSignupModal(e){let{displayProps:t,viewType:n,viewParameter:r,trackInteraction:a,trackConversionUpsellForContext:i,logDesktopSignupModalEvent:o,dispatchSignupModalAction:s}=e;s({type:"show",displayProps:t});let{attributionLabel:l,signupFlow:u,reason:c}=t;a({action:"trigger",item:u.type.includes("signup")?"signup-modal":"login-modal"}),i({viewType:n,viewParameter:r,eventType:14688,element:{UPSELL_LOGIN_OR_SIGNUP:13319,ACTION_REQUIRES_LOGIN_OR_SIGNUP:13320,CLICK_LOGIN_OR_SIGNUP:13321}[c]||13322,component:"login"===u.type?14212:14214,upsellReason:l}),o("dispatch_show",{attributionLabel:l,modalType:u.type,reason:c})}hideDesktopSignupModal(e){let{shouldDoSideEffects:t,loginForMore:n,dispatchSignupModalAction:r,logDesktopSignupModalEvent:a}=e,i=e.isEligibilityLoginForMore;t&&n&&i&&n.setVisible(!1),r({type:"dismiss"}),a("dispatch_dismiss",{shouldDoSideEffects:t})}onScrollHybridBanner(e){let{evt:t,isSafari:n,trackConversionUpsell:r,UnauthHybridBannerClassComponent:i,isInOpenModalExperience:o}=e,s=0,u=t&&t.target instanceof Document?t.target:null;if(u&&u.documentElement&&u.documentElement.scrollTop>0?s=u.documentElement.scrollTop:u&&u.body&&u.body.scrollTop>0&&(s=u.body.scrollTop),"BOTTOM_RIGHT_BANNER_DISMISS"===d.evaluate("dweb_scroll_banner_dismiss_rule",{scrollTop:s}))i.state.shouldShowBanner&&!i.state.bannerDismissed&&(r({element:13893,eventType:10243}),i.state.bannerDismissed=!0),i.setShouldShowBanner(!1);else if("BOTTOM_RIGHT_BANNER_LIMIT"===d.evaluate("dweb_scroll_banner_limit_rule",{scrollTop:s})){let e=i.state.shouldShowBanner;i.setState(e=>({shouldShowBanner:"BOTTOM_RIGHT_BANNER_SHOW"===d.evaluate("dweb_scroll_banner_show",{isInOpenModalExperience:o,isSafari:n,state:e}),scrollSessionCount:Math.ceil(s/800)}),()=>{e||!i.state.shouldShowBanner||i.state.bannerViewed||(r({eventType:14688,element:13319,component:14479,upsellReason:"scroll_down"}),i.state.bannerViewed=!0)})}else!(0,l.Nl)().getItem(a.J7)&&!o&&n&&t&&t.preventDefault()}}},914071:function(e,t,n){n.d(t,{Z:()=>a});var r=n(667294);function a(e,t){let n=(0,r.useRef)([]),[a,i]=(0,r.useState)(),[o,s]=(0,r.useReducer)(a??(()=>t),t),l=(0,r.useCallback)(t=>{a?s(t):(n.current.length||e().then(e=>{i(()=>e.default)}),n.current=[...n.current,t])},[e,a]);return(0,r.useEffect)(()=>{a&&(n.current.forEach(s),n.current=[])},[a]),[o,l]}},105433:function(e,t,n){n.d(t,{pb:()=>v,nf:()=>E,lV:()=>b});var r=n(667294),a=n(581722),i=n(441143),o=n.n(i),s=n(575108),l=n(729434),u=n(686319),c=n(791948),d=n(503246),p=n(991384);let m={feature_map:Object.freeze({})},_=(e,t)=>{let n={...(0,p.Z)(e,t),...t.reaction_counts?{reaction_counts:t.reaction_counts}:Object.freeze({}),...t.tags?{tags:t.tags}:Object.freeze({}),...t.tagged_users?{tagged_users:t.tagged_users}:Object.freeze({})};return(0,d.ZP)(e,n)?e:n},f=(e,t)=>{if(e=e||m,"FETCH_COMPLETE"===t.type){let{payload:{resource:n}}=t,{data:r}=t.payload.response.resource_response;if("AggregatedCommentFeedResource"===n||"AggregatedCommentReplyFeedResource"===n||"DidItCommentsResource"===n){let t=(r||[]).reduce((t,n)=>(t[n.id]=_(e[n.id],n),t),{});return{...e,...t}}if("UnifiedCommentsResource"===n&&r&&r.length>0){let t=r.filter(e=>"aggregatedcomment"===e.type).reduce((t,n)=>(t[n.id]=_(e[n.id],n),t),{});return{...e,...t}}if("UnifiedCommentsPreviewResource"===n&&r&&r.length>0){let t=r.map(e=>e.aggregated_comment).reduce((t,n)=>(n&&(t[n.id]=_(e[n.id],n)),t),{}),n=r.map(e=>e.creator_reply).reduce((t,n)=>(n&&n.id&&(t[n.id]=_(e[n.id],n)),t),{});return{...e,...t,...n}}if("AggregatedCommentFeaturesResource"===n&&r&&Object.keys(r).length>0)return{...e,feature_map:r}}else if("AGGREGATED_COMMENT_CREATED"===t.type){let{payload:{aggregatedComment:n}}=t;return n.id?{...e,[n.id]:n}:e}else if("AGGREGATED_COMMENT_DELETED"===t.type||"AGGREGATED_COMMENT_HIDDEN"===t.type){let{payload:{aggregatedCommentId:n}}=t,r={...e};return delete r[n],r}else if("AGGREGATED_COMMENT_HIDDEN_FOR_USER"===t.type){let{payload:{userId:n}}=t;return Object.fromEntries(Object.entries(e).filter(e=>e[1].user?.id!==n))}else if("AGGREGATED_COMMENT_UPDATED"===t.type){let{payload:{data:n}}=t;return{...e,[n.id]:_(e?.[n.id],n)}}else if("AGGREGATED_COMMENT_LIKE_TOGGLED"===t.type){let{payload:{data:n}}=t,r=e?.[n.id],a=r?.reaction_counts[1]||0,i={1:n.reaction_by_me?a+1:a-1},o={...r,reaction_by_me:n.reaction_by_me,reaction_counts:i};return{...e,[n.id]:o}}else if("AGGREGATED_COMMENT_HELPFUL_TOGGLED"===t.type){let{payload:{data:n}}=t,r=e?.[n.id],a=r?.helpful_count||0,i=n.marked_helpful_by_me?a+1:a-1,o={...r,marked_helpful_by_me:n.marked_helpful_by_me,helpful_count:i};return{...e,[n.id]:o}}else if("AGGREGATED_COMMENT_HIGHLIGHT_TOGGLED"===t.type){let{payload:{data:n}}=t,r={...e?.[n.aggregated_comment_id],highlighted_by_pin_owner:n.is_highlighted};return{...e,[n.aggregated_comment_id]:r}}else if("AGGREGATED_COMMENT_FEATURES_UPDATED"===t.type){let{payload:{data:{featureMap:n}}}=t;return{...e,feature_map:{...e?.feature_map,...n}}}else if("UPDATE_AGGREGATED_COMMENT_COMMENT_COUNT"===t.type){let{payload:{increment:n,id:r}}=t,a=e?.[r];if(!a)return e;let i={...a,comment_count:a.comment_count+n};return{...e,[r]:i}}else if("DELETE_COMMENT_MENTION"===t.type){let{payload:{aggregatedCommentId:n,tagged_users:r}}=t,a={...e?.[n],tagged_users:r};return{...e,[n]:a}}else if("GET_COMMENT_TRANSLATION"===t.type){let{payload:{aggregatedCommentId:n,translatedText:r}}=t,a={...e?.[n],translatedText:r};return{...e,[n]:a}}return e};var g=n(785893);let{Provider:h,get:y}=(0,l.Z)("AggregatedComments");function v({children:e}){let t=(0,a.v9)(({resources:e})=>e?.UnifiedCommentsResource),n=m;t&&Object.values(t).forEach(e=>{let t=e.data?.filter(e=>"aggregatedcomment"===e.type),r=t?.reduce((e,t)=>(e[t.id]=_(n[t.id],t),e),{});n={...n,...r}});let[i,o]=(0,r.useReducer)(f,n),s=e=>{o({type:"FETCH_COMPLETE",payload:e})};(0,c.Z8)("AggregatedCommentFeaturesResource",s),(0,c.my)("AggregatedCommentFeaturesResource",s),(0,c.Z8)("AggregatedCommentFeedResource",s),(0,c.my)("AggregatedCommentFeedResource",s),(0,c.Z8)("AggregatedCommentReplyFeedResource",s),(0,c.my)("AggregatedCommentReplyFeedResource",s),(0,c.Z8)("DidItCommentsResource",s),(0,c.my)("DidItCommentsResource",s),(0,c.Z8)("UnifiedCommentsPreviewResource",s),(0,c.my)("UnifiedCommentsPreviewResource",s),(0,c.Z8)("UnifiedCommentsResource",s),(0,c.my)("UnifiedCommentsResource",s);let l=(0,r.useMemo)(()=>({aggregatedComments:i,dispatch:o}),[i,o]);return(0,g.jsx)(h,{value:l,children:e})}function E(){let{dispatch:e}=y();return(0,r.useMemo)(()=>({aggregatedCommentCreated(t,n){e({type:"AGGREGATED_COMMENT_CREATED",payload:{parentId:t,aggregatedComment:n}})},aggregatedCommentDeleted:(t,n)=>{e({type:"AGGREGATED_COMMENT_DELETED",payload:{parentId:t,aggregatedCommentId:n}})},aggregatedCommentHidden:t=>{e({type:"AGGREGATED_COMMENT_HIDDEN",payload:{aggregatedCommentId:t}})},aggregatedCommentsHiddenForUser:t=>{e({type:"AGGREGATED_COMMENT_HIDDEN_FOR_USER",payload:{userId:t}})},flagAggregatedComment:async({isAggregatedComment:e=!0,commentId:t,reason:n,detailedReasons:r})=>{let a=e?`/v3/aggregated_comments/${t}/flag/`:`/v3/did_it/${t}/flag/`;return(0,u.Z)({url:a,method:"PUT",data:{commentId:t,reason:n,detailedReasons:r}})},deleteCommentMention:async t=>{let{resource_response:n}=await (0,u.Z)({url:`/v3/aggregated_comments/${t}/mentions/`,method:"DELETE",data:{fields:["aggregatedcomment.id","aggregatedcomment.tagged_users"]}}),r=n.data??{};e({type:"DELETE_COMMENT_MENTION",payload:{aggregatedCommentId:r.id,tagged_users:r.tagged_users}})},translateAggregatedComment:async t=>{try{let{resource_response:n}=await (0,u.Z)({url:`/v3/aggregated_comments/${t}/translate/`,method:"GET"}),r=n.data??"";e({type:"GET_COMMENT_TRANSLATION",payload:{aggregatedCommentId:t,translatedText:r}})}catch(n){e({type:"GET_COMMENT_TRANSLATION",payload:{aggregatedCommentId:t,translatedText:""}})}},toggleAggregatedCommentHelpful:({aggregatedCommentId:t,isMarkedHelpfulByMe:n,orbacSubjectId:r})=>{(0,u.Z)({url:`/v3/helpful/1/${t}/`,method:n?"DELETE":"POST",data:r?{orbac_subject_id:r}:{}}),e({type:"AGGREGATED_COMMENT_HELPFUL_TOGGLED",payload:{data:{id:t,marked_helpful_by_me:!n}}})},toggleAggregatedCommentHighlight:async({aggregatedCommentId:t,pinId:n,isHighlighted:r})=>{o()(t,"Could not find comment"),o()(n,"Could not find Pin"),await (0,u.Z)({url:"/v3/aggregated_comments/pin/highlight/",method:"PUT",data:{aggregated_comment:t,pin:n,highlight:!r}}),e({type:"AGGREGATED_COMMENT_HIGHLIGHT_TOGGLED",payload:{data:{aggregated_comment_id:t,pin_id:n,is_highlighted:!r}}})},toggleAggregatedCommentLike:({aggregatedCommentId:t,isLikedByMe:n,orbacSubjectId:r})=>{(0,u.Z)({url:`/v3/aggregated_comments/${t}/react/`,method:n?"DELETE":"POST",data:{reaction_type:1,...r?{orbac_subject_id:r}:{}}}),e({type:"AGGREGATED_COMMENT_LIKE_TOGGLED",payload:{data:{id:t,reaction_by_me:+!n}}})},updateAggregatedComment:async({commentId:t,force:n,orbacSubjectId:r,tags:a,text:i})=>{let{resource_response:o}=await s.Z.create("AggregatedCommentResource",{commentId:t,force:n,tags:a,text:i,...r?{orbacSubjectId:r}:{}}).callUpdate({showError:!1}),{tagged_users:l}=o.data??{};e({type:"AGGREGATED_COMMENT_UPDATED",payload:{data:{id:t,tagged_users:l.map(e=>({...e})),tags:JSON.parse(a),text:i}}})},updateAggregatedCommentFeatures:async({userId:t,featureMap:n,passcode:r,userConfirmPasscode:a})=>{let i={userId:t,featureMap:n,passcode:r,user_confirm_skip_passcode:a};void 0===a&&(i.user_confirm_skip_passcode=!1);let{resource_response:o}=await s.Z.create("AggregatedCommentFeaturesResource",i).callUpdate({showError:!1});e({type:"AGGREGATED_COMMENT_FEATURES_UPDATED",payload:{data:{featureMap:o.data??Object.freeze({})}}})},updateCommentCount:(t,n)=>{e({type:"UPDATE_AGGREGATED_COMMENT_COMMENT_COUNT",payload:{increment:n,id:t}})}}),[e])}function b(){let{aggregatedComments:e}=y();return e}},85442:function(e,t,n){n.d(t,{C:()=>a});var r=n(274320);function a(){let{checkExperiment:e}=(0,r.r)();switch(e("entrypoints_collage_wasm").group){case"prefetch_all":default:return{preloadExtent:"Both"};case"prefetch_only_js":return{preloadExtent:"OnlyJS"};case"control":return{preloadExtent:"None"}}}},393107:function(e,t,n){n.d(t,{Z:()=>i});var r=n(821342),a=n(274320);let i=()=>{let{checkExperiment:e}=(0,a.r)(),t=(0,r.Z)(),n=t.isAuth&&!t.isPartner;return (t=!1)=>{if(!n)return{anyEnabled:!1,followupFeatureEnabled:!1};let r=e("web_collage_creation",{dangerouslySkipActivation:t}),{anyEnabled:a}=r;return{anyEnabled:a,followupFeatureEnabled:r.group.startsWith("employee")||"enabled_followup_feature"===r.group}}}},230543:function(e,t,n){n.d(t,{c:()=>a,t:()=>i});var r=n(598849);function a({children:e}){let{height:t}=(0,r.Z)();return e(t)}function i(){let{height:e}=(0,r.Z)();return e}},502066:function(e,t,n){n.d(t,{G:()=>p,Kl:()=>m,vo:()=>d});var r=n(667294),a=n(729434),i=n(791948),o=n(914071),s=n(785893);let l=()=>n.e("83726").then(n.bind(n,3571)),{Provider:u,get:c}=(0,a.Z)("NativeEngagements");function d({children:e}){let[t,n]=(0,o.Z)(l,[]);(0,i.Z8)("NativeInteractionsResource",e=>{n({type:"FETCH_COMPLETE",payload:e})}),(0,i.my)("NativeInteractionsResource",e=>{n({type:"FETCH_MORE_COMPLETE",payload:e})});let a=(0,r.useMemo)(()=>({dispatch:n,nativeEngagements:t}),[n,t]);return(0,s.jsx)(u,{value:a,children:e})}function p(){let{dispatch:e}=c();return(0,r.useMemo)(()=>({nativeEngagementsHiddenForUser:t=>{e({type:"NATIVE_ENGAGEMENT_HIDDEN_FOR_USER",payload:{userId:t}})}}),[e])}function m(){let{nativeEngagements:e}=c();return e}},867552:function(e,t,n){n.d(t,{D:()=>r,u:()=>a});let{Provider:r,getMaybe:a}=(0,n(729434).Z)("unauthPageWrapperContext")},405463:function(e,t,n){n.d(t,{K:()=>o,T:()=>s});var r=n(667294),a=n(785893);let i=(0,r.createContext)({getPinFeedbackStatus:()=>void 0,setPinFeedbackStatus:()=>{}}),o=()=>(0,r.useContext)(i);function s({children:e}){let[t,n]=(0,r.useState)(Object.freeze({})),o=(0,r.useMemo)(()=>({getPinFeedbackStatus:({pinId:e})=>t[e],setPinFeedbackStatus:({pinId:e,pinFeedbackStatus:r})=>n({...t,[e]:r})}),[t]);return(0,a.jsx)(i,{value:o,children:e})}},634405:function(e,t,n){n.d(t,{Z:()=>a});var r=n(581722);let a=()=>(0,r.v9)(({session:{canUseNativeApp:e}})=>e)},101639:function(e,t,n){n.d(t,{$:()=>s,w:()=>l});var r=n(667294),a=n(729434),i=n(785893);let{Provider:o,getMaybe:s}=(0,a.Z)("CloseupPreviewContext");function l({children:e}){let[t,n]=(0,r.useState)(Object.freeze({})),a=(0,r.useMemo)(()=>({setData:(e,t)=>n(n=>({...n,[e]:t})),getData:e=>t[e]}),[t]);return(0,i.jsx)(o,{value:a,children:e})}},716751:function(e,t,n){n.d(t,{o:()=>s,p:()=>l});var r=n(667294),a=n(729434),i=n(785893);let{Provider:o,get:s}=(0,a.Z)("Session");function l({children:e}){let[t,n]=(0,r.useState)(void 0),a=(0,r.useCallback)(()=>n(void 0),[]),s=(0,r.useMemo)(()=>({unauthCommentPinId:t,setUnauthCommentPinId:n,removeUnauthCommentPinId:a}),[t,a]);return(0,i.jsx)(o,{value:s,children:e})}},326687:function(e,t,n){n.d(t,{G3:()=>d,Rp:()=>c,kp:()=>u});var r=n(111330),a=n(121836),i=n(410156),o=n(753143),s=n(238589);let l=14*i.F4,u=(e,t)=>{let n=function(){let e=Date.now(),t=(0,o.M0)(),n=Number(t.getItem(r.Li)??null);return{currentTime:e,firstUpsellTime:Number(t.getItem(r.O7)??null),lastUpsellTime:n,showedAppUpsellCurrentSession:!!(0,s.Nl)().getItem(a.JO)}}();return e?function(e,t,n){let{currentTime:a,firstUpsellTime:i,lastUpsellTime:s,showedAppUpsellCurrentSession:u}=e;return(n=n||l,!i||a<i+t)?!u:a-s>n&&((0,o.M0)().removeItem(r.O7),!0)}(n,i.F4):function(e,t){let{currentTime:n,lastUpsellTime:r}=e;return t=t||l,!r||n-r>t}(n,t)},c=({isBot:e,platform:t,userAgent:n})=>{try{return!e&&"android"===t&&7>parseFloat((e=>{let t=(e=e.toLowerCase()).match(/android\s([0-9\.]*)/i);return t?t[1]:void 0})(n))}catch(e){return!1}},d=e=>(e.startsWith("zh")||e.startsWith("ar")?e:e.slice(0,2)).toUpperCase()},469817:function(e,t,n){n.d(t,{Es:()=>u,HW:()=>l,er:()=>d,rQ:()=>c});var r=n(111330),a=n(753143),i=n(603316);let o=e=>e>=Date.now()-72e5,s=(e,t)=>{let n=[];if(e)for(let r of e)(!t||r.is_shared)&&o(r.ts)&&n.push(r);return n},l=()=>{let e=(0,a.M0)().getItem(r.uc)??[],t=s(e,!1),n=s(e,!0),i=t.map(e=>e.first_pin_image_signature),l=n.map(e=>e.first_pin_image_signature),u=(e=>{let t={};if(e)for(let n of e)n.is_shared&&o(n.ts)&&n.pin_id&&(t[n.pin_id]={inviteCode:n.pin_invite_code});return t})(e);return{extraPlpImages:i,plpImageRenderData:t,extraBlpImages:s((0,a.M0)().getItem(r.hI)??[],!0).map(e=>e.first_pin_image_signature),extraSharedImages:l,sharedPinData:u}},u=(e,t)=>{if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1)if(e[n].id!==t[n].id)return!1;return!0},c=(e,t)=>e.map(e=>({1:e,2:(t[e]||[]).map(e=>({1:e,2:"pin"}))})),d=(e,t,n,r)=>{let a={};return e.forEach(e=>{let o=e.id,s=e.pins.length??0;a[o]=s,(0,i.QX)("webapp.log.nux.pin.picker.step.pin.number.of.pins",s,{sampleRate:1,addHostname:!0,tags:{appType:t,useCaseId:o,gender:n,age:r,use_case_display_name:e.display_name}}),(0,i.S0)("gauge.webapp.log.nux.pin.picker.step.pin.number.of.pins",s,{sampleRate:1,addHostname:!0,tags:{appType:t,useCaseId:o,gender:n,age:r,use_case_display_name:e.display_name}})}),a}},954300:function(e,t,n){n.d(t,{J:()=>i,f:()=>o});var r=n(782677),a=n(388023);let i=(e,{bookmark:t,options:n,schema:r})=>{let i=r||a.Z[e];return"function"==typeof i?i({resource:e,options:n,bookmark:t}):i};function o({data:e,opts:{bookmark:t,options:n,schema:a},resource:o}){let s=i(o,{bookmark:t,options:n,schema:a});return{normalizedResponse:s&&e?(0,r.Fv)(e,s):null,resourceSchema:s}}},16590:function(e,t,n){n.d(t,{M:()=>T,v:()=>E});var r=n(667294),a=n(111330),i=n(729434),o=n(152615),s=n(753143),l=n(341742),u=n(918920),c=n(787995);let d=()=>(0,s.M0)().getItem(a.Vb)||[],p=()=>(0,s.M0)().getItem(a.ny)||[];var m=n(501971),_=n(996970),f=n(831373),g=n(785893);let h=e=>({...e,_updateUnauthUserAggregateDefinitions:function(){let{completedSearches:t,closeupPins:n,clickthroughPins:r,downloadedPinsCount:a}=e;e.isQUS=Number(t.length>=1||n.length>=3||r.length>=1||a>=1)},_getDaysSinceLastRevisitation:function(){let{revisitationState:t}=e,{ts:n}=t,r=new Date,a=new Date(n||r);return Math.max(Math.floor(Number(((r.getTime()-a.getTime())/864e5).toFixed(2))),0)},getSnapshot:function(){let t={};return Object.keys(e).forEach(n=>{"function"!=typeof e[n]&&void 0!==e[n]&&(t[n]=e[n])}),t}}),y=({isAuthenticated:e,countryFromIp:t,countryFromHostName:n,regionFromIp:r})=>{let i=(0,o.Z)({countryFromHostName:n||"",countryFromIp:t||"",regionFromIp:r||"",isAuthenticated:!!e}),l={isAuthenticated:Number(e),countryFromIp:t||"",countryFromHostName:n||"",regionFromIp:r||"",visitedUnauthPages:[],closeupPins:[],completedSearches:[],clickthroughPins:[],downloadedPinsCount:0,savedPins:[],isQUS:0,revisitationState:(0,m.K7)(),daysSinceLastRevisitation:0,isStorageAllowed:Number(i)};if(e||!l.isStorageAllowed)return Object.freeze({...h(l),...l});l.visitedUnauthPages=(0,f.ZP)(),l.closeupPins=(0,_.Z)(),l.completedSearches=p(),l.clickthroughPins=d(),l.downloadedPinsCount=parseInt((0,s.M0)().getItem(a.rN)||0,10),l.savedPins=(0,s.M0)().getItem(a.s1)??[],l.revisitationState=(0,m.iU)();let u=h(l);return l.daysSinceLastRevisitation=u._getDaysSinceLastRevisitation(),u._updateUnauthUserAggregateDefinitions(),Object.freeze({...u,...l})},{Provider:v,get:E}=(0,i.Z)("UnauthUserStateContext");function b(e,t){let{isAuthenticated:n,countryFromIp:r,countryFromHostName:i,isStorageAllowed:o,regionFromIp:l}=e;if(n||!o)return e;switch(t.type){case"UPDATE":break;case"ADD_UNAUTH_COMPLETED_SEARCH":(({query:e,rs:t,scope:n,rg:r})=>{let i=[...p()],o=i.length,l=o?i[0].query:"";if(!o||e!==l){let i=(0,c.Z)({query:e,rs:t,scope:n,rg:r});(0,s.M0)().prependItem(a.ny,i,u.LG)}})(t.payload);break;case"REMOVE_UNAUTH_COMPLETED_SEARCH":(({query:e})=>{let t=[...p()].filter(t=>t.query!==e);(0,s.M0)().setItem(a.ny,t)})(t.payload);break;case"ADD_UNAUTH_CLICKTHROUGH_PIN":(({pinId:e,link:t,imageSignature:n,domain:r})=>{let i=[...d()],o=i.length,l=o?i[0].pinId:"";if(!o||e!==l){let i=(0,c.Z)({pinId:e,link:t,imageSignature:n,domain:r});(0,s.M0)().prependItem(a.Vb,i,u.LG)}})(t.payload);break;default:return e}return y({isAuthenticated:n,countryFromIp:r,countryFromHostName:i,regionFromIp:l})}function T({children:e,initialState:t}){let[n,a]=(0,r.useReducer)(b,t,y);(0,l.Z)(()=>{a({type:"UPDATE"})});let i=(0,r.useMemo)(()=>({unauthUserState:n,unauthUserStateDispatch:a}),[n,a]);return(0,g.jsx)(v,{value:i,children:e})}},501971:function(e,t,n){n.d(t,{K7:()=>s,Oh:()=>c,Vd:()=>u,WT:()=>o,iU:()=>l});var r=n(111330),a=n(753143),i=n(787995);let o=18e5,s=()=>({count:1,time:0,ts:Date.now()}),l=()=>{try{let{count:e,time:t,ts:n}=(0,a.M0)().getItem(r.SI)??{};if("number"==typeof e&&"number"==typeof t&&"number"==typeof n)return{count:e,time:t,ts:n};throw Error("Invalid revisitation data")}catch(e){return s()}},u=e=>{(0,a.M0)().setItem(r.SI,(0,i.Z)(e))};function c(){return l().count>1}},542963:function(e,t,n){n.d(t,{$:()=>s,Z:()=>u});var r=n(111330),a=n(121836),i=n(753143),o=n(238589);let s=2,l=e=>e.length?{pins:e}:null,u=()=>{let e,t=(0,i.M0)(),n=(e=t.accessAllowed?t.getItem(r.s1):o.ZP.getItem(a.w3),e?.pins??[]),u=e=>t.accessAllowed?t.setItem(r.s1,l(e)):o.ZP.setItem(a.w3,l(e)),c=()=>n.length<s;return{pins:n,save:e=>{c()&&u(n.filter(({id:t})=>t!==e.id).concat([e]))},unsave:e=>u(n.filter(({id:t})=>t!==e)),isSaved:e=>n.some(({id:t})=>t===e),clear:()=>u([]),canSaveMore:c}}},469526:function(e,t,n){n.d(t,{B:()=>u,m:()=>l});var r=n(667294),a=n(616550),i=n(729434),o=n(785893);let{Provider:s,getMaybe:l}=(0,i.Z)("NotifDetailRepinContext");function u({children:e}){let[t,n]=(0,r.useState)(Object.freeze({})),[i,l]=(0,r.useState)(!1),[u,c]=(0,r.useState)(!1),d=(0,a.TH)(),p=(0,r.useMemo)(()=>{let e=/^\/pin\/\d+\/repin\/?$/,r=/^\/news_hub\/\d+\/?$/;return{isSaved:e=>!!t[e],save:e=>{u&&n(t=>({...t,[e]:!0}))},reset:()=>{let t=window?.location.pathname||"";r.test(t)||e.test(t)||(n(Object.freeze({})),l(!1),c(!1))},isInNewsHubQuickSaveExpAndNewsHubPage:()=>{let e=d.pathname||"";return r.test(e)&&i},inNewsHubQuickSaveExp:i,setInNotifDetailPage:c,setInNewsHubQuickSaveExp:l}},[t,i,u,d]);return(0,o.jsx)(s,{value:p,children:e})}},979922:function(e,t,n){n.d(t,{BT:()=>U,Du:()=>Z,Fh:()=>k,HY:()=>L,HZ:()=>N,IY:()=>P,Jw:()=>y,Kp:()=>B,L7:()=>r,LT:()=>d,Lj:()=>j,Nw:()=>C,Q_:()=>M,Qc:()=>a,R5:()=>O,RA:()=>R,Tt:()=>S,UF:()=>u,UV:()=>o,VB:()=>E,W1:()=>i,Ws:()=>p,X5:()=>A,Yt:()=>G,ZW:()=>l,cK:()=>b,cy:()=>h,fA:()=>H,fn:()=>I,gm:()=>v,h7:()=>w,k:()=>f,mE:()=>F,o4:()=>_,oL:()=>x,qf:()=>m,tr:()=>c,uD:()=>T,uO:()=>g,vF:()=>s,wJ:()=>D});let r=1,a=2,i="female",o="male",s="unspecified",l="en-US",u="US",c=3,d="Welcome",p="Gender",m="CountryLocale",_="InterestPicker",f="UseCase",g="PinPicker",h="LoadingStep",y="AppInstall",v="NUX_PIN_PICKER_STEP_STATUS",E="NUX_USE_CASE_STEP_STATUS",b={NUX_GENDER_STEP_NAME:p,NUX_COUNTRY_LOCALE_STEP_NAME:m,NUX_INTEREST_PICKER_STEP_NAME:_,NUX_USE_CASE_STEP_NAME:f,NUX_PIN_PICKER_STEP_NAME:g,NUX_LOADING_STEP_NAME:h,NUX_APP_INSTALL_STEP_NAME:y},T=2,w=3,M=6,C=112,R=160,O=60,A=1e3,S=2500,k=1900,D=2e3,N=3,I=5,G=1,P=2,U=3,L=3,Z=5e3,x=250,H=1e10,j=507641,F=300,B=200},932370:function(e,t,n){n.d(t,{W:()=>l,u:()=>s});var r=n(667294),a=n(729434),i=n(785893);let{Provider:o,get:s}=(0,a.Z)("Nux");function l({children:e}){let[t,n]=(0,r.useState)([]),[a,s]=(0,r.useState)({}),l=(0,r.useMemo)(()=>({selectedUseCases:t,setSelectedUseCases:n,selectedPins:a,setSelectedPins:s}),[t,n,a,s]);return(0,i.jsx)(o,{value:l,children:e})}},261228:function(e,t,n){n.d(t,{H5:()=>l,Nq:()=>s,Q_:()=>u,bJ:()=>c});var r=n(575108),a=n(657043),i=n(600861),o=n(979922);function s(e){let{updateUserData:t}=e,n={},s=null;if(t.gender&&[o.W1,o.UV].includes(t.gender)?n.gender=t.gender:t.custom_gender&&(n.custom_gender=t.custom_gender,n.customGender=t.custom_gender,n.gender=o.vF),t.age?n.age=t.age:t.birthdate&&(n.birthdate=t.birthdate),t.locale&&(n.locale=t.locale),t.country&&(n.country=t.country),t.business_vertical&&(n.businessVertical=t.business_vertical),t.business_vertical_other&&(n.businessVerticalOther=t.business_vertical_other),t.number_employees&&(n.numberEmployees=t.number_employees),t.first_name&&(n.firstName=t.first_name),t.last_name&&(n.lastName=t.last_name),t.full_name&&(n.fullName=t.full_name),t.parent_email&&(n.parentEmail=t.parent_email),t.website_url&&(n.websiteUrl=t.website_url),t.listed_website_url&&(n.listedWebsiteUrl=t.listed_website_url),void 0!==t.allow_analytic_cookies&&(n.allow_analytic_cookies=t.allow_analytic_cookies),void 0!==t.allow_analytic_cookies&&(n.allow_marketing_cookies=t.allow_marketing_cookies),void 0!==t.allow_analytic_cookies&&(n.allow_personalization_cookies=t.allow_personalization_cookies),t.advertising_intent||t.business_name||t.account_type||t.business_goals||t.selected_ecommerce_platforms||t.enable_profile_message||t.enable_profile_address){let{account_type:e,advertising_intent:n,business_name:r,business_goals:a,enable_profile_message:i,enable_profile_address:o,selected_ecommerce_platforms:l}=t;s={...n?{advertising_intent:n}:{},...e?{account_type:e}:{},...r?{business_name:r}:{},...a?{business_goals:a}:{},...i?{enable_profile_message:i}:{},...o?{enable_profile_address:o}:{},...l?{selected_ecommerce_platforms:l}:{}}}s&&(n.partner=s,s.business_name&&(n.firstName=s.business_name));let l=r.Z.create("UserSettingsResource",{...t,surface_tag:i.i.NUX}).callUpdate();return async function(e){try{let t=await l;return e({type:"UPDATE_USER_SET",payload:n}),t}catch(e){return Promise.reject(Error((0,a.Z)(e,"message")))}}}function l(e){return{type:"UPDATE_USER_FIRST_HOME_FEED_REQUEST_AFTER_NUX",payload:e}}function u(e,t){return()=>{r.Z.create("UserStateResource",{state:e,value:t}).callCreate()}}function c(e,t=""){return()=>r.Z.create("UpdateFollowedInterestsResource",{referrer:t,updated_interest_follows:e}).callUpdate()}},438556:function(e,t,n){n.d(t,{Q:()=>l,n:()=>s});var r=n(667294),a=n(729434),i=n(785893);let{Provider:o,getMaybe:s}=(0,a.Z)("RepinContext");function l({children:e}){let[t,n]=(0,r.useState)(Object.freeze({})),a=(0,r.useMemo)(()=>({getSavedPinId:e=>t[e],isSaved:e=>!!t[e],save:(e,t)=>n(n=>({...n,[e]:t})),unsave:e=>n(t=>({...t,[e]:null}))}),[t]);return(0,i.jsx)(o,{value:a,children:e})}},996970:function(e,t,n){n.d(t,{Z:()=>o});var r=n(918920),a=n(163404),i=n(831373);let o=()=>(e=>{let t=new Date,n=new Date(new Date().setDate(t.getDate()-r.ZB));return e.filter(e=>"closeup"===e.pageType&&new Date(e.ts)>=n)})((0,i.ZP)()).map(e=>({...e,id:(0,a.Z)(e.path)||""}))},202304:function(e,t,n){n.d(t,{Z:()=>i});var r=n(667294),a=n(603316);function i(e){let t=(0,r.useRef)({kind:"NotOver"}),n=(0,r.useCallback)(()=>{"NotOver"===t.current.kind&&(t.current={kind:"OverButNotClicked",mousedOverAt:Date.now()})},[]),i=(0,r.useCallback)(()=>{"OverButNotClicked"===t.current.kind&&((0,a.LY)("entrypointRouter.timeOnLinkUntilMouseOut",Date.now()-t.current.mousedOverAt,{sampleRate:.1,tags:{key:e}}),(0,a.nP)("entrypointRouter.mouseOverResult",{sampleRate:.1,tags:{key:e,outcome:"MouseOut"}})),t.current={kind:"NotOver"}},[e]);return{onClick:(0,r.useCallback)(()=>{"OverButNotClicked"===t.current.kind&&((0,a.LY)("entrypointRouter.timeOnLinkUntilClick",Date.now()-t.current.mousedOverAt,{sampleRate:.1,tags:{key:e}}),(0,a.nP)("entrypointRouter.mouseOverResult",{sampleRate:.1,tags:{key:e,outcome:"Click"}}),t.current={kind:"OverAndHasClicked"})},[e]),onMouseEnter:n,onMouseLeave:i}}},987563:function(e,t,n){(0,n(512395).kr)()},756334:function(e,t,n){function r({children:e,metricName:t}){let n=void 0;return n&&n.serverRenderTimings&&!n.serverRenderTimings[t]&&(n.serverRenderTimings[t]=Date.now()),e}n.d(t,{Z:()=>r}),n(512395),n(987563)}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/77218-9eb1bf4d889e4ca3.mjs.map