(self.modernJsonp=self.modernJsonp||[]).push([["71333"],{17314:function(e,t,n){n.d(t,{Z:()=>c});var i,s,a=n(813653),o=n(831423),l=0,r=0;let c=function(e,t,n){var c=t&&n||0,u=t||Array(16),d=(e=e||{}).node||i,_=void 0!==e.clockseq?e.clockseq:s;if(null==d||null==_){var p=e.random||(e.rng||a.Z)();null==d&&(d=i=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==_&&(_=s=(p[6]<<8|p[7])&16383)}var h=void 0!==e.msecs?e.msecs:Date.now(),m=void 0!==e.nsecs?e.nsecs:r+1,g=h-l+(m-r)/1e4;if(g<0&&void 0===e.clockseq&&(_=_+1&16383),(g<0||h>l)&&void 0===e.nsecs&&(m=0),m>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");l=h,r=m,s=_;var f=((0xfffffff&(h+=122192928e5))*1e4+m)%0x100000000;u[c++]=f>>>24&255,u[c++]=f>>>16&255,u[c++]=f>>>8&255,u[c++]=255&f;var b=h/0x100000000*1e4&0xfffffff;u[c++]=b>>>8&255,u[c++]=255&b,u[c++]=b>>>24&15|16,u[c++]=b>>>16&255,u[c++]=_>>>8|128,u[c++]=255&_;for(var y=0;y<6;++y)u[c+y]=d[y];return t||(0,o.Z)(u)}},516829:function(e,t,n){var i,s;n.r(t),n.d(t,{default:()=>o});let a={fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BadgeManagerMutation",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"v3DeleteBadgeMutation",plural:!1,selections:[i={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"data",plural:!1,selections:[s={alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null}],storageKey:null}],type:"V3DeleteBadge",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"BadgeManagerMutation",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"v3DeleteBadgeMutation",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"data",plural:!1,selections:[s,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"V3DeleteBadge",abstractKey:null}],storageKey:null}]},params:{id:"b02365b27ce69f648cde539398a9bef3c506f5fcd3fbadc974256de04ec86078",metadata:{},name:"BadgeManagerMutation",operationKind:"mutation",text:null}};a.hash="d6f840c748407c7aa62123d5beac3239";let o=a},121366:function(e,t,n){n.d(t,{Z:()=>s});var i=n(667016);async function s(e,t){let{api:n}=(0,i.t)(),s=(0,i.u)();try{s.attempt("setMultipleBizEntityPropertiesFullUpdate",t);let i=new Date().getTime(),a=await n.put("/ads/v4/business_entities",e,!1);return s.success("setMultipleBizEntityPropertiesFullUpdate",t),s.latency("setMultipleBizEntityPropertiesFullUpdate",new Date().getTime()-i,t),a}catch(e){throw s.failure("setMultipleBizEntityPropertiesFullUpdate",t),e}}(0,i.u)()},35794:function(e,t,n){n.d(t,{b:()=>r,m:()=>l});var i=n(667294),s=n(729434),a=n(785893);let{Provider:o,get:l}=(0,s.Z)("LensContext");function r({children:e}){let[t,n]=(0,i.useState)(),[s,l]=(0,i.useState)(),[r,c]=(0,i.useState)([]),[u,d]=(0,i.useState)(),[_,p]=(0,i.useState)(),[h,m]=(0,i.useState)(!1);return(0,a.jsx)(o,{value:{heroImageUrl:s,historyData:r,image:t,imageData:_,isLensModalOpen:h,setHeroImageUrl:l,setHistoryData:c,setImage:n,setImageData:p,setIsLensModalOpen:m,setUpdatedCropArea:d,updatedCropArea:u},children:e})}},763208:function(e,t,n){n.d(t,{Z:()=>s});var i=n(821342);let s=()=>{let e=(0,i.Z)();return!!e.isAuth&&e.isPartner}},872799:function(e,t,n){n.d(t,{Oz:()=>i,mo:()=>o,nt:()=>a,v8:()=>s});let i={BUSINESS_ACCOUNT:"BUSINESS_ACCOUNT",BUSINESS_HIERARCHY:"BUSINESS_HIERARCHY",USER_ACCOUNT:"USER",AD_ACCOUNT:"AD_ACCOUNT",PROFILE:"PROFILE",CATALOG:"CATALOG"},s="BUSINESS_PANEL",a="ASSET_PANEL",o=500},184954:function(e,t,n){n.d(t,{lG:()=>z,FE:()=>E,NM:()=>I});var i=n(667294),s=n(616550),a=n(763208),o=n(414071),l=n(821342),r=n(603316),c=n(581722),u=n(407633),d=n(442279),_=n(514058);let p=(0,d.createSelector)(_.Z,({viewerIsProfileOwnerOrProfileManager:e})=>e??void 0);var h=n(448505),m=n(7872),g=n(217459),f=n(872799),b=n(980787),y=n(729434),v=n(506662),A=n(579275),w=n(274320),x=n(378888),P=n(358396),S=n(728759),k=n(785893);let{Provider:C,get:I}=(0,y.Z)("AccountSwitcherContext"),z=e=>e.search&&(0,x.mB)(e.search).advertiserId,E=({children:e})=>{let t=(0,s.TH)(),{params:{userBizId:n,businessHierarchyId:d,advertiserId:_,username:y}}=(0,s.$B)(),{catalogId:x}=(0,S.Z)(),I=z(t),E=(0,l.Z)(),{viewerIsProfileOwnerOrProfileManagerData:Z,previousIsViewerProfileOwnerOrProfileManager:j}=(()=>{let e=(0,l.Z)(),t=(0,i.useRef)(e);t.current=e;let n=(0,c.I0)(),s=(0,h.Z)(),a=(0,i.useRef)(s);a.current=s;let r=(0,c.v9)(p),d=r?.data||void 0,_=(0,i.useRef)(d);_.current=d,(0,i.useEffect)(()=>{(async()=>{if(t.current.isAuth&&void 0===r.data){let e=await (0,o.bG)({user_id:t.current.id});if(void 0!==e&&void 0===_.current){let i=(0,m.D3)(t.current,e?.id??"",a)||t.current.isAuth&&t.current.username===e?.username;n((0,u.Z)(!!i))}}})()},[t,_,n,a,r]);let f=(0,g.rc)(d);return{viewerIsProfileOwnerOrProfileManagerData:d,previousIsViewerProfileOwnerOrProfileManager:f}})(),{checkExperiment:T}=(0,w.r)(),N=T("web_m10n_business_access_catalogs").anyEnabled,[L,R]=(0,i.useState)(""),[U,O]=(0,i.useState)(null),[M,B]=(0,i.useState)(!1),[D,V]=(0,i.useState)(null),$=new URLSearchParams(t.search),[F,H]=(0,i.useState)($.has("actingBusinessId")?null:{id:E.isAuth&&E.id||"",name:E.isAuth&&E.fullName||"",img:E.isAuth&&E.imageMediumUrl||""}),[X,W]=(0,i.useState)(!1),G=(0,a.Z)(),{logContextEvent:J}=(0,b.u)(),{accountSwitcherConfig:q,setConfig:Y}=(()=>{let e=(0,l.Z)(),t=(0,a.Z)(),[n,s]=(0,i.useState)({isReady:!1}),c=(0,i.useCallback)(async({entityId:e,actingBusinessId:n,favorites:i})=>{t&&(await (0,o.yo)({entityId:e,actingBusinessId:n,favorites:i}),s(e=>{let t={...e,actingBusinessId:n};return i&&(t.favoriteAdAccounts={favoriteAdAccountsMap:{...e.favoriteAdAccounts?.favoriteAdAccountsMap||{},[i.actingBusinessId]:{advertiserId:i.adAccounts}}}),t}))},[t]);return(0,i.useEffect)(()=>{t&&e.isAuth&&!n.isReady&&(async()=>{let t=!1;try{let t=await (0,o.SF)({entityId:e.id});s(e=>({...e,...t}))}catch{t=!0}finally{(0,r.nP)("globalAccountSwitcher.getFavoriteAdAccounts",{sampleRate:1,tags:{businessId:e.id,hasError:t}}),s(e=>({...e,isReady:!0}))}})()},[n.isReady,t,e]),{accountSwitcherConfig:n,setConfig:c}})();(0,i.useEffect)(()=>{d?R(d):R("")},[d]);let K=(0,i.useCallback)(async({id:e,username:t})=>{let n=await (0,o.bG)({user_id:e,username:t});n&&V({type:e?f.Oz.BUSINESS_ACCOUNT:f.Oz.PROFILE,id:e||n.id,name:n.full_name,img:n.image_medium_url,username:t,ownerImg:n.image_medium_url,ownerName:n.full_name,actingBusinessFullName:F?.name||n.full_name}),W(!1)},[F]),Q=(0,g.rc)(y);(0,i.useEffect)(()=>{let e=E.isAuth?E.username:void 0;(0,A.Z)(t)&&D&&Q!==y&&y===e&&(K({username:e}),H({id:E.isAuth&&E.id||"",name:E.isAuth&&E.fullName||"",img:E.isAuth&&E.imageMediumUrl||""}),O({type:f.nt,id:E.isAuth?E.id:void 0}))},[t,Q,K,D,y,E]),(0,i.useEffect)(()=>{let e=async({businessId:e,assetId:n})=>{if(!e)return void W(!1);let i=N&&(0,v.Bg)(t)?"CATALOG":"AD_ACCOUNT";try{let e={asset:{name:""},type:i};if(E.isAuth){let{data:{data:t={[n]:e}}={}}=await (0,P.pI)({businessId:F?.id||E.id,assetIds:[n],resourceType:i})||{},{asset:s,type:a}=t[n]||e;V({id:n,name:"CATALOG"===i?t[n].owner.full_name:s.name,img:t[n].owner.image_medium_url,type:a,ownerImg:t[n].owner.image_medium_url,ownerName:t[n].owner.full_name,actingBusinessFullName:F?.name||t[n].owner.full_name})}}catch{V({id:E.isAuth&&E.id||"",name:E.isAuth&&E.fullName||"",img:E.isAuth&&E.imageMediumUrl||"",type:f.Oz.BUSINESS_ACCOUNT,ownerImg:E.isAuth&&E.imageMediumUrl||"",ownerName:E.isAuth&&E.fullName||"",actingBusinessFullName:E.isAuth&&E.fullName||""})}W(!1)},i=async({id:e})=>{let t=await (0,o.p)({hierarchyId:e});V({id:e,name:t?.data?t.data.name:"",img:t?.data?t.data.img_medium_url:"",type:f.Oz.BUSINESS_HIERARCHY,ownerImg:t?.data?t.data.img_medium_url:"",ownerName:t?.data?t.data.name:"",actingBusinessFullName:t?.data?t.data.name:""}),W(!1)};if(E.isAuth&&G){let s=D&&D.username&&D.username!==y,a=!0===Z&&Z!==j;if((!D||s||a)&&!X&&F){let s=(0,v.z6)(t)||(0,v.h3)(t),a=_||!!I&&!s||(0,v.Bg)(t)&&N;W(!0),d?i({id:d}):n?K({id:n}):(0,A.Z)(t)&&y&&Z?K({username:y}):a?e({businessId:E.id,assetId:_||I||x||""}):D&&D.id===E.id||(V({type:f.Oz.BUSINESS_ACCOUNT,id:E.id||"",name:E.fullName||"",img:E.imageMediumUrl||"",ownerImg:E.imageMediumUrl||"",ownerName:E.fullName||"",actingBusinessFullName:E.fullName||""}),W(!1))}}},[D,E,d,n,y,_,I,F,G,t,K,X,Z,j,x,N]);let ee=(0,i.useMemo)(()=>({activePanel:U,selectedHierarchyId:L,switcherOpen:M,openAccountSwitcher:()=>{if(J({event_type:101,view_type:608,component:14346}),!U)if((0,v.z6)(t))O({type:f.v8});else{let e=new URLSearchParams(t.search).get("actingBusinessId");O({type:f.nt,id:e??F?.id})}B(!0)},closeAccountSwitcher:()=>{O(D&&!(0,v.z6)(t)?{type:f.nt,id:F?.id}:{type:f.v8}),B(!1)},openAssetPanel:e=>{O({type:f.nt,id:e})},closeAssetPanel:()=>{O(D&&!(0,v.z6)(t)?{type:f.nt,id:F?.id}:{type:f.v8})},activateBusinessPanel:()=>{O({type:f.v8})},actingBusiness:F,selectedAccount:D,setSelectedAccount:V,setActingBusiness:H,accountSwitcherConfig:q,setConfig:Y}),[U,L,M,F,D,q,Y,J,t]);return(0,k.jsx)(C,{value:ee,children:e})}},77168:function(e,t,n){n.d(t,{H:()=>b,g:()=>f});var i=n(667294),s=n(763208),a=n(872799),o=n(414071),l=n(785873),r=n(86295),c=n(789877),u=n(729434),d=n(686319),_=n(821342),p=n(805205),h=n(572257),m=n(785893);let{Provider:g,get:f}=(0,u.Z)("BusinessHierarchyContext"),b=({children:e})=>{let[t,n]=(0,i.useState)([]),[u,f]=(0,i.useState)([]),[b,y]=(0,i.useState)(!1),[v,A]=(0,i.useState)(!1),[w,x]=(0,i.useState)(null),[P,S]=(0,i.useState)(null),[k,C]=(0,i.useState)([]),[I,z]=(0,i.useState)({}),E=(0,h.Z)(),Z=(0,i.useRef)(E),j=(0,_.Z)(),T=(0,s.Z)(),N=(0,i.useRef)({}),L=(0,i.useCallback)((e,t)=>{let n;t===a.Oz.BUSINESS_HIERARCHY?n=(0,c.Z)(r.Q6.DASHBOARD,"","",e):t===a.Oz.BUSINESS_ACCOUNT&&(n=(0,c.Z)(r.Q6.DASHBOARD,e));let i=(0,p.Z)({site:"www",path:n});(0,l.Z)(i)},[]),R=j.isAuth,{id:U="",username:O="",email:M="",fullName:B="",imageSmallUrl:D="",imageMediumUrl:V="",isAuth:$}=j.isAuth?j:{id:"",username:"",email:"",fullName:"",imageSmallUrl:"",imageMediumUrl:""},F=(0,i.useCallback)(async e=>{if(!T)return[];if(A(!0),N.current[e])return A(!1),N.current[e];{let{data:t}=(await (0,d.Z)({url:"ads/v4/business_access/business_hierarchies/",data:{search_by:["FULL_NAME","BUSINESS_ID"],search_value:e}})).resource_response,n=t&&t.map(e=>(e.children&&(e.children=e.children.map(e=>(e.user.entity_type=a.Oz.USER_ACCOUNT,e))),e))||[],i=/^\d+$/.test(e),s=RegExp(e.toLowerCase(),"g"),l=[];P||S(l=await Z.current());let r=(P??l).filter(t=>i?t.id.includes(e):t.user.full_name.toLowerCase().match(s)).map(o.IT),c=[...n.map(e=>e.id),...r.map(e=>e.id)];return R&&(i?(U||"").includes(e):(B||"").toLowerCase().match(s))&&c.push(U),N.current[e]=c,A(!1),c}},[T,Z,R,U,B,P]),H=async(e,t)=>{if((!$||!T||P)&&!e)return;y(!0);let i=[];try{let{data:e}=(await (0,d.Z)({url:"ads/v4/business_access/business_hierarchies/"})).resource_response;i=e&&e.map(e=>(e.children&&(e.children=e.children.map(e=>(e.user.entity_type=a.Oz.USER_ACCOUNT,e))),e))||[],n(i)}catch{n([])}try{let n=[];(!P||e)&&(n=await Z.current(),f(n.filter(e=>t&&P&&!P.some(({id:t})=>t===e.id)).map(e=>e.user.full_name)),S(n));let s=e?n:P??n;C(s.map(o.IT)),z(s.reduce((e,t)=>(e[t.id]=t.business_roles||[],e),{})),x((0,o.WP)({id:U,username:O,email:M,fullName:B,imageSmallUrl:D,imageMediumUrl:V})),N.current[""]=[...i.map(e=>e.id),...s.map(o.IT).map(e=>e.id),U],y(!1)}catch{y(!1)}},X=(0,i.useCallback)(H,[U,O,M,B,D,V,$,T,P]),W=(0,i.useCallback)(e=>t.some(t=>t.id===e||"children"in t&&t.children.some(t=>t.id===e||t.user.id===e)),[t]),G=(0,i.useCallback)(e=>t.map(e=>"BUSINESS_HIERARCHY"===e.entity_type?e:null).find(t=>!!t&&t.children.some(t=>t.user.id===e)),[t]),J=(0,i.useCallback)(()=>{f([])},[f]),q=(0,i.useMemo)(()=>({businessHierarchies:[...w?.id&&!W(w.id)?[w]:[],...t,...k.filter(e=>!W(e.id))],switchAccount:L,searchAccounts:F,loadingAccounts:b,isSearchingAccounts:v,fetchData:X,getParentHierarchyForIdIfExists:G,viewerRolesOfEachEmployer:I,tooltipEmployers:u,hideTooltip:J}),[t,L,F,k,b,v,w,X,W,G,I,u,J]);return(0,m.jsx)(g,{value:q,children:e})}},414071:function(e,t,n){n.d(t,{IT:()=>c,SF:()=>p,WP:()=>u,bG:()=>_,p:()=>d,yo:()=>h});var i=n(473354),s=n(717805),a=n(575108),o=n(872799),l=n(686319),r=n(680202);let c=e=>({id:e.id,entity_type:o.Oz.BUSINESS_ACCOUNT,requires_mfa_for_roles:e.requires_mfa_for_roles,user:{id:e.user.id,entity_type:o.Oz.USER_ACCOUNT,username:e.user.username,email:e.user.email,full_name:e.user.full_name,image_small_url:e.user.image_small_url,image_medium_url:e.user.image_medium_url}}),u=e=>({id:e.id,entity_type:o.Oz.BUSINESS_ACCOUNT,user:{id:e.id,entity_type:o.Oz.USER_ACCOUNT,username:e.username,email:e.email,full_name:e.fullName,image_small_url:e.imageSmallUrl,image_medium_url:e.imageMediumUrl}}),d=async({hierarchyId:e})=>(await (0,l.Z)({url:`ads/v4/business_access/business_hierarchy/${e}/`})).resource_response,_=async({user_id:e,username:t})=>{if(!t&&!e)return null;let{resource_response:{data:n}}=await a.Z.create("UserResource",{user_id:e,username:t}).callGet();return n},p=async({entityId:e})=>{let t=(await (0,i.Z)([{entity_type:"BIZ_USER",entity_id:e,property_keys:["GLOBAL_ACCOUNT_SWITCHER_CONFIG"]}]))[0];return t&&t.properties?t.properties.GLOBAL_ACCOUNT_SWITCHER_CONFIG:{}},h=async({entityId:e,actingBusinessId:t,favorites:n})=>{let i={};(0,r.k)(t)||(i.actingBusinessId=t),n&&(i.favoriteAdAccounts={favoriteAdAccountsMap:{[n.actingBusinessId]:{advertiserId:n.adAccounts}}}),Object.keys(i).length>0&&await (0,s.Z)([{entity_type:"BIZ_USER",entity_id:e,properties:{GLOBAL_ACCOUNT_SWITCHER_CONFIG:i}}])}},855860:function(e,t,n){n.d(t,{r:()=>b,Z:()=>f});var i=n(667294),s=n(473354),a=n(121366),o=n(686319),l=n(667016);let r=async(e,t)=>{let{statsLog:n}=(0,l.t)();try{let i=new Date,s=await (0,o.Z)({url:"/ads/v4/business_entities",data:e,method:"POST"}),a=new Date;return n&&(n.success("getMultipleBizEntityProperties",t),n.latency("getMultipleBizEntityProperties",a.getTime()-i.getTime(),t)),s.resource_response.data}catch(e){throw n&&n.failure("getMultipleBizEntityProperties",t),e}},c=async(e,t,n="PUT")=>{let{statsLog:i}=(0,l.t)();try{let s=new Date,a=await (0,o.Z)({url:"/ads/v4/business_entities",data:e,method:n}),l=new Date;return i&&(i.success("setMultipleBizEntityPropertiesFullUpdate",t),i.latency("setMultipleBizEntityPropertiesFullUpdate",l.getTime()-s.getTime(),t)),a.resource_response.data}catch(e){throw i&&i.failure("setMultipleBizEntityPropertiesFullUpdate",t),e}};var u=n(729434),d=n(657043),_=n(821342),p=n(274320),h=n(603316),m=n(785893);let{Provider:g,get:f}=(0,u.Z)("CustomShortcutsContext"),b=({children:e})=>{let t=(0,_.Z)(),n=t.isAuth?t.id:void 0,o=t.isAuth&&t.isPartner,l=t.isAuth&&t.isLimitedLogin,u=(0,p.r)(),[f,b]=(0,i.useState)({}),y=(0,i.useCallback)(async()=>{let{anyEnabled:e}=u.checkExperiment("aid_exp_use_fetch_api_in_custom_shortcut_context"),t=Object.freeze(["business.pinterest.com","create.pinterest.com","about.pinterest.com","support.pinterest.com","developers.pinterest.com","newsroom.pinterest.com"]).every(e=>!window.location.href?.includes(e));if(n&&o&&!l&&t)try{let t;t=e?r:s.Z;let i=(await t([{entity_id:n,entity_type:"BIZ_USER",property_keys:["NAVBAR_CONFIG"]}]))[0];if(!(i&&i.properties))return;let a=i.properties.NAVBAR_CONFIG;b(a?.customShortcuts||{})}catch(e){(0,h.nP)("pro_partner_header.dynamic_menu.shortcuts.get_error",{sampleRate:1,tags:{entity_id:n,error:(0,d.Z)(e,"message")}})}},[n,o,l,u]),v=(0,i.useCallback)(async e=>{let{anyEnabled:t}=u.checkExperiment("aid_exp_use_fetch_api_in_custom_shortcut_context");if(!n)return(0,h.nP)("pro_partner_header.dynamic_menu.shortcuts.upsert_error",{sampleRate:1,tags:{entity_id:n,error:"Auth_Error"}}),{error:"Auth_Error"};try{let i;i=t?c:a.Z;return await i([{entity_id:n,entity_type:"BIZ_USER",properties:{NAVBAR_CONFIG:{customShortcuts:e}}}]),y(),{error:null}}catch(e){return(0,h.nP)("pro_partner_header.dynamic_menu.shortcuts.upsert_error",{sampleRate:1,tags:{entity_id:n,error:(0,d.Z)(e,"message")}}),{error:"Upsert_Error"}}},[n,u,y]);(0,i.useEffect)(()=>{y()},[y]);let A=(0,i.useMemo)(()=>({shortcuts:f,upsertShortcuts:v}),[f,v]);return(0,m.jsx)(g,{value:A,children:e})}},138:function(e,t,n){n.d(t,{Z:()=>i});function i(e){return e?"/pin-creation-tool/":"/idea-pin-builder/"}},509207:function(e,t,n){n.d(t,{Z:()=>i});let i='-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Helvetica,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","ヒラギノ角ゴ Pro W3","Hiragino Kaku Gothic Pro",メイリオ,Meiryo,"ＭＳ Ｐゴシック",Arial,sans-serif'},23923:function(e,t,n){n.d(t,{Z:()=>U});var i=n(20256),s=n(980787),a=n(679422),o=n(821342),l=n(734308),r=n(667294),c=n(111330),u=n(525839),d=n(753143),_=n(785893);function p({paddingY:e=0}){let t=(0,u.ZP)(),n=(0,d.M0)(),a=n.getItem(c.z),[o,l]=(0,r.useState)(a),{logContextEvent:p}=(0,s.u)(),h=(0,r.useCallback)(()=>{n.setItem(c.z,!0),p({event_type:16446}),l(!0)},[p,n]);return o?null:(0,_.jsx)(i.xu,{paddingY:e,children:(0,_.jsx)(i.he,{iconAccessibilityLabel:t._('Claim external accounts', 'header.accountsOptionsMenu.contentClaimingLink', 'menu item linking to the account claiming section in the settings'),message:t._('You can now link your Instagram and other external accounts to Pinterest.', 'header.accountsOptionsMenu.accountClaimingBannerMessage', 'banner message for account claiming'),onDismiss:h,type:"info"})})}var h=n(780134);function m(){let e=(0,u.ZP)();return{addAccount:{value:"add-account",label:e._('Add Pinterest account', 'header.accountsOptionsMenu.addSecondaryAccountButton', 'Short text on the button that allows a user to add a new account or log in to another Pinterest account')},businessAccess:{value:"business-access",label:e._('Business Access', 'Link to business Access Landing Page', 'A button that links to business access')},businessAccount:e=>({value:`business-account-${e.id}`,label:e.username}),accountClaiming:{value:"account-claiming",label:e._('Claimed external accounts', 'header.accountsOptionsMenu.contentClaimingLink', 'menu item linking to the account claiming section in the settings')},contentClaiming:{value:"content-claiming",label:e._('Content claiming portal', 'header.accountsOptionsMenu.contentManagementPortal', 'menu item linking to the content management portal')},convertToBusiness:{value:"convert-to-business",label:e._('Convert to business', 'header.accountsOptionsMenu.addAccountButton', 'Short upsell text on the button that allows a user to convert to a Pinterest business account')},currentAccount:{value:"current-account",label:e._('Current account', 'SwitchAccountsList.CurrentlyInItem', 'The account the user is currently logged into')},failedAccount:{value:"failed-account",label:e._('Failed to log into this account', 'header.accountsOptionsMenu.failedAccountItem', 'Explanation for which account the user could not log into')},getHelp:{value:"get-help",label:e._('Help center', 'header.accountsOptionsMenu.helpCenter.label', 'menu item linking to the help center')},homefeedTuner:{value:"homefeed-tuner",label:e._('Home feed tuner', 'header.accountsOptionsMenu.homefeedTuner.label', 'menu item linking to home feed editor')},importContent:{value:"import-content",label:e._('Import content', 'header.accountsOptionsMenu.importContentLink', 'menu item linking to the import content section in the settings')},installApp:e=>({value:"install-app",label:e}),lbaAccountSwitch:e=>({value:`lba-account-switch-${e.id}`,label:e.username}),logOut:{value:"log-out",label:e._('Log out', 'header.accountsOptionsMenu.logout', 'menu item that logs you out of your Pinterest account')},parentAccount:e=>({value:`parent-account-${e.id}`,label:e.username}),termsOfService:{value:"tos-policy",label:e._('Terms of service', 'header.accountsOptionsMenu.termsOfService.label', 'menu item linking to our terms of service')},privacyPolicy:{value:"privacy-policy",label:e._('Privacy policy', 'header.accountsOptionsMenu.privacyPolicy.label', 'menu item linking to our privacy policy')},reportsAndViolationsCenter:{value:"reports-and-violations-center",label:e._('Reports and violations center', 'header.accountsOptionsMenu.reportsAndViolationsCenter', 'menu item linked to the reports and violations center')},reportBug:{value:"report-bug",label:e._('Report a bug', 'header.accountsOptionsMenu.reportBug', 'menu item to show employee-only report bug modal')},settings:{value:"settings",label:e._('Settings', 'header.accountsOptionsMenu.settings', 'menu item linking to your settings')},settingsPrivacy:{value:"settingsPrivacy",label:e._('Your privacy rights', 'header.accountsOptionsMenu.settingsPrivacy.label', 'menu item linking to privacy settings')},adsSupport:{value:"ads-support",label:e._('Ads support', 'header.accountsOptionsMenu.adsSupport', 'menu item linking to ads support')},requestFeature:{value:"request-a-feature",label:e._('Request a feature', 'header.accountsOptionsMenu.requestAFeature', 'menu item linking to request a feature page in help center')},pinterestTvStudio:{value:"pinterest-tv-studio",label:e._('Pinterest TV Studio', 'Link to Pinterest Tv Creator Studio', 'a link menu item that links to creator stuido')},betaTester:{value:"be-a-beta-tester",label:e._('Be a beta tester', 'header.accountsOptionsMenu.beBetaTesterProgram', 'A link to Pinterest Beta Tester program')},teenSafetyResources:{value:"teen-safety-resources",label:e._('Teen safety resources', 'header.accountsOptionsMenu.teenSafetyResources', 'Menu item linkin the user to the help center for teen resources page')}}}var g=n(699666),f=n(646924),b=n(538281),y=n(738827),v=n(886981),A=n(694955),w=n(483180),x=n(252440),P=n(785873),S=n(521009),k=n(993279),C=n(230117),I=n(473728),z=n(146621);let E=["chrome","windows"];var Z=n(901971);function j({failedAccount:e,handleReauthAccount:t,handleRemoveUnauthAccount:n}){let s=(0,u.ZP)();return(0,_.jsxs)(r.Fragment,{children:[(0,_.jsx)(i.xu,{marginTop:4,children:(0,_.jsx)(i.zx,{color:"red",fullWidth:!0,onClick:t,text:s._('Log in again', 'header.accountsOptionsMenu.failedAccountLoginButton', 'Text on button allowing user to log into an account after failing to switch to that account')})}),(0,_.jsx)(i.xu,{marginTop:3,children:(0,_.jsx)(i.zx,{fullWidth:!0,onClick:()=>n(e.id),text:s._('Remove account', 'header.accountsOptionsMenu.failedAccountRemoveButton', 'Text on button allowing user to remove an account from their account switcher after failing to switch to it')})})]})}var T=n(274320),N=n(817618),L=n(244529);let R=new i.Ry(1e3);function U({anchor:e,onDismiss:t,advertiser:n,showAccountSwitcher:c,showAdsSupportOption:d,showMoreOptions:U=!0,showSettingsAndSupport:O,isWwwSite:M,idealDirection:B="down",dropdownId:D="HeaderAccountOptionsFlyout",zIndex:V=R}){let $=(0,u.ZP)(),{checkExperiment:F}=(0,T.r)(),{failedAccount:H,handleReauthAccount:X,handleRemoveUnauthAccount:W}=(0,f.Z)(t,M),G=m(),{enabled:J}=(0,L.Z)(),{anyEnabled:q}=F("web_biz_import_tab"),{currentlyIn:Y,yourAccount:K,moreOptions:Q,settingsAndSupport:ee}=function({onDismiss:e,handleFocus:t,advertiser:n,showAdsSupportOption:c,isImportContentEnabled:d,isWwwSite:j,isVerticalNavEnabled:T}){let N=(0,o.Z)(),L=(0,u.ZP)(),{logContextEvent:R}=(0,s.u)(),{isLoaded:U,data:O}=(0,v.Z)({name:"ApiResource",options:{url:"/v3/users/me/",data:{fields:"user.content_claiming_access"}}}),{isLoaded:M,data:B}=(0,v.Z)({name:"ApiResource",options:{url:"/v3/users/settings/"}}),D=!!B?.connected_to_instagram,{content_claiming_access:V=!1}=O||{},{handleShowReportBugModal:$}=(0,Z.P)(),F=(0,g.Z)(),H=function(){let e=(0,u.ZP)(),t=(0,r.useContext)(z.Z),n=(0,k.kM)(window,t),i=(0,S.Z)(),s=e=>{i({component:247,element:e,event_type:101})},a=(0,I.Z)(e._('Install the {{appName}} app', 'header.accountsOptionsMenu.installApp', 'menu item linking app that can be installed'),{appName:(0,C.Z)(n)});return E.includes(n)?{onClick:()=>{if("windows"===n)s(11409),(0,P.Z)(`${A.TMP}&cid=flyout_cta`,!0);else if("chrome"===n&&t){let e=t();e&&(s(11410),e.prompt())}},text:a}:null}(),X=N.isAuth&&!!N.isEmployee,W=!!N.isAuth&&N.isPartner,G=N.isAuth&&!!N.teenSafetyOptionsUrl,J=!!N.isAuth&&!N.isLimitedLogin,q=N.isAuth?N.id:void 0,Y=(0,a.Z)(),{fetchedUserAccounts:K,handleAccountRepClick:Q,handleAddSecondaryAccount:ee,handleClick:et,handleLinkedAccountSwitch:en,handleUnlockBusinessTools:ei,isLoading:es,showUnlockBusinessTools:ea}=(0,f.Z)(e,j),eo=m(),el=K.filter(e=>!e.partner&&!(e.owners||[]).length||e.partner&&!e.partner.isLinkedBusiness),er=K.find(e=>e.id===(N.isAuth&&N.id)),ec=N.isAuth&&N.partner?.is_linked_business;ec&&(el=el.sort(e=>er?.owners?.some(t=>t.id===e.id)?-1:1));let eu=es&&(0,_.jsx)(b.Z,{}),ed=er?.businesses?.length?er.businesses.map(e=>q!==e.id&&(0,_.jsx)(i.Lt.Item,{dataTestId:"lba-account-switch-option",onSelect:()=>en(e,er.id),option:eo.lbaAccountSwitch(e),children:(0,_.jsx)(h.Z,{user:e},e.id)},e.id)):null,e_=el.map(e=>e.id!==q?[(0,_.jsx)(i.Lt.Item,{onSelect:()=>Q(e),option:eo.parentAccount(e),children:(0,_.jsx)(h.Z,{isCurrentAccount:q===e.id,user:e})},e.id),...e?.businesses?.length?e.businesses.map(t=>q!==t.id&&(0,_.jsx)(i.Lt.Item,{dataTestId:"lba-account-switch-option",onSelect:()=>en(t,e.id),option:eo.businessAccount(t),children:(0,_.jsx)(h.Z,{user:t},t.id)},t.id)):[]]:null),ep=j&&(0,_.jsx)(i.Lt.Link,{dataTestId:"header-menu-add-account",href:"/add-account",onClick:ee,option:eo.addAccount}),eh=(0,_.jsx)(i.Lt.Link,{dataTestId:"header-menu-add-account",href:"/add-account",onClick:ee,option:eo.addAccount}),em=ea&&(0,_.jsx)(i.Lt.Link,{dataTestId:"header-menu-business-account",href:N.isAuth?"https://www.pinterest.com/convert-business":`${A.KDH}?utm_source=pinterest&utm_medium=settings&utm_campaign=convert_settings`,onClick:ei,option:eo.convertToBusiness}),eg=(0,_.jsx)(i.Lt.Link,{href:A.zXf,onClick:({event:e})=>{e.preventDefault(),et(15983),t()},option:eo.accountClaiming}),ef=U&&V&&(0,_.jsx)(i.Lt.Link,{href:"/content-claiming",onClick:()=>{et(13606),t()},option:eo.contentClaiming}),eb=d?(0,_.jsx)(i.Lt.Link,{href:A.RMT,onClick:({event:e})=>{e.preventDefault(),et(18167),t()},option:eo.importContent}):null,ey=X&&(0,_.jsx)(i.Lt.Item,{onSelect:()=>{$(),et(13607),e()},option:eo.reportBug}),ev=(0,_.jsx)(i.Lt.Link,{dataTestId:"header-menu-options-settings",href:J?`https://${(0,l.Z)()}/settings`:"",onClick:({event:e})=>{if(Y){e.stopPropagation(),Y();return}et(247),t()},option:eo.settings}),eA=(0,_.jsx)(i.Lt.Link,{href:J?"/edit":"",onClick:({event:e})=>{if(Y){e.stopPropagation(),Y();return}et(11345),t()},option:eo.homefeedTuner},"header-menu-options-homefeed-tuner"),ew=!W&&H?(0,_.jsx)(i.Lt.Item,{onSelect:()=>{H.onClick(),e()},option:eo.installApp(H.text)}):null,ex=(0,_.jsx)(i.Lt.Link,{dataTestId:"header-menu-options-privacy",href:J?`https://${(0,l.Z)()}/settings/privacy`:"",onClick:({event:e})=>{if(Y){e.stopPropagation(),Y();return}et(13334),t()},option:eo.settingsPrivacy}),eP=(0,_.jsx)(i.Lt.Link,{href:J?"/reports-and-violations":"",onClick:({event:e})=>{if(Y){e.stopPropagation(),Y();return}et(14618),t()},option:eo.reportsAndViolationsCenter}),eS=G?(0,_.jsx)(i.Lt.Link,{href:N.teenSafetyOptionsUrl??"",iconEnd:"visit",onClick:()=>{R({event_type:101,element:14321}),et(14321),t()},option:eo.teenSafetyResources}):null,ek=W&&c&&(!n||(0,y.Z)((n||{}).actions||[],7))&&(0,_.jsx)(i.Lt.Link,{dataTestId:"header-menu-options-ads-support",href:A.JbB,iconEnd:"visit",onClick:()=>{et(10106),t()},option:eo.adsSupport}),eC=W?(0,_.jsx)(i.Lt.Link,{dataTestId:"header-menu-options-request-a-feature",href:A.W32+"?utm_source=pinterest&utm_medium=settings&utm_campaign=request_a_feature_exp",iconEnd:"visit",onClick:()=>{et(11345),t()},option:eo.requestFeature}):null,eI=(0,_.jsx)(i.Lt.Link,{dataTestId:"header-menu-options-help",href:`${A.gOE}?source=gear_menu_web`,iconEnd:"visit",onClick:()=>{et(8002),t()},option:eo.getHelp}),ez=(0,_.jsx)(i.Lt.Link,{dataTestId:"header-menu-options-tos",href:A.U5h,iconEnd:"visit",onClick:()=>{et(61),t()},option:eo.termsOfService}),eE=(0,_.jsx)(i.Lt.Link,{dataTestId:"header-menu-options-policy",href:A.R_9,iconEnd:"visit",onClick:()=>{et(8004),t()},option:eo.privacyPolicy}),eZ=(0,_.jsx)(i.Lt.Link,{dataTestId:"header-menu-options-beta-tester",href:"https://www.pinterest.com/public-beta/",iconEnd:"visit",onClick:()=>{et(13613),t()},option:eo.betaTester},"header-menu-options-beta-tester"),ej=(0,_.jsx)(i.Lt.Item,{dataTestId:"header-menu-options-logout",onSelect:F,option:eo.logOut}),eT=(0,_.jsxs)(i.Lt.Section,{label:L._('Your accounts', 'SwitchAccountsList.YourAccountsTitle', 'Title for the list of user\'s accounts available for switching on Switch Account Page'),children:[eu,ed,e_,M&&!B?.opt_in_private_account&&ep,ej]},"your-accounts"),eN=(0,_.jsxs)(i.Lt.Section,{label:L._('Your accounts', 'SwitchAccountsList.YourAccountsTitle', 'Title for the list of user\'s accounts available for switching on Switch Account Page'),children:[eu,ed,e_,M&&!B?.opt_in_private_account&&eh,ev]},"your-accounts"),eL=M&&!D?(0,_.jsx)(p,{paddingY:1}):null,eR=(0,_.jsxs)(i.Lt.Section,{label:L._('Content', 'header.accountsOptionsMenu.contentHeader', 'header for content section of menu'),children:[eb,ef,eL,eg,eP,ew]}),eU=(0,_.jsxs)(i.Lt.Section,{label:L._('Help', 'header.accountsOptionsMenu.helpHeader', 'header for help section of menu'),children:[eS,eI,ek,eC,ey]}),eO=(0,_.jsxs)(i.Lt.Section,{label:L._('Privacy', 'header.accountsOptionsMenu.privacyHeader', 'header for privacy section of menu'),children:[eE,ex]}),eM=(0,_.jsxs)(i.Lt.Section,{label:"",children:[ez,ej]}),eB=(0,_.jsxs)(i.Lt.Section,{label:"",children:[(0,_.jsx)("style",{children:'#VerticalNav-Settings-Flyout [role="presentation"] {display: none;}'}),eL,eg]},"section-account-claiming"),eD=T?[ey,ev,eA,eB,ew,ek,eC,eP,ef,ex,eS,eI,ez,eE,eZ]:(0,_.jsxs)(i.Lt.Section,{label:L._('More options', 'header.accountsOptionsMenu.optionsHeader', 'header for options section of menu'),children:[ey,ev,eA,eL,eg,ew,ek,eC,eP,ef,ex,eS,eI,ez,eE,eZ]});return{currentlyIn:(0,_.jsxs)(i.Lt.Section,{label:L._('Currently in', 'SwitchAccountsList.CurrentlyInTitle', 'Title for currently logged in account on Switch Account Page'),children:[!!er&&(0,_.jsx)(i.Lt.Item,{onSelect:()=>ec?en(er,void 0):Q(er),option:eo.currentAccount,selected:eo.currentAccount,children:(0,_.jsx)(i.rU,{href:j?`/${er.username}/`:`${w.C0}/${er.username}/`,underline:"none",children:(0,_.jsx)(h.Z,{isCurrentAccount:!0,user:er})})}),!B?.opt_in_private_account&&em]},"currently-in"),yourAccount:W?eN:eT,moreOptions:W?[eR,eU,eO,eM]:eD,settingsAndSupport:[ey,ev,eA,eg,eP,ew,eZ,(0,_.jsxs)(i.Lt.Section,{label:L._('Support', 'SettingsMenu.SupportOptions', 'Menu section with support options'),children:[eI,(0,_.jsx)(i.Lt.Link,{href:`${A.iYv}/tools/widget-builder/?type=profile&url=${encodeURIComponent(`https://${window.location.hostname}/${er?.username||""}/`)}`,iconEnd:"visit",onClick:()=>{R({event_type:101,component:218,element:8001})},option:{label:L._('Create widget', 'A link to create an embeddable widget', 'A link to create an embeddable widget'),value:"make-widget-link"}},"make-widget-link"),(0,_.jsx)(i.Lt.Link,{href:A.hwP,iconEnd:"visit",onClick:()=>{R({event_type:101,component:218,element:8011})},option:{label:L._('Removals', 'menu item that takes user to the Pinterest copyright page', 'menu item that takes user to the Pinterest copyright page'),value:"removals"}},"removals"),(0,_.jsx)(i.Lt.Link,{href:"https://help.pinterest.com/en/article/personalized-ads-on-pinterest",onClick:()=>{R({event_type:101,component:218,element:10406})},option:{label:L._('Personalized Ads', 'menu item that takes user to the Pinterest personalized ads page', 'menu item that takes user to the Pinterest personalized ads page'),value:"personalized-ads"}},"personalized-ads"),ex,eE,ez]},"support"),(0,_.jsx)(i.Lt.Section,{label:L._('Resources', 'SettingsMenu.Resources', 'Menu section with resource links'),children:(0,_.jsxs)(i.xu,{direction:"row",display:"flex",paddingX:2,width:240,wrap:!0,children:[(0,_.jsx)(x.O,{onClick:()=>{R({event_type:101,component:218,element:8006})},text:L._('About', 'menu item that takes user to the Pinterest about page', 'menu item that takes user to the Pinterest about page'),url:A.wUZ}),(0,_.jsx)(x.O,{onClick:()=>{R({event_type:101,component:218,element:8007})},text:L._('Blog', 'menu item that takes user to the Pinterest blog', 'menu item that takes user to the Pinterest blog'),url:"https://www.pinterest.com/_/_/blog/"}),(0,_.jsx)(x.O,{onClick:()=>{R({event_type:101,component:218,element:8008})},text:L._('Businesses', 'menu item that takes user to the Pinterest for business page', 'menu item that takes user to the Pinterest for business page'),url:A.NWh}),(0,_.jsx)(x.O,{onClick:()=>{R({event_type:101,component:218,element:8009})},text:L._('Careers', 'menu item that takes user to the Pinterest careers page', 'menu item that takes user to the Pinterest careers page'),url:A.t_w}),(0,_.jsx)(x.O,{onClick:()=>{R({event_type:101,component:218,element:8010})},text:L._('Developers', 'menu item that takes user to the Pinterest developers page', 'menu item that takes user to the Pinterest developers page'),url:A.iYv})]})},"resources")]}}({onDismiss:t,advertiser:n,showAdsSupportOption:d,isImportContentEnabled:q,isWwwSite:M,isVerticalNavEnabled:J,handleFocus:()=>{e?.focus()}});return(0,_.jsx)(N.Z,{children:(0,_.jsxs)(i.Lt,{anchor:e,disableMobileUI:!0,headerContent:O?(0,_.jsxs)(i.kC,{alignItems:"center",direction:"row",gap:{row:2,column:0},children:[(0,_.jsx)(i.hU,{accessibilityLabel:$._('Close settings and support menu', 'navBar.settingsMenu.header', 'Accessibility label for the button to close settings menu'),icon:"cancel",onClick:t,size:"sm"}),(0,_.jsx)(i.X6,{size:"400",children:$._('Settings & Support', 'navBar.settingsMenu.header', 'Header text for the settings menu')})]}):null,id:D,idealDirection:B,isWithinFixedContainer:!J,onDismiss:t,zIndex:V,children:[c&&(H?(0,_.jsxs)(i.Lt.Section,{label:$._('Oh no! You\'re no longer logged into', 'header.accountsOptionsMenu.failedAccount', 'Full sentence: "Oh no! You\'re no longer logged into <user\'s account>". Text telling user that they are no longer logged into an account after trying to switch to it'),children:[(0,_.jsx)(i.Lt.Item,{onSelect:()=>{},option:G.failedAccount,children:(0,_.jsx)(h.Z,{user:H})}),(0,_.jsx)(j,{failedAccount:H,handleReauthAccount:X,handleRemoveUnauthAccount:W})]}):[Y,K]),U?Q:null,O?ee:null]})})}},780134:function(e,t,n){n.d(t,{Z:()=>c});var i=n(20256),s=n(744862),a=n(667288),o=n(525839),l=n(793698),r=n(785893);function c({user:e,isCurrentAccount:t}){let n=(0,o.ZP)(),c=e.partner,u=(0,l.mN)()(e.id??""),d=u?.avatar_color_index;return(0,r.jsxs)(i.xu,{alignItems:"center","data-test-id":"HeaderAccountsOptionsMenuAccountRep",display:"flex",justifyContent:"start",marginEnd:4,rounding:2,children:[(0,r.jsx)(i.xu,{flex:"none",height:60,marginEnd:2,rounding:"circle",width:60,children:(0,r.jsx)(s.qE,{accessibilityLabel:"",color:d,name:(0,a.G)(e),src:(0,a.k)(e)})}),(0,r.jsxs)(i.xu,{maxWidth:176,children:[(0,r.jsx)(i.xv,{lineClamp:1,weight:"bold",children:(0,a.G)(e)}),(0,r.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{marginTop:"2px"}},"data-test-id":"header-account-type-display",children:(0,r.jsx)(i.xv,{color:"subtle",lineClamp:1,size:"200",children:c?n._('Business', 'SwitchAccountsListItem.BusinessAccount.label', 'Label shown for business account in the Account Switcher'):n._('Personal', 'SwitchAccountsListItem.PersonalAccount.label', 'Label shown for personal account in the Account Switcher')})}),t&&(0,r.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{marginTop:"2px"}},children:(0,r.jsx)(i.xv,{color:"subtle",lineClamp:1,size:"200",children:c?e.partner?.bizContactEmail:e.email})})]})]})}},699666:function(e,t,n){n.d(t,{Z:()=>r});var i=n(521009),s=n(821342),a=n(749872),o=n(593891),l=n(959989);function r(){let e=(0,s.Z)(),t=(0,i.Z)(),n=(0,o.aU)();return function(){t({event_type:101,component:8,element:8005}),(0,l.lv)()>1?(e.isAuth&&((0,a.RD)(e.id),(0,a.CV)("utils.user_deleted",{deleted_user:e.id})),n({redirectUrl:"/",source:"user_header",localStorageItems:(0,l.Q)()})):((0,a.CV)("utils.group_deleted"),n({redirectUrl:"/",source:"user_header"}))}}},646924:function(e,t,n){n.d(t,{Z:()=>m});var i=n(667294),s=n(575108),a=n(821342),o=n(886981),l=n(980787),r=n(79270),c=n(816358),u=n(809295),d=n(749872),_=n(61110),p=n(39435),h=n(603316);function m(e,t){let{flushContextEvents:n,logContextEvent:m}=(0,l.u)(),[g,f]=(0,i.useState)(!1),[b,y]=(0,i.useState)(null),v=(0,a.Z)(),{showAccountSwitcherLoginModal:A}=(0,_.X)(),{userAccounts:w}=(0,p.N)(),{data:x}=function(){let e=(0,a.Z)();return(0,o.Z)({name:"UserResource",options:{field_set_key:"linked_partner",user_id:e.isAuth&&e.id}})}(),P=(0,r.Z)(),S=!!(v.isAuth&&!v.partner&&x?.businesses)&&0===x.businesses.length;(0,i.useEffect)(()=>(v.isAuth&&(0,d.Mt)(v,x),()=>{(0,d.CV)("flyout.dismiss")}),[]),(0,i.useEffect)(()=>((0,d.CV)("modal.shown"),()=>{(0,d.CV)("modal.dismiss")}),[]),(0,i.useEffect)(()=>{w.length>1&&m({event_type:13,view_type:234,component:13369,element:12722})},[m,w]);let k=(e,t)=>{throw(0,d.z3)(e,"account_switcher_flyout"),f(!1),t};return{failedAccount:b,fetchedUserAccounts:w,handleAccountRepClick:e=>{v.isAuth&&e.id!==v.id&&(e=>{let{id:t}=e;f(!0),m({event_type:101,component:13369,element:11196}),(0,d.CV)("switch_account_click",{destination_user_id:t},"account_switcher_flyout"),c.Z.pause(u.LU),n(),P({creds:{get_user:!0,switch_account:t},loggingOptions:{loggingData:{container:"account_switcher"},loginAttemptContextEvent:{event_type:7534,view_type:234,component:13369,aux_data:{upsell_reason:"account_switcher"}}},isAccountSwitch:!0}).then((n={})=>{n?.resource_response.data?.user?(0,d.iS)("/",t,"account_switcher_flyout"):((0,d.CV)("no_api_access_token",{destination_user_id:t},"account_switcher_flyout"),(0,d.z3)(t,"account_switcher_flyout"),y(e),f(!1))},e=>{k(t,e)})})(e)},handleAddSecondaryAccount:()=>{(0,d.CV)("add_account_click",null,"account_switcher_flyout"),m({event_type:101,component:8,element:12756}),e()},handleClick:t=>{13290!==t&&m({event_type:101,component:8,element:t}),e()},handleLinkedAccountSwitch:(e,i)=>{let{partner:a}=e;if(f(!0),m({event_type:101,component:13369,element:a?.isLinkedBusiness?11195:11194}),c.Z.pause(u.LU),n(),a?.isLinkedBusiness){let t={business_id:e.id,get_user:!0,owner_id:i};(0,h.nP)("web.partner.linked_business_account.switch_account_attempt",{sampleRate:1}),P({creds:t,loggingOptions:{loggingData:{container:"account_switcher"},loginAttemptContextEvent:{event_type:7534,view_type:234,component:13369}},isAccountSwitch:!0}).then(()=>{(0,h.nP)("web.partner.linked_business_account.switch_account_success",{sampleRate:1}),(0,d.iS)("/",e.id,"account_switcher_flyout")},t=>{k(e.id,t)})}else s.Z.create("UserSessionResource",{disable_auth_failure_redirect:!0}).callDelete().then(()=>{v.isAuth&&((0,d.RD)(v.id),(0,d.iS)(t?`/${e.username}`:"/",v.id,"account_switcher_flyout"))},e=>{v.isAuth&&k(v.id,e)})},handleReauthAccount:()=>{(0,d.CV)("switch_failure_prompt.login_click",null,"account_switcher_flyout"),y(null),A("account_switcher_flyout",b?.email)},handleRemoveUnauthAccount:e=>{(0,d.CV)("switch_failure_prompt.account_removed",{removed_user_id:e},"account_switcher_flyout"),(0,d.RD)(e),y(null)},handleUnlockBusinessTools:()=>{e(),m({event_type:101,component:8,element:10299})},isLoading:g,showUnlockBusinessTools:S}}},525958:function(e,t,n){n.d(t,{Dm:()=>a,Y3:()=>s,YG:()=>i,qX:()=>o});let i=e=>["MOBILE","DESKTOP"].includes(e),s=e=>"STERLING"===e,a=e=>"ANALYTICS"===e,o=e=>"TRENDS"===e},667288:function(e,t,n){function i(e){return e.partner?.isLinkedBusiness?e.partner.businessName||e.fullName||e.username:e.fullName||e.username}function s(e){let{imageMediumUrl:t}=e;return t&&!t.includes("static/images/user/default")?t:""}n.d(t,{G:()=>i,k:()=>s})},390843:function(e,t,n){n.d(t,{aX:()=>d,nK:()=>_,ou:()=>r});var i=n(667294),s=n(616550),a=n(729434),o=n(785893);let{Provider:l,get:r}=(0,a.Z)("HistoryStackContext",{previous:[],current:null,forward:[]}),c=e=>e&&e.pathname?e.pathname+(e.search||""):"";function u(e,t){let n={action:t.type,location:t.location,match:t.match};if(t.location===e.current?.location)return e;switch(t.type){case"POP":if(e.forward.length>0&&c(e.forward[0].location)===c(n.location))return{...e,forward:e.forward.slice(1),current:{...e.forward[0],action:t.type},previous:e.current?[...e.previous,{action:e.current.action,location:e.current.location,match:e.current.match}]:e.previous};return{...e,forward:e.current?[{action:e.current.action,location:e.current.location,match:e.current.match},...e.forward]:e.forward,current:{...e.previous.slice(-1)[0],action:t.type},previous:e.previous.slice(0,-1)};case"PUSH":return{...e,forward:e.forward.length>0?[]:e.forward,current:n,previous:e.current?[...e.previous,{action:e.current.action,location:e.current.location,match:e.current.match}]:e.previous};case"REPLACE":return{...e,current:n};default:return e}}function d(){let{current:e,previous:t}=r();return(0,i.useMemo)(()=>e?t.concat(e):t,[e,t])}function _({children:e}){let t=(0,s.k6)(),n=(0,s.TH)(),a=(0,s.$B)(),r={forward:[],current:{action:t.action,location:n,match:a},previous:[]},[c,d]=(0,i.useReducer)(u,r),_=(0,i.useRef)(n);if(_.current!==n){let{action:e}=t;d({type:e,location:n,match:a}),_.current=n}return(0,o.jsx)(l,{value:c,children:e})}},538281:function(e,t,n){n.d(t,{Z:()=>o});var i=n(20256),s=n(525839),a=n(785893);function o({accessibilityLabel:e,fixedPosition:t,rounding:n}){let o=(0,s.ZP)();return(0,a.jsxs)(i.xu,{children:[(0,a.jsx)(i.xu,{alignItems:"center",bottom:!0,display:"flex",justifyContent:"center",left:!0,opacity:1,position:t?"fixed":"absolute",right:!0,top:!0,zIndex:new i.Ry(101),children:(0,a.jsx)(i.xH,{accessibilityLabel:e||o._('Loading', 'Label for loading spinner', 'Label for loading spinner'),show:!0})}),(0,a.jsx)(i.xu,{bottom:!0,color:"default",left:!0,opacity:.7,position:t?"fixed":"absolute",right:!0,rounding:n,top:!0,zIndex:new i.Ry(100)})]})}},738827:function(e,t,n){n.d(t,{Z:()=>i});function i(e,t){return e.includes(t)||e.includes(80)}},708898:function(e,t,n){n.d(t,{Z:()=>s});var i=n(15667);let s=function(){let{country:e,isBot:t,isAuthenticated:n,locale:s}=(0,i.B)(),a="en"===s.slice(0,2);return t||!n&&a&&"US"===e}},599472:function(e,t,n){n.d(t,{Z:()=>o});var i=n(785873),s=n(941404),a=n(233624);let o=(e,t)=>{t?.disableOriginCheck||(0,a.Z)(e)||(e="/",(0,s.My)("url_reset")),(0,i.Z)(e)}},789877:function(e,t,n){n.d(t,{Z:()=>a});let i="/business/business-manager/",s="/business/business-hierarchy/",a=(e,t,n,a)=>{switch(e){case"DASHBOARD":return a?`${s}${String(a)}/dashboard/`:`${i}${String(t)}/dashboard/`;case"PEOPLE":return`${i}${String(t)}/employees/`;case"PARTNERS":return`${i}${String(t)}/partners/`;case"AD_ACCOUNTS":return`${i}${String(t)}/ad-accounts/`;case"HISTORY":return`${i}${String(t)}/history/`;case"PEOPLE_DETAIL":return`${i}${String(t)}/employees/${String(n)}/details/`;case"PARTNERS_DETAIL":return`${i}${String(t)}/partners/${String(n)}/details/`;case"SHARED_PARTNERS_DETAIL":return`${i}${String(t)}/shared/${String(n)}/details/`;case"AD_ACCOUNTS_DETAIL":return`${i}${String(t)}/ad-accounts/${String(n)}/details/`;case"PENDING_AD_ACCOUNTS_DETAIL":return`${i}${String(t)}/ad-accounts/pending/${String(n)}/details/`;case"PEOPLE_PENDING_TAB":return`${i}${String(t)}/employees/pending/`;case"PARTNERS_PENDING_TAB":return`${i}${String(t)}/partners/pending/`;case"AD_ACCOUNTS_PENDING_TAB":return`${i}${String(t)}/ad-accounts/pending`;case"AD_ACCOUNTS_CEE_MIGRATION":return`${i}${String(t)}/ad-accounts/cee-migration`;case"PROFILES":return`${i}${String(t)}/profiles/`;case"PROFILES_DETAIL":return`${i}${String(t)}/profiles/${String(n)}/details/`;case"BUSINESS_SECURITY":return`${i}${String(t)}/security/`;case"ASSET_GROUPS":return n?`${i}${String(t)}/asset-groups/?asset_group_id=${String(n)}`:`${i}${String(t)}/asset-groups/`;case"INVOICE_MANAGEMENT":return`${i}${String(t)}/invoice-management/`;case"BUSINESS_HIERARCHY":return`${s}${String(a)}/hierarchy/`;case"BUSINESS_HIERARCHY_BUSINESS_SECURITY":return`${s}${String(a)}/business_security/`;case"MANAGERS":return`${s}${String(a)}/managers/`;case"AUDIENCES":return`${i}${String(t)}/audiences/`;case"SHARED_TAGS":return`${i}${String(t)}/shared-tags/`;case"CATALOGS":return`${i}${String(t)}/catalogs/`;case"BRAND_SAFETY":return`${i}${String(t)}/brand-safety/`;case"BUSINESS_SETTINGS":return`${i}${String(t)}/settings/`;case"SYSTEM_USERS":return`${i}${String(t)}/system-users/`;case"APPS":return`${i}${String(t)}/apps/`;case"CONVERSION_DATA":return`${i}${String(t)}/conversion-data/`;default:return i}}},124320:function(e,t,n){n.d(t,{Z:()=>s});var i=n(667294);let s=function(e,t){let n=(0,i.useRef)(e),s=(0,i.useRef)(void 0),a=(0,i.useRef)(void 0);(0,i.useEffect)(()=>{n.current=e},[e]),(0,i.useEffect)(()=>()=>{s.current&&clearTimeout(s.current)},[t]);let o=(0,i.useCallback)((...e)=>{a.current=e,s.current&&clearTimeout(s.current),s.current=window.setTimeout(()=>{n.current(...e),a.current=void 0},t)},[t]);return o.flush=(0,i.useCallback)(()=>{if(s.current&&(clearTimeout(s.current),s.current=void 0),a.current){let e=a.current;return a.current=void 0,n.current(...e)}},[]),o.cancel=(0,i.useCallback)(()=>{s.current&&(clearTimeout(s.current),s.current=void 0),a.current=void 0},[]),o}},708847:function(e,t,n){n.d(t,{Z:()=>o});var i=n(20256),s=n(525839),a=n(785893);function o(){let e=(0,s.ZP)();return(0,a.jsx)(i.kC,{alignItems:"center",justifyContent:"center",children:(0,a.jsx)(i.xH,{accessibilityLabel:e._('Loading signup form', ' - ', ' -- '),show:!0})})}},79270:function(e,t,n){n.d(t,{Z:()=>P});var i=n(667294),s=n(255581),a=n(575108),o=n(111330),l=n(980787),r=n(464332),c=n(636755),u=n(981636),d=n(2420),_=n(593891),p=n(829121),h=n(154796),m=n(450978),g=n(556970),f=n(650160),b=n(753143),y=n(941404),v=n(79077),A=n(547362),w=n(831373),x=n(603316);function P(){let e=(0,_.hq)(),t=(0,h.Z)(),{logContextEvent:n}=(0,l.u)(),P=(0,v.Z)();return(0,i.useCallback)(({creds:i,isAccountSwitch:l,loggingOptions:{loggingData:_={},loginAttemptContextEvent:h},recaptchaV2Token:v,recaptchaV3Token:S,fingerprintData:k})=>{t();let C=!!(i.facebook_autologin||i.autologin),I=(0,p.eD)(i),z=e=>{let t=i.google_open_id_token?"google":"facebook";C&&(0,y.dy)({event:e,provider:t})},E=e=>{C||(0,y.EX)({event:e,provider:(0,p.nY)(i)})},Z=e=>{n({...h,event_type:e,aux_data:{...h.aux_data,upsell_reason:h.aux_data?.upsell_reason||(C?"autologin":(0,b.M0)().getItem(o.bg)),upsell_view_count:(0,b.M0)().getItem(o.w0)??0}}),7536===e&&((0,b.M0)().setItem(o.V6,(0,p.nY)(i)),(0,b.M0)().setItem(o.w0,0))};Z(7534),P({action:C?"autologin":"login",event:"attempt",trigger:_.trigger,type:I}),z("login_api_call_start"),E("login_api_call_start");let j=(0,A.O)();return a.Z.create("UserSessionResource",{...i,...j?{referrer:j}:Object.freeze({}),get_user:i.get_user||i.switch_account&&l,app_type_from_client:7===e.appType?7:5,visited_pages_before_login:(0,w.t_)()||null,recaptchaV2Token:v,recaptchaV3Token:S,fingerprintData:k}).callCreate({showError:!1,async:!0}).then(e=>{let{country:t,country_from_hostname:n,country_from_ip:a,region_from_ip:o}=e?.client_context||Object.freeze({});return(e=>{let t="referrer_unknown";try{let e=document.referrer;t=e?e.indexOf("/t.co/")>-1?"twitter":e.indexOf("google.")>-1?"google":e.indexOf("bing.")>-1?"bing":e.indexOf("facebook.")>-1?"facebook":"other":"direct"}catch(e){}let n=_===Object(_)?_.container:"container_unknown";(0,y.My)("login.referrer."+t+"."+I),(0,y.My)("login.container."+String(n)+"."+I),(0,y.My)("login.type."+I);let s=I||"method_unknown",a=_.page||"page_unknown";i.facebook_autologin?((0,y.My)("web_autologin_facebook"),(0,y.My)("new_web_autologin_facebook",{page:a,referrer:t,container:n})):((0,y.My)(`web_login.${s}.success.${a}.${String(n)}.${t}.tier1`),(0,x.nP)(`web_login.${s}.success.${a}.${String(n)}.${t}.tier1`),(0,y.My)(`new_web_login.${s}.success`,{page:a,referrer:t,container:n})),(0,m.ko)({country:e?.country,countryFromHostName:e?.countryFromHostName,countryFromIp:e?.countryFromIp,regionFromIp:e?.regionFromIp,deviceType:"Desktop",eventCategory:"Logins"}),Z(7536),P({action:C?"autologin":"login",event:"success",trigger:_&&_.trigger,type:I})})({country:t,countryFromHostName:n,countryFromIp:a,regionFromIp:o}),z("login_api_call_success"),E("login_api_call_success"),(0,c.B)(!1),(0,u.Z)(),r.zN(s.e7.name),r.zN(s.x3.name),(0,f.Z)("login").then(()=>e)},e=>((({error:e})=>{if(!e)return;let t=e.http_status===g.Ej?g.Ej:e.api_error_code,n=t;t&&d.qF.has(t)&&(n=d.qF.get(t));let{container:i,trigger:s}=_;(0,y.My)(`unauth_web_client_login_api_error.${String(n)}.${i||"unknow_container"}.${I}`),Z(7535),P({action:C?"autologin":"login",event:"fail",trigger:s,type:I})})({error:e}),z("login_api_call_failure"),E("login_api_call_failure"),Promise.reject(e)))},[e,t,n,P])}},636755:function(e,t,n){n.d(t,{B:()=>o,a:()=>a});var i=n(111330),s=n(753143);let a=()=>!!s.ZP.getItem(i.WM),o=e=>{s.ZP.setItem(i.WM,!!e)}},462478:function(e,t,n){n.d(t,{W:()=>o,Z:()=>a});var i=n(68290);function s(e,t,n=3){window._sendFacebookPixel?("NewOrRezUsers"===e||"MAU"===e?window._sendFacebookPixel("trackCustom",e):window._sendFacebookPixel("track",e),t()):n>0&&setTimeout(()=>{s(e,t,n-1)},Math.floor(3e3/n))}function a(e,t){"complete"===document.readyState?s(e,t):window.addEventListener("load",function e(t,n){return i=>{s(t,n),window.removeEventListener(i,e)}}(e,t))}function o(){document.getElementById("facebookPixel")||("complete"===document.readyState&&function(){let e=(0,i.Z)({src:"https://"+location.hostname+"/fb.html",id:"facebookPixel",sandbox:"allow-scripts allow-same-origin",style:"display: none;"});if(document.body)document.body.appendChild(e),e?.contentWindow?.addEventListener("load",()=>window._sendFacebookPixel=e.contentWindow.fbq);else throw Error("missing <body>")}(),window.addEventListener("load",o))}},356075:function(e,t,n){n.d(t,{VC:()=>b,F8:()=>w,sl:()=>x,Rs:()=>v,M7:()=>A,eP:()=>P,x9:()=>S});var i=n(111330),s=n(68290),a=n(450978),o=n(753143),l=n(603316);let r={"flashtalking-d-ses":["https://servedby.flashtalking.com/container/19112;123474;13378;iframe/?spotName=Desktop_Web_Session&ftXCurrency=A&ftXName=A&ftXNumItems=A&ftXRef=A&ftXType=A&ftXValue=A&U1=A&U2=A&U3=A&U4=A&U5=A&cachebuster=","__;WyUlXVslJV1bJSVdWyUlXVslJV1bJSVdWyUlXVslJV1bJSVdWyUlXVslJV0rKw!!N96JrnIq8IfO5w!3OqZ065GjRFlcxmjnVAQoMbP5zuw_9E57X2k7VKfgLzeMs11kSYtkrw8mpha-Zx62--R$"],"flashtalking-m-ses":["https://servedby.flashtalking.com/container/19112;123473;13378;iframe/?spotName=Mobile_Web_Session&ftXCurrency=A&ftXName=A&ftXNumItems=A&ftXRef=A&ftXType=A&ftXValue=A&U1=A&U2=A&U3=A&U4=A&U5=A&cachebuster=","__;WyUlXVslJV1bJSVdWyUlXVslJV1bJSVdWyUlXVslJV1bJSVdWyUlXVslJV0rKw!!N96JrnIq8IfO5w!3OqZ065GjRFlcxmjnVAQoMbP5zuw_9E57X2k7VKfgLzeMs11kSYtkrw8mpha-aC5fNCn$"],flashtalking_d_login:["https://servedby.flashtalking.com/container/19112;123477;13378;iframe/?spotName=Desktop_Web_Login&ftXCurrency=A&ftXName=A&ftXNumItems=A&ftXRef=A&ftXType=A&ftXValue=A&U1=A&U2=A&U3=A&U4=A&U5=A&cachebuster=","__;WyUlXVslJV1bJSVdWyUlXVslJV1bJSVdWyUlXVslJV1bJSVdWyUlXVslJV0rKw!!N96JrnIq8IfO5w!3OqZ065GjRFlcxmjnVAQoMbP5zuw_9E57X2k7VKfgLzeMs11kSYtkrw8mpha-UP9cLAD$"],flashtalking_m_login:["https://servedby.flashtalking.com/container/19112;123460;13378;iframe/?spotName=Mobile_Web_Login&ftXCurrency=A&ftXName=A&ftXNumItems=A&ftXRef=A&ftXType=A&ftXValue=A&U1=A&U2=A&U3=A&U4=A&U5=A&cachebuster=","__;WyUlXVslJV1bJSVdWyUlXVslJV1bJSVdWyUlXVslJV1bJSVdWyUlXVslJV0rKw!!N96JrnIq8IfO5w!3OqZ065GjRFlcxmjnVAQoMbP5zuw_9E57X2k7VKfgLzeMs11kSYtkrw8mpha-dZEP4zq$"],flashtalking_d_reg:["https://servedby.flashtalking.com/container/19112;123459;13378;iframe/?spotName=Desktop_Web_Registration&ftXCurrency=A&ftXName=A&ftXNumItems=A&ftXRef=A&ftXType=A&ftXValue=A&U1=A&U2=A&U3=A&U4=A&U5=A&cachebuster=","__;WyUlXVslJV1bJSVdWyUlXVslJV1bJSVdWyUlXVslJV1bJSVdWyUlXVslJV0rKw!!N96JrnIq8IfO5w!3OqZ065GjRFlcxmjnVAQoMbP5zuw_9E57X2k7VKfgLzeMs11kSYtkrw8mpha-bBBO_93$"],flashtalking_m_reg:["https://servedby.flashtalking.com/container/19112;123472;13378;iframe/?spotName=Mobile_Web_Registration&ftXCurrency=A&ftXName=A&ftXNumItems=A&ftXRef=A&ftXType=A&ftXValue=A&U1=A&U2=A&U3=A&U4=A&U5=A&cachebuster=","__;WyUlXVslJV1bJSVdWyUlXVslJV1bJSVdWyUlXVslJV1bJSVdWyUlXVslJV0rKw!!N96JrnIq8IfO5w!3OqZ065GjRFlcxmjnVAQoMbP5zuw_9E57X2k7VKfgLzeMs11kSYtkrw8mpha-QIr-gzV$"],"flashtalking-bus":["https://servedby.flashtalking.com/container/19112;123475;13379;iframe/?spotName=Desktop_Business_Billing&ftXCurrency=A&ftXName=A&ftXNumItems=A&ftXRef=A&ftXType=A&ftXValue=A&U1=A&U2=A&U3=A&U4=A&U5=A&cachebuster=","__;WyUlXVslJV1bJSVdWyUlXVslJV1bJSVdWyUlXVslJV1bJSVdWyUlXVslJV0rKw!!N96JrnIq8IfO5w!3OqZ065GjRFlcxmjnVAQoMbP5zuw_9E57X2k7VKfgLzeMs11kSYtkrw8mpha-UtxgWP6$"],"flashtalking-first-spend-event":["https://servedby.flashtalking.com/container/19112;130299;13379;iframe/?spotName=First_Time_Spenders&U7="],"flashtalking-all-spend-event":["https://servedby.flashtalking.com/container/19112;130301;13379;iframe/?spotName=All_Spenders&U7="],"flashtalking-advertiser-rez-event":["https://servedby.flashtalking.com/container/19112;130300;13379;iframe/?spotName=Resurrected_Spenders&U7="],"flashtalking-shop-event":["https://servedby.flashtalking.com/container/19112;126331;13379;iframe/?spotName=Shopping_Advertisers&U6=&U7="],"flashtalking-catalog-feed-event":["https://servedby.flashtalking.com/container/19112;126604;13379;iframe/?spotName=Catalog_Uploads&U7="],"flashtalking-billing-complete-event":["https://servedby.flashtalking.com/container/19112;126329;13379;iframe/?spotName=Billing_Completion&U7="],"flashtalking-no-micro-catalog-feed-realtime-event":["https://servedby.flashtalking.com/container/19112;130191;13379;iframe/?spotName=No_micro_catalog_feed&U7="],"flashtalking-catalog-feed-realtime-event":["https://servedby.flashtalking.com/container/19112;130294;13379;iframe/?spotName=Catalog_Feeds&U7="],"flashtalking-catalog-feed-page-view-event":["https://servedby.flashtalking.com/container/19112;130295;13379;iframe/?spotName=Catalog_Feeds_Starting_Page_Unique_Visitors&U7="],"flashtalking-business-site-catalog-upload-click-event":["https://servedby.flashtalking.com/container/19112;130298;13379;iframe/?spotName=Catalog_Upload_Button_Click_on_Biz_Site&U7="],"flashtalking-business-site-no-micro-catalog-upload-click-event":["https://servedby.flashtalking.com/container/19112;130297;13379;iframe/?spotName=No_Micro_Catalog_Upload_Button_Click_on_Biz_Site&U7="],"flashtalking-business-site-page-view-event":["https://servedby.flashtalking.com/container/19112;130446;13379;iframe/?spotName=Biz_site_shopping_page_unique_visitors&U7="]},c=[i.pF,i.b_,i.bB,i.PL],u="flashtalking-first-spend-event",d="flashtalking-all-spend-event",_="flashtalking-advertiser-rez-event",p="flashtalking-catalog-feed-event",h="flashtalking-billing-complete-event",m=new Set([u,_,"flashtalking-shop-event",p,h,"flashtalking-no-micro-catalog-feed-realtime-event","flashtalking-catalog-feed-realtime-event","flashtalking-catalog-feed-page-view-event","flashtalking-business-site-catalog-upload-click-event","flashtalking-business-site-no-micro-catalog-upload-click-event","flashtalking-business-site-page-view-event",d]);function g(e,t=""){return m.has(e)?r[e][0]+t+"&cachebuster="+(0,a.OJ)():r[e][0]+(0,a.OJ)()+r[e][1]}function f(){for(let e of c){let t=(0,o.M0)().getItem(e);if(t){let n=(0,s.Z)({src:g(e),id:e,height:1,width:1,style:"display:none;"});if(!document.getElementById(e)){document.body?.appendChild(n);let[i,s]=t=t.split("#");(0,l.nP)("flashtalking_tracking_pixel",{sampleRate:1,tags:{event_category:i,event_name:"All"}}),"All"!==s&&(0,l.nP)("flashtalking_tracking_pixel",{sampleRate:1,tags:{event_category:i,event_name:s}}),(0,o.M0)().removeItem(e)}}}}function b(e,t,n,i){if(document.getElementById(e))return void f();function a(e,t,n,i){let a=(0,s.Z)({src:g(e,n),id:e,height:1,width:1,style:"display:none;"});document.getElementById(e)||(a.setAttribute("data-test-id",i),document.body?.appendChild(a),t(),f())}"complete"===document.readyState&&a(e,t,n,i),window.addEventListener("load",function e(t,n,i,s){return o=>{a(t,n,i,s),window.removeEventListener(o,e)}}(e,t,n,i))}function y(e,t,n,i){c.find(t=>t===e)?(0,o.M0)().setItem(e,`${t}#${n}`):b(e,i)}function v(e,t,n,i){"complete"===document.readyState?y(e,t,n,i):window.addEventListener("load",function e(t,n,i,s){return a=>{y(t,n,i,s),window.removeEventListener(a,e)}}(e,t,n,i))}function A(e,t){if(!e||!t||0===Object.keys(e).length)return;let n=e[t].resurrected;if(n){let e=new Date(n),i=new Date;90>=(0,a.LG)(e,i)&&b(_,()=>{(0,l.nP)("flashtalking_tracking_pixel",{sampleRate:1,tags:{event_category:"AdvertiserRez",event_name:"All"}})},i.toISOString().slice(0,10)+"&U8="+(0,a.TF)(a.qs,t))}}function w(e,t){if(!e||!t||0===Object.keys(e).length)return;let n=e[t].replaceAll("'",'"'),i="";try{let e=JSON.parse(n);if(e&&Object.keys(e).length>0){let{dt:t,merchant_id:n,feed_profile_ids:s}=e;if(t&&n&&s){let e=(0,a.TF)(a.qs,n);i=t+"&U8="+s+"&U9="+e}}}catch(e){(0,l.nP)("flashtalking_tracking_pixel",{sampleRate:1,tags:{event_category:"CatalogFeed",event_name:"ParseErrors"}})}b(p,()=>{(0,l.nP)("flashtalking_tracking_pixel",{sampleRate:1,tags:{event_category:"CatalogFeed",event_name:"All"}})},i)}function x(e,t){let n=new Date().toISOString().slice(0,10),i=(0,a.TF)(a.qs,e);b(h,()=>{(0,l.nP)("flashtalking_tracking_pixel",{sampleRate:1,tags:{event_category:"Billing",event_name:"All"}})},n+"&U8="+(0,a.TF)(a.qs,t)+"&U9="+i)}function P(e){b(u,()=>{(0,l.nP)("flashtalking_tracking_pixel",{sampleRate:1,tags:{event_category:"FirstSpender",event_name:"All"}})},new Date().toISOString().slice(0,10)+"&U8="+(e?(0,a.TF)(a.qs,e):""))}function S(e){b(d,()=>{(0,l.nP)("flashtalking_tracking_pixel",{sampleRate:1,tags:{event_category:"AllSpender",event_name:"All"}})},new Date().toISOString().slice(0,10)+"&U8="+(e?(0,a.TF)(a.qs,e):""))}},662137:function(e,t,n){n.d(t,{Z:()=>i});let i="M11 23H5a4 4 0 0 1-4-4V5a4 4 0 0 1 4-4h6zm12-4a4 4 0 0 1-4 4h-6V13h10zM19 1a4 4 0 0 1 4 4v6H13V1z"},734308:function(e,t,n){n.d(t,{Z:()=>s});var i=n(483180);let s=()=>{let{hostname:e}=window.location,t=e.includes("pinterdev")&&!e.includes("ads.pinterdev"),n=e.includes("pinterest")&&(e.startsWith("www")||e.startsWith("latest")||e.startsWith("testing"));return t||n?e:e.includes("ads-latest")?"latest.pinterest.com":i.Vi}},424297:function(e,t,n){n.d(t,{ak:()=>l,j3:()=>o,yv:()=>a});var i=n(525839),s=n(15667);function a(e){return e&&["DE","AT","CH"].includes(e.toUpperCase())}function o(){let{country:e=""}=(0,s.B)();return a(e)}function l(){return (0, i.ZP)()._('Imprint', 'impressumText', 'Text for link to impressum for Germany, Austra, or Switzerland')}},981636:function(e,t,n){n.d(t,{Z:()=>r});var i=n(686319),s=n(941404),a=n(111330),o=n(753143),l=n(831373);async function r(e){let t=(0,l.ZP)(),n=t?t.map(({pageType:e,...t})=>t):null,r={is_register:e??!1};if(n&&(r.unauth_visited_pages=JSON.stringify(n)),n){let e=await (0,i.Z)({url:"/v3/orientation/user_landing_signals/",method:"POST",data:r});(0,s.My)(`landing_signals.flush.${e.status}`),(0,o.M0)().removeItem(a.pm),(0,o.M0)().removeItem(a.ny),(0,o.M0)().removeItem(a.Vb),(0,o.M0)().removeItem(a.Mi)}}},749872:function(e,t,n){n.d(t,{CV:()=>l.Z,Mt:()=>u,RD:()=>c,iS:()=>d,z3:()=>_});var i=n(785873),s=n(816358),a=n(809295),o=n(93137),l=n(435292),r=n(959989);let c=e=>{let t={...(0,r.rl)()};delete t[e],(0,r.r8)(t)},u=(e,t)=>{if(!(0,r.PE)()||e&&!(e.id in(0,r.rl)())){if(e.partner&&e.partner.is_linked_business&&t)return void(0,o.Z)({...e,email:t.partner&&t.partner.is_linked_business?t.partner.biz_ownership_email:""});(0,o.Z)(e)}},d=(e,t,n)=>{(0,l.Z)("switch_account_success",{destination_user_id:t},n),(0,i.Z)(e)},_=(e,t)=>{s.Z.resume(a.Z3),(0,l.Z)("switch_account_failure",{destination_user_id:e},t)}},93137:function(e,t,n){n.d(t,{Z:()=>a});var i=n(435292),s=n(959989);let a=(e,t,n)=>{(0,s.r8)({...(0,s.rl)(),[e.id]:(e=>{let t={id:e.id,username:e.username,email:e.email,fullName:e.fullName||e.full_name,imageMediumUrl:e.imageMediumUrl||e.image_medium_url,imageLargeUrl:e.imageLargeUrl||e.image_large_url};return(t.fullName&&t.imageMediumUrl&&t.imageLargeUrl||(0,i.Z)("utils.incomplete_user_values"),e.partner?.is_create)?{...t,partner:{is_create:!0}}:t})(e)}),t&&n&&(0,i.Z)("new_account_add_success",{method:t,user_added:e.id},n)}},435292:function(e,t,n){n.d(t,{Z:()=>l});var i=n(172045),s=n(959989),a=n(941404);let o="web_account_switcher",l=(e,t,n)=>{let l=(0,s.yW)();l||(l=(()=>{let e=(0,i.Z)();return(0,a.tj)(`${o}.utils.group_created`,{group_id:e,group_count:(0,s.lv)()}),e})(),(0,s.M3)(l));let r={group_count:(0,s.lv)()},c="";n&&(c="account_switcher_modal"===n?"modal.":"flyout."),(0,a.tj)(`${o}.${c}${e}`,{...t,...r})}},593891:function(e,t,n){n.d(t,{aU:()=>o,hq:()=>a,o_:()=>i});let{Provider:i,useHook:s}=(0,n(729434).Z)("AuthenticationContext");function a(){return s().loginContext}function o(){return s().logout}},38787:function(e,t,n){n.d(t,{Kw:()=>l,RD:()=>r,dD:()=>u});var i=n(575108),s=n(686319),a=n(959989);let o=["partner.biz_ownership_email","partner.business_name","partner.contact_email","partner.contact_phone","partner.contact_phone_country()","partner.enable_profile_address","partner.enable_profile_message","partner.is_linked_business","partner.profile_place()","place.country","place.extra_street","place.locality","place.postal_code","place.region","place.street","user.businesses()","user.email","user.fast_advertiser_info_has_any_managed_advertisers","user.full_name","user.id","user.image_medium_url","user.owners()","user.partner()","user.username"],l=async()=>{let e=await i.Z.create("UserSessionResource",{session_accounts:!0}).callCreate();return e.resource_response.data?.session_accounts||{}},r=(e,t)=>{let n=Object.freeze({});try{n=(0,a.rl)()}catch{e(`${t}.removeAccountDataFromLocalStorage.jsonParseFailed`)}let i=Object.keys(n);if(e(`${t}.removeAccountDataFromLocalStorage.start`),0===i.length||n[i[0]].logged_in)return void e(`${t}.removeAccountDataFromLocalStorage.early_return`);let s=i.reduce((e,t)=>({...e,[t]:{logged_in:!0}}),{});(0,a.r8)(s),e(`${t}.removeAccountDataFromLocalStorage.updated`)},c=e=>({id:e.id,username:e.username,email:e.email,fullName:e.full_name,imageMediumUrl:e.image_medium_url,imageLargeUrl:e.image_large_url||"",owners:e.owners||null,partner:e.partner?{bizContactEmail:e.partner?.contact_email||"",bizOwnershipEmail:e.partner?.biz_ownership_email||e.email||"",businessName:e.partner?.business_name,isLinkedBusiness:e.partner?.is_linked_business}:null,businesses:(e?.businesses||[]).map(t=>({...c(t),partner:{bizContactEmail:t.partner?.contact_email||"",bizOwnershipEmail:t.partner?.biz_ownership_email||e.email||"",businessName:t.partner?.business_name??"",isLinkedBusiness:t.partner?.is_linked_business??!1}}))}),u=async e=>{let t=await l(),n=e.id;t[n]||(t[n]={logged_in:!0});let i=Object.keys(t||{}).map(e=>({uri:`v3/users/${e}/`,method:"GET",params:{fields:o.join(",")}})),a=(await (0,s.Z)({url:"/v3/batch/",method:"POST",data:{requests:JSON.stringify(i)}})).resource_response.data;if(a&&Object.keys(a).length>0){var r=Object.keys(a).filter(e=>"success"===a[e].status).map(e=>c(a[e].data));let e=r.every(e=>!!e.fullName)?"fullName":"username";return[...r].sort((t,n)=>t[e]>n[e]?1:n[e]>t[e]?-1:0)}return[]}},829121:function(e,t,n){n.d(t,{Ny:()=>d,ZP:()=>p,eD:()=>m,lp:()=>h,nY:()=>g});var i=n(111330),s=n(599472),a=n(425102),o=n(753143),l=n(694955),r=n(941404),c=n(669442),u=n(510928);let d=Object.freeze({SOFT_BANNED:0,RATE_LIMITED:1,LOGIN_ASSISTANCE:2,PASSWORD_RESET_SENT:3,PREVENT_FACEBOOK_REGISTER:4,PREVENT_GOOGLE_REGISTER:5,SUSPENDED:6,LOGIN_GOOGLE:7});class _{static defaultLoginRedirectUrl(){return window.location.pathname===l.lfe||window.location.pathname===l.ZEf||window.location.pathname.startsWith("/add-account")?"/":window.location.pathname+window.location.search}static defaultSocialLoginRedirectUrl(){return window.location.pathname.startsWith("/add-account")?"/":window.location.pathname}static isExceedRecaptchaLocalLimit(){let e=o.ZP.getItem(i.kl);if(e&&e.indexOf("|")>-1){let t=e.split("|");return 3===t.length&&new Date().getTime()/1e3-parseInt(t[0],10)<=3600}return!1}static updateRecaptchaTimeStamp(){let e=o.ZP.getItem(i.kl),t=[];e&&3===(t=e.split("|")).length&&t.shift();let n=(new Date().getTime()/1e3).toString();t.push(n);let s=t.join("|");o.ZP.setItem(i.kl,s)}static isFullyLoggedIn(e,t){return e&&t===a.Z.DEFAULT}static handleRedirect(e){if(!e){e="/";let t=(0,u.Z)();if(t){let n=t.next;n&&(e=n,delete t.next),e=(0,c.Z)(e||"/",t)}}(0,s.Z)(e)}static handleRedirectWithFallbackWindowLocation(){this.handleRedirect(this.defaultLoginRedirectUrl())}static handleSignupRedirect(e,t){(0,o.M0)().setItem(i.F6,Date.now()),!t&&e&&"/"!==e?_.handleRedirect(e):_.handleRedirect("/")}static storeLoginCredentialsToBrowser(e){let t=window.navigator.credentials;if(t&&e.username_or_email)try{let n=new window.PasswordCredential({id:e.username_or_email,password:e.password});t.store(n).then(()=>{(0,r.My)("navigatorCredentials.store.success")})}catch(e){(0,r.My)("navigatorCredentials.store.error")}}static handleLoginMfa(e,t,n){(0,r.My)("multi_step_login"),_.storeLoginCredentialsToBrowser(e),n?n(e,t):(0,r.My)("unauth.login.error.CLIENT_ERROR.null_mfa_handler")}}let p=_;function h(e){return e.facebook_id?"facebook":e.google_open_id_token?"google_one_tap":e.line_id_token?"line":e.username_or_email?"email":e.qr_token?"qr_code":"other"}function m(e){return e.mfa_token?"mfa_token":e.mfa_resend?"mfa_resend":h(e)}function g(e){return e.facebook_id?"facebook":e.google_open_id_token?"google":e.username_or_email?"email":e.qr_token?"qr_code":"other"}},959989:function(e,t,n){n.d(t,{M3:()=>u,PE:()=>l,Q:()=>d,lv:()=>r,r8:()=>o,rl:()=>a,yW:()=>c});var i=n(111330),s=n(753143);let a=()=>(0,s.M0)().getItem(i.uo)??Object.freeze({}),o=e=>(0,s.M0)().setItem(i.uo,e),l=()=>null!==(0,s.M0)().getItem(i.uo),r=()=>Object.keys(a()).length,c=()=>(0,s.M0)().getItem(i.R1),u=e=>(0,s.M0)().setItem(i.R1,e),d=()=>({multipleAccountMap:a(),multipleAccountGroupId:c()})},154796:function(e,t,n){n.d(t,{Z:()=>a});var i=n(667294),s=n(274320);let a=()=>{let e=(0,s.r)();return(0,i.useCallback)(()=>{e.flush()},[e])}},68290:function(e,t,n){n.d(t,{Z:()=>i});function i(e){let t=document.createElement("iframe");for(let n in e)t.setAttribute(n,e[n]);return t}},450978:function(e,t,n){n.d(t,{JB:()=>_,LG:()=>u,OJ:()=>l,TF:()=>c,ko:()=>d,qs:()=>r});var i=n(111330),s=n(227427),a=n(785807);let o={NewUsers:{Flashtalking:{Mobile:i.PL,Desktop:i.bB}},Logins:{Flashtalking:{Mobile:i.b_,Desktop:i.pF}}},l=()=>(1e6*Math.random()).toString(),r="pbm_shopping_bespoke",c=(e,t)=>{let n=e=>e.split("").map(e=>e.charCodeAt(0));return t.split("").map(n).map(t=>n(e).reduce((e,t)=>e^t,t)).map(e=>("0"+Number(e).toString(16)).substr(-2)).join("")},u=(e,t)=>{let n=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate());return Math.floor((Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())-n)/864e5)},d=({eventCategory:e,deviceType:t,country:n,countryFromHostName:i,countryFromIp:l,regionFromIp:r})=>{!("undefined"!=typeof window&&window.navigator&&window.navigator.globalPrivacyControl&&window.navigator.globalPrivacyControl)&&(0,s.$)({country:n,countryFromHostName:i,countryFromIp:l,regionFromIp:r})&&(0,a.jw)({id:o[e].Flashtalking[t],eventCategory:e,eventName:t})};function _(e,t,n,i){(0,s.$)({country:e,countryFromHostName:t,countryFromIp:n,regionFromIp:i})&&(0,a.Kv)({id:"flashtalking-m-ses",eventName:"Mobile"})}},662641:function(e,t,n){n.d(t,{Z:()=>s});var i=n(274320);function s(){let{checkExperiment:e}=(0,i.r)();return()=>e("web_initial_client_fetches_reduction").anyEnabled}},785807:function(e,t,n){n.d(t,{jw:()=>c,Kv:()=>r,Um:()=>o,jO:()=>l});var i=n(462478),s=n(356075),a=n(603316);function o(){(0,i.W)(),(0,i.Z)("PageView",()=>{(0,a.nP)("fb_tracking_pixel",{sampleRate:1,tags:{event_category:"PageView",event_name:"AllViews"}})}),(0,i.Z)("ViewContent",()=>{(0,a.nP)("fb_tracking_pixel",{sampleRate:1,tags:{event_category:"ViewContent",event_name:"AuthViews"}})})}function l(e){if(e){let{pixelBlocked:n}=e;function t(){if(n)return;let e=document.createElement("script");e.src="https://www.googletagmanager.com/gtag/js?id=AW-819016158";let t="gtag-id-1";function i(){window.dataLayer.push(arguments)}e.id=t,e.async=!0,document.getElementById(t)||document.body.insertBefore(e,document.body.firstChild),window.dataLayer=window.dataLayer||[],i("js",new Date),i("config","AW-819016158"),i("event","page_view",{send_to:"AW-819016158"})}"complete"===document.readyState&&t(),window.addEventListener("load",t)}}function r(e){if(e){let{id:t}=e,{eventName:n}=e;t&&n&&(0,s.VC)(t,()=>{(0,a.nP)("flashtalking_tracking_pixel",{sampleRate:1,tags:{event_category:"PageView",event_name:"AllViews"}}),(0,a.nP)("flashtalking_tracking_pixel",{sampleRate:1,tags:{event_category:"PageView",event_name:n}})})}}function c(e){if(!e)return;let{id:t}=e,{eventCategory:n}=e,{eventName:i}=e;t&&n&&i&&(0,s.Rs)(t,n,i,()=>{(0,a.nP)("flashtalking_tracking_pixel",{sampleRate:1,tags:{event_category:n,event_name:"All"}}),"All"!==i&&(0,a.nP)("flashtalking_tracking_pixel",{sampleRate:1,tags:{event_category:n,event_name:i}})})}},732888:function(e,t,n){n.d(t,{Z:()=>l,h:()=>o});var i=n(172045),s=n(17314);function a(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let o="undefined"!=typeof window&&window.performance&&window.performance.now?()=>Math.floor((window.performance.timeOrigin+window.performance.now())*1e6):()=>1e6*Date.now(),l=class{constructor(e){a(this,"start",()=>(this.startTime=o(),this.startTime)),a(this,"end",()=>(this.endTime=o(),this.duration=this.startTime?this.endTime-this.startTime:null,this.duration));try{this.uuid=(0,i.Z)()}catch(e){this.uuid=(0,s.Z)()}e&&Object.assign(this,e)}}},79077:function(e,t,n){n.d(t,{Z:()=>o});var i=n(667294),s=n(507282),a=n(941404);function o(){return(0,i.useCallback)(e=>{e.action&&e.event?(0,a.My)("pinner_conversion",{...e,type:e.type||"none",trigger:e.trigger||"other",referrer:(0,s.Z)()}):(0,a.My)("pinner_conversion.missing_tags")},[])}},734263:function(e,t,n){n.d(t,{Z:()=>a});var i=n(20256),s=n(785893);function a({ariaHidden:e=!1,color:t,size:n}){return(0,s.jsx)("span",{"aria-hidden":e,style:{padding:"0 4px"},children:(0,s.jsx)(i.xv,{color:t,inline:!0,size:n??"200",children:"·"})})}},599402:function(e,t,n){n.d(t,{Z:()=>l});var i=n(20256),s=n(525839),a=n(302148),o=n(785893);function l({itemLabel:e="",count:t,iconSlot:n}){let l=t<100?`${t}`:"99+",r=(0,s.ZP)(),c=r._('notifications', 'notifications.BadgedIcon.defaultItemLabel', 'Default label for notifications button with unread content.'),u=(0,a.Wc)(r._('You have new {{contentType}}', 'notifications.BadgedIcon.accessibilityIndicatorLabel', 'Accessibility label for notifications button with unread content. contentType: type of content received recently, for example "Messages", "updates" or "notifications".'),{contentType:e||c});return(0,o.jsxs)(i.xu,{position:"relative",children:[n,t>0&&(0,o.jsx)(i.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{right:-6-2*l.length,top:-8,padding:`0 ${3===l.length?"2px":"3px"} 0 2px`}},display:"flex",justifyContent:"center",position:"absolute",children:(0,o.jsx)(i.z$,{accessibilityLabel:u,count:t})})]})}},817618:function(e,t,n){n.d(t,{Z:()=>a});var i=n(341742),s=n(104659);function a({children:e}){let{setAppFocusState:t}=(0,s.G)();return(0,i.Z)(()=>(t(!1),()=>{t(!0)})),e}},572257:function(e,t,n){n.d(t,{Z:()=>s});var i=n(686319);function s(){return async()=>{let e=await (0,i.Z)({url:"/ads/v4/business_access/businesses/me/employers/"}),t=e.resource_response?e.resource_response.data:{data:[]};return await Promise.all(t&&t.data||[])}}},407633:function(e,t,n){n.d(t,{Z:()=>i});function i(e){return{type:"UPDATE_VIEWER_IS_PROFILE_OWNER_OR_PROFILE_MANAGER",payload:e}}},514058:function(e,t,n){n.d(t,{Z:()=>i});let i=({businessAccess:e})=>e??{}},728759:function(e,t,n){n.d(t,{Z:()=>s});var i=n(616550);function s(){let{catalog_id:e,feed_profile_id:t,workflow_id:n,product_group_id:s,event_type_id:a,supplemental_feed_profile_id:o,mn_catalog_id:l,mn_product_group_id:r}=(0,i.UO)();return{catalogId:e,feedProfileId:t,workflowId:n,productGroupId:s,eventTypeId:a,supplementalFeedProfileId:o,mnCatalogId:l,mnProductGroupId:r}}},570032:function(e,t,n){n.d(t,{q:()=>_,y:()=>p});var i=n(667294),s=n(274320),a=n(15667),o=n(686319),l=n(817998);function r(e,t){(0,l.T)(t)&&(0,o.Z)({method:"PUT",url:`/ads/v4/preferences/${e}/`,data:{level:"ADVERTISER",key:"CAMPAIGN_TOOL_PREFERENCE",preferences:t}})}var c=n(766922),u=n(785893);let d=(0,i.createContext)({campaignToolPreference:null,updateCampaignToolPreference:r}),_=({children:e})=>{let[t,n]=(0,i.useState)(null),o=(0,s.r)(),{advertiser:l}=(0,a.B)(),_=async(e,t)=>{r(e,t),n(t)};(0,i.useEffect)(()=>{(async()=>{l&&n(await (0,c.f)(l.id))})()},[l,o]);let p=(0,i.useMemo)(()=>({campaignToolPreference:t,updateCampaignToolPreference:_}),[t]);return(0,u.jsx)(d,{value:p,children:e})},p=()=>(0,i.useContext)(d)},766922:function(e,t,n){n.d(t,{Z:()=>u,f:()=>c});var i=n(667294),s=n(686319),a=n(274320),o=n(15667),l=n(817998);let r="ADVERTISER",c=async e=>{let t;try{let n;t=(n=(await (0,s.Z)({method:"GET",url:`/ads/v4/preferences/${e}/`,data:{level:r,key:"CAMPAIGN_TOOL_PREFERENCE"}})).resource_response.data)&&n[r]&&n[r][0]&&n[r][0].preferences}catch{return null}return t&&(0,l.T)(t)?t:null},u=()=>{let[e,t]=(0,i.useState)(null),n=(0,a.r)(),{advertiser:s}=(0,o.B)();return(0,i.useEffect)(()=>{(async()=>{s&&t(await c(s.id))})()},[s,n]),e}},991832:function(e,t,n){n.d(t,{Z:()=>u});var i=n(20256),s=n(708847),a=n(525839),o=n(73852),l=n(78762),r=n(785893);let c=(0,l.Z)(()=>Promise.all([n.e("25418"),n.e("91062"),n.e("76767")]).then(n.bind(n,990361)),void 0,e=>990361,"FullPageSignup",e=>["25418","91062","76767"]);function u(e){let t=(0,a.ZP)();return(0,r.jsx)(o.Z,{onCloseClick:()=>{e.onClose&&e.onClose()},renderContent:()=>(0,r.jsx)(i.xu,{"data-test-id":"account-switcher-modal",display:"flex",flex:"grow",justifyContent:"center",children:(0,r.jsx)(c,{attributionLabel:e.attributionLabel,container:e.container,customLoginTagline:e.customTaglineText||t._('Add account', 'Short text on the button that allows a user to log in to another Pinterest account', 'Short text on the button that allows a user to log in to another Pinterest account'),fallback:(0,r.jsx)(s.Z,{}),hideAccountSwitchValueProp:e.hideAccountSwitchValueProp,isAccountSwitch:!0,signupFlow:{type:"login",email:e.email},signupSource:"login"})})})}},61110:function(e,t,n){n.d(t,{T:()=>c,X:()=>r});var i=n(667294),s=n(729434),a=n(991832),o=n(785893);let{Provider:l,get:r}=(0,s.Z)("AccountSwitcherLoginModal");function c({children:e}){let[t,n]=(0,i.useState)(!1),[s,r]=(0,i.useState)(""),[c,u]=(0,i.useState)(""),d=(0,i.useCallback)((e,t)=>{u(e),t&&r(t),n(!0)},[]),_=(0,i.useMemo)(()=>({showAccountSwitcherLoginModal:d}),[d]);return(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(l,{value:_,children:e}),t&&(0,o.jsx)(a.Z,{container:c,email:s??"",onClose:()=>n(!1)})]})}},73852:function(e,t,n){n.d(t,{Z:()=>h});var i=n(20256),s=n(525839),a=n(369416),o=n(15667),l=n(572227),r=n(785893);let c=`
.AccountSwitcherModal {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
}
`,u={backgroundColor:"rgba(0, 0, 0, 0.6)",opacity:1,position:"fixed",top:"0px",bottom:"0px",left:"0px",right:"0px",zIndex:1e3},d={WebkitOverflowScrolling:"touch",overflowY:"scroll",bottom:"0px",left:"0px",right:"0px",top:"0px",position:"fixed",WebkitBoxOrient:"vertical",WebkitBoxDirection:"normal",WebkitFlexDirection:"column",msFlexDirection:"column",flexDirection:"column",WebkitJustifyContent:"space-around",msFlexPack:"distribute",justifyContent:"space-around"},_={display:"flex",minHeight:"0px",position:"relative",opacity:1,borderRadius:"6px",margin:"0 auto"},p={overflow:"hidden",position:"fixed",top:"24px"};function h(e){let t=(0,s.ZP)(),n=(0,l.Z)(),{isRTL:h}=(0,o.B)(),{renderContent:m}=e;return(0,r.jsxs)(i.xu,{dangerouslySetInlineStyle:{__style:u},children:[(0,r.jsx)(a.Z,{unsafeCSS:c}),(0,r.jsx)("div",{className:"AccountSwitcherModal",onClick:()=>{n({action:"click",item:"wash-button",within:"account-switcher-modal"});let{onCloseClick:t}=e;t()},role:"dialog",style:d,children:(0,r.jsxs)("div",{onClick:e=>{e.stopPropagation()},role:"dialog",style:_,children:[m(),(0,r.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{...p,[h?"left":"right"]:"24px"}},children:(0,r.jsx)(i.hU,{accessibilityLabel:t._('close', 'accessible label for close button', 'accessible label for close button'),bgColor:"transparent",icon:"cancel",iconColor:"white",onClick:()=>{n({action:"dismiss",item:"close-button",within:"account-switcher-modal"});let{onCloseClick:t}=e;t()}})})]})})]})}},39435:function(e,t,n){n.d(t,{N:()=>l,t:()=>r});var i=n(667294),s=n(729434),a=n(785893);let{Provider:o,get:l}=(0,s.Z)("LinkedAccount");function r({children:e}){let[t,n]=(0,i.useState)([]),s=(0,i.useMemo)(()=>({userAccounts:t,userAccountsRetrieved:n}),[n,t]);return(0,a.jsx)(o,{value:s,children:e})}},146621:function(e,t,n){n.d(t,{Z:()=>i});let i=(0,n(667294).createContext)(()=>null)},199593:function(e,t,n){n.d(t,{Z:()=>a,k:()=>i});let{Provider:i,get:s}=(0,n(729434).Z)("Conversations"),a=s},427141:function(e,t,n){n.d(t,{Z:()=>s});var i=n(199593);function s(){let{conversations:{data:e}}=(0,i.Z)();return Array.from(Object.keys(e).map(t=>e[t]).filter(e=>e.users&&e.last_message)).sort((e,t)=>new Date((t.last_message||t).created_at).getTime()-new Date((e.last_message||e).created_at).getTime())}},252440:function(e,t,n){n.d(t,{O:()=>c,Z:()=>u});var i=n(20256),s=n(521009),a=n(424297),o=n(525839),l=n(694955),r=n(785893);let c=({onClick:e,text:t,url:n})=>(0,r.jsx)(i.xu,{role:"listitem",children:(0,r.jsx)(i.xv,{color:"subtle",size:"200",weight:"bold",children:(0,r.jsx)(i.rU,{href:n,onClick:e,target:"blank",children:(0,r.jsx)(i.xu,{padding:1,children:t})})})});function u(){let e=(0,o.ZP)(),t=(0,s.Z)(),n=e=>()=>t({event_type:101,component:218,element:e}),u=(0,a.j3)(),d=(0,a.ak)();return(0,r.jsxs)(i.xu,{direction:"column",display:"flex",paddingX:3,paddingY:2,role:"list",width:"100%",wrap:!0,children:[(0,r.jsx)(c,{onClick:n(8006),text:e._('About', 'menu item that takes user to the Pinterest about page', 'menu item that takes user to the Pinterest about page'),url:l.wUZ}),(0,r.jsx)(c,{onClick:n(8007),text:e._('Blog', 'menu item that takes user to the Pinterest blog', 'menu item that takes user to the Pinterest blog'),url:"https://www.pinterest.com/_/_/blog/"}),(0,r.jsx)(c,{onClick:n(8008),text:e._('Businesses', 'menu item that takes user to the Pinterest for business page', 'menu item that takes user to the Pinterest for business page'),url:l.NWh}),(0,r.jsx)(c,{onClick:n(8009),text:e._('Careers', 'menu item that takes user to the Pinterest careers page', 'menu item that takes user to the Pinterest careers page'),url:l.t_w}),(0,r.jsx)(c,{onClick:n(8010),text:e._('Developers', 'menu item that takes user to the Pinterest developers page', 'menu item that takes user to the Pinterest developers page'),url:l.iYv}),(0,r.jsx)(c,{onClick:n(8011),text:e._('Removals', 'menu item that takes user to the Pinterest copyright page', 'menu item that takes user to the Pinterest copyright page'),url:l.hwP}),(0,r.jsx)(c,{onClick:n(8004),text:e._('Privacy Policy', 'additionalLinks.privacyPolicy', 'menu item that takes user to the Pinterest privacy policy page'),url:l.R_9}),(0,r.jsx)(c,{onClick:n(10406),text:e._('Personalized Ads', 'menu item that takes user to the Pinterest personalized ads page', 'menu item that takes user to the Pinterest personalized ads page'),url:"https://www.pinterest.com/_/_/help/articles/personalized-ads-pinterest"}),(0,r.jsx)(c,{onClick:n(13335),text:e._('Your Privacy Rights', 'additionalLinks.yourPrivacyRights', 'menu item that takes user to the Privacy Settings page'),url:"https://www.pinterest.com/settings/privacy/"}),(0,r.jsx)(c,{onClick:n(8012),text:e._('Terms', 'menu item that takes user to the Pinterest terms page', 'menu item that takes user to the Pinterest terms page'),url:l.U5h}),u&&(0,r.jsx)(c,{onClick:n(8013),text:d,url:l.$BF})]})}},598849:function(e,t,n){n.d(t,{C:()=>i,Z:()=>a});let{Provider:i,get:s}=(0,n(729434).Z)("Header"),a=s},320923:function(e,t,n){n.d(t,{Z:()=>u});var i=n(667294),s=n(20256),a=n(980787),o=n(364843),l=n(461951),r=n(785893);let c=({anchorElementRef:e,children:t,experienceAnchor:n})=>n?(0,r.jsx)(o._7,{anchor:".HomeButton2",anchorElementRef:e.current,containerBoxConfig:{display:"flex",height:"100%"},children:t}):t,u=({accessibilityLabel:e,compactMode:t,icon:n,rightIcon:o,selected:u,text:d,type:_="link",url:p,contextData:h,onClick:m})=>{let{logContextEvent:g}=(0,a.u)(),[f,b]=(0,i.useState)(l.Wyp),y=(0,i.useRef)(null),v=()=>{b(l.KtD)},A=()=>{b(l.Wyp)},w=()=>{b(l.Wyp)},x=()=>{b(l.KtD)},P=e=>{if(h){let{event:e,component:t,element:n}=h;g({event_type:e,component:t,element:n})}m&&m(e)},S=(0,r.jsx)(s.Tg,{accessibilityLabel:e,href:p||"",onBlur:w,onFocus:x,onMouseEnter:v,onMouseLeave:A,onTap:({event:e})=>P(e),rounding:4,children:(0,r.jsx)(s.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:f}},display:"flex",height:48,justifyContent:"center",rounding:4,width:48,children:n})});if(o||"link"!==_||!p||t){if("link"===_&&(t&&n||o)){let i,a,l="pill";l=n||o?d&&!t?"pill":"circle":"pill",n&&(i=n),o&&(a=o);let c=d instanceof Object?d:(0,r.jsx)(s.xv,{color:u?"default":"subtle",overflow:"normal",size:"200",weight:"bold",children:d});S=(0,r.jsx)(s.Tg,{accessibilityLabel:e,href:p||"",onBlur:w,onFocus:x,onMouseEnter:v,onMouseLeave:A,onTap:({event:e})=>P(e),rounding:l,children:(0,r.jsxs)(s.kC,{alignItems:"center",justifyContent:"start",children:[i,!!d&&!t&&(0,r.jsx)(s.xu,{paddingX:2,children:c}),a]})})}}else S=(0,r.jsx)(c,{anchorElementRef:y,experienceAnchor:"/"===p?".HomeButton2":"",children:(0,r.jsx)(s.Tg,{ref:y,accessibilityLabel:e,href:p,onBlur:w,onFocus:x,onMouseEnter:v,onMouseLeave:A,onTap:({event:e})=>P(e),rounding:"pill",children:(0,r.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:f}},paddingX:4,paddingY:4,rounding:"pill",children:(0,r.jsx)(s.xv,{color:u?"default":"subtle",overflow:"normal",weight:"bold",children:d})})})});return(0,r.jsx)(s.xu,{position:"relative",children:S})}},30536:function(e,t,n){n.d(t,{F:()=>i,I:()=>s});let{Provider:i,get:s}=(0,n(729434).Z)("SiteParametersContextType")},966279:function(e,t,n){n.d(t,{Jo:()=>u,mv:()=>_,nJ:()=>d});var i=n(667294),s=n(729434);let a={hiddenNews:{}};function o(e,t){if(e=e||a,"HIDDEN_NEWS_ADD_ID_TO_HIDDEN_STATUS"!==t.type)return e;{let{payload:{id:n,isHidden:i}}=t;return{hiddenNews:{...e?.hiddenNews,[n]:i}}}}var l=n(785893);let{Provider:r,get:c}=(0,s.Z)("HiddenNews");function u({children:e}){let[t,n]=(0,i.useReducer)(o,a),s=(0,i.useMemo)(()=>({dispatch:n,hiddenNews:t}),[n,t]);return(0,l.jsx)(r,{value:s,children:e})}function d(){let{dispatch:e,hiddenNews:{hiddenNews:t}}=c();return(0,i.useMemo)(()=>({updateNewsIdToHiddenNews:(t,n)=>{e({type:"HIDDEN_NEWS_ADD_ID_TO_HIDDEN_STATUS",payload:{id:t,isHidden:n}})},getShownNewsCount:e=>e.filter(e=>e&&e.id&&!(e.id in t&&t[e.id])).length}),[e,t])}function _(){let{hiddenNews:e}=c();return e}},168590:function(e,t,n){n.d(t,{Z:()=>o,b:()=>a});var i=n(506662);let s=[i.Gl,i.PY,i.jC,i.Xn,i.b_,i.oF,i.dt,i.x7,i.cY,i.bb];function a(e,t){return(t?s:[...s,i.Ig]).every(t=>!t(e))}function o(e){return s.every(t=>!t(e))}},901971:function(e,t,n){n.d(t,{P:()=>p,j:()=>h});var i=n(667294),s=n(729434),a=n(355940),o=n(982166),l=n(821342),r=n(525839),c=n(78762),u=n(785893);let d=(0,c.Z)(()=>n.e("53732").then(n.bind(n,187948)),void 0,e=>187948,"app-www-ReportBug-ReportBug",e=>["53732"]),{Provider:_,get:p}=(0,s.Z)("reportBugModalContext");function h({children:e}){let t=(0,r.ZP)(),[n,s]=(0,i.useState)(!1),c=(0,l.Z)(),p=(0,i.useCallback)(()=>{s(!0)},[]),h=(0,i.useMemo)(()=>({handleShowReportBugModal:p}),[p]);return(0,u.jsxs)(i.Fragment,{children:[(0,u.jsx)(_,{value:h,children:e}),n&&c.isAuth&&(0,u.jsx)(o.ZP,{accessibilityModalLabel:t._('Report bug', 'header.accountsOptionsMenu.logout', 'Modal accessibility label for reporting a bug'),onDismiss:()=>{s(!1)},children:(0,u.jsx)(a.Z,{name:"SafeSuspense_ReportBugModal_ReportBug",children:(0,u.jsx)(d,{onDismiss:()=>{s(!1)},username:c.username})})})]})}},151594:function(e,t,n){n.d(t,{A:()=>l,w:()=>r});var i=n(667294),s=n(729434),a=n(785893);let{Provider:o,get:l}=(0,s.Z)("Session");function r({children:e}){let[t,n]=(0,i.useState)(void 0),s=(0,i.useCallback)(()=>n(void 0),[]),l=(0,i.useMemo)(()=>({unauthFollowUserId:t,setUnauthFollowUserId:n,removeUnauthFollowUserId:s}),[t,s]);return(0,a.jsx)(o,{value:l,children:e})}},244529:function(e,t,n){n.d(t,{Z:()=>l});var i=n(616550),s=n(821342),a=n(506662),o=n(168590);function l(){let e=(0,s.Z)(),t=(0,i.TH)();return{enabled:(0,o.Z)(t)&&e.isAuth&&!e.isPartner&&!(0,a.OK)(t)}}},631395:function(e,t,n){n.d(t,{QV:()=>g,Qj:()=>y,Td:()=>b});var i=n(667294),s=n(20256),a=n(521009),o=n(662137),l=n(702849),r=n(525839),c=n(302148),u=n(77836);let d={home:{default:"home",selected:"home-fill"},create:{default:"square-plus",selected:"square-plus-fill"},today:{default:"compass",selected:"compass-fill"},notifications:{default:"bell",selected:"bell-fill"},messages:{default:"speech-ellipsis",selected:"speech-ellipsis-fill"},moreOptions:{default:"cog",selected:"cog-fill"},shopping:{default:"shopping-bag",selected:"shopping-bag-fill"},categories:{default:"view-type-default",selected:"view-type-default-fill"},board:{default:"board",selected:void 0}};var _=n(616550),p=n(921825),h=n(785893);function m(e){let{preload:t}=(0,p.G)(),{onClick:n,_onMouseEnter:i,preloadExtent:a="Both",route:o,...l}=e;return(0,h.jsx)(s.rU,{_onMouseEnter:e=>{try{i?.(e)}catch{}"None"!==a&&t(o,a)},href:(0,_.Gn)(o.kind,o.routeParams),onClick:e=>{try{n?.(e)}catch{}t(o,"Both")},...l})}let g=({iconName:e,selected:t})=>(0,h.jsx)(s.JO,{accessibilityLabel:"",color:"default",icon:t?d[e].selected:d[e].default,size:u.nQ}),f=({itemLabel:e,count:t})=>{let n=(0,r.ZP)();if(!t||t<=0)return null;let i=(0,c.Wc)(n._('You have new {{contentType}}', 'notifications.button.badge.notifications', 'Accessibility label for notifications button with unread content. contentType: type of content received recently, for example "Messages", "updates" or "notifications".'),{contentType:e}),a=t<100?`${t}`:"99+";return(0,h.jsx)(s.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{pointerEvents:"none",top:6,left:`calc(50% + ${4-a.length}px)`}},display:"flex",justifyContent:"center",position:"absolute",children:(0,h.jsx)(s.z$,{accessibilityLabel:i,count:t})})},b=(0,i.forwardRef)(({accessibilityLabel:e,accessibilityPopupRole:t,accessibilityControls:n,badgeCount:i,tooltipText:a,href:l,iconName:r,selected:c,onClick:_,onMouseDown:p,onMouseEnter:m,dataTestId:g},b)=>{let y=a||e,v=!!t,A=c?d[r].selected:d[r].default,w="board"===r&&c,x={text:y,idealDirection:u.Mh,zIndex:u.BO},P=u.yg,S=l?(0,h.jsx)(s.I_,{accessibilityLabel:e,dangerouslySetSvgPath:w?{__path:o.Z}:void 0,dataTestId:g,href:l,icon:w?void 0:A,onClick:_,size:P,tooltip:x}):(0,h.jsx)(s.hU,{accessibilityControls:n,accessibilityExpanded:v?c:void 0,accessibilityHaspopup:v,accessibilityLabel:e,accessibilityPopupRole:t,dataTestId:g,icon:A,onClick:_,size:P,tooltip:x});return(0,h.jsxs)(s.xu,{ref:b,onMouseDown:p,onMouseEnter:m,position:"relative",children:[S,(0,h.jsx)(f,{count:i,itemLabel:e})]})}),y=(0,i.forwardRef)(({accessibilityLabel:e,accessibilityControls:t,iconName:n,selected:o,onClick:c,onMouseDown:d,onMouseEnter:_,route:p,preloadExtent:f,dataTestId:b,variant:y="short"},v)=>{let A=(0,a.Z)(),w=(0,r.ZP)(),[x,P]=(0,i.useState)("transparent"),[S,k]=(0,i.useState)(!1),C=()=>{_?.(),P(l.ZG),k(!0)},I=(0,i.useRef)(null),z=(0,u.vg)(w,y);return(0,h.jsx)(s.xu,{onMouseEnter:C,onMouseLeave:()=>{P("transparent"),k(!1)},overflow:"hidden",paddingX:4,position:"relative",children:(0,h.jsx)(s.iP,{ref:v,accessibilityControls:t,accessibilityExpanded:S,accessibilityHaspopup:!0,accessibilityLabel:e,dataTestId:b,onTap:C,rounding:u.dv,tapStyle:u.xp,children:(0,h.jsxs)(s.xu,{ref:I,alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:x}},display:"flex",height:48,id:t,justifyContent:"center",onMouseDown:d,rounding:u.dv,width:48,children:[S&&(0,h.jsx)(s.Lt,{anchor:I.current,disableMobileUI:!0,id:"ideas-dropdown",idealDirection:"right",isWithinFixedContainer:!1,onDismiss:()=>k(!1),zIndex:u.m6,children:z.map(e=>(0,h.jsx)(s.Lt.Link,{href:`/ideas/${e.slug}/${e.value}/`,onClick:()=>{A({object_id_str:e.value,component:8,event_type:101,element:216,aux_data:{interest_id:e.value,interest:e.label}})},option:e},`cat-${e.value}`))}),(0,h.jsx)(m,{onClick:c,preloadExtent:f,route:p,children:(0,h.jsx)(g,{iconName:n,selected:o})})]})})})})},712511:function(e,t,n){n.d(t,{Z:()=>a});var i=n(244529),s=n(403252);function a(){let{enabled:e}=(0,i.Z)(),{enabled:t}=(0,s.Z)();return{enabled:e||t}}},403252:function(e,t,n){n.d(t,{Z:()=>c});var i=n(616550),s=n(821342),a=n(506662),o=n(15667),l=n(708898),r=n(647709);let c=function(){let e=(0,s.Z)(),{isRTL:t}=(0,o.B)(),n=(0,i.TH)(),c=(0,r.ZP)();return{enabled:(0,l.Z)()&&"desktop"===c&&!(0,a.nU)(n)&&!(0,a.Xn)(n)&&!(0,a.C$)(n)&&!(0,a.Ni)(n)&&!(0,a.XQ)(n)&&!t&&!e.isAuth}}},509120:function(e,t,n){n.d(t,{Z:()=>u});var i=n(667294),s=n(20256),a=n(785893);function o(e){return`${Math.min(100*e,100)}%`}function l({customCover:e,imgPos:t,imgUrl:n}){let[s,a]=(0,i.useState)({height:0,loaded:!1,width:0}),{height:l,loaded:r,width:c}=s;if((0,i.useEffect)(()=>{let e=new Image;e.onload=()=>{a({height:e.naturalHeight,loaded:!0,width:e.naturalWidth})},e.src=n},[n]),!e||!t||!l||!c)return{loaded:r,position:"center center"};let u=c-t.width,d=l-t.height,_=u>0?o(t.x/u):"center",p=d>0?o(t.y/d):"center";return{loaded:r,position:`${_} ${p}`}}function r(e){let{loaded:t,position:n}=l(e),{imgUrl:i}=e,o={backgroundImage:`url(${i})`,backgroundPosition:n,backgroundRepeat:"no-repeat",backgroundSize:"cover",minHeight:"100%",backgroundColor:"#EFEFEF",position:"relative"};return(0,a.jsx)(s.xu,{"data-test-id":"cover-image-box",height:"100%",width:"100%",children:t&&(0,a.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:o},"data-test-id":"cover-image",children:(0,a.jsx)("div",{className:"imageWash",style:{position:"absolute"}})})})}function c(e){let{loaded:t,position:n}=l(e),{alt:i,color:o,imgUrl:r}=e;return(0,a.jsx)(s.zd,{height:"100%",width:"100%",children:t&&(0,a.jsx)("img",{alt:i||"",src:r,style:{backgroundColor:o||"#EFEFEF",fetchPriority:"cover",height:"100%",loading:"auto",objectFit:"cover",objectPosition:n,width:"100%"}})})}function u(e){let{renderAsImage:t}=e;return t?(0,a.jsx)(c,{...e}):(0,a.jsx)(r,{...e})}},741331:function(e,t,n){n.d(t,{Z:()=>i});let i=(0,n(667294).createContext)({inboxButton:null,setInboxButton:()=>{},profileInboxButton:null,groupBoardMessageButton:null,setProfileInboxButton:()=>{},isUnblockToast:!1,setIsUnblockToast:()=>{},setGroupBoardMessageButton:()=>{}})},966269:function(e,t,n){n.d(t,{Z:()=>a});var i=n(667294),s=n(741331);function a(){let e=(0,i.useContext)(s.Z);if(void 0===e)throw Error("useInboxButtonContext must be used within a InboxButtonContext Provider.");return e}},314708:function(e,t,n){n.d(t,{Z:()=>P});var i=n(667294),s=n(616550),a=n(20256),o=n(355940),l=n(525839),r=n(506662),c=n(821806),u=n(378888),d=n(199593),_=n(543188),p=n(879922),h=n(833036),m=n(536488),g=n(25837),f=n(966279),b=n(244529),y=n(785893);let v=()=>n.e("94057").then(n.bind(n,806413)),A=(0,i.lazy)(v);function w({onClearBadges:e,onClick:t,onPanelChange:n,tooltipText:w}){let x=(0,l.ZP)(),P=(0,s.TH)(),S=(0,i.useRef)(null),[k,C]=(0,i.useState)(!1),[I,z]=(0,i.useState)(!1),[E,Z]=(0,i.useState)(!1),[j,T]=(0,i.useState)(!1),{tab:N,news_hub_id:L}=(0,u.mB)(P.search),{conversations:{conversationsUnseenCount:R,newsHubCount:U}}=(0,d.Z)(),O=e=>{if((0,r.L6)(P))return;let t=Math.max(e,0),n=x._('Pinterest', ' - ', ' -- ');window.document.title=t?`(${t}) ${n}`:n};(0,i.useEffect)(()=>{O(R+U),P.pathname.startsWith("/notifications")&&"inbox"!==N&&C(!0)},[R,U]);let M=()=>{t?.(),C(!k),e(_.S.NEWS_HUB),O(0)};(0,i.useEffect)(()=>{let e=setTimeout(()=>{z(k),Z(k),n?.(k)},100);return()=>clearTimeout(e)},[k]),(0,i.useEffect)(()=>{k&&n?.(k)},[k]);let{enabled:B}=(0,b.Z)(),D=x._('Updates', 'updates.button', 'Accessibility label for updates button.'),V=x._('Notifications', 'notifications.button', 'Accessibility label for notifications button.'),$=w||x._('Notifications', 'navbar.newsButton.tooltip', 'Tooltip text for icon button to show recent notifications');return(0,y.jsxs)(i.Fragment,{children:[(0,y.jsx)(a.xu,{ref:S,"data-test-id":"bell-icon",onMouseEnter:v,position:"relative",children:B?(0,y.jsx)(h.Z,{accessibilityControls:m.o9,accessibilityLabel:D,badgeCount:U,onClick:M,selected:k,tooltipText:$,verticalNavIconName:"notifications"}):(0,y.jsx)(a.u,{accessibilityLabel:"",text:$,zIndex:new a.H3([new a.Ry(g.fe)]),children:(0,y.jsx)(p.Z,{accessibilityLabel:V,badgeCount:U,icon:"bell",onClick:M,selected:k})})}),(0,y.jsx)(f.Jo,{children:(0,y.jsx)("div",{className:"newsHubSidebarWrapper",style:k?{opacity:1,visibility:"visible",transition:"opacity 100ms linear"}:{opacity:0,visibility:"hidden",transition:"visibility 0s 100ms, opacity 100ms linear"},children:I&&(0,y.jsx)(o.Z,{name:"SafeSuspense_AuthNewsButton_NewsHubSidebar",children:(0,y.jsx)(c.Z,{children:(0,y.jsx)(A,{handleDismissPanel:()=>{C(!1),T(!1)},highlightScrollSidebar:j,newsButton:S.current,show:E,utmNewsHubId:L||null})})})})})]})}var x=n(650088);function P({onClick:e,onPanelChange:t,tooltipText:n}){return(0,y.jsx)(x.Z,{icon:"bell",children:({onClearBadges:i})=>(0,y.jsx)(w,{onClearBadges:i,onClick:e,onPanelChange:t,tooltipText:n})})}},879922:function(e,t,n){n.d(t,{Z:()=>l});var i=n(20256),s=n(599402),a=n(320923),o=n(785893);function l({accessibilityLabel:e,badgeCount:t=0,icon:n="speech-ellipsis",onClick:l,selected:r=!1}){return(0,o.jsx)(a.Z,{accessibilityLabel:e,contextData:{event:101,component:8,element:1187},icon:(0,o.jsx)(s.Z,{count:t,iconSlot:(0,o.jsx)(i.JO,{accessibilityLabel:"",color:r?"default":"subtle",icon:n,size:24}),itemLabel:e}),onClick:l,text:e,type:"button"},"NotificationsButton")}},833036:function(e,t,n){n.d(t,{Z:()=>o});var i=n(521009),s=n(631395),a=n(785893);function o({dataTestId:e,accessibilityLabel:t,accessibilityControls:n,tooltipText:o,badgeCount:l,onClick:r,selected:c,verticalNavIconName:u}){let d=(0,i.Z)();return(0,a.jsx)(s.Td,{accessibilityControls:n,accessibilityLabel:t,accessibilityPopupRole:"dialog",badgeCount:l,dataTestId:e,iconName:u,onClick:({event:e})=>{d({event_type:101,component:8,element:1187}),r&&r(e)},selected:c,tooltipText:o})}},536488:function(e,t,n){n.d(t,{AI:()=>O,AM:()=>v,AY:()=>q,Ay:()=>l,C:()=>Q,Cc:()=>u,DX:()=>E,GO:()=>R,HJ:()=>r,I2:()=>D,IO:()=>es,IV:()=>s,J0:()=>g,LL:()=>K,Ng:()=>i,P:()=>P,P3:()=>m,QE:()=>en,QX:()=>ee,Rd:()=>x,So:()=>b,V$:()=>_,Vp:()=>H,WC:()=>C,ZH:()=>T,aE:()=>h,c4:()=>S,cU:()=>k,ci:()=>I,di:()=>B,gb:()=>Y,gs:()=>L,hD:()=>$,hf:()=>M,hp:()=>U,hy:()=>o,ie:()=>f,kJ:()=>J,kc:()=>w,mD:()=>F,mM:()=>z,o9:()=>a,pv:()=>d,qZ:()=>A,qb:()=>y,uW:()=>N,uZ:()=>c,uy:()=>X,vG:()=>W,wA:()=>p,wl:()=>V,yS:()=>et,yc:()=>j,yf:()=>ea,ys:()=>G,zM:()=>Z});let i={BOARD:"board",DID_IT:"userdiditdata",INTEREST:"interest",PIN:"pin",SEARCH:"news_hub_search",STORY:"story",USER:"user"},s=3,a="news-feed-sidebar",o=360,l=15,r=375,c=64,u=36,d=44,_=344,p=164,h=328,m=164,g=108.7,f=3,b=82,y=82,v=164,A=164,w=4,x=164,P=164,S=2,k=82,C=164,I=2,z=2,E=4,Z=328,j="290x",T="170x",N={backgroundColor:"rgba(0, 0, 0, 0.4)"},L=4,R="1px",U=48,O=32,M=36,B="136x136",D=2,V=24,$=20,F=72,H=48,X=54,W=54,G=4,J=118,q=236,Y={BASIC:0,TEXT:1,ROW_WITH_COUNT:2,MINI_PIN_GRID:4,ROW_WITH_COUNT_2:10,MINI_PIN_GRID_2:11,MINI_BOARD_GRID:12,MINI_USER_GRID:13,MINI_SEARCH_GRID:14,MINI_INTEREST_GRID:15,MINI_BOARD_GRID_WITH_ICON:18,HIGHLIGHT_NOTIFICATION:23},K="recommendation",Q="dropdown_item_settings_id",ee=10,et=20,en=5e3,ei="#E9E4FF",es={backgroundColor:ei,borderColor:ei,paddingLeft:"16px",paddingTop:"16px",paddingBottom:"16px",paddingRight:"12px"},ea={...es,paddingRight:"10px"}},543188:function(e,t,n){n.d(t,{S:()=>i});let i={NEWS_HUB:1,INBOX:2}},547362:function(e,t,n){n.d(t,{C:()=>o,O:()=>a});var i=n(111330),s=n(753143);let a=()=>(0,s.M0)().getItem(i.Mi)??"",o=e=>{(0,s.M0)().setItem(i.Mi,e)}},732347:function(e,t,n){n.d(t,{N4:()=>a,Wh:()=>i,hr:()=>s});let i=e=>e._('Log in to continue', 'limitedLogin.modalHeader.default', 'Default title on mobile web limited login modal'),s=e=>e._('You\'re almost there! Log in to access all of Pinterest', 'loginModal.limitedLogin.subheader', 'Subheader text on personalized login modal/flyout to remind users to log in'),a=({i18n:e,toFollow:t})=>t?e._('Log in to follow', 'limitedLogin.modalHeader.follow', 'Title on mobile web limited login modal to prompt users to login to follow a user or board.'):e._('Log in to unfollow', 'limitedLogin.modalHeader.unfollow', 'Title on mobile web limited login modal to prompt users to login to unfollow a user or board.')},375363:function(e,t,n){n.d(t,{Z:()=>N});var i=n(667294),s=n(616550),a=n(20256),o=n(575108),l=n(111330),r=n(679422),c=n(821342),u=n(525839),d=n(506662),_=n(274320),p=n(753143),h=n(341742),m=n(199593),g=n(427141),f=n(543188),b=n(864289),y=n(966269),v=n(879922),A=n(833036),w=n(25837),x=n(980787),P=n(744862),S=n(15667),k=n(502588),C=n(244529),I=n(785893);function z({conversation:e,anchor:t}){let[n,s]=(0,i.useState)(!1),{dropdownOpen:o,conversationOpen:r}=(0,m.Z)(),c=(0,u.ZP)(),{isRTL:d}=(0,S.B)(),{logContextEvent:_}=(0,x.u)(),{enabled:g}=(0,C.Z)();if((0,h.Z)(()=>{let t=e.last_message,n=p.ZP.getItem(l.Td);t&&t.id!==n&&setTimeout(()=>{s(!0),_({event_type:13,component:14993}),p.ZP.setItem(l.Td,t.id),p.ZP.setItem(l.eQ,Date.now()),window.addEventListener("click",e=>{document.getElementById("message-notif-toast")?.contains(e.target)||s(!1)}),setTimeout(()=>{s(!1)},5e3)},k.XZ)}),!e.last_message||!n)return null;let{sender:f}=e.last_message,b=f.first_name||f.username||"",y=e.last_message.pin?c._('sent you a Pin', 'navbar.messageNotifications.text', 'Message notification text'):c._('sent you a message', 'navbar.messageNotifications.text', 'Message notification text'),v=(0,I.jsxs)(a.xv,{color:"light",inline:!0,children:[(0,I.jsxs)(a.xv,{color:"light",inline:!0,weight:"bold",children:[b," "]}),y]}),A=(0,I.jsxs)(a.xu,{alignItems:"center",display:"flex",flex:"none",justifyContent:"start",paddingX:4,paddingY:2,children:[(0,I.jsx)(a.xu,{marginEnd:3,children:(0,I.jsx)(P.qE,{name:b,size:"sm",src:f.image_large_url??void 0})}),v]}),z="down";return g&&(z=d?"left":"right"),(0,I.jsx)(a.mh,{zIndex:new a.H3([new a.Ry(w.fe)]),children:(0,I.jsx)(a.iP,{onTap:()=>{o(),r(e.id),s(!1),_({event_type:101,component:14993})},children:(0,I.jsx)(a.xu,{id:"message-notif-toast",children:(0,I.jsx)(a.pl,{anchor:t,idealDirection:z,onDismiss:()=>{},role:"dialog",size:"flexible",type:"notification",children:A})})})})}function E(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Z extends i.Component{constructor(...e){super(...e),E(this,"setButtonRef",e=>{let{setInboxButton:t}=this.props;this.anchor||(this.anchor=e,t(e))}),E(this,"clearBadges",()=>{let{onClearBadges:e}=this.props;e(f.S.INBOX),this.updateBrowserTabTitleCount(0)}),E(this,"handleButtonClick",e=>{let{requireAuth:t,showPanel:n,closeConversationsDropdown:i,openConversationsDropdown:s,onClick:a}=this.props;if(a?.(),t){e&&e.stopPropagation(),t();return}n?i():s(),this.clearBadges()})}componentDidMount(){this.setBrowserTabTitleCountFromProps()}componentDidUpdate(){this.setBrowserTabTitleCountFromProps()}setBrowserTabTitleCountFromProps(){let{conversationsUnseenCount:e,newsHubCount:t}=this.props;this.updateBrowserTabTitleCount(e+t)}updateBrowserTabTitleCount(e){if((0,d.L6)(this.props.location))return;let{i18n:t}=this.props,n=Math.max(e,0),i=t._('Pinterest', ' - ', ' -- ');window.document.title=n?`(${n}) ${i}`:i}render(){let{conversationsUnseenCount:e,i18n:t,showPanel:n,conversationWithUnreadMessage:i,isVerticalNavEnabled:s}=this.props,o=t._('Messages', 'messages.button', 'Accessibility label for messages button with no pending unread messages.'),l=t._('Messages', 'navbar.conversationsButton.tooltip', 'Tooltip text for icon button to show conversations inbox'),r="notifications-button";return(0,I.jsxs)(a.xu,{ref:this.setButtonRef,position:"relative",children:[s?(0,I.jsx)(A.Z,{accessibilityControls:b.rC,accessibilityLabel:o,badgeCount:e,dataTestId:r,onClick:this.handleButtonClick,selected:n,tooltipText:l,verticalNavIconName:"messages"}):(0,I.jsx)(a.u,{accessibilityLabel:"",text:l,zIndex:new a.H3([new a.Ry(w.fe)]),children:(0,I.jsx)(a.xu,{"data-test-id":r,children:(0,I.jsx)(v.Z,{accessibilityLabel:o,badgeCount:e,icon:"speech-ellipsis",onClick:this.handleButtonClick,selected:n})})}),i&&(0,I.jsx)(z,{anchor:this.anchor,conversation:i})]})}}function j(e){let t=(0,u.ZP)(),n=(0,r.Z)(),a=(0,s.TH)(),{isAuth:f,isLimitedLogin:b}=(0,c.Z)(),{enabled:v}=(0,C.Z)();(0,h.Z)(()=>{f&&!b&&o.Z.create("ConversationsResource",{field_set_key:"default"}).callGet()});let{conversations:{conversationsUnseenCount:A,newsHubCount:w,showConversationsDropdown:x},dropdownClose:P,dropdownOpen:S}=(0,m.Z)(),{checkExperiment:z}=(0,_.r)(),{setInboxButton:E}=(0,y.Z)(),j=(0,g.Z)().find(e=>e.unread>0),T=(0,s.k6)(),N=(0,d.C$)(T.location),L=p.ZP.getItem(l.eQ),R=L&&Date.now()-Number(L)<k.VC,U=N&&!x&&!R&&j&&z("sg_dweb_app_start_msg_notif").anyEnabled,O=(0,i.useRef)(!0);return(0,i.useEffect)(()=>{O.current||e.onPanelChange?.(x),O.current=!1},[x]),(0,I.jsx)(Z,{...e,closeConversationsDropdown:P,conversationsUnseenCount:A,conversationWithUnreadMessage:U?j:null,i18n:t,isVerticalNavEnabled:v,location:a,newsHubCount:w,openConversationsDropdown:S,requireAuth:n,setInboxButton:E,showPanel:x})}var T=n(650088);function N({onClick:e,onPanelChange:t}){return(0,I.jsx)(T.Z,{icon:"speech-ellipsis",children:({onClearBadges:n})=>(0,I.jsx)(j,{onClearBadges:n,onClick:e,onPanelChange:t})})}},650088:function(e,t,n){n.d(t,{Z:()=>v});var i,s=n(667294),a=n(20256),o=n(167912),l=n(575108),r=n(949044),c=n(886981),u=n(974705),d=n(199593),_=n(543188),p=n(785893);let h=(0,r.Z)(u.Z);class m extends s.Component{constructor(...e){var t,n,i;super(...e),t="handleClearBadges",n=e=>{e===_.S.NEWS_HUB?(l.Z.create("NewsHubBadgeResource").callDelete({showError:!1}),this.props.updateNewsHubCount(0)):(this.props.conversationBadgeCall(),this.props.updateUnreadCount(0))},(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in this?Object.defineProperty(this,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[t]=n}shouldComponentUpdate(e){if(!this.props.badgeResource||!e.badgeResource)return!1;let t=this.props.badgeResource.data,n=e.badgeResource.data;return t&&n?!!["conversations_unseen_count","news_hub_count"].map(e=>t[e]!==n[e]).filter(Boolean).length:!t&&!!n}componentDidUpdate(){let{badgeResource:e,updateNewsHubCount:t,updateUnreadCount:n}=this.props;if(!(e&&e.data))return;let i=h(e.data);n(i.conversationsUnseenCount),t(i.newsHubCount)}render(){let{children:e}=this.props;return e({onClearBadges:this.handleClearBadges})}}function g({conversationBadgeCall:e,children:t}){let n=(0,c.Z)({name:"NewsHubBadgeResource",noCache:!0}),{updateNewsHubCount:i,updateUnreadCount:s}=(0,d.Z)();return(0,p.jsx)(m,{badgeResource:n,conversationBadgeCall:e,updateNewsHubCount:i,updateUnreadCount:s,children:t})}function f({children:e}){return(0,p.jsx)(g,{conversationBadgeCall:(()=>{let e=(void 0!==i||(i=n(516829)).hash&&"d6f840c748407c7aa62123d5beac3239"!==i.hash&&console.error("The definition of 'BadgeManagerMutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),[t]=(0,o.useMutation)(e);return async()=>await new Promise((e,n)=>{t({variables:{},onCompleted:(t,i)=>{i&&n(i[0]),e(t)},onError:e=>n(e)})})})(),children:e})}var b=n(244529),y=n(631395);function v({icon:e,children:t}){let[n,i]=(0,s.useState)(!1),{enabled:o}=(0,b.Z)();return((0,s.useEffect)(()=>{i(!0)},[]),n)?(0,p.jsx)(f,{children:t}):(0,p.jsx)(a.xu,{paddingX:1,children:(0,p.jsx)(a.kC,{alignItems:"center",height:48,justifyContent:"center",width:48,children:o?(0,p.jsx)(y.QV,{iconName:"speech-ellipsis"===e?"messages":"notifications",selected:!1}):(0,p.jsx)(a.JO,{accessibilityLabel:"",color:"subtle",icon:e,size:24})})})}},502588:function(e,t,n){n.d(t,{VC:()=>b,XZ:()=>f,ZP:()=>y});var i=n(616550),s=n(20256),a=n(575108),o=n(111330),l=n(744862),r=n(475498),c=n(821342),u=n(525839),d=n(506662),_=n(753143),p=n(87853),h=n(647709),m=n(341742),g=n(785893);let f=2e3,b=864e5;function y(){let e=(0,u.ZP)(),t=(0,c.Z)(),{isAuth:n,isLimitedLogin:y}=t,v=t.isAuth?t?.avatar_color_index:void 0,{showToast:A}=(0,p.dI)(),w=(0,i.k6)(),x=(0,d.C$)(w.location),P=(0,h.HG)();return(0,m.Z)(()=>{let t=async()=>{let t=a.Z.create("ConversationsResource",{field_set_key:"default"}),n=(await t.callGet()).resource_response.data.find(e=>e.unread>0),i=_.ZP.getItem(o.eQ),c=i&&Date.now()-Number(i)<b,u=n&&x&&!c&&n.last_message,d=_.ZP.getItem(o.Td);if(u&&u.id!==d){_.ZP.setItem(o.Td,u.id),_.ZP.setItem(o.eQ,Date.now());let{sender:t}=u,i=t.first_name||t.username||"",a=u.pin?e._('sent you a Pin', 'navbar.messageNotifications.text', 'Message notification text'):e._('sent you a message', 'navbar.messageNotifications.text', 'Message notification text'),c=(0,g.jsxs)(s.xv,{inline:!0,children:[(0,g.jsxs)(s.xv,{inline:!0,weight:"bold",children:[i," "]}),a]});setTimeout(()=>{A(({hideToast:s})=>(0,g.jsx)(r.Z,{duration:5e3,onHide:s,primaryAction:{accessibilityLabel:e._('Reply to the message', 'NotificationToast.replyButton.accessibilityLabel', 'Button on notification toast for users to reply to the message'),label:e._('Reply', 'NotificationToast.replyButton.buttonText', 'Button on notification toast for users to reply to the message'),onClick:()=>{w.push(`/conversation/${n.id}`),s()}},text:c,thumbnail:{avatar:(0,g.jsx)(l.qE,{color:v,name:i,size:"sm",src:t.image_large_url||""})}}))},f)}};!n||y||P||t()}),null}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/71333-891cd99d504e0660.mjs.map