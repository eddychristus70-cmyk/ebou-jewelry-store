(self.modernJsonp=self.modernJsonp||[]).push([["11154"],{303151:function(e,t,n){n.d(t,{Z:()=>l});var i=n(69119),a=n(13882);function l(e,t){(0,a.Z)(2,arguments);var n=(0,i.Z)(e),l=(0,i.Z)(t);return n.getTime()===l.getTime()}},537347:function(e){!function(){function t(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function n(e){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(e)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function i(e,t){e.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+t+";"}function a(e){var t=e.a.offsetWidth,n=t+100;return e.f.style.width=n+"px",e.c.scrollLeft=n,e.b.scrollLeft=e.b.scrollWidth+100,e.g!==t&&(e.g=t,!0)}function l(e,n){function i(){a(l)&&l.a.parentNode&&n(l.g)}var l=e;t(e.b,i),t(e.c,i),a(e)}function r(e,t){var n=t||{};this.family=e,this.style=n.style||"normal",this.weight=n.weight||"normal",this.stretch=n.stretch||"normal"}var s=null,o=null,d=null,c=null;function u(){return null===c&&(c=!!document.fonts),c}function p(e,t){return[e.style,e.weight,!function(){if(null===d){var e=document.createElement("div");try{e.style.font="condensed 100px sans-serif"}catch(e){}d=""!==e.style.font}return d}()?"":e.stretch,"100px",t].join(" ")}r.prototype.load=function(e,t){var a=this,r=e||"BESbswy",d=0,c=t||3e3,m=(new Date).getTime();return new Promise(function(e,t){if(u()&&!function(){if(null===o)if(u()&&/Apple/.test(window.navigator.vendor)){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);o=!!e&&603>parseInt(e[1],10)}else o=!1;return o}()){var g,h=new Promise(function(e,t){!function n(){(new Date).getTime()-m>=c?t(Error(""+c+"ms timeout exceeded")):document.fonts.load(p(a,'"'+a.family+'"'),r).then(function(t){1<=t.length?e():setTimeout(n,25)},t)}()});Promise.race([new Promise(function(e,t){d=setTimeout(function(){t(Error(""+c+"ms timeout exceeded"))},c)}),h]).then(function(){clearTimeout(d),e(a)},t)}else g=function(){function o(){var t;(t=-1!=_&&-1!=y||-1!=_&&-1!=f||-1!=y&&-1!=f)&&((t=_!=y&&_!=f&&y!=f)||(null===s&&(s=!!(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent))&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))),t=s&&(_==x&&y==x&&f==x||_==v&&y==v&&f==v||_==b&&y==b&&f==b)),t=!t),t&&(k.parentNode&&k.parentNode.removeChild(k),clearTimeout(d),e(a))}var u=new n(r),g=new n(r),h=new n(r),_=-1,y=-1,f=-1,x=-1,v=-1,b=-1,k=document.createElement("div");k.dir="ltr",i(u,p(a,"sans-serif")),i(g,p(a,"serif")),i(h,p(a,"monospace")),k.appendChild(u.a),k.appendChild(g.a),k.appendChild(h.a),document.body.appendChild(k),x=u.a.offsetWidth,v=g.a.offsetWidth,b=h.a.offsetWidth,function e(){if((new Date).getTime()-m>=c)k.parentNode&&k.parentNode.removeChild(k),t(Error(""+c+"ms timeout exceeded"));else{var n=document.hidden;(!0===n||void 0===n)&&(_=u.a.offsetWidth,y=g.a.offsetWidth,f=h.a.offsetWidth,o()),d=setTimeout(e,50)}}(),l(u,function(e){_=e,o()}),i(u,p(a,'"'+a.family+'",sans-serif')),l(g,function(e){y=e,o()}),i(g,p(a,'"'+a.family+'",serif')),l(h,function(e){f=e,o()}),i(h,p(a,'"'+a.family+'",monospace'))},document.body?g():document.addEventListener?document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e),g()}):document.attachEvent("onreadystatechange",function e(){("interactive"==document.readyState||"complete"==document.readyState)&&(document.detachEvent("onreadystatechange",e),g())})})},e.exports=r}()},130845:function(e,t,n){n.d(t,{Z:()=>l});var i=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function a(e,t){if(e.length!==t.length)return!1;for(var n,a,l=0;l<e.length;l++)if(!((n=e[l])===(a=t[l])||i(n)&&i(a))&&1)return!1;return!0}let l=function(e,t){void 0===t&&(t=a);var n,i,l=[],r=!1;return function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return r&&n===this&&t(a,l)||(i=e.apply(this,a),r=!0,n=this,l=a),i}}},220054:function(e,t,n){var i;n.r(t),n.d(t,{default:()=>l});let a={argumentDefinitions:[{defaultValue:!0,kind:"LocalArgument",name:"skipUnauthFragment"}],kind:"Fragment",metadata:null,name:"CSSCarouselModule_story",selections:[{alias:null,args:null,concreteType:"StoryAction",kind:"LinkedField",name:"action",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"location",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryDisplayOptions",kind:"LinkedField",name:"displayOptions",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryContentDisplay",kind:"LinkedField",name:"contentDisplay",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"itemWidthHeightRatio",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"objects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[i],storageKey:'images(spec:"236x")'},{args:[{kind:"Variable",name:"skipUnauthFragment",variableName:"skipUnauthFragment"}],kind:"FragmentSpread",name:"ItemRep_pin"}],type:"Pin",abstractKey:null}],storageKey:null},{alias:"storyId",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyType",storageKey:null},{args:null,kind:"FragmentSpread",name:"ItemRep_story"}],type:"Story",abstractKey:null};a.hash="d9b26cdb236cdd26cd01183eab07f81d";let l=a},445045:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CanonicalCard_pin",selections:[{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"doneByMe",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null},{args:null,kind:"FragmentSpread",name:"UnifiedCommentModule_pin"}],type:"Pin",abstractKey:null};i.hash="fcffc6bcc40bc48a92a9afe109d3995b";let a=i},957661:function(e,t,n){var i,a,l;n.r(t),n.d(t,{default:()=>s});let r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CardSourceDescriptionText_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinAdditionalNote",storageKey:null},{alias:null,args:null,concreteType:"TextTag",kind:"LinkedField",name:"userMentionTags",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"length",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[{alias:null,args:null,concreteType:"AggregateRatingMetadata",kind:"LinkedField",name:"aggregateRating",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"reviewCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ratingValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"bestRating",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"MakeCardTutorialMetadata",kind:"LinkedField",name:"tutorial",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinBasics",kind:"LinkedField",name:"basics",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinListBlock",kind:"LinkedField",name:"listBlocks",plural:!0,selections:[i={alias:null,args:null,kind:"ScalarField",name:"heading",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blocks",plural:!0,selections:[a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[i,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blocks",plural:!0,selections:[a,{kind:"InlineFragment",selections:l=[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],type:"TextBlock",abstractKey:null},{kind:"InlineFragment",selections:l,type:"ParagraphBlock",abstractKey:null},{kind:"InlineFragment",selections:l,type:"HeadingBlock",abstractKey:null},{kind:"InlineFragment",selections:l,type:"LinkBlock",abstractKey:null},{kind:"InlineFragment",selections:l,type:"StoryPinImageBlock",abstractKey:null},{kind:"InlineFragment",selections:l,type:"StoryPinVideoBlock",abstractKey:null}],storageKey:null}],type:"StoryPinListBlock",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryPinKeyValueBlock",kind:"LinkedField",name:"keyValueBlocks",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"categoryType",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"DescriptionBrokenByLineBreaks_pin"},{args:null,kind:"FragmentSpread",name:"DescriptionWithLinksAndMentions_pin"}],type:"Pin",abstractKey:null};r.hash="c6b0de206743312221bd0e0b89d2f0aa";let s=r},505370:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CarouselVideoItem_pin",selections:[{args:null,kind:"FragmentSpread",name:"CloseupVideoNonDuplo_pin"}],type:"Pin",abstractKey:null};i.hash="510195e37611b9b69a16eccfeb13e9cf";let a=i},799379:function(e,t,n){var i,a,l;n.r(t),n.d(t,{default:()=>s});let r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupAttributionAndDescription_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,concreteType:"Attribution",kind:"LinkedField",name:"attribution",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"authorName",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"authorUrl",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"ccUrl",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"providerName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"providerUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subtype",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"MediaAttribution",kind:"LinkedField",name:"mediaAttribution",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"author",storageKey:null},i,a,{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mediaType",storageKey:null},l],storageKey:null},{args:null,kind:"FragmentSpread",name:"Description_pin"}],type:"Pin",abstractKey:null};r.hash="7142df6a7a3c1aee54267c5441d3d50b";let s=r},621539:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupCarousel_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"},{args:null,kind:"FragmentSpread",name:"CarouselVideoItem_pin"}],type:"Pin",abstractKey:null};i.hash="83e61e6fc89222c2a0b03276839f44a5";let a=i},274360:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupCommentModule_pin",selections:[{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"commentCount",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};i.hash="361dbb7eac9d64408e9e81f7b01b2b75";let a=i},118562:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupFavoriteButtonTest_pin",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"favoritedByMe",storageKey:null},{alias:null,args:null,concreteType:"BoardSection",kind:"LinkedField",name:"section",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"slug",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};i.hash="9ab15ab4baca1bcd4b35d42d577e0b0e";let a=i},934191:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupMainPinImpression_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"}],type:"Pin",abstractKey:null};i.hash="9fe338bb0275ffff2818b274fce014af";let a=i},718611:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupRelatedModule_pin",selections:[{args:null,kind:"FragmentSpread",name:"CloseupRelatedModuleOneTapConfiguration_pin"}],type:"Pin",abstractKey:null};i.hash="535b0dce979f4e368b354c1d7db63f73";let a=i},824065:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupRelatedModulesContainer_pin",selections:[{args:null,kind:"FragmentSpread",name:"CloseupRelatedPins_pin"},{args:null,kind:"FragmentSpread",name:"CloseupRelatedModule_pin"}],type:"Pin",abstractKey:null};i.hash="8b3eeb9b4671e020ac715d9513179386";let a=i},327060:function(e,t,n){var i;n.r(t),n.d(t,{default:()=>l});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupRelatedPins_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isHidden",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isUnsafe",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:i,storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:i,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:i,storageKey:null},{args:null,kind:"FragmentSpread",name:"ShoppingModule_pin"}],type:"Pin",abstractKey:null};a.hash="3fa8620068a79dc4a73dbbcde3f352f9";let l=a},307595:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupVideoEndCard_pin",selections:[{args:null,kind:"FragmentSpread",name:"useCalculateMaxWidthAndHeightForSideBySideVariant_pin"}],type:"Pin",abstractKey:null};i.hash="e04be51b4be0a2585e7803d004fa83b7";let a=i},60533:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupVideoNonDuplo_pin",selections:[{args:null,kind:"FragmentSpread",name:"CloseupVideoEndCard_pin"},{args:null,kind:"FragmentSpread",name:"VideoWithContextLogging_pin"},{args:null,kind:"FragmentSpread",name:"useCalculateMaxWidthAndHeightForSideBySideVariant_pin"}],type:"Pin",abstractKey:null};i.hash="53ae9ecd15f057f744460205e5d495fd";let a=i},3449:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupVideoWithVisibility_pin",selections:[{args:null,kind:"FragmentSpread",name:"CloseupVideoNonDuplo_pin"}],type:"Pin",abstractKey:null};i.hash="60493becbbe037be854a8cd1136fede6";let a=i},316387:function(e,t,n){var i,a;n.r(t),n.d(t,{default:()=>r});let l=(a=[i={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CommentThreadContainer_pin",selections:[{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"commentCount",storageKey:null},{alias:null,args:null,concreteType:"AggregatedDidItData",kind:"LinkedField",name:"didItData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"imagesCount",storageKey:null}],storageKey:null},i],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"commentsDisabled",storageKey:null},i,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:a,storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:a,storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null});l.hash="38e173ab2c3107ebc5b3da9f216fac98";let r=l},119031:function(e,t,n){var i,a,l;n.r(t),n.d(t,{default:()=>s});let r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CreatorCard_pin",selections:[i={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedIsLeadAd",storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"typeName",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"templateType",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isAdsOnlyProfile",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"adsOnlyProfileSite",storageKey:null},i,a={alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"promoter",plural:!1,selections:[a,l],storageKey:null},{alias:null,args:null,concreteType:"Sponsorship",kind:"LinkedField",name:"sponsorship",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"creator",plural:!1,selections:[{alias:"creatorId",args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"sponsor",plural:!1,selections:[{alias:"sponsorId",args:null,kind:"ScalarField",name:"id",storageKey:null},a,l],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{args:null,kind:"FragmentSpread",name:"useCreatorRecsPrevStateCloseup_pin"}],type:"Pin",abstractKey:null};r.hash="e0f013c76e98f3f285ba25a7d2f0f3af";let s=r},265532:function(e,t,n){var i,a,l,r;n.r(t),n.d(t,{default:()=>o});let s=(i={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},l=[a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],r=[i],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DefaultMetadata_pin",selections:[i,{alias:null,args:null,concreteType:"Attribution",kind:"LinkedField",name:"attribution",plural:!1,selections:l,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUserNote",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"commentsDisabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinAdditionalNote",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"promoter",plural:!1,selections:r,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"isPrimaryWebsiteVerified",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"websiteUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDirectToSiteAllowed",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Sponsorship",kind:"LinkedField",name:"sponsorship",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"sponsor",plural:!1,selections:l,storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"affiliateLink",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDownstreamPromotion",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:r,storageKey:null},{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"originPin",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:r,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[a,{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"CategorizedIngredientsMetadata",kind:"LinkedField",name:"categorizedIngredients",plural:!0,selections:l,storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isGoLinkless",storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hasAffiliateProducts",storageKey:null},{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinBasics",kind:"LinkedField",name:"basics",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinKeyValueBlock",kind:"LinkedField",name:"keyValueBlocks",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"categoryType",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templateType",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isInstagramApi",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"utmLink",storageKey:null},{args:null,kind:"FragmentSpread",name:"DescriptionBrokenByLineBreaks_pin"},{args:null,kind:"FragmentSpread",name:"useHandleTitleClick_pin"},{args:null,kind:"FragmentSpread",name:"useCloseupBodyUtils_pin"},{args:null,kind:"FragmentSpread",name:"UnifiedCommentModule_pin"},{args:null,kind:"FragmentSpread",name:"ContextMenuClickthroughLogging_pin"},{args:null,kind:"FragmentSpread",name:"TitleDesktop_pin"},{args:null,kind:"FragmentSpread",name:"PartnerModule_pin"},{args:null,kind:"FragmentSpread",name:"CreatorCard_pin"},{args:null,kind:"FragmentSpread",name:"VisitButton_pin"},{args:null,kind:"FragmentSpread",name:"CloseupAttributionAndDescription_pin"},{args:null,kind:"FragmentSpread",name:"PinRecipeRating_pin"}],type:"Pin",abstractKey:null});s.hash="15807bc974d02364f9d5b356bf1164d9";let o=s},817272:function(e,t,n){var i;n.r(t),n.d(t,{default:()=>l});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DescriptionBrokenByLineBreaks_pin",selections:[{alias:null,args:null,concreteType:"TextTag",kind:"LinkedField",name:"descriptionLinks",plural:!0,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"length",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"offset",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"TextTag",kind:"LinkedField",name:"userMentionTags",plural:!0,selections:i,storageKey:null},{args:null,kind:"FragmentSpread",name:"DescriptionWithLinksAndMentions_pin"},{args:null,kind:"FragmentSpread",name:"useHyperlinkExperiment_pin"}],type:"Pin",abstractKey:null};a.hash="7f5ee41f639d28bd1418cd137ed8b8a0";let l=a},658559:function(e,t,n){var i,a,l,r;n.r(t),n.d(t,{default:()=>o});let s={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DescriptionWithLinksAndMentions_pin",selections:[{alias:null,args:null,concreteType:"TextTag",kind:"LinkedField",name:"descriptionLinks",plural:!0,selections:[i={alias:null,args:null,kind:"ScalarField",name:"length",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"objectId",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"offset",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"tagType",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"TextTag",kind:"LinkedField",name:"userMentionTags",plural:!0,selections:[i,a,l,r],storageKey:null},{args:null,kind:"FragmentSpread",name:"useHyperlinkExperiment_pin"}],type:"Pin",abstractKey:null};s.hash="93be5ba2b479913d0e23e4971f11a9cd";let o=s},354418:function(e,t,n){var i,a,l;n.r(t),n.d(t,{default:()=>s});let r=(i=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],l=[a={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"Description_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:i,storageKey:null},a,{alias:null,args:null,kind:"ScalarField",name:"pinAdditionalNote",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:i,storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:l,storageKey:null},{alias:null,args:null,concreteType:"MakeCardTutorialMetadata",kind:"LinkedField",name:"tutorial",plural:!1,selections:l,storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"CardSourceDescriptionText_pin"}],type:"Pin",abstractKey:null});r.hash="d6d83b429981e4bc762e3872608eedbd";let s=r},128948:function(e,t,n){var i;n.r(t),n.d(t,{default:()=>l});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DomainLinkButtonWrapper_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"advertiserId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"attributionSourceId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"campaignId",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDownstreamPromotion",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinPromotionId",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"promoter",plural:!1,selections:[i],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isPrimaryWebsiteVerified",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"websiteUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDirectToSiteAllowed",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isInstagramApi",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{args:null,kind:"FragmentSpread",name:"DomainLinkButton_pin"}],type:"Pin",abstractKey:null};a.hash="4c99d4ae49479ef8ed3083d59d4343c1";let l=a},362250:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DomainLinkButton_pin",selections:[{args:null,kind:"FragmentSpread",name:"ContextMenuClickthroughLogging_pin"}],type:"Pin",abstractKey:null};i.hash="08b89bb2190b936e38e11d4ce341058f";let a=i},681081:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"OfficialUserAttributionText_user",selections:[{alias:null,args:null,kind:"ScalarField",name:"isVerifiedMerchant",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},{alias:null,args:null,concreteType:"VerifiedIdentity",kind:"LinkedField",name:"verifiedIdentity",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"verified",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isAdsOnlyProfile",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"adsOnlyProfileSite",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"avatarColorIndex",storageKey:null}],type:"User",abstractKey:null};i.hash="076ac514bfbb048036e79417ec3c0eb5";let a=i},324778:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProductDescriptionAccordion_pin",selections:[{args:null,kind:"FragmentSpread",name:"StructuredDescription_pin"}],type:"Pin",abstractKey:null};i.hash="0ea92af6ed3e580e484b6776204f5277";let a=i},340682:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProductDescriptionPreview_pin",selections:[{args:null,kind:"FragmentSpread",name:"StructuredDescription_pin"}],type:"Pin",abstractKey:null};i.hash="81e3f3067a653af5d6211a19842d2603";let a=i},736142:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProductDescription_pin",selections:[{args:null,kind:"FragmentSpread",name:"ProductDescriptionAccordion_pin"},{args:null,kind:"FragmentSpread",name:"ProductDescriptionPreview_pin"},{args:null,kind:"FragmentSpread",name:"useHyperlinkExperiment_pin"}],type:"Pin",abstractKey:null};i.hash="9758e05746f41597abb102ff4c921bd8";let a=i},149627:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProductDetailPageRelatedModule_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null}],type:"Pin",abstractKey:null};i.hash="cce8a8d5ad05c8e6c1137bf7c8845c2a";let a=i},937046:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProductDetailPageRelatedModules_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"ProductDetailPageRelatedPins_pin"},{args:null,kind:"FragmentSpread",name:"ProductDetailPageRelatedModule_pin"}],type:"Pin",abstractKey:null};i.hash="85ae0703574c2bc161bc13206c3184f8";let a=i},502396:function(e,t,n){var i;n.r(t),n.d(t,{default:()=>l});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProductDetailPageRelatedPins_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:i,storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:i,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:i,storageKey:null},{args:null,kind:"FragmentSpread",name:"ShoppingModule_pin"}],type:"Pin",abstractKey:null};a.hash="86cb4963f4714e2184c01e13236c3616";let l=a},570674:function(e,t,n){var i;n.r(t),n.d(t,{default:()=>l});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProductHeading_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"advertiserId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"attributionSourceId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"campaignId",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDownstreamPromotion",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinPromotionId",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"promoter",plural:!1,selections:[i],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{args:null,kind:"FragmentSpread",name:"ContextMenuClickthroughLogging_pin"}],type:"Pin",abstractKey:null};a.hash="8dced786a95725beb90a797a0e54242b";let l=a},676707:function(e,t,n){var i,a,l,r,s,o,d,c;n.r(t),n.d(t,{default:()=>p});let u=(a={alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"firstName",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},o={args:null,kind:"FragmentSpread",name:"OfficialUserAttributionText_user"},d=[i={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],c=[s],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProductMetadata_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"affiliateLink",storageKey:null},{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"commentCount",storageKey:null},{alias:null,args:null,concreteType:"AggregatedDidItData",kind:"LinkedField",name:"didItData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"imagesCount",storageKey:null}],storageKey:null},i,{alias:null,args:null,kind:"ScalarField",name:"isShopTheLook",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:[a,l],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:[i,r,{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},s,o],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"commentsDisabled",storageKey:null},a,i,{alias:null,args:null,kind:"ScalarField",name:"favoritedByMe",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDownstreamPromotion",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForAggregatedComments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isGoLinkless",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isOosProduct",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStaleProduct",storageKey:null},l,{alias:null,args:null,concreteType:"UserWebsite",kind:"LinkedField",name:"linkUserWebsite",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:[r,s],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:[i,r,o],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:d,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:d,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"promoter",plural:!1,selections:d,storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"AggregateRatingMetadata",kind:"LinkedField",name:"aggregateRating",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ratingValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reviewCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ratingCount",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,concreteType:"Brand",kind:"LinkedField",name:"brand",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"inStock",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"minPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"standardPrice",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PriceHistorySummary",kind:"LinkedField",name:"priceHistorySummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"durationDays",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"lowestPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"typicalPrice",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ShippingInfo",kind:"LinkedField",name:"shippingInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"freeShippingPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"freeShippingValue",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Sponsorship",kind:"LinkedField",name:"sponsorship",plural:!1,selections:c,storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"hasAffiliateProducts",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"utmLink",storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:c,storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"ProductDescription_pin"},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"},{args:null,kind:"FragmentSpread",name:"CanonicalCard_pin"},{args:null,kind:"FragmentSpread",name:"CloseupFavoriteButtonTest_pin"},{args:null,kind:"FragmentSpread",name:"PartnerModule_pin"},{args:null,kind:"FragmentSpread",name:"ProductHeading_pin"},{args:null,kind:"FragmentSpread",name:"UnifiedCommentModule_pin"},{args:null,kind:"FragmentSpread",name:"VisitButton_pin"},{args:null,kind:"FragmentSpread",name:"useStructuredDescription_pin"}],type:"Pin",abstractKey:null});u.hash="8006d27d384526aca111cb980d673707";let p=u},650719:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i=(l={defaultValue:null,kind:"LocalArgument",name:"isAuth"},r={defaultValue:null,kind:"LocalArgument",name:"isDesktop"},s={defaultValue:null,kind:"LocalArgument",name:"pinId"},o=[{kind:"Variable",name:"pin",variableName:"pinId"}],d={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},c={alias:"storyId",args:null,kind:"ScalarField",name:"id",storageKey:null},p=[u={alias:null,args:null,kind:"ScalarField",name:"format",storageKey:null}],m={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},y=[{kind:"Literal",name:"spec",value:"236x"}],f={alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"layout",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"followedByMe",storageKey:null},C=[_={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},P={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],I={alias:null,args:null,kind:"ScalarField",name:"isCollaborative",storageKey:null},T={alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},L={alias:null,args:null,concreteType:"VerifiedIdentity",kind:"LinkedField",name:"verifiedIdentity",plural:!1,selections:[E={alias:null,args:null,kind:"ScalarField",name:"verified",storageKey:null}],storageKey:null},D={alias:null,args:null,kind:"ScalarField",name:"isVerifiedMerchant",storageKey:null},R={alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},K={alias:null,args:null,kind:"ScalarField",name:"imageSmallUrl",storageKey:null},M={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},Z={alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},z={alias:null,args:null,kind:"ScalarField",name:"isPrimaryWebsiteVerified",storageKey:null},O={alias:null,args:null,kind:"ScalarField",name:"imageLargeUrl",storageKey:null},B=[x,v,m,d],N={alias:null,args:null,kind:"ScalarField",name:"thumbnail",storageKey:null},V={alias:null,args:null,kind:"ScalarField",name:"duration",storageKey:null},U={alias:null,args:null,kind:"ScalarField",name:"itemId",storageKey:null},H=[x,m,v],G={alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV3MOBILE",plural:!1,selections:W=[{alias:null,args:null,kind:"ScalarField",name:"blockId",storageKey:null},x,N,v,m],storageKey:null},$=[{kind:"Literal",name:"spec",value:"474x"}],X=[{kind:"Literal",name:"spec",value:"564x"}],q=[{kind:"Literal",name:"spec",value:"736x"}],Y={alias:"entityId",args:null,kind:"ScalarField",name:"id",storageKey:null},Q={alias:null,args:null,concreteType:"PinAnalyticsStats",kind:"LinkedField",name:"creatorAnalytics",plural:!1,selections:[{alias:null,args:null,concreteType:"CreatorAnalytics",kind:"LinkedField",name:"_30dRealtime",plural:!1,selections:J=[d],storageKey:null}],storageKey:null},ee={alias:null,args:null,kind:"ScalarField",name:"pinId",storageKey:null},et={alias:null,args:null,kind:"ScalarField",name:"blockType",storageKey:null},en=[{kind:"Literal",name:"version",value:"V_HLSV3_MOBILE"}],ei={alias:null,args:null,kind:"ScalarField",name:"reason",storageKey:null},ea={alias:null,args:null,kind:"ScalarField",name:"data",storageKey:null},el={alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},es={alias:"image236x",args:y,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:er=[d,{alias:null,args:null,concreteType:"Thumbnails",kind:"LinkedField",name:"canonicalImage",plural:!1,selections:H,storageKey:null},A],storageKey:'additionalImagesPerSpec(spec:"236x")'},eo={alias:"image474x",args:$,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:er,storageKey:'additionalImagesPerSpec(spec:"474x")'},ed={alias:"image564x",args:X,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:er,storageKey:'additionalImagesPerSpec(spec:"564x")'},ec={alias:"image736x",args:q,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:er,storageKey:'additionalImagesPerSpec(spec:"736x")'},eu={alias:"productId",args:null,kind:"ScalarField",name:"id",storageKey:null},ep={alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"maxPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"minPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"standardPrice",storageKey:null}],storageKey:null},em={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},eg=[x,m,v,f],eh={alias:null,args:null,kind:"ScalarField",name:"isThirdPartyAd",storageKey:null},e_=[f,x,m,v],ey=[{kind:"Literal",name:"spec",value:"170x"}],ef=[m],ex=[R,P],ev=[_,P,R,Z,K,M],ek={kind:"InlineFragment",selections:eb=[et,g],type:"ParagraphBlock",abstractKey:null},eS={kind:"InlineFragment",selections:eb,type:"HeadingBlock",abstractKey:null},eP={kind:"InlineFragment",selections:eb,type:"TextBlock",abstractKey:null},ew=[N,m,v,x,V],eC={alias:null,args:null,kind:"ScalarField",name:"imageCoverUrl",storageKey:null},ej={alias:null,args:null,concreteType:"PinAnalyticsStats",kind:"LinkedField",name:"creatorAnalytics",plural:!1,selections:[{alias:null,args:null,concreteType:"CreatorAnalytics",kind:"LinkedField",name:"_30dRealtime",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"impression",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinClick",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"save",storageKey:null}],storageKey:null}],storageKey:null},eA=[eI={alias:null,args:null,kind:"ScalarField",name:"adsOnlyProfileSite",storageKey:null},O,eT={alias:null,args:null,kind:"ScalarField",name:"isAdsOnlyProfile",storageKey:null}],eF={alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null},eE={alias:null,args:null,kind:"ScalarField",name:"showFewerWeightLossAds",storageKey:null},eL={alias:null,args:null,kind:"ScalarField",name:"showAdReasons",storageKey:null},eZ={alias:null,args:null,kind:"ScalarField",name:"imageUrl",storageKey:null},ez=[eD={alias:null,args:null,kind:"ScalarField",name:"boardId",storageKey:null},eR={alias:null,args:null,kind:"ScalarField",name:"localPinId",storageKey:null},eK={alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},eM={alias:null,args:null,kind:"ScalarField",name:"sectionId",storageKey:null},h,em,m],eO={alias:null,args:null,kind:"ScalarField",name:"action",storageKey:null},eB={alias:null,args:null,concreteType:"ActionOptions",kind:"LinkedField",name:"actionOptions",plural:!1,selections:[eD,{alias:null,args:null,kind:"ScalarField",name:"interestId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"interestList",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"complaintReason",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"feedbackType",storageKey:null},ee,{alias:null,args:null,kind:"ScalarField",name:"pinType",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pin",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"recommendationReasonId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"undo",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"userId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"query",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"newsId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"throughId",storageKey:null},{alias:null,args:null,concreteType:"ThroughProperties",kind:"LinkedField",name:"throughProperties",plural:!0,selections:[el,ea],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"clientTrackingParams",storageKey:null},eh],storageKey:null},{fragment:{argumentDefinitions:[l,r,s],kind:"Fragment",metadata:null,name:"ShoppingModuleQuery",selections:[{alias:null,args:o,concreteType:null,kind:"LinkedField",name:"v3GetStelaShoppingCarouselQuery",plural:!1,selections:[d,{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"ShoppingModule_v3GetStelaShoppingCarousel"}],type:"V3GetStelaShoppingCarousel",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[s,r,l],kind:"Operation",name:"ShoppingModuleQuery",selections:[{alias:null,args:o,concreteType:null,kind:"LinkedField",name:"v3GetStelaShoppingCarouselQuery",plural:!1,selections:[d,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"data",plural:!0,selections:[d,c,{alias:null,args:null,kind:"ScalarField",name:"containerType",storageKey:null},{alias:null,args:null,concreteType:"StoryText",kind:"LinkedField",name:"title",plural:!1,selections:p,storageKey:null},{alias:null,args:null,concreteType:"StoryAction",kind:"LinkedField",name:"action",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"requestParams",storageKey:null},m,{alias:null,args:null,kind:"ScalarField",name:"location",storageKey:null},g,{alias:null,args:null,kind:"ScalarField",name:"style",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"contentIds",storageKey:null},{alias:null,args:null,concreteType:"StoryDisplayOptions",kind:"LinkedField",name:"displayOptions",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryContentDisplay",kind:"LinkedField",name:"contentDisplay",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryContentCarouselDisplayOptions",kind:"LinkedField",name:"carouselDisplayOptions",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"navigationType",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"carouselScrollingMode",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"componentType",storageKey:null},{alias:null,args:null,concreteType:"StoryContentVisibleItemCount",kind:"LinkedField",name:"contentVisibleItemCount",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"mobile",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"web",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryTilesGridLayout",kind:"LinkedField",name:"gridLayout",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"cols",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"itemWidthHeightRatio",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinsDisplay",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"carouselFadeEnds",storageKey:null},{alias:null,args:null,concreteType:"StoryItemViewRepStyle",kind:"LinkedField",name:"itemViewRepStyle",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"exploreArticleRepStyle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"moreIdeasRepStyle",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryHeaderDisplay",kind:"LinkedField",name:"headerDisplay",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"expandedTextAlignment",storageKey:null},{alias:null,args:null,concreteType:"StoryThumbnailDisplayOptions",kind:"LinkedField",name:"thumbnail",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"thumbnailUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thumbnailWidth",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thumbnailWidthHeightRatio",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thumbnailWash",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryHeaderDynamicContentSpan",kind:"LinkedField",name:"dynamicHeaderContentSpan",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"narrowView",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wideView",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"textAlignment",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subtitleAlignment",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"headerSize",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"headerWidth",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"titlePosition",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subtitleStyle",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"titleTextColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subtitleTextColor",storageKey:null}],storageKey:null},{alias:"storyTitle",args:null,concreteType:"StoryText",kind:"LinkedField",name:"title",plural:!1,selections:[d,u],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"objects",plural:!0,selections:[d,{kind:"InlineFragment",selections:[h,_,{alias:"imageSpec_236x",args:y,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[m,f,x,v],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"debug",storageKey:null},b,{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[k,S,m,P,w,{alias:null,args:null,kind:"ScalarField",name:"featuredIn",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"owner",plural:!1,selections:C,storageKey:null},I,_,T,{alias:null,args:null,kind:"ScalarField",name:"collaboratorCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"collaboratedByMe",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"collaboratorPermissions",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[k,S,m,P,_,d],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"adDestinationUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"advertiserId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"attributionSourceId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"seoAltText",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"altText",storageKey:null},j,{alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},f,{alias:null,args:null,kind:"ScalarField",name:"dpaCreativeType",storageKey:null},A,{alias:null,args:null,kind:"ScalarField",name:"isDownstreamPromotion",storageKey:null},F,{alias:null,args:null,kind:"ScalarField",name:"seoUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shoppingFlags",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:[d,P,L,D,_,R,K,M,Z,z,{alias:null,args:null,kind:"ScalarField",name:"websiteUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDirectToSiteAllowed",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"explicitlyFollowedByMe",storageKey:null},P,M,R,_,K,D,L,Z,O,d],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"promoter",plural:!1,selections:[d,P,_,R,M,Z,K],storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[_,{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV3MOBILE",plural:!1,selections:B,storageKey:null},{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV4",plural:!1,selections:[x,v,m,d,N],storageKey:null},{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"v720P",plural:!1,selections:B,storageKey:null},d],storageKey:null},P,d,V],storageKey:null},{alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null},{alias:null,args:null,concreteType:"AnnotationsWithLinks",kind:"LinkedField",name:"annotationsWithLinksArray",plural:!0,selections:[S,m],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shoppingKlpUrls",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[_,{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:[h,{alias:null,args:null,kind:"ScalarField",name:"details",storageKey:null},F,U,{alias:"slotId",args:null,kind:"ScalarField",name:"id",storageKey:null},A,{alias:"imagesSpec_236x",args:y,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:H,storageKey:'images(spec:"236x")'},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[_,{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV4",plural:!1,selections:W,storageKey:null},G],storageKey:null},P],storageKey:null},d,{alias:"image236x",args:y,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:H,storageKey:'images(spec:"236x")'},{alias:"image474x",args:$,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:H,storageKey:'images(spec:"474x")'},{alias:"image564x",args:X,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:H,storageKey:'images(spec:"564x")'},{alias:"image736x",args:q,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:H,storageKey:'images(spec:"736x")'},Y],storageKey:null},P,d,{alias:"carouselDataId",args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"PinTagChipImagesPerSpec",kind:"LinkedField",name:"pinTagsChips",plural:!0,selections:[d,Y,{alias:null,args:null,concreteType:"Thumbnails",kind:"LinkedField",name:"image",plural:!1,selections:H,storageKey:null},F],storageKey:null},P,{alias:null,args:null,kind:"ScalarField",name:"isShopTheLook",storageKey:null},Q],storageKey:null},{alias:null,args:null,concreteType:"CollectionPin",kind:"LinkedField",name:"collectionPin",plural:!1,selections:[{alias:null,args:null,concreteType:"CollectionPinItem",kind:"LinkedField",name:"itemData",plural:!0,selections:[d,ee,{alias:null,args:[{kind:"Literal",name:"spec",value:"750x"}],concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:[m,v,x],storageKey:'images(spec:"750x")'},F],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"campaignId",storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[d,{alias:null,args:null,kind:"ScalarField",name:"isDeleted",storageKey:null},P,{alias:null,args:null,concreteType:"StoryPinPage",kind:"LinkedField",name:"pages",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blocks",plural:!0,selections:[d,{kind:"InlineFragment",selections:[et,{alias:null,args:null,concreteType:"StoryPinVideoMetadataFormattedV2",kind:"LinkedField",name:"videoDataV2",plural:!1,selections:[{alias:null,args:en,concreteType:"StoryPinVideoFormatsV2",kind:"LinkedField",name:"videoList",plural:!1,selections:[G],storageKey:'videoList(version:"V_HLSV3_MOBILE")'},d],storageKey:null}],type:"StoryPinVideoBlock",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalVideoDuration",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasProductPins",storageKey:null},{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pinTitle",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"staticPageCount",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinRecommendationReason",kind:"LinkedField",name:"recommendationReason",plural:!1,selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[d,P,S,m,_],storageKey:null},ei,{alias:null,args:null,kind:"ScalarField",name:"reasonId",storageKey:null},{alias:null,args:null,concreteType:"PinThroughProperties",kind:"LinkedField",name:"throughProperties",plural:!0,selections:[ea,el],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AdData",kind:"LinkedField",name:"adData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"collectionGridClickType",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ceAltImageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isWeightLossAd",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"excludeFromGridRepTests",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"autoAltText",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:J,storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[d,{alias:null,args:null,concreteType:"Brand",kind:"LinkedField",name:"brand",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"signature",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ShippingInfo",kind:"LinkedField",name:"shippingInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"freeShippingPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"freeShippingValue",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"DimensionMetadata",kind:"LinkedField",name:"dimensionMetadata",plural:!0,selections:[S,{alias:null,args:null,kind:"ScalarField",name:"values",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:J,storageKey:null}],storageKey:null},es,eo,ed,ec,eu,S,ep,{alias:"additionalImageSpec_236x",args:y,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:J,storageKey:'additionalImagesPerSpec(spec:"236x")'},{alias:"additionalImageSpec_474x",args:$,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:J,storageKey:'additionalImagesPerSpec(spec:"474x")'},{alias:"additionalImageSpec_564x",args:X,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:J,storageKey:'additionalImagesPerSpec(spec:"564x")'},{alias:"additionalImageSpec_736x",args:q,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:J,storageKey:'additionalImagesPerSpec(spec:"736x")'}],storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[d,{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null}],storageKey:null},h,j],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"utmLink",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isOosProduct",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStaleProduct",storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[U,{alias:null,args:null,kind:"ScalarField",name:"itemSetId",storageKey:null},es,eo,ed,ec,eu,d,ep,{alias:null,args:null,concreteType:"Brand",kind:"LinkedField",name:"brand",plural:!1,selections:[S],storageKey:null},S,{alias:null,args:null,concreteType:"LabelInfo",kind:"LinkedField",name:"labelInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"labels",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"typeName",storageKey:null},d,{alias:null,args:null,kind:"ScalarField",name:"siteName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"displayCookTime",storageKey:null},{alias:null,args:null,concreteType:"AggregateRatingMetadata",kind:"LinkedField",name:"aggregateRating",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"bestRating",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ratingValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reviewCount",storageKey:null}],storageKey:null},m],storageKey:null},{alias:null,args:null,concreteType:"ProductMetadataV2",kind:"LinkedField",name:"productPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"ItemMetadata",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"additionalImagesLength",storageKey:null}],storageKey:null},P],storageKey:null},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[d,x,m,v,f],storageKey:'images(spec:"orig")'},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},em],storageKey:null},{alias:"image236x",args:y,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:H,storageKey:'images(spec:"236x")'},{alias:"image474x",args:$,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:H,storageKey:'images(spec:"474x")'},{alias:"image564x",args:X,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:H,storageKey:'images(spec:"564x")'},{alias:"image736x",args:q,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:H,storageKey:'images(spec:"736x")'},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForWebCloseup",storageKey:null},{alias:"imageSpec_474x",args:$,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:eg,storageKey:'images(spec:"474x")'},{alias:"imageSpec_736x",args:q,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:eg,storageKey:'images(spec:"736x")'},eh,{alias:null,args:null,concreteType:"ImageCrop",kind:"LinkedField",name:"imageCrop",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"maxY",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"minY",storageKey:null}],storageKey:null},{alias:"imageSpec_136x136",args:[{kind:"Literal",name:"spec",value:"136x136"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:e_,storageKey:'images(spec:"136x136")'},{alias:"imageSpec_170x",args:ey,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:e_,storageKey:'images(spec:"170x")'},{alias:null,args:null,kind:"ScalarField",name:"promotedIsLeadAd",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"linkUtmApplicableAndReplaced",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinPromotionId",storageKey:null},{alias:"imageSpec_564x",args:X,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:ef,storageKey:'images(spec:"564x")'},{alias:null,args:null,concreteType:"PromotedLeadForm",kind:"LinkedField",name:"promotedLeadForm",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"leadFormId",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Attribution",kind:"LinkedField",name:"attribution",plural:!1,selections:[{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[em],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"adMatchReason",storageKey:null},{alias:null,args:null,concreteType:"Interest",kind:"LinkedField",name:"sourceInterest",plural:!1,selections:[S,{alias:null,args:null,kind:"ScalarField",name:"urlName",storageKey:null},P,_],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"videoStatus",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isRepin",storageKey:null},{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:[R,P,_,Z,K,z,M,D,L],storageKey:null},P,d],storageKey:null},{alias:null,args:null,concreteType:"UserWebsite",kind:"LinkedField",name:"linkUserWebsite",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:ex,storageKey:null},P],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:[R,P,_],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"viaPinner",plural:!1,selections:ex,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"access",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedIsRemovable",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"seeMoreUserFeedback",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,concreteType:"AdTargetingAttribution",kind:"LinkedField",name:"adTargetingAttribution",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"geoPostalCode",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"geoRegion",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isCustomerListMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isShoppingRetargetingMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isActalikeMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEngagementMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isExpandTargetingMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isFromGpsLocation",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isVisitorMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isShoppingProspectingMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPlPersonaMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"matchedAgeBucket",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"matchedDevice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"matchedGender",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"matchedInterest",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"matchedKeyword",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"matchedLocale",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isFirstPartyAdPersonalizationEnabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isThirdPartyAdPersonalizationEnabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isLocalInventoryAdsMatched",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedPartnershipAdvertiserName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedPartnershipAttributionName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPromotedPartnership",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"digitalMediaSourceType",storageKey:null},{alias:null,args:null,concreteType:"Sponsorship",kind:"LinkedField",name:"sponsorship",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"creator",plural:!1,selections:ev,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"sponsor",plural:!1,selections:ev,storageKey:null},d],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"gridAttribution",plural:!1,selections:[_,R,Z,K,M,D,L,P],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isGoLinkless",storageKey:null},Q,{alias:null,args:null,kind:"ScalarField",name:"mobileLink",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isQuickPromotable",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isVideo",storageKey:null},{alias:"imageSpec_60x60",args:[{kind:"Literal",name:"spec",value:"60x60"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:ef,storageKey:'images(spec:"60x60")'},{alias:"imageSpec_600x315",args:[{kind:"Literal",name:"spec",value:"600x315"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:ef,storageKey:'images(spec:"600x315")'},{alias:null,args:null,kind:"ScalarField",name:"isInstagramApi",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shouldOpenInStream",storageKey:null},{alias:null,args:null,concreteType:"GenAIInterestData",kind:"LinkedField",name:"genAiTopics",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"interestIdStr",storageKey:null},S],storageKey:null},{condition:"isDesktop",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isUnsafe",storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,concreteType:"AggregateRatingMetadata",kind:"LinkedField",name:"aggregateRating",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ratingCount",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinBasics",kind:"LinkedField",name:"basics",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinListBlock",kind:"LinkedField",name:"listBlocks",plural:!0,selections:[et,{alias:null,args:null,kind:"ScalarField",name:"heading",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blocks",plural:!0,selections:[d,ek,eS,eP,{kind:"InlineFragment",selections:[et],type:"IngredientBlock",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},_,{alias:null,args:null,concreteType:"StoryPinPage",kind:"LinkedField",name:"pages",plural:!0,selections:[k,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blocks",plural:!0,selections:[ek,eS,eP,{kind:"InlineFragment",selections:[g,{alias:null,args:null,concreteType:"StoryPinVideoMetadataFormattedV2",kind:"LinkedField",name:"videoDataV2",plural:!1,selections:[{alias:"videoListMobile",args:en,concreteType:"StoryPinVideoFormatsV2",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV3MOBILE",plural:!1,selections:ew,storageKey:null}],storageKey:'videoList(version:"V_HLSV3_MOBILE")'},{alias:"videoListEXP3",args:[{kind:"Literal",name:"version",value:"V_EXP3"}],concreteType:"StoryPinVideoFormatsV2",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vEXP3",plural:!1,selections:ew,storageKey:null}],storageKey:'videoList(version:"V_EXP3")'},{alias:"videoListEXP4",args:[{kind:"Literal",name:"version",value:"V_EXP4"}],concreteType:"StoryPinVideoFormatsV2",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vEXP4",plural:!1,selections:ew,storageKey:null}],storageKey:'videoList(version:"V_EXP4")'},{alias:"videoListEXP5",args:[{kind:"Literal",name:"version",value:"V_EXP5"}],concreteType:"StoryPinVideoFormatsV2",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vEXP5",plural:!1,selections:ew,storageKey:null}],storageKey:'videoList(version:"V_EXP5")'},{alias:"videoListEXP6",args:[{kind:"Literal",name:"version",value:"V_EXP6"}],concreteType:"StoryPinVideoFormatsV2",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vEXP6",plural:!1,selections:ew,storageKey:null}],storageKey:'videoList(version:"V_EXP6")'},{alias:"videoListEXP7",args:[{kind:"Literal",name:"version",value:"V_EXP7"}],concreteType:"StoryPinVideoFormatsV2",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vEXP7",plural:!1,selections:ew,storageKey:null}],storageKey:'videoList(version:"V_EXP7")'},{alias:"videoList720P",args:[{kind:"Literal",name:"version",value:"V_720P"}],concreteType:"StoryPinVideoFormatsV2",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"v720P",plural:!1,selections:ew,storageKey:null}],storageKey:'videoList(version:"V_720P")'}],storageKey:null}],type:"StoryPinVideoBlock",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasAffiliateProducts",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"imageThumbnailUrl",storageKey:null},eC],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPreLovedGoodsLabel",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"promoter",plural:!1,selections:[eI,eT],storageKey:null},{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[ej],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"favoritedByMe",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"favoriteUserCount",storageKey:null},{alias:null,args:null,concreteType:"ReactionCountModel",kind:"LinkedField",name:"reactionCountsData",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"reactionCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reactionType",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:eA,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"gridAttribution",plural:!1,selections:eA,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:eA,storageKey:null},ej,{alias:null,args:null,kind:"ScalarField",name:"showFoodIndicator",storageKey:null},{condition:"isDesktop",kind:"Condition",passingValue:!0,selections:[{kind:"ClientExtension",selections:[eF,eE,eL]}]},{kind:"ClientExtension",selections:[eF,eL,eE]}]},{kind:"ClientExtension",selections:[eF,{alias:"nodeId",args:null,kind:"ScalarField",name:"__id",storageKey:null},{alias:null,args:null,concreteType:"SaveTarget",kind:"LinkedField",name:"savedInfo",plural:!1,selections:[eD,eR,d,m,eK,eM,h,em],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageBase64",storageKey:null},eZ,{alias:null,args:null,kind:"ScalarField",name:"mediaUploadId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"saved",storageKey:null},{alias:null,args:null,concreteType:"SaveTarget",kind:"LinkedField",name:"savedCutout",plural:!1,selections:ez,storageKey:null},{alias:null,args:null,concreteType:"SaveTarget",kind:"LinkedField",name:"selectedItem",plural:!1,selections:ez,storageKey:null},eL,eE,{alias:null,args:null,kind:"ScalarField",name:"showFeedbackOverlay",storageKey:null},{alias:null,args:null,concreteType:"FeedbackText",kind:"LinkedField",name:"feedbackText",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"subTitle",storageKey:null},h,{alias:null,args:null,concreteType:"Unfollow",kind:"LinkedField",name:"unfollow",plural:!1,selections:[eO,eB],storageKey:null},{alias:null,args:null,concreteType:"UndoCallbackProps",kind:"LinkedField",name:"undoCallbackProps",plural:!1,selections:[eO,eB,{alias:null,args:null,kind:"ScalarField",name:"viewType",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewParameter",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showFeedback",storageKey:null}]}],type:"Pin",abstractKey:null},{kind:"InlineFragment",selections:[c,{alias:"storyTitle",args:null,concreteType:"StoryText",kind:"LinkedField",name:"title",plural:!1,selections:p,storageKey:null}],type:"Story",abstractKey:null},{kind:"InlineFragment",selections:[_,S,{alias:"boardAccess",args:null,kind:"ScalarField",name:"access",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"archivedByMeAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"boardOrderModifiedAt",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"collaboratingUsers",plural:!1,selections:[d,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserCollaboratingUsersConnection",kind:"LinkedField",name:"connection",plural:!1,selections:[{alias:null,args:null,concreteType:"UserCollaboratingUsersEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"node",plural:!1,selections:C,storageKey:null}],storageKey:null}],storageKey:null}],type:"UserCollaboratingUsersConnectionContainer",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CoverPin",kind:"LinkedField",name:"coverPin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"crop",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"size",storageKey:null},eZ],storageKey:null},w,{alias:null,args:null,kind:"ScalarField",name:"hasCustomCover",storageKey:null},{alias:"images170x",args:ey,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!0,selections:ef,storageKey:'images(spec:"170x")'},{alias:"images236x",args:y,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!0,selections:ef,storageKey:'images(spec:"236x")'},I,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"owner",plural:!1,selections:[_,P,{alias:null,args:null,kind:"ScalarField",name:"blockedByMe",storageKey:null},R,D,M,{alias:null,args:null,concreteType:"VerifiedIdentity",kind:"LinkedField",name:"verifiedIdentity",plural:!1,selections:[S,E],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinThumbnailUrls",storageKey:null},T,{alias:null,args:null,kind:"ScalarField",name:"sectionCount",storageKey:null},{alias:null,args:null,concreteType:"SensitivityScreen",kind:"LinkedField",name:"sensitivityScreen",plural:!1,selections:[ei,{alias:null,args:null,kind:"ScalarField",name:"showWarning",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shouldShowBoardCollaborators",storageKey:null},em,m,{alias:"coverImageSpec_222x",args:[{kind:"Literal",name:"spec",value:"222x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"coverImages",plural:!1,selections:ef,storageKey:'coverImages(spec:"222x")'},{alias:"coverImageSpec_400x300",args:[{kind:"Literal",name:"spec",value:"400x300"}],concreteType:"ImageDetails",kind:"LinkedField",name:"coverImages",plural:!1,selections:ef,storageKey:'coverImages(spec:"400x300")'},{alias:"coverImageSpec_216x146",args:[{kind:"Literal",name:"spec",value:"216x146"}],concreteType:"ImageDetails",kind:"LinkedField",name:"coverImages",plural:!1,selections:ef,storageKey:'coverImages(spec:"216x146")'},{alias:null,args:null,kind:"ScalarField",name:"imageCoverHdUrl",storageKey:null},eC],type:"Board",abstractKey:null},{kind:"InlineFragment",selections:[{alias:"boardMoreIdeasFeedUpsellId",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:"boardMoreIdeasFeedUpsellName",args:null,kind:"ScalarField",name:"boardName",storageKey:null}],type:"BoardMoreIdeasFeedUpsell",abstractKey:null},{kind:"InlineFragment",selections:[_,M],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[_,{alias:"exploreArticleTitle",args:null,concreteType:"ArticleTitleGraphQL",kind:"LinkedField",name:"title",plural:!1,selections:p,storageKey:null}],type:"ExploreArticle",abstractKey:null},{kind:"InlineFragment",selections:[S,{alias:"imageSpec236x",args:y,concreteType:"Thumbnails",kind:"LinkedField",name:"image",plural:!0,selections:ef,storageKey:'image(spec:"236x")'},{alias:"imageSpec474x",args:$,concreteType:"Thumbnails",kind:"LinkedField",name:"image",plural:!0,selections:ef,storageKey:'image(spec:"474x")'},{alias:"klpUrl",args:null,kind:"ScalarField",name:"url",storageKey:null}],type:"SeoRelatedInterestsData",abstractKey:null},{kind:"InlineFragment",selections:[P],type:"Node",abstractKey:"__isNode"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyType",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[R,D,L,M,Z,P,d],storageKey:null},{alias:null,args:null,concreteType:"StoryText",kind:"LinkedField",name:"subtitle",plural:!1,selections:p,storageKey:null},{alias:"storyDescription",args:null,concreteType:"StoryText",kind:"LinkedField",name:"description",plural:!1,selections:p,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shopSource",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"slot",storageKey:null},b],storageKey:null}],type:"V3GetStelaShoppingCarousel",abstractKey:null}],storageKey:null}]},params:{id:"4dbc4d7a327ecf293fe207327cdfabd7566ac2e3ffdc507b276ae6577e4643e9",metadata:{},name:"ShoppingModuleQuery",operationKind:"query",text:null}});i.hash="9b72b1fb8ac15ff6e966eb2e7fedbb74";let a=i;var l,r,s,o,d,c,u,p,m,g,h,_,y,f,x,v,b,k,S,P,w,C,I,T,j,A,F,E,L,D,R,K,M,Z,z,O,B,N,V,U,H,W,G,$,X,q,Y,J,Q,ee,et,en,ei,ea,el,er,es,eo,ed,ec,eu,ep,em,eg,eh,e_,ey,ef,ex,ev,eb,ek,eS,eP,ew,eC,eI,eT,ej,eA,eF,eE,eL,eD,eR,eK,eM,eZ,ez,eO,eB,eN=i.default||i;if("query"===eN.params.operationKind)if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(eN);else{let e=[eN.params.name,eN.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[e]=eN}},263032:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ShoppingModule_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"CollectionPin",kind:"LinkedField",name:"collectionPin",plural:!1,selections:[{alias:null,args:null,concreteType:"CollectionPinItem",kind:"LinkedField",name:"itemData",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"source",storageKey:null}],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"CarouselModule_pin"}],type:"Pin",abstractKey:null};i.hash="739ecb0736bfecf3911084ec22416c60";let a=i},336209:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ShoppingModule_story",selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:"storyId",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"contentIds",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"slot",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyType",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,concreteType:"StoryDisplayOptions",kind:"LinkedField",name:"displayOptions",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryContentDisplay",kind:"LinkedField",name:"contentDisplay",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"componentType",storageKey:null}],storageKey:null}],storageKey:null}],type:"Story",abstractKey:null};i.hash="967fc795bbfb9844686a21d73abf35e0";let a=i},220149:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[{defaultValue:!1,kind:"LocalArgument",name:"skipUnauthFragment"}],kind:"Fragment",metadata:null,name:"ShoppingModule_v3GetStelaShoppingCarousel",selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"data",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:"storyId",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"containerType",storageKey:null},{alias:null,args:null,concreteType:"StoryText",kind:"LinkedField",name:"title",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"format",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryAction",kind:"LinkedField",name:"action",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"requestParams",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"CarouselModule_story"},{args:[{kind:"Variable",name:"skipUnauthFragment",variableName:"skipUnauthFragment"}],kind:"FragmentSpread",name:"CSSCarouselModule_story"},{args:null,kind:"FragmentSpread",name:"ShoppingModule_story"}],storageKey:null}],type:"V3GetStelaShoppingCarousel",abstractKey:null};i.hash="8dbadcc717705db56290e7675e591f95";let a=i},35312:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoryPinBlock_pin",selections:[{args:null,kind:"FragmentSpread",name:"StoryPinStickerBlockCloseup_pin"}],type:"Pin",abstractKey:null};i.hash="8bb1bb1f7bafeed0fe43bed44ef12d2a";let a=i},303965:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoryPinStickerBlockCloseup_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxPrice",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};i.hash="7e8d917850c8329247291df0d281a59b";let a=i},176694:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StructuredDescriptionComponent_pin",selections:[{args:null,kind:"FragmentSpread",name:"StructuredDescriptionText_pin"}],type:"Pin",abstractKey:null};i.hash="1754355dbabe4462412dea1f15de578a";let a=i},184963:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StructuredDescriptionText_pin",selections:[{args:null,kind:"FragmentSpread",name:"DescriptionWithLinksAndMentions_pin"},{args:null,kind:"FragmentSpread",name:"useHyperlinkExperiment_pin"}],type:"Pin",abstractKey:null};i.hash="733093776dc8e837966fbdda29e9d4c5";let a=i},953095:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StructuredDescription_pin",selections:[{args:null,kind:"FragmentSpread",name:"StructuredDescriptionComponent_pin"}],type:"Pin",abstractKey:null};i.hash="0115eb52db8bd36a1a82754d3c39b478";let a=i},176376:function(e,t,n){var i,a,l,r,s,o,d;n.r(t),n.d(t,{default:()=>u});let c=(i={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},r=[l={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],s=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},i,{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"TitleDesktop_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"advertiserId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"attributionSourceId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[i],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"campaignId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isGoLinkless",storageKey:null},{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},a],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:r,storageKey:null},l,{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"736x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"orig")'},{alias:null,args:null,kind:"ScalarField",name:"isDownstreamPromotion",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinPromotionId",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"promoter",plural:!1,selections:r,storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:d=[o={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:d,storageKey:null},a,{alias:null,args:null,concreteType:"MakeCardTutorialMetadata",kind:"LinkedField",name:"tutorial",plural:!1,selections:[o,{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null},a,{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{args:null,kind:"FragmentSpread",name:"usePinFormattedLink_pin"},{args:null,kind:"FragmentSpread",name:"usePinHasProducts_pin"}],type:"Pin",abstractKey:null});c.hash="e0961d958eda59cad942eda9890b0f5f";let u=c},318653:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UnifiedCommentModule_pin",selections:[{args:null,kind:"FragmentSpread",name:"CloseupCommentModule_pin"}],type:"Pin",abstractKey:null};i.hash="3a8cd51fec23643de121636949bbbcf6";let a=i},971203:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoContent_pin",selections:[{args:null,kind:"FragmentSpread",name:"useCalculateMaxWidthAndHeightForSideBySideVariant_pin"},{args:null,kind:"FragmentSpread",name:"CloseupVideoWithVisibility_pin"}],type:"Pin",abstractKey:null};i.hash="89029511c11617e1150976d1002228db";let a=i},454387:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoWithContextLogging_pin",selections:[{args:null,kind:"FragmentSpread",name:"VideoWrapper_pin"}],type:"Pin",abstractKey:null};i.hash="93ed23334d5bac81ac8410f05c4f2031";let a=i},561330:function(e,t,n){var i;n.r(t),n.d(t,{default:()=>l});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisitButton_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"attributionSourceId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"campaignId",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDownstreamPromotion",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinPromotionId",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"promoter",plural:!1,selections:[i],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"advertiserId",storageKey:null},{args:null,kind:"FragmentSpread",name:"ContextMenuClickthroughLogging_pin"}],type:"Pin",abstractKey:null};a.hash="e327c6c7127550a2f17b174cd4dcfa73";let l=a},441590:function(e,t,n){var i,a,l,r,s;n.r(t),n.d(t,{default:()=>d});let o={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualContext_pin",selections:[{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"v720P",plural:!1,selections:r=[{alias:null,args:null,kind:"ScalarField",name:"thumbnail",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"duration",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captionsUrls",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV4",plural:!1,selections:r,storageKey:null},{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV3MOBILE",plural:!1,selections:r,storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subtype",storageKey:null}],storageKey:null},{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s=[l,i,a],storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"736x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"orig")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"474x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"236x")'},{alias:"imageSpec_1200x",args:[{kind:"Literal",name:"spec",value:"1200x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"1200x")'},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isVideo",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetMainPinImage_pin"}],type:"Pin",abstractKey:null};o.hash="f5ddfd6a30ebe10b0f0a7b0bf12bea4e";let d=o},655327:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useBuildCloseupImageOverlayProps_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"isGoLinkless",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"access",storageKey:null},{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isShopTheLook",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null}],type:"Pin",abstractKey:null};i.hash="239c809acefcd1b75df8f18c8ffb91ff";let a=i},111419:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCalculateImageContainerDimension_pin",selections:[{args:null,kind:"FragmentSpread",name:"useCalculateMaxWidthAndHeightForSideBySideVariant_pin"}],type:"Pin",abstractKey:null};i.hash="86a6c49cecdb70d77f786a1965756cf9";let a=i},331047:function(e,t,n){var i,a,l,r;n.r(t),n.d(t,{default:()=>o});let s=(i={alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},r=[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:l=[{alias:null,args:null,kind:"ScalarField",name:"firstName",storageKey:null}],storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCalculateMaxWidthAndHeightForSideBySideVariant_pin",selections:[{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:[i,a],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:l,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedTitle",storageKey:null},i,{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},a,{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:r,storageKey:null},{alias:null,args:null,concreteType:"UserWebsite",kind:"LinkedField",name:"linkUserWebsite",plural:!1,selections:r,storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"standardPrice",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null}],type:"Pin",abstractKey:null});s.hash="f82ccc429683f2cb3ed96de5adc86f80";let o=s},543996:function(e,t,n){var i,a,l,r,s,o,d;n.r(t),n.d(t,{default:()=>u});let c=(i={alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},l=[a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],o={alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCloseupBodyUtils_pin",selections:[i,{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[a,{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:l,storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:l,storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:l,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:l,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:s=[r={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"domainUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"domainVerified",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"thirdPartyPinOwner",plural:!1,selections:l,storageKey:null},{alias:null,args:null,concreteType:"UserWebsite",kind:"LinkedField",name:"linkUserWebsite",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:l,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:[a,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:s,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isShopTheLook",storageKey:null}],storageKey:null},o,{alias:null,args:null,kind:"ScalarField",name:"isGoLinkless",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:s,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:s,storageKey:null},{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:[o,i],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:d=[r],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupUnifiedAttribution",plural:!1,selections:d,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForAggregatedComments",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isCollaborative",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"collaboratedByMe",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:d,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDownstreamPromotion",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,concreteType:"CreatorClass",kind:"LinkedField",name:"creatorClass",plural:!1,selections:l,storageKey:null}],type:"Pin",abstractKey:null});c.hash="b640d34fae5bf66634c4dffcbb8ea6d4";let u=c},522386:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCreatorRecsPrevStateCloseup_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"promotedIsLeadAd",storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"typeName",storageKey:null}],storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"showSuggestedCreatorRecs",storageKey:null}]}],type:"Pin",abstractKey:null};i.hash="a1f87ab2b8198cdc7fd8fc3cdaa872f0";let a=i},673588:function(e,t,n){var i;n.r(t),n.d(t,{default:()=>l});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetMainPinImage_pin",selections:[{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"736x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"orig")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"474x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"236x")'},{alias:"imageSpec_1200x",args:[{kind:"Literal",name:"spec",value:"1200x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"1200x")'}],type:"Pin",abstractKey:null};a.hash="64a50a10a8f854ca82309453d98f41a7";let l=a},208540:function(e,t,n){var i;n.r(t),n.d(t,{default:()=>l});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useHandleBackButtonClick_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedIsLeadAd",storageKey:null},{alias:null,args:null,concreteType:"PromotedLeadForm",kind:"LinkedField",name:"promotedLeadForm",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"leadId",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:i,storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:i,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:i,storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"}],type:"Pin",abstractKey:null};a.hash="efee9cd30f69b524ed9920746ed65ceb";let l=a},394292:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useHandleTitleClick_pin",selections:[{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"},{args:null,kind:"FragmentSpread",name:"useClientTrackingParams_pin"},{alias:null,args:null,kind:"ScalarField",name:"linkUtmApplicableAndReplaced",storageKey:null}],type:"Pin",abstractKey:null};i.hash="d38a7b9f18791089cd1df852e3863570";let a=i},881010:function(e,t,n){var i;n.r(t),n.d(t,{default:()=>l});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useIsBoardOwnerOrCollaborator_pin",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"collaboratedByMe",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"owner",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:i,storageKey:null}],type:"Pin",abstractKey:null};a.hash="120c47eff2cf4911de716b514608718f";let l=a},224266:function(e,t,n){var i;n.r(t),n.d(t,{default:()=>l});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useMediaContainer_pin",selections:[{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isShopTheLook",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"altText",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"autoAltText",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForRelatedProducts",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Shuffle",kind:"LinkedField",name:"shuffle",plural:!1,selections:i,storageKey:null},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"orig")'},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"method",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"utmLink",storageKey:null}],type:"Pin",abstractKey:null};a.hash="c3027cfec56abe15f0990c2bc6707062";let l=a},251967:function(e,t,n){var i,a;n.r(t),n.d(t,{default:()=>r});let l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"usePinAnalyticsStatus_pin",selections:[{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[a={alias:null,args:null,concreteType:"PinAnalyticsStats",kind:"LinkedField",name:"creatorAnalytics",plural:!1,selections:[{alias:null,args:null,concreteType:"CreatorAnalytics",kind:"LinkedField",name:"_30dRealtime",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null}],storageKey:null},a,{alias:null,args:null,kind:"ScalarField",name:"isRepin",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:i,storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};l.hash="977a37f1bef6ecfbe279db65075e1520";let r=l},498876:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"usePinFormattedLink_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"method",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"utmLink",storageKey:null},{args:null,kind:"FragmentSpread",name:"usePinHasProducts_pin"}],type:"Pin",abstractKey:null};i.hash="b694b913cbcf66451260d78ec78bcccd";let a=i},445662:function(e,t,n){n.r(t),n.d(t,{default:()=>a});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"usePinHasProducts_pin",selections:[{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};i.hash="e1f413e0ba2f9031ea605d85baa14a4b";let a=i},262176:function(e,t,n){var i,a;n.r(t),n.d(t,{default:()=>r});let l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useStructuredDescription_pin",selections:[{alias:null,args:null,concreteType:"FormattedCloseupDescription",kind:"LinkedField",name:"formattedCloseupDescription",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"components",plural:!0,selections:[{kind:"InlineFragment",selections:[i={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:"stringContent",args:null,kind:"ScalarField",name:"content",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],type:"DescriptionString",abstractKey:null},{kind:"InlineFragment",selections:[i,a,{alias:"pointsContent",args:null,kind:"ScalarField",name:"content",storageKey:null}],type:"DescriptionPoints",abstractKey:null},{kind:"InlineFragment",selections:[i,a,{alias:"specsContent",args:null,concreteType:"DescriptionSpecDetail",kind:"LinkedField",name:"content",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null}],type:"DescriptionSpecs",abstractKey:null},{kind:"InlineFragment",selections:[i,a,{alias:"tableContent",args:null,kind:"ScalarField",name:"content",storageKey:null}],type:"DescriptionTable",abstractKey:null},{kind:"InlineFragment",selections:[i,a,{alias:"headerContent",args:null,kind:"ScalarField",name:"content",storageKey:null}],type:"DescriptionHeader",abstractKey:null},{kind:"InlineFragment",selections:[i,a,{alias:"boldContent",args:null,kind:"ScalarField",name:"content",storageKey:null}],type:"DescriptionStringBold",abstractKey:null}],storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};l.hash="f5443b1193b0aed988404fef7c7338fe";let r=l},873707:function(e,t,n){n.d(t,{CA:()=>a,Gv:()=>i,k5:()=>l});let i=({orbacSubjectId:e,pinIsRepin:t,pinPinnerId:n,viewerId:i,viewerIsPartner:a})=>!t&&!!a&&[i,e].includes(n),a=e=>!!(e&&!e.insufficient_data_response&&e.results&&e.results.length>0),l=(e,t)=>{if(!e)return e;let n=[...e].filter(e=>!!e.mom_change?.roundedPercentChange&&e.mom_change.roundedPercentChange>0);return n.length<=t?n:Array(t).fill(1).map(()=>{let e=Math.floor(Math.random()*n.length);return n.splice(e,1)[0]})}},767439:function(e,t,n){n.d(t,{Z:()=>l});var i=n(667294);let a="undefined"!=typeof document?document:{},l=()=>{let e=(0,i.useRef)(void 0),t=a.documentElement,{body:n}=a;return t?[()=>{if(!n||!n.style||e.current)return;let i=window.innerWidth-t.clientWidth,a=parseInt(window.getComputedStyle(n).getPropertyValue("padding-right"),10)||0;t.style.position="relative",t.style.overflow="hidden",n.style.position="relative",n.style.overflow="hidden",n.style.paddingRight=`${a+i}px`,e.current=!0},()=>{n&&n.style&&e.current&&(t.style.position="",t.style.overflow="",n.style.position="",n.style.overflow="",n.style.paddingRight="",e.current=!1)}]:[]}},67484:function(e,t,n){n.d(t,{K:()=>r,Q:()=>l});var i=n(667294);let a=(0,i.createContext)(null),l=a;function r(){let e=(0,i.useContext)(a);return e?.featuredCommentId}},111923:function(e,t,n){n.d(t,{Z:()=>p});var i=n(581722),a=n(575108),l=n(105433),r=n(542092),s=n(611134),o=n(189976),d=n(800300),c=n(696323);let u={[r.o.aggregatedComment]:"AggregatedCommentReplyResource",[r.o.pin]:"AggregatedCommentResource",[r.o.didIt]:"DidItCommentsResource"};function p(){let e=(0,i.I0)(),{aggregatedCommentCreated:t,updateCommentCount:n}=(0,l.nf)();return async({commentMedia:i,force:l=!0,fromUnifiedComment:r,objectId:p,objectType:m,orbacSubjectId:g,pinId:h,replyToCommentId:_,tags:y,text:f})=>{let x=u[m],v={force:l,objectId:p,pinId:h,tags:y,text:f,replyToCommentId:_,...g?{orbacSubjectId:g}:{},...i?{commentMedia:i}:{}},b=c.Z.AGGREGATED_COMMENTS;r&&(b="pin"===m?c.Z.UNIFIED_COMMENTS:c.Z.AGGREGATED_COMMENT_REPLIES);let k=await a.Z.create(x,v).callCreate({showError:!1}),S=k.resource_response.data;return t(p,S),e((0,o.vX)({feedType:b,feedId:p,itemIds:[S.id],itemType:S.type,prepend:!0})),"aggregatedComment"===m?n(p,1):"didIt"===m&&e((0,s.L8)(p,1)),h&&e((0,d.R)(h,1)),S.id||k}}},314021:function(e,t,n){n.r(t),n.d(t,{default:()=>M});var i,a,l=n(667294),r=n(581722);n(167912);var s=n(20256),o=n(980787),d=n(821342),c=n(422578),u=n(221020);let p=function(e,t,n){switch((0,u.o)(e)){case"SingularLegacy":case"PluralLegacy":case"PaginationLegacyData":return t;case"GraphQL":{let e=(0,c.useRelayEnvironment)();return t=>(0,c.commitLocalUpdate)(e,e=>n(e,t))}default:throw Error("Unexpected case")}};var m=n(415546),g=n(525839),h=n(628708),_=n(886981),y=n(302148),f=n(341742),x=n(744862),v=n(709311),b=n(281239),k=n(149728),S=n(785893);let P=({creatorData:e,onTap:t,onUserFollow:n})=>{let i=(0,g.ZP)(),a=(0,d.Z)(),{explicitly_followed_by_me:l,follower_count:r=0,full_name:o,id:c,image_medium_url:u,username:p,verified_identity:m,avatar_color_index:h,is_verified_merchant:_}=e||{},f=`/${p}/`;return(0,S.jsx)(s.sg,{span:4,children:(0,S.jsxs)(s.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{padding:"0px 2px"}},direction:"column",display:"flex",marginBottom:1,children:[(0,S.jsx)(s.Tg,{href:f,onTap:()=>t(c),children:(0,S.jsxs)(s.kC,{alignItems:"center",direction:"column",justifyContent:"start",children:[(0,S.jsx)(s.xu,{height:60,width:60,children:(0,S.jsx)(x.qE,{color:h,name:o??"",size:"fit",src:u??"",verified:!1})}),(0,S.jsxs)(s.xu,{marginBottom:1,paddingY:2,children:[(0,S.jsx)(s.xu,{marginBottom:1,children:(0,S.jsx)(s.xv,{align:"center",lineClamp:1,size:"100",weight:"bold",children:m||_?(0,S.jsx)(k.Z,{badgeSize:"xs",badgeSpacing:2,fullName:o??"",isVerifiedIdentity:m?.verified,isVerifiedMerchant:_}):o})}),(0,S.jsx)(s.xv,{align:"center",size:"100",children:(0,y.nk)(i.ngettext('{{ followerCount }} follower', '{{ followerCount }} followers', r, 'suggestedCreatorRep.creator.followerCount', 'the number of followers the user has'),{followerCount:(0,S.jsx)(v.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:r},r)})})]})]})}),(0,S.jsx)(b.Z,{fullName:o,id:c,imageUrl:u,isOwnProfile:a.isAuth&&a.id===c,isSecondaryButton:!0,onUserFollow:e=>n({userIsNowFollowing:e,creatorId:c}),profileUrl:`/${p}/`,shouldStopEventPropagation:!0,size:"sm",userFollowed:l,viewParameter:156,viewType:3})]})})},w=({creatorRecs:e,fullName:t,pinId:n,viewParameter:i,viewType:a})=>{let{logContextEvent:l}=(0,o.u)(),r=(0,g.ZP)();(0,f.Z)(()=>{l({event_type:13,component:13891,view_parameter:i,view_type:a,aux_data:{...n?{pin_id:n}:{}}})});let d=e=>{l({event_type:101,component:13891,view_parameter:i,view_type:a,object_id_str:e,aux_data:{...n?{pin_id:n}:{}}})},c=({userIsNowFollowing:e,creatorId:t})=>{e?l({event_type:45,component:13891,object_id_str:t,view_parameter:i,view_type:a,aux_data:{...n?{pin_id:n}:{}}}):l({event_type:46,component:13891,object_id_str:t,view_parameter:i,view_type:a,aux_data:{...n?{pin_id:n}:{}}})};return(0,S.jsx)(s.xu,{minWidth:432,paddingY:4,children:(0,S.jsxs)(s.xu,{borderStyle:"shadow",paddingX:5,paddingY:4,rounding:4,children:[t&&(0,S.jsx)(s.X6,{align:"center",size:"300",children:(0,y.nk)(r._('More like {{creatorName}}', 'suggestedCreatorRecs.title', 'Users like the one just followed. creatorName: the creator\'s name'),{creatorName:t})}),(0,S.jsx)(s.xu,{display:"flex",justifyContent:"between",marginTop:4,width:"100%",children:e.map(e=>(0,S.jsx)(P,{creatorData:e.user,onTap:d,onUserFollow:c},e.user_id))})]})})},C=3,I=["creatorrecommendationitem.user_id","creatorrecommendationitem.user()","user.explicitly_followed_by_me","user.id","user.follower_count","user.full_name","user.image_medium_url","user.username","user.verified_identity","user.is_verified_merchant"],T=({fullName:e,id:t,numCreatorsToShow:n=C,pinId:i,viewParameter:a,viewType:l})=>{let r=(0,_.Z)({name:"ApiResource",options:{url:"/v3/orientation/nux_creator_recommendations/",data:{fields:I.join(","),page_size:n,referrer:4,target_user:t}}});if(!r.isLoaded||!(r.data&&r.data.length===n))return null;let s=r.data||[];return(0,S.jsx)(w,{creatorRecs:s,fullName:e,pinId:i,viewParameter:a,viewType:l})};var j=n(390843);let A=(void 0!==i||(i=n(522386)).hash&&"a1f87ab2b8198cdc7fd8fc3cdaa872f0"!==i.hash&&console.error("The definition of 'useCreatorRecsPrevStateCloseup_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),F=function(e){let t=function(){let{forward:e}=(0,j.ou)(),t=e&&e.length>0&&e[0].match&&e[0].match.path?e[0].match.path:null;return!!(t&&t.includes("/:username"))}(),n=(0,m.Z)(A,e);if(!t||!n)return{creatorRecsPrevState:!1};{let e=!!n.promotedIsLeadAd,t=n.richSummary?.typeName==="product";return{creatorRecsPrevState:!!n&&!e&&!t&&!!n.showSuggestedCreatorRecs}}};var E=n(285491),L=n(206459);function D(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let R=(void 0!==a||(a=n(119031)).hash&&"e0f013c76e98f3f285ba25a7d2f0f3af"!==a.hash&&console.error("The definition of 'CreatorCard_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a);class K extends l.PureComponent{constructor(...e){super(...e),D(this,"state",{shouldShowCreatorRecs:this.props.suggestedCreatorRecsPrevState,user:this.props.officialUser}),D(this,"handleNavigateAndLog",(e,t)=>{let{pin:n}=this.props,i=!!n.storyPinDataId;e===t?this.props.logContextEvent({event_type:101,element:13382,view_type:this.viewType,view_parameter:this.viewParameter,...i?{component:230}:Object.freeze({}),object_id_str:n.entityId,aux_data:{pin_id:n.entityId,creator_id:n.sponsorship?.creator?.creatorId,aop_origin:"CreatorCard",...i?{story_pin_template_type:n.storyPinData?.metadata?.templateType}:{}}}):this.props.logContextEvent({event_type:101,view_type:this.viewType,view_parameter:this.viewParameter,element:11619,...i?{component:230}:Object.freeze({}),object_id_str:n.entityId,aux_data:{pin_id:n.entityId,creator_id:n.sponsorship?.creator?.creatorId,...i?{story_pin_template_type:n.storyPinData?.metadata?.templateType}:{}}})}),D(this,"handleNavigateAndLogSponsorClick",()=>{let{pin:e}=this.props,t=e.entityId,n=e.sponsorship?.creator?.creatorId,i=e.sponsorship?.sponsor?.sponsorId,a=!!e.storyPinDataId;n&&i&&this.props.logContextEvent({event_type:101,view_type:this.viewType,view_parameter:this.viewParameter,element:11619,...a?{component:230}:Object.freeze({}),object_id_str:t,aux_data:{pin_id:t,creator_id:n,sponsor_id:i}})})}static getDerivedStateFromProps(e,t){let n=e.officialUser;if(n&&n!==t.user)return{...t,user:n};let i=e.suggestedCreatorRecsPrevState;return i&&!t.shouldShowCreatorRecs?{...t,shouldShowCreatorRecs:i}:null}get viewType(){return this.props.viewType||3}get viewParameter(){return this.props.viewParameter||156}render(){let{user:e}=this.state;if(!e)return(0,S.jsx)(s.xu,{});let{pin:t}=this.props,{full_name:n,id:i,image_medium_url:a,is_verified_merchant:l,username:r,verified_identity:o}=e,d=!!o?.verified,c=!!t.promotedIsLeadAd,u=t.richSummary?.typeName==="product",p=!!(!c&&!u&&this.state.shouldShowCreatorRecs),m=t.pinner?.isAdsOnlyProfile&&t.pinner.adsOnlyProfileSite?t.pinner?.adsOnlyProfileSite:`/${r}/`;return(0,S.jsx)(s.xu,{position:"relative",children:(0,S.jsxs)(s.xu,{children:[(0,S.jsx)(s.kC,{alignItems:"center",justifyContent:"start",children:(0,S.jsx)(s.xu,{flex:"grow",children:(0,S.jsx)(E.Z,{fullName:n,imageUrl:a,isPromoted:!!(t.promoter&&t.isPromoted),isVerifiedIdentity:d,isVerifiedMerchant:l,onNavigateClick:()=>this.handleNavigateAndLog(m,t.pinner?.adsOnlyProfileSite),onNavigateSponsorClick:this.handleNavigateAndLogSponsorClick,openNewTab:m===t.pinner?.adsOnlyProfileSite,profileUrl:m,sponsorName:t.sponsorship?.sponsor?.fullName??"",sponsorshipStatus:t.sponsorship?.status,sponsorUsername:t.sponsorship?.sponsor?.username??""})})}),p&&(0,S.jsx)(s.xu,{marginEnd:1,marginStart:1,children:(0,S.jsx)(T,{fullName:n,id:i,pinId:t.entityId,viewParameter:this.viewParameter,viewType:this.viewType})})]})})}}let M=(0,h.Z)(function(e){let{logContextEvent:t}=(0,o.u)(),n=(0,g.ZP)(),i=(0,m.Z)(R,e.input),a=(0,r.I0)(),l=p(e.input,()=>{a((0,L.Vw)(i.entityId))},e=>{let t=e.get(i.entityId);t&&t.setValue(!0,"showSuggestedCreatorRecs")}),s=(0,d.Z)(),{creatorRecsPrevState:c}=F(i);return(0,S.jsx)(K,{...e,i18n:n,logContextEvent:t,pin:i,setShowSuggestedCreatorRecs:l,suggestedCreatorRecsPrevState:c,viewerUserId:s.isAuth?s.id:null})})},889144:function(e,t,n){n.d(t,{Z:()=>v});var i=n(581722),a=n(616550),l=n(561692),r=n(399656),s=n(890479),o=n(821342),d=n(390843),c=n(274320),u=n(15667),p=n(448505),m=n(7872),g=n(620427),h=n(990103),_=n(169053),y=n(785893),f=n(667294);function x(e){return(0,y.jsx)(s.Z,{id:"CloseupContainerCommon-2",children:(0,y.jsx)(l.l6,{...e,closeupComponentToRender:"ProductDetailPage"})})}function v(e){let t=(0,i.I0)(),n=(0,o.Z)(),l=(0,a.UO)(),v=(0,d.aX)(),b=(0,a.TH)(),k=(0,_.S6)()(l.id||""),S=(0,g.Z)((b?.state||{}).trackingParams,k?.tracking_params),P={...e,history:(0,a.k6)(),location:(0,a.TH)(),clientTrackingParams:S,params:l,requestContext:(0,u.B)(),searchPinCloseupViewed:(e,n)=>t((0,h.Y4)(e,n)),viewer:n},{checkExperiment:w}=(0,c.r)();return(0,y.jsx)(r.Z,{orbacSubjectId:(0,m.lJ)(n,(0,p.Z)()),pinId:l.id||"",children:({pinResource:e})=>(0,y.jsx)(s.Z,{id:"ProductDetailPageContainer",children:(0,f.createElement)(x,{...P,key:l.id,checkExperiment:w,clientTrackingParams:S,currentHistoryStack:v,pinResource:e})})})}},295483:function(e,t,n){n.d(t,{Z:()=>U});var i,a=n(667294),l=n(581722),r=n(633301);n(244311);var s=n(20256),o=n(230608),d=n(296691),c=n(525839),u=n(785893);let p=({collapsed:e,commentCount:t,onIconClick:n=()=>{}})=>{let i=(0,c.ZP)(),a=(0,d.i$)(t,i);return(0,u.jsx)(o.Z,{collapsed:e,heading:a,onClick:n,showArrow:t>0})};var m=n(47944),g=n(162321);function h({comment:e}){let t=(0,c.ZP)(),{user:{first_name:n,image_medium_url:i,username:l},tags:r=[]}=e,o="",p="userdiditdata"===e.type&&e.details?e.details:"",h="aggregatedcomment"===e.type&&e.text?e.text:p,_=[e.user];if("aggregatedcomment"===e.type){_.push(...e.tagged_users);let n=e.media?.media_type===1;o=`${l} ${n?h||(0,d.F1)(t):h}`}else o=`${l} ${h||(0,d.Ff)(t)}`;let y=(0,d.zs)(l,r),f="aggregatedcomment"===e.type&&1===e.comment_tag;return(0,u.jsx)(a.Fragment,{children:(0,u.jsxs)(s.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,u.jsx)(s.xu,{marginEnd:2,children:(0,u.jsx)(m.Z,{isQuestion:f,name:n||l||"",size:"xs",src:i??""})}),(0,u.jsx)(s.kC,{direction:"column",flex:"grow",justifyContent:"center",children:(0,u.jsx)(s.kC,{justifyContent:"between",children:(0,u.jsx)(s.kC.Item,{minWidth:0,children:(0,u.jsx)(s.kC,{dataTestId:"author-and-comment-container",direction:"column",children:(0,u.jsx)(g.Z,{inCommentFeedPreview:!0,isFirstTaggedUserAuthor:!0,shouldShowFirstNameOnly:!0,taggedUsers:_,tags:y,text:o})})})})})]})})}var _=n(952018),y=n(439122),f=n(417827),x=n(592821),v=n(934645),b=n(67484),k=n(315787),S=n(640848),P=n(419366),w=n(624895),C=n(980787),I=n(821342),T=n(415546),j=n(369416),A=n(15667),F=n(886981),E=n(647709),L=n(448505),D=n(7872),R=n(105433),K=n(542092),M=n(601686),Z=n(121508),z=n(934603),O=n(800300),B=n(32082);let N=(void 0!==i||(i=n(445045)).hash&&"fcffc6bcc40bc48a92a9afe109d3995b"!==i.hash&&console.error("The definition of 'CanonicalCard_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),V=({aggregatedPinId:e,closeupAttributionId:t,closeupAttributionUsername:n,commentCount:i,commentsDisabled:o,commentsLoadedCallback:c,featuredCommentId:m,inCommentsImprovedDropdownExp:g,isLoadingNewCreatedComment:b,isORBACProfileManager:O,isVideo:V,onCommentSectionClick:U,photoCount:H,pinKey:W,pinId:G,pinnerId:$,scrollContainerRef:X,shouldShowHeading:q,storyPinDataId:Y,viewParameter:J})=>{let Q,{logContextEvent:ee}=(0,C.u)(),{isBot:et}=(0,A.B)(),en=(0,E.HG)(),ei=(0,R.lV)(),ea=(0,T.Z)(N,W),{clientTrackingParams:el,closeupWithinMasonryEnabled:er,peekCloseupEnabled:es,viewportSize:eo}=(0,M.x4)(),ed=(0,v.Z)({showProductDetailPage:!!ea?.isEligibleForPdp}),{handleAddComment:ec}=(0,S.Z)(),eu=(0,a.useRef)(null),ep=(0,a.useRef)(null),[em,eg]=(0,a.useState)(d.A9.NONE),[eh,e_]=(0,a.useState)(!1),[ey,ef]=(0,a.useState)(),[ex,ev]=(0,a.useState)([]),[eb,ek]=(0,a.useState)(""),[eS,eP]=(0,a.useState)(),[ew,eC]=(0,a.useState)(!1),[eI,eT]=(0,a.useState)(!1),[ej,eA]=(0,a.useState)(!1),[eF,eE]=(0,a.useState)(),[eL,eD]=(0,a.useState)(void 0),[eR,eK]=(0,a.useState)(void 0),[eM,eZ]=(0,a.useState)(!1),ez=(0,I.Z)(),eO=(0,L.Z)(),eB=(0,D.lJ)(ez,eO),{toggleCommentLike:eN,toggleCommentHelpful:eV}=(0,P.Z)(eB),{aggregatedPinData:eU,doneByMe:eH,privacy:eW}=ea||{},{entityId:eG}=eU||{},e$=6*!er,eX=!!eF||!!eS,{user:{first_name:eq=""}={}}=eF||{},eY=!(O&&!eB)&&g,eJ=0;er&&!ed&&(eJ=g?3:4);let eQ=Math.max(i+H,0),e0=eQ>0,e1=m?[m]:[],e2=`${(0,a.useId)()}-comments-thread-container`,[e3,e6]=(0,a.useState)(eQ<2),e4=(0,a.useRef)(!e0),{fetchMore:e7,isAtEnd:e5,isFetching:e8,isLoaded:e9}=(0,F.Z)((er&&e0||!e4.current)&&e?(0,z.B)({aggregatedPinDataId:e,featuredCommentIds:e1,isDesktop:en,orbacSubjectId:eB}):null),te=(0,l.v9)(t=>(0,B.Z)(t,{aggregatedPinDataId:e,aggregatedComments:ei})),tt=te?.length>0&&te.find(e=>"aggregatedcomment"===e.type),tn=eM&&!e3&&!!tt&&(er||ed)&&!es&&!g,ti=!e3&&g;(0,a.useEffect)(()=>{c?.(e9||!e0)},[c,e9,e0]),(0,a.useEffect)(()=>(e3&&eh&&(ep.current=Date.now()),()=>{ep.current&&(ee({component:14381,event_type:16258,object_id_str:G,aux_data:{time_in_ms:Date.now()-ep.current}}),ep.current=null)}),[e3,eh,ee,G]);let ta=()=>{ef(null),ev([]),ek(""),eP(null),eE(null)},tl=()=>{ta(),eC(!1)};async function tr(e){let n=await ec(e,eG,G,Y??"",t??"",el,eg,eC,eS,eF);return n&&(eu.current&&!eX&&eu.current.scrollTo({top:0,behavior:"smooth"}),ta()),n}let ts=(0,u.jsx)(k.Z,{aggregatedPinDataId:e,closeupAttributionId:t,closeupAttributionUsername:n,comments:te,commentsDisabled:o,commentsScrollContainerRef:eu,featuredCommentId:m,gapSize:5,id:e2,inCommentsImprovedDropdownExp:g,isDesktop:!0,isLoading:!e9&&(b||e8),isORBACProfileManager:O,isVideo:V,parentId:e??void 0,parentType:K.o.pin,pinId:G,pinnerId:$,reactionListCommentId:eR,replyingToCommentId:eL,showReactionListForComment:eK,storyPinDataId:Y,toggleEditComposer:g?e=>{if(e){let t="userdiditdata"===e.type&&e.details?e.details:"",n="aggregatedcomment"===e.type&&e.text?e.text:t,i=e.tags;e.type===K.n.didIt&&ef(e.images?.[0]?.originals),ev(i),ek(n)}eP(e)}:void 0,toggleHelpful:eV,toggleLike:eN,toggleReplyComposer:(e,t,n)=>{if(g){if(e){e.parentId=t,e.parentType=n;let{user:{first_name:i,username:a}}=e;if(e.parentType===K.n.aggregatedComment||e.parentType===K.n.didIt){let t=`${i||a} `;ev([{length:t.length-1,object_id:e.user.id,offset:0,tag_type:d.XU}]),ek(t)}}eE(e)}else eD(e?.id)},userAvatarSize:d.je,viewParameter:J}),to=e=>(0,u.jsxs)(a.Fragment,{children:[!!X&&(0,u.jsx)(s.gr,{container:er?eu.current??void 0:X,fetchMore:et?void 0:e7,isAtEnd:e5,isFetching:e8}),(0,u.jsxs)(_.Z,{nodeRef:e??void 0,paddingLeft:er&&!g?8:0,paddingRight:er&&!g?8:0,children:[ts,(0,u.jsx)(y.Z,{show:er&&e0&&e3&&ej,surface:"comment-body-scrolling"})]})]}),td=0,{fiftyPercentHeight:tc}=(0,x.Re)();es&&(td=tc,"sm"===eo&&(td=`calc(${tc}/2)`)),ti?Q="8px":q&&(Q="24px");let tu=`
    .comment-section-enter {
      max-height: 0;
      opacity: 0;
    }

    .comment-section-enter-active {
      max-height: ${td};
      opacity: 1;
      transition: max-height 500ms ease-out, opacity 500ms ease-out;
    }

    .comment-section-exit {
      max-height: ${td};
      opacity: 1;
    }

    .comment-section-exit-active {
      max-height: 0;
      opacity: 0;
      transition: max-height 500ms ease-out, opacity 500ms ease-out;
    }
  `;(0,a.useEffect)(()=>{if(!er)return()=>{};let e=()=>{(eu?.current?.scrollTop??0)>0?eT(!0):eT(!1),(eu?.current?.scrollHeight??0)>(eu?.current?.clientHeight??0)&&eA(!0)},t=eu.current;return t&&t.addEventListener("scroll",e),()=>{t&&t.removeEventListener("scroll",e)}},[er,e3]),(0,a.useEffect)(()=>{let e=setTimeout(()=>{eZ(!0)},1e3*!er);return()=>clearTimeout(e)},[er]);let tp=eM&&(e3||!e0),tm=(0,a.useRef)(null);return(0,u.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{overflowX:"hidden"}},id:"canonical-card",marginBottom:ed?2:void 0,children:(0,u.jsxs)(s.kC,{dataTestId:"canonical-card",direction:"column",gap:es?void 0:{row:0,column:e$},children:[(0,u.jsxs)(s.iP,{accessibilityControls:e3&&e0?e2:void 0,accessibilityExpanded:e3,accessibilityLabel:"Tap area to expand/collapse the comments section if there are any comments.",dataTestId:"canonical-card-tap-area",disabled:!!o||!e0,onTap:()=>{e6(!e3),U?.(!e3),eh||e3||e_(!0)},children:[q&&(0,u.jsx)(s.kC.Item,{children:(0,u.jsxs)(s.xu,{color:er?"light":void 0,children:[(0,u.jsx)(p,{collapsed:!e3,commentCount:o?0:Math.max(i+H,0)}),(0,u.jsx)(y.Z,{show:er&&e0&&eI&&e3&&!g&&!ed,surface:"comment-heading"})]})}),tn&&(0,u.jsx)(s.xu,{marginBottom:eJ,marginTop:1,children:(0,u.jsx)(h,{comment:tt})})]}),es&&(0,u.jsxs)(a.Fragment,{children:[(0,u.jsx)(j.Z,{unsafeCSS:tu}),(0,u.jsx)(r.Z,{classNames:"comment-section",in:eM&&(e3||!e0),nodeRef:tm,timeout:1e3,unmountOnExit:!0,children:to(tm)})]}),tp&&!ed&&!es&&!g&&to(),(g||ed)&&(0,u.jsxs)(a.Fragment,{children:[ti&&(0,u.jsx)(f.default,{inCommentsImprovedDropdownExp:!0,pinKey:ea,viewParameter:J}),tp&&(0,u.jsxs)(a.Fragment,{children:[(0,u.jsx)(s.gr,{container:eu.current??void 0,fetchMore:et?void 0:e7,isAtEnd:e5,isFetching:e8}),ts]}),(0,u.jsxs)(s.Le,{bottom:0,children:[eX&&(0,u.jsx)(Z.Z,{onClose:tl,replyToComment:eF}),(0,u.jsx)(y.Z,{show:er&&e0&&e3&&ej,surface:"comment-body-scrolling"}),eY&&(0,u.jsx)(s.xu,{color:"default",dangerouslySetInlineStyle:{__style:{paddingTop:Q,paddingBottom:q?"24px":"32px"}},children:(0,u.jsx)(w.Z,{clientTrackingParams:el,commentCount:eQ,commentWarningModalState:em,disablePhotoCommentSelection:!!eH,dismissCommentWarningModal:()=>eg(d.A9.NONE),inCommentsImprovedDropdownExp:!0,initialTags:ex,initialText:eb,isEditing:!!eS,isReplying:!!eF,objectType:K.o.pin,onAddItem:tr,onCancelItem:tl,onEnter:()=>eC(!0),pinId:G,postedPhoto:ey,privatePin:"secret"===eW,replyToCommentFirstName:eq,showCommentComposer:!0,statusType:ew?"textInflightCreation":"textStaticDisplay",viewParameter:J})})]})]})]})})};function U(e){let t=(0,l.I0)();return(0,u.jsx)(V,{...e,featuredCommentId:(0,b.K)(),pinUpdateCommentCount:(e,n)=>t((0,O.R)(e,n))})}},707915:function(e,t,n){n.d(t,{Z:()=>s});var i=n(667294),a=n(20256),l=n(601686),r=n(785893);let s=(0,i.forwardRef)(({accessibilityLabel:e,handleClick:t,icon:n,iconColor:s,iconOnly:o,testId:d,buttonText:c,tabIndex:u,bgColor:p,isActive:m},g)=>{let[h,_]=(0,i.useState)(!1),y=(0,i.useRef)(null);(0,i.useImperativeHandle)(g,()=>y.current);let{setAbortNoActionPlacementTimeout:f}=(0,l.x4)(),x=()=>{_(e=>!e),t(),f(!0)},v=e=>{y&&e.target instanceof Element&&!y.current?.contains(e.target)&&_(!1)};return(0,i.useEffect)(()=>(window.addEventListener("mousedown",v),()=>{window.removeEventListener("mousedown",v)}),[]),(0,i.useEffect)(()=>{void 0!==m&&_(m)},[m]),(0,r.jsx)(a.xu,{"data-test-id":d||"closeup-action-bar-button",children:(0,r.jsxs)(a.kC,{alignItems:"center",justifyContent:"start",children:[(0,r.jsx)(a.hU,{ref:y,accessibilityLabel:e,bgColor:p,icon:n,iconColor:s||"darkGray",onClick:x,selected:h,size:o?"md":"lg",tabIndex:u}),c&&(0,r.jsx)(a.iP,{onTap:x,rounding:2,children:(0,r.jsx)(a.X6,{color:"light",overflow:"normal",size:"400",children:c})})]})})})},228121:function(e,t,n){n.d(t,{Z:()=>m});var i=n(667294),a=n(20256),l=n(149739),r=n(525839),s=n(302148),o=n(473728),d=n(785893);function c({minutes:e}){let t=(0,r.ZP)(),n=e%60,i=Math.floor(e/60),o=n>0?(0,s.nk)(t._('{{ mins }}min', 'closeup.storyPin.basicsLayout.cookTimeUnit', 'Minutes label indicating the cooking time of this Story Pin'),{mins:n}).join(""):"",c=i>0?(0,s.nk)(t._('{{ hours }}hr', 'closeup.storyPin.basicsLayout.cookTimeUnit', 'Hours label indicating the cooking time of this Story Pin'),{hours:i}).join(""):"";return(0,d.jsx)(a.xu,{display:"inlineBlock",marginEnd:1,children:(0,d.jsx)(a.xv,{inline:!0,size:l.n,children:(0,s.nk)(t._('{{ hoursText }} {{ minsText }}', 'closeup.storyPin.basicsLayout.cookTime', 'Combined label for story pin cooktime (ex: "1hr 13min")'),{hoursText:c,minsText:o})})})}function u({servingSize:e}){let t=(0,r.ZP)(),n=(0,o.Z)(t.ngettext('{{servingSize}} serving', '{{servingSize}} servings', e, 'number of servings for a recipe', 'number of servings for a recipe'),{servingSize:e});return(0,d.jsx)(a.xu,{display:"inlineBlock",marginEnd:1,children:(0,d.jsx)(a.xv,{inline:!0,size:l.n,children:(0,s.nk)(t._('{{ servingText }}', 'closeup.storyPin.basicsLayout.servings', 'Combined label for story pin servings (ex: "Servings: 10 servings")'),{servingText:n})})})}function p({difficulty:e}){let t=(0,r.ZP)(),n={1:t._('Easy', 'closeup.storyPin.basicsLayout.difficulty', 'Easy difficulty level'),2:t._('Intermediate', 'closeup.storyPin.basicsLayout.difficulty', 'Intermediate difficulty level'),3:t._('Expert', 'closeup.storyPin.basicsLayout.difficulty', 'Expert difficulty level')},i=e?n[e]:null;if(!i)return null;let o=t._('Difficulty:', 'closeup.storyPin.basicsLayout.difficultyLevelLabel', 'Label indicating the difficulty level of this Story Pin');return(0,d.jsx)(a.xu,{display:"inlineBlock",marginEnd:1,children:(0,d.jsx)(a.xv,{inline:!0,size:l.n,children:(0,s.nk)(t._('{{ label }} {{ difficultyLevel }}', 'closeup.storyPin.basicsLayout.difficulty', 'Combined label for story pin difficulty (ex: "Difficulty: Intermediate")'),{label:o,difficultyLevel:i})})})}function m({keyValueBlocks:e,hasMetadataTemplateType:t}){if(!t)return null;let n=e||[];return(0,d.jsx)(a.xu,{"data-test-id":"categories-metadata",children:(n||[]).map((e,t)=>{let r=`kv-${t}`,s=function(e){let t=e.category_type??e.categoryType,{value:n}=e;if(2===t)return(0,d.jsx)(p,{difficulty:n});let i=parseInt(n,10);return 1===t?(0,d.jsx)(u,{servingSize:i}):0===t&&i?(0,d.jsx)(c,{minutes:i}):null}(e);return s?t<n.length-1?(0,d.jsxs)(i.Fragment,{children:[s,(0,d.jsx)(a.xu,{display:"inlineBlock",marginEnd:1,children:(0,d.jsx)(a.xv,{inline:!0,size:l.n,children:"  "})})]},r):(0,d.jsx)(i.Fragment,{children:s},r):null}).filter(e=>null!=e)})}},501392:function(e,t,n){n.d(t,{Z:()=>r});var i=n(274320),a=n(15667),l=n(647709);function r({dangerouslySkipActivation:e}){let{isAuthenticated:t,userAgent:{browserName:n,browserVersion:r}}=(0,a.B)(),s=(0,l.HG)(),{checkExperiment:o}=(0,i.r)();return{isEnabled:"Chrome"===n&&Number(r.split(".")[0])>=135&&t&&s&&o("closeup_google_css_carousel_dweb",{dangerouslySkipActivation:e}).anyEnabled}}},546345:function(e,t,n){n.d(t,{Z:()=>m});var i,a=n(581722);n(167912);var l=n(850899),r=n(980787),s=n(415546),o=n(72918),d=n(601686),c=n(534874),u=n(785893);let p=(void 0!==i||(i=n(118562)).hash&&"9ab15ab4baca1bcd4b35d42d577e0b0e"!==i.hash&&console.error("The definition of 'CloseupFavoriteButtonTest_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function m({pinKey:e}){let t,n,{logContextEvent:i}=(0,r.u)(),m=(0,s.Z)(p,e),g=(0,a.I0)(),{closeupWithinMasonryEnabled:h}=(0,d.x4)(),{board:_,entityId:y,favoritedByMe:f,section:x}=m;_&&([t,n]=(0,c.J)(_.url??""));let v=e=>{i({event_type:101,component:13791,element:e?12225:12226,object_id_str:y,view_type:3})};return(0,u.jsx)(l.Z,{favorited:f,isCloseupButton:!0,onFavorite:()=>{v(!0),g((0,o.jB)("BoardResource",{username:n,slug:t,field_set_key:"detailed"})),g((0,o.jB)("BoardSectionResource",{board_slug:t,section_slug:x?.slug,username:n}))},onUnfavorite:()=>{v(!1)},pinId:y,size:h?"sm":24})}},364674:function(e,t,n){n.d(t,{Z:()=>s});var i=n(20256),a=n(525839),l=n(618336),r=n(785893);function s({digitalMediaType:e,isMobile:t=!1,isViewedByOwnerEmployeeOrAgency:n=!1}){let s=(0,a.ZP)(),o={[l.s.TRAINED_ALGORITHMIC_MEDIA]:s._('AI modified', 'closeup.aIModifiedLabel.label', 'Label for AI Modified images'),[l.s.COMPOSITE_WITH_TRAINED_ALGORITHMIC_MEDIA]:s._('AI modified', 'closeup.aIModifiedLabel.label', 'Label for AI Modified images'),[l.s.DETECTED_TRAINED_ALGORITHMIC_MEDIA]:s._('AI modified', 'closeup.aIModifiedLabel.label', 'Label for AI Modified images')},d=()=>(0,r.jsx)(i.xu,{alignItems:"center",color:"transparentDarkGray","data-test-id":"ai-generated-label",display:"flex",height:t?48:44,justifyContent:"center",paddingX:4,rounding:4,children:(0,r.jsx)(i.xv,{color:"light",size:"300",children:o[e]})});return n?(0,r.jsx)(i.u,{idealDirection:"up",text:s._('This label won\u2019t appear on Pins in a promoted state. Your paid ads will include the disclosure on the "Why am I seeing this ad" page.', 'AICloseupLabel.tooltip.text', 'Tooltip text for AICloseupLabel'),children:d()}):d()}},630119:function(e,t,n){n.d(t,{Z:()=>w});var i,a,l=n(667294);n(167912);var r=n(20256),s=n(617778),o=n(415546),d=n(525839),c=n(453179),u=n(774429),p=n(603316),m=n(785893);let g=(void 0!==i||(i=n(362250)).hash&&"08b89bb2190b936e38e11d4ce341058f"!==i.hash&&console.error("The definition of 'DomainLinkButton_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function h({clientTrackingParams:e,domain:t,link:n,pinKey:i,trafficSource:a,size:h="lg",onMiddleBtnClick:_,viewType:y=3,hovered:f}){let x,v=(0,d.ZP)(),b=(0,o.Z)(g,i),k=(0,u.Z)({clickthroughType:"middleClick",location:"closeup.domainLinkButton"}),S=(0,l.useCallback)(()=>{(0,p.nP)(`web.closeup.media_viewer_stats.clickthrough.clicked_from.${675===y?"media_viewer":"closeup"}`)},[y]);return n.startsWith("https://i.pinimg.com")?(0,m.jsx)(l.Fragment,{}):(x=(0,c.vj)(n)?v._('See recipe', 'closeup.defaultMetadata.visitButton', 'Button to visit recipe link on Pin'):t?v._('Visit site', 'closeup.pinActionDropDown.visitSite', 'Button allowing user to clickthrough Pin'):v._('Learn more', 'closeup.image.domainLinkButton', 'Text indicating where clickthrough will navigate to'),(0,m.jsx)(s.Z,{clientTrackingParams:e,hovered:f,pinKey:b,trafficSource:a,viewType:y,children:(0,m.jsx)(r.zx,{_onAuxClick:({event:e})=>{(0,c.UE)(e)&&(k(),e.preventDefault(),e.stopPropagation(),S(),_(e))},accessibilityLabel:x,color:"semiTransparentWhite",dataTestId:"visit-button",iconStart:"arrow-up-right",onClick:S,size:h,tabIndex:-1,text:x})}))}let _=({onClick:e,href:t,children:n,onNavigation:i,toggleHover:a})=>(0,m.jsx)(r.xu,{"data-test-id":"image-link",children:(0,m.jsx)(r.Tg,{href:t,onMouseEnter:a,onMouseLeave:a,onTap:({event:t,dangerouslyDisableOnNavigation:n})=>{n(),e(),i({event:t})},rel:"nofollow",children:n})});var y=n(980787),f=n(355940),x=n(611282),v=n(899678),b=n(274320),k=n(821806),S=n(601686);let P=(void 0!==a||(a=n(128948)).hash&&"4c99d4ae49479ef8ed3083d59d4343c1"!==a.hash&&console.error("The definition of 'DomainLinkButtonWrapper_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a);function w({auxData:e,domain:t,link:n,onClick:i,pinKey:a,trafficSource:r,viewType:s}){let d=(0,o.Z)(P,a),{logContextEvent:c}=(0,y.u)(),{checkExperiment:u}=(0,b.r)(),p=d.isInstagramApi&&d.nativeCreator?.websiteUrl&&d.nativeCreator?.isPrimaryWebsiteVerified&&d.nativeCreator?.isDirectToSiteAllowed,g=p&&u("dweb_closeup_links").anyEnabled?d.nativeCreator?.websiteUrl:n,{clientTrackingParams:w}=(0,S.x4)(),C=(0,x.Z)({href:{pathname:g,state:{trackingParams:w}},target:"blank",clientTrackingParams:w,externalData:{auxData:e,pin:d&&{attributionSourceId:d.attributionSourceId,board:d.board&&{url:d.board.url},campaignId:d.campaignId,entityId:d.entityId,isDownstreamPromotion:d.isDownstreamPromotion,isPromoted:d.isPromoted,pinner:d.pinner&&{username:d.pinner.username},pinPromotionId:d.pinPromotionId,promoter:d.promoter&&{entityId:d.promoter.entityId},storyPinDataId:d.storyPinDataId,trackingParams:d.trackingParams,advertiserId:d.advertiserId}}}),[I,T]=(0,l.useState)(!1),j=(0,l.useCallback)(()=>T(e=>!e),[]);return(0,m.jsx)(f.Z,{name:"SafeSuspense_DomainLinkButtonWrapper_DomainLinkButton",children:(0,m.jsx)(k.Z,{children:(0,m.jsx)(v.Z,{children:(0,m.jsx)(_,{href:g,onClick:()=>{i(),c({event_type:102,element:162,component:4,aux_data:{is_claimed_domain:p}})},onNavigation:C,toggleHover:j,children:(0,m.jsx)(h,{clientTrackingParams:w,domain:t,hovered:I,link:g,onMiddleBtnClick:e=>{i(),c({event_type:102,element:162,component:4,aux_data:{is_claimed_domain:p}}),C({event:e})},pinKey:d,trafficSource:r,viewType:s})})})})})}},935410:function(e,t,n){n.r(t),n.d(t,{default:()=>w});var i=n(667294),a=n(633301),l=n(303151),r=n(20256),s=n(369416),o=n(785893);let d="animated-text";function c({duration:e,show:t,text:n}){let l=(0,i.useRef)(null),c=`
    .${d}-enter {
      opacity: 0;
    }
    .${d}-enter-active {
      opacity: 1;
      transition: opacity ${e}ms cubic-bezier(1,0,1,0);
    }
    .${d}-enter-done {
      opacity: 1;
    }
    .${d}-exit {
      opacity: 1;
    }
    .${d}-exit-active {
      opacity: 0;
      transition: opacity ${e}ms cubic-bezier(0,1,0,1);
    }
    .${d}-exit-done {
      opacity: 0;
    }
  `;return(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(s.Z,{unsafeCSS:c}),(0,o.jsx)(a.Z,{appear:!0,classNames:d,in:t,nodeRef:l,timeout:e,children:(0,o.jsx)(r.xu,{ref:l,opacity:0,children:(0,o.jsx)(r.mg,{size:"md",children:n})})})]})}var u=n(874072),p=n(111330),m=n(121836),g=n(521009),h=n(667835),_=n(702849),y=n(274320),f=n(15667),x=n(753143),v=n(238589),b=n(647709),k=n(341742);let S="animated-button-container",P=`
  .${S}-enter  {
    width: 0px;
  }
  .${S}-enter-active {
    width: 100% !important;
    transition: width 200ms ease-in;
  }
  .${S}-enter-done {
    width: 100% !important;
  }
  .${S}-exit {
    width: 100% !important;
  }
  .${S}-exit-active {
    width: 0px !important;
    transition: width 200ms ease-in;
  }
  .${S}-exit-done {
    width: 0px;
  }
`;function w({animateOnMount:e,animationDelayOnMount:t=1e3,leaveOnDurationOnMount:n=3e3,dataTestId:d,icon:w,imageSignature:C,onTap:I,variant:T}){let j=(0,g.Z)(),{isRTL:A}=(0,f.B)(),F=(0,h.vs)(),E=(0,b.HG)(),L=(0,x.M0)(),D=(0,v.Nl)(),{checkExperiment:R}=(0,y.r)(),K=(0,i.useRef)(null),[M,Z]=(0,i.useState)(!1),[z,O]=(0,i.useState)(!1),B=(0,u.Z)({variant:T}),N=(0,i.useMemo)(()=>F&&E?"rgba(17, 17, 17, 0.9)":M?_.Xq:_.XF,[F,E,M]),V="visual-search"===T,U=D.getItem(m.Ml)||0,{animationSeenCount:H,lastAnimationTimestamp:W}=L.getItem(p.Yn)||{animationSeenCount:0,lastAnimationTimestamp:0},G=(0,l.Z)(new Date(W),new Date);return(0,k.Z)(()=>{if(V&&!G&&L.setItem(p.Yn,{animationSeenCount:0,lastAnimationTimestamp:W}),!e||V&&![0,1].includes(U)&&R("sg_dweb_improved_share_animation_on_closeup").anyEnabled)return;let i=setTimeout(()=>{O(!0),V&&L.setItem(p.Yn,{animationSeenCount:H+1,lastAnimationTimestamp:Date.now()});let e=setTimeout(()=>{O(!1)},n);return()=>clearTimeout(e)},t);return()=>clearTimeout(i)}),(0,k.Z)(()=>{j({event_type:120,component:128,element:"view-larger"===T?15864:234,view_type:3,aux_data:{image_signature:C}})}),(0,o.jsxs)(r.iP,{accessibilityLabel:B,onMouseEnter:()=>Z(!0),onMouseLeave:()=>Z(!1),onTap:I,rounding:"circle",children:[(0,o.jsx)(s.Z,{unsafeCSS:P}),(0,o.jsx)(r.kC,{alignItems:"stretch",justifyContent:"end",children:(0,o.jsx)(a.Z,{appear:!0,classNames:S,in:M||z,nodeRef:K,timeout:200,children:(0,o.jsxs)(r.xu,{ref:K,alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:N}},"data-test-id":d,display:"flex",justifyContent:"end",minHeight:48,minWidth:48,position:"relative",rounding:4,width:0,children:[(0,o.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap"}},marginEnd:2,marginStart:3,overflow:"hidden",children:(0,o.jsx)(c,{duration:200,show:M||z,text:B})}),(0,o.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{paddingLeft:A?"12px":0,paddingRight:A?0:"12px"}},children:(0,o.jsx)(r.JO,{accessibilityLabel:B,color:"default",icon:w,size:24})})]})})})]})}},874072:function(e,t,n){n.d(t,{Z:()=>a});var i=n(525839);function a({variant:e}){let t=(0,i.ZP)();return"view-larger"===e?t._('View larger', 'closeup.image.mediaViewerButton', 'clicking on this button will open a full screen view of the Pin image'):t._('Explore', 'closeup.explore.icon', 'clicking on this text will open a visual search feed')}},856782:function(e,t,n){n.d(t,{S:()=>i,Z:()=>a});let i=1e3,a=3},787017:function(e,t,n){n.d(t,{p:()=>s,Z:()=>o}),n(167912);var i,a=n(501392),l=n(415546);let r=(void 0!==i||(i=n(655327)).hash&&"239c809acefcd1b75df8f18c8ffb91ff"!==i.hash&&console.error("The definition of 'useBuildCloseupImageOverlayProps_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function s(e,t,n,i,a){return!t&&!!e&&e.includes("tag")&&!n&&!a||i||!1}function o({carouselInfo:e,disablePinTagButton:t,domain:n,hasMetTrustAndSafetyCheck:i,isCollageEnabled:o,isEmployee:d,isORBACProfileManager:c,isScenePin:u,navLink:p,pinKey:m,showProductDetailPage:g}){let h=(0,l.Z)(r,m),{isEnabled:_}=(0,a.Z)({dangerouslySkipActivation:!1}),{access:y,aggregatedPinData:f,storyPinDataId:x,isPromoted:v}=h,b=!!f?.isShopTheLook,k=!1,S=!1;u||(k=!(S=!!p&&!o)&&!!n&&!!h.link&&!h.link.startsWith("https://i.pinimg.com")&&!(g&&e)&&!o);let P=i&&!c&&!v;return{showCarouselControls:!!e&&!_,showCloseupShopDomainLinkButton:u,showDebugSignalsFeedbackButton:!!d,showDomainLink:k,showDomainLinkButton:S=S&&!h?.isGoLinkless,showFlashlightButton:P,showPinTagButton:s(y,x,t,c,o),surfaceType:function({isScenePin:e,isShopTheLook:t}){return t?"stl":e?"stela":"flashlight"}({isScenePin:u,isShopTheLook:b})}}},112931:function(e,t,n){n.d(t,{ZP:()=>g,GJ:()=>m});var i,a=n(667294);n(422578);var l=n(592821),r=n(979904),s=n(139707),o=n(974297),d=n(415546),c=n(611499),u=n(601686);let p=(void 0!==i||(i=n(111419)).hash&&"86a6c49cecdb70d77f786a1965756cf9"!==i.hash&&console.error("The definition of 'useCalculateImageContainerDimension_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function m(e,t){return`${Math.floor(e/t*1e4)/1e4} / 1`}function g({carouselData:e,imageToDisplayWidthRatio:t=1,mainImage:n={width:1,height:1,url:""},maxCloseupImageWidth:i,pinKey:m,shouldPadImage:g=!1}){let h=(0,d.Z)(p,m),{peekCloseupEnabled:_,viewportSize:y}=(0,u.x4)(),{numericValues:f}=(0,l.Re)(),{maxHeight:x}=(0,r.Z)({pinKey:h}),{fiftyPercentHeight:v,fiftyPercentWidth:b,maxHeight:k,maxWidth:S}=f??{},{peekRedesignFastFollowsEnabled:P}=(0,s.Z)(n);return(0,a.useMemo)(()=>{let a,l=i-c.d2,r=Math.min(g?l:i,S??1/0,b??1/0),s=Math.min(...[n,...e?.carousel_slots?.map(e=>{var t;return(0,o.Z)(e.images)||((t=e.videos?.video_list)?t.V_720P?.url?t.V_720P:t.V_HLSV4?.url?t.V_HLSV4:t.V_HLSV3_MOBILE?.url?t.V_HLSV3_MOBILE:t.V_HLSV3_WEB?.url?t.V_HLSV3_WEB:null:null)}).filter(e=>!!e)||[]].map(({width:e,height:t})=>(e??1)/(t??1))),d=Math.floor(r*(e?t:1)/s),u="sm"===y?v:k;a=_?u??d:"number"==typeof x?x:d;let p=P?void 0:a,m=p?Math.min(d,p):d,h=Math.min(r*(_?m/d:1),S??1/0,b??1/0),{containerAspectRatio:f,letterBoxedWidth:w,letterBoxedHeight:C}=function(e,t,n){let i,a,l=e?.width/e.height,r=t/n;return l>r?(i=t,a=t/l):(i=n*l,a=n),{containerAspectRatio:r,letterBoxedWidth:i,letterBoxedHeight:a}}(n,h,m);return{containerAspectRatio:f,containerHeight:m,containerWidth:h,horizontalOffset:(h-w)/2,letterBoxedHeight:C,letterBoxedWidth:w,letterBoxAspectRatio:w/C,verticalOffset:(m-C)/2}},[i,g,n,e,t,y,v,k,_,x,P,S,b])}},952018:function(e,t,n){n.d(t,{Z:()=>l});var i=n(20256),a=n(785893);function l({children:e,paddingRight:t,paddingLeft:n,paddingBottom:l,marginTop:r,nodeRef:s}){return(0,a.jsx)(i.xu,{ref:s??void 0,dangerouslySetInlineStyle:{__style:{paddingRight:`${t}px`,paddingLeft:n?`${n}px`:void 0,paddingBottom:l?`${l}px`:void 0,marginTop:r?`${r}px`:void 0,overflowX:"hidden"}},width:"100%",children:e})}},439122:function(e,t,n){n.d(t,{Z:()=>r});var i=n(20256),a=n(601686),l=n(785893);let r=function(e){let{show:t,surface:n}=e,{closeupWithinMasonryEnabled:r}=(0,a.x4)();return r?(0,l.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{borderTop:t?"1px solid #E9E9E9":void 0,opacity:+!!t}},"data-test-id":`${n}-divider`,width:"100%"}):t&&(0,l.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{borderTop:"1px solid #EFEFEF"}}})}},688379:function(e,t,n){n.d(t,{Z:()=>y});var i,a=n(667294);n(167912);var l=n(20256),r=n(471998),s=n(937805),o=n(736802),d=n(149739),c=n(478086),u=n(355940),p=n(415546),m=n(601686),g=n(785893);let h=(void 0!==i||(i=n(817272)).hash&&"7f5ee41f639d28bd1418cd137ed8b8a0"!==i.hash&&console.error("The definition of 'DescriptionBrokenByLineBreaks_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function _({description:e}){let{closeupWithinMasonryEnabled:t,peekCloseupEnabled:n}=(0,m.x4)(),{mWebCloseupRedesignEnabled:i}=(0,s.Z)();return(0,g.jsx)(u.Z,{name:"SimpleDescriptionWithHashtags",children:(0,o.Z)({closeupWithinMasonryEnabled:t,peekCloseupEnabled:n,mWebCloseupRedesignEnabled:i,text:e})})}function y({description:e,enableAdditionalNoteSpace:t=!1,pinKey:n}){let i=(0,p.Z)(h,n),{userMentionTags:s,descriptionLinks:o}=i,{hyperlinkKeywordsEnabled:u}=(0,r.Z)(i),m=e.split(/\n/)||[];return(0,g.jsx)(a.Fragment,{children:m.map((e,n)=>{let r=e.length>0?`${e.replace(/[^a-zA-Z0-9]/g,"").slice(0,15)}-${e.length}`:"empty-line-0",p=`desc-line-${r}-${Math.random().toString(36).slice(2,8)}`;if(""===e&&t)return(0,g.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{height:"1em"}}},p);let h=0;for(let e=0;e<n;e+=1){let t=m[e];void 0!==t&&(h+=t.length+1)}let y=h+e.length,{userMentionTags:f,descriptionLinks:x}=(({lineStartPosition:e,lineEndPosition:t,userMentionTags:n,descriptionLinks:i})=>({userMentionTags:n?.map(n=>n&&"number"==typeof n.offset&&n.offset>=e&&n.offset<t?{...n,originalOffset:n.offset,offset:n.offset-e}:null).filter(e=>null!==e)||[],descriptionLinks:i?.map(n=>n&&"number"==typeof n.offset&&n.offset>=e&&n.offset<t?{...n,originalOffset:n.offset,offset:n.offset-e}:null).filter(e=>null!==e)||[]}))({lineStartPosition:h,lineEndPosition:y,userMentionTags:s,descriptionLinks:u?o:void 0});return f.length>0||x.length>0?(0,g.jsxs)(a.Fragment,{children:[(0,g.jsx)(l.xu,{children:(0,g.jsx)(c.Z,{description:e.replace(/\s+/g," "),descriptionLinks:x,mentionLinkColor:"link",pinKey:i,shouldAdjustOffset:!1,shouldMakeHashtagLinksFromText:!0,textSize:d.n,userMentionTags:f})}),(0,g.jsx)("br",{})]},p):(0,g.jsxs)(a.Fragment,{children:[(0,g.jsx)(_,{description:e}),(0,g.jsx)("br",{})]},p)})})}},899117:function(e,t,n){n.d(t,{Z:()=>i});let i=(e,t)=>{let n,{height:i=0,width:a=0}=t||{};switch(e){case"enabled_15":n=.15;break;case"enabled_25":n=.25;break;default:n=.35}return a/i<n}},96413:function(e,t,n){n.d(t,{Z:()=>c});var i=n(667294),a=n(20256),l=n(980787),r=n(982166),s=n(525839),o=n(369416),d=n(785893);function c({handlePause:e,handlePlay:t,musicAttributions:n,shouldMute:c,showEndCard:u}){let p=(0,s.ZP)(),{logContextEvent:m}=(0,l.u)(),[g,h]=(0,i.useState)(!1);if((0,i.useEffect)(()=>{!u&&(n?.length||c)&&m({event_type:c?14600:14601,view_type:3,view_parameter:140})},[m,n,c,u]),u||!n?.length&&!c)return null;let _=()=>{t&&t(),h(!1)},y="";if(n?.length===1){let{artist:e="",title:t=""}=n[0];y=e&&t?`${e} - ${t}`:""}let f=(n?.length||0)>=2?(0,d.jsx)(a.xu,{children:(0,d.jsx)(a.iP,{fullHeight:!0,fullWidth:!0,onTap:()=>{e&&e(),h(!0)},children:(0,d.jsxs)(a.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,d.jsx)(a.xu,{marginEnd:2,children:(0,d.jsx)(a.JO,{accessibilityLabel:p._('Music icon', 'web.closeup.musicicon', 'Artist and song title for Pin music attribution'),color:"inverse",icon:c?"music-off":"music-on",inline:!0,size:12})}),(0,d.jsx)(a.xv,{color:"inverse",inline:!0,overflow:"noWrap",size:"100",children:p._('View the playlist', 'web.closeup.musicAttibutionModal.entryPoint', 'Entry point for playlist modal')})]})})}):(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(a.JO,{accessibilityLabel:p._('Music icon', 'web.pin.closeup.musicicon', 'Music icon for Pin music attribution'),color:"inverse",icon:c?"music-off":"music-on",inline:!0,size:12}),(0,d.jsx)(a.xu,{marginStart:2,overflow:"hidden",children:(0,d.jsxs)("span",{className:y.length>=50?"marquee":void 0,style:{display:"inline-block",maxWidth:y.length>=50?"260px":void 0},children:[(0,d.jsx)(a.xv,{color:"inverse",inline:!0,overflow:"noWrap",size:"100",children:y}),(0,d.jsx)(o.Z,{unsafeCSS:`
                  .marquee {
                   animation: marquee 10s linear infinite;
                   animation-delay: 2s;
                  }

                  .marquee:hover {
                      animation-play-state: paused;
                  }


                 @keyframes marquee {
                   0% {
                     transform: translateX(0%);
                    }
                  50% {
                    transform: translateX(-100%);
                  }
                  100% {
                    transform: translateX(0%);
                  }
              }
            `})]})})]});return(0,d.jsxs)(i.Fragment,{children:[c?(0,d.jsx)(i.Fragment,{children:(0,d.jsxs)(a.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,d.jsx)(a.xu,{marginEnd:2,children:(0,d.jsx)(a.JO,{accessibilityLabel:p._('Music icon', 'web.closeup.musicMutedIcon', 'Music muted icon for Pin music attribution'),color:"inverse",icon:"music-off",inline:!0,size:12})}),(0,d.jsx)(a.xv,{color:"inverse",inline:!0,overflow:"noWrap",size:"100",children:p._('Audio not available in your location', 'web.closeup.musicAttribution', 'Informational message to tell user audio is not available in their location')})]})}):f,g&&(0,d.jsx)(r.ZP,{accessibilityModalLabel:p._('Artist and song title for this Pin', 'web.closeup.musicAttibutionModal', 'Artist and song title for Pin music attribution'),heading:(0,d.jsxs)(a.kC,{justifyContent:"between",children:[(0,d.jsx)(a.X6,{size:"600",children:p._('Playlist for this video', 'web.closeup.musicAttibutionModal.heading', 'Title for music attribution modal')}),(0,d.jsx)(a.hU,{accessibilityLabel:p._('Close modal button', 'web.closeup.musicAttibutionModal.closeButton', 'Close modal button for music attribution modal'),bgColor:"white",icon:"cancel",iconColor:"darkGray",onClick:_,size:"sm"})]}),onDismiss:_,children:(0,d.jsx)(a.xu,{marginBottom:5,paddingX:5,paddingY:1,children:n?.map(({isrc:e,thumbnail_image_url:t,title:n,artist:i},l)=>(0,d.jsxs)(a.xu,{display:"flex",padding:1,children:[t&&(0,d.jsx)(a.xu,{color:"darkWash",height:60,rounding:7,width:60,children:(0,d.jsx)(a.Ee,{alt:p._('Image of album art', 'web.closeup.musicAttibutionModal.albumArt', 'Alt text for image of album art for associated song'),color:"darkWash",naturalHeight:1,naturalWidth:1,src:t})}),(0,d.jsxs)(a.xu,{direction:"column",display:"flex",justifyContent:"center",paddingX:2,children:[(0,d.jsx)(a.xv,{weight:"bold",children:n??""}),(0,d.jsx)(a.xv,{size:"100",children:i??""})]})]},e||`${l}`))})})]})}},442082:function(e,t,n){n.d(t,{Z:()=>te});var i,a,l,r=n(20256),s=n(785893);let o=({children:e})=>(0,s.jsx)(r.xu,{display:"flex",height:"100%",justifyContent:"center",padding:5,width:"100%",children:e});var d=n(918920),c=n(525839),u=n(15667),p=n(85574),m=n(611499),g=n(601686);let h=({embedUrl:e,isWideVideo:t,paddingBottom:n="50%",shouldPadImage:i})=>{let a=(0,c.ZP)(),l=(0,u.B)(),h=t?m.KP:m.Gg,{showCloseupContentRight:_,closeupWithinMasonryEnabled:y,peekCloseupEnabled:f,viewportSize:x}=(0,g.x4)(),v=e?.replace("http://","https://");v&&v.startsWith("https://www.youtube.com/embed/")&&(v=v.replace("https://www.youtube.com/embed/","https://www.youtube-nocookie.com/embed/"));let b=(0,s.jsx)("div",{style:{height:0,overflow:"hidden",position:"relative",width:"100%",paddingBottom:n,...(0,p.Z)({isSideBySide:!t,isPadded:i,isRTL:l.isRTL,closeupWithinMasonryEnabled:y,peekCloseupEnabled:f})?.borderStyle},children:(0,s.jsx)("iframe",{allowFullScreen:!0,id:d.ZP.VIDEO_IFRAME_ID,src:v,style:{border:0,height:"100%",left:0,position:"absolute",top:0,width:"100%"},title:a._('Embedded content', 'Accessible content for the embedded content iframe', 'Accessible content for the embedded content iframe')})}),k=_&&"lg"===x?(0,s.jsx)(r.xu,{marginBottom:6,marginEnd:t||i?0:6,width:h,children:b}):b;return i?(0,s.jsx)(o,{children:k}):k};var _=n(667294);n(167912);var y=n(501392),f=n(112931),x=n(934645),v=n(527895),b=n(878709);n(422578);var k=n(869985),S=n(521009),P=n(415546);let w=(void 0!==i||(i=n(505370)).hash&&"510195e37611b9b69a16eccfeb13e9cf"!==i.hash&&console.error("The definition of 'CarouselVideoItem_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),C=({contextLogData:e,height:t,isFocused:n,videoList:i,onFocus:a,onUnfocus:l,pinId:o,pinKey:d,width:c})=>{let u=(0,S.Z)(),p=(0,P.Z)(w,d),{V_720P:m,V_HLSV4:g,V_HLSV3_MOBILE:h}=i,{height:y=1,width:f=1,thumbnail:x}=m||g||h||{},v=y/f,b=v;"number"==typeof t&&"number"==typeof c&&(b=t/c),(0,_.useEffect)(()=>{n?a&&a():l&&l()},[n,a,l]),(0,_.useEffect)(()=>{n&&u({component:e.component,event_type:13,object_id_str:e.objectId,view_parameter:e.viewParameter,view_type:e.view})},[n,e,u]);let C=(0,_.useCallback)(()=>{u({component:e.component,event_type:3621,object_id_str:e.objectId,view_parameter:e.viewParameter,view_type:e.view})},[e,u]);return(0,s.jsx)(r.kC,{alignItems:"center",height:"100%",justifyContent:"center",width:"100%",children:(0,s.jsx)(r.xu,{width:`${100*Math.min(b/v,1)}%`,children:(0,s.jsx)(k.Z,{contextLogData:e,customThumbnail:x,disabled:!n,loop:!0,muted:!1,onPlay:C,pinId:o,pinKey:p,preferMp4:!0,showControls:"hover",variant:"default",video:{mp4:m,hls:g,hlsv3:h}})})})};var I=n(980787),T=n(273094),j=n(482694),A=n(67831),F=n(956077),E=n(431338),L=n(104659),D=n(300685),R=n(974297),K=n(712172);let M=({fit:e,highResOnly:t,onError:n,onLoad:i,slot:a,slotIndex:l})=>{let o=(0,c.ZP)(),{details:d=""}=a,{url:u="",width:p=1,height:m=1}=(0,R.Z)(a.images)||{};return u&&(0,s.jsx)(r.Ee,{alt:(0,K.GH)(d,o,l),fit:e,naturalHeight:m??1,naturalWidth:p??1,onError:n,onLoad:i,src:u,srcSet:(0,K.gA)({slot:a,highResOnly:t})})},Z=(void 0!==a||(a=n(621539)).hash&&"83e61e6fc89222c2a0b03276839f44a5"!==a.hash&&console.error("The definition of 'CloseupCarousel_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a);function z({displayHeight:e,displayWidth:t,pinKey:n}){let{logContextEvent:i}=(0,I.u)(),{closeupWithinMasonryEnabled:a,isCloseupMediaViewerOpen:l,showProductDetailPage:o,peekCloseupEnabled:d}=(0,g.x4)(),{pauseAutoplay:c,setCurrentVideo:u}=(0,L.G)(),{isEnabled:p}=(0,y.Z)({dangerouslySkipActivation:!1}),{carouselInfo:m,mainImage:h}=(0,b.G)(),{carouselData:k,handleCarouselSwipe:S}=m||{},{index:w=0}=k||{},{height:R,width:K}=h,z=(0,P.Z)(Z,n),O=(0,x.Z)({showProductDetailPage:!!z.isEligibleForPdp}),{entityId:B}=z,N=(0,_.useRef)(null),V=(0,E.Z)(z),U=z.isEligibleForPdp?V():void 0,H=z.isEligibleForPdp?144:void 0,W=z.isEligibleForPdp?3:void 0,G=(0,A.A)(),$=(0,_.useCallback)(e=>{e>=1&&((0,F.Nx)("image"),G&&G.markConstraintComplete("image"))},[G]),X=(0,_.useMemo)(()=>({viewParameter:o?144:156,view:3,component:o?14012:179,objectId:B}),[B,o]),q=(0,_.useCallback)(()=>{u({pinId:B,isPromoted:!1})},[u,B]),Y=(0,_.useCallback)(()=>{c({pinId:B,isPromoted:!1})},[c,B]);(0,_.useEffect)(()=>{k?.carousel_slots?.find(e=>e.videos?.video_list)&&i({event_type:120,view_type:X.view,view_parameter:X.viewParameter,component:X.component,object_id_str:X.objectId})},[i,k?.carousel_slots,X]);let J=N.current&&d,Q=(0,_.useCallback)((n,i,a,o,d)=>{let c,u;return n.videos?.video_list?(c=(0,s.jsx)(C,{contextLogData:X,height:e,isFocused:a,onFocus:o,onUnfocus:d,pinId:B,pinKey:z,videoList:n.videos.video_list,width:t}),u=n.videos.id):(c=(0,s.jsx)(v.Z,{_enableViewTransitions:!0,suppressViewTransitionTags:l||i!==w,type:"image",children:(0,s.jsx)(M,{fit:"cover",onLoad:()=>$(i),slot:n,slotIndex:i})}),u=n.image_signature),(0,s.jsx)(r.xu,{height:"100%",width:"100%",children:c},`${B}-${u||i}`)},[w,l,B,X,e,z,t,$]);return(0,s.jsx)(r.xu,{ref:N,dangerouslySetInlineStyle:{__style:{aspectRatio:a?(0,f.GJ)(K,R):void 0,contain:"strict",justifySelf:"center"}},height:"100%",overflow:a?"hidden":void 0,rounding:a&&!O?4:void 0,width:a?void 0:"100%",children:p?(0,s.jsxs)(_.Fragment,{children:[(0,s.jsx)(T.Z,{carouselData:{...k,type:"canonical"},contextLogData:U,height:e,id:B,impressionType:"Pin",index:w,slideWidth:t,view:W??3,viewParameter:H??156}),(0,s.jsx)(j.Z,{itemHeight:e,items:k?.carousel_slots||[],itemWidth:t,mode:"single",onIndexChange:S,renderItem:({item:e,index:t,isFocused:n,onFocus:i,onUnfocus:a})=>Q(e,t,n,i,a),selectedIndex:w,showNavigationButtons:!0,showScrollMarkers:!z.isEligibleForPdp})]}):(!d||J)&&(0,s.jsx)(D.Z,{containerRef:N.current,contextLogData:U,height:e,id:B,index:w,responsiveSizing:a,slideWidth:t,view:W,viewParameter:H,children:(k?.carousel_slots||[]).map((e,t)=>Q(e,t,w===t,q,Y))})})}var O=n(592821),B=n(573631),N=n(291892);let V=(0,_.memo)(function({borderStyle:e,dominantColor:t,imageWithPreview:n,fit:i,sizes:a,srcSet:l}){let o=(0,A.A)(),d=(0,_.useCallback)(()=>{(0,F.Nx)("image"),o&&o.markConstraintComplete("image")},[o]),{closeupWithinMasonryEnabled:c,isCloseupMediaViewerOpen:u,showProductDetailPage:p}=(0,g.x4)(),{fiftyPercentWidth:m}=(0,O.Re)(),h=(0,x.Z)({showProductDetailPage:p}),y=(0,B.b)(),v="closeup-image-main",b=""!==n.mainImage.src?(0,s.jsx)(r.xu,{"data-test-id":v,height:"100%",width:"100%",children:(0,s.jsx)(N.Z,{_enableViewTransitions:!0,_fixCompletedOnLoad:!0,alt:n.mainImage.alt,borderStyle:h?void 0:e,color:t,elementTiming:`${v}-MainPinImage`,fetchPriority:"high",fit:i,naturalHeight:n.naturalHeight,naturalWidth:n.naturalWidth,onLoad:d,sizes:a,src:n.mainImage.src,srcSet:l,suppressViewTransitionTags:u})}):null;return(0,s.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{aspectRatio:c?(0,f.GJ)(n.naturalWidth,n.naturalHeight):void 0,contain:"strict",justifySelf:c?"center":void 0}},height:"100%",maxWidth:m,overflow:c?"hidden":void 0,rounding:h?void 0:6,width:c?void 0:"100%",children:!y&&n.previewImage?.src?(0,s.jsx)(r.Ee,{alt:n.previewImage?.alt??"",color:t,fetchPriority:"high",fit:i,naturalHeight:n.naturalHeight,naturalWidth:n.naturalWidth,role:"img",src:n.previewImage.src,children:b}):b})}),U=e=>(0,s.jsx)(V,{...e});var H=n(364674),W=n(856782),G=n(899678),$=n(821806);let X=112+W.Z;function q({digitalMediaType:e,shouldMoveAILabel:t,isViewedByOwnerEmployeeOrAgency:n}){return(0,s.jsxs)(_.Fragment,{children:[(0,s.jsx)(r.xu,{height:`calc(100% - ${t?X:56}px)`}),(0,s.jsx)(r.xu,{display:"flex",justifyContent:"start",maxWidth:"147px",paddingX:W.Z,children:(0,s.jsx)($.Z,{children:(0,s.jsx)(G.Z,{children:(0,s.jsx)(H.Z,{digitalMediaType:e,isViewedByOwnerEmployeeOrAgency:n})})})})]})}var Y=n(630119);let J=({children:e,horizontalOffset:t=0,name:n,verticalOffset:i=0})=>{let a=new r.Ry(1),{closeupWithinMasonryEnabled:l}=(0,g.x4)(),{mainImage:o}=(0,b.G)(),{height:d,width:c}=o;return(0,s.jsx)(r.xu,{bottom:!l,dangerouslySetInlineStyle:{__style:{aspectRatio:l?c/d:void 0,justifySelf:l?"center":void 0,pointerEvents:"none",padding:l?void 0:`${i}px ${t}px`}},"data-test-id":`closeup-image-overlay-layer-${n}`,height:"100%",left:!0,marginEnd:"auto",marginStart:"auto",position:"absolute",right:!0,top:!l,zIndex:a,children:e})};var Q=n(629178),ee=n(139707),et=n(355940),en=n(821342),ei=n(218831);function ea({carouselData:e,children:t,disableAnimations:n=!1,displayWidth:i,hide:a}){let l=(0,_.useCallback)(()=>(({carouselData:e,containerWidth:t,slotWidth:n})=>{let{index:i,carousel_slots:a}=e||{},l=Math.floor(n);return void 0===i||!a||i>=a.length-1?0:t-l})({carouselData:e,containerWidth:i,slotWidth:i}),[e,i]),[o,d]=(0,_.useState)(l()),[c,u]=(0,_.useState)(n),[p,m]=(0,_.useState)(),g=(0,_.useCallback)(()=>{d(l())},[l]);return(0,_.useEffect)(()=>{let e=!0;return n||(u(!1),m(t=>(clearTimeout(t),setTimeout(()=>{e&&(g(),a||u(!0))},500)))),()=>{e=!1}},[e?.index,n,g,a]),(0,_.useEffect)(()=>()=>clearTimeout(p),[p]),(0,s.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{marginRight:o,transition:n?void 0:"opacity 500ms, visibility 500ms ease-in-out",visibility:c?"visible":"hidden"}},"data-test-id":"animated-fab",opacity:+!!c,children:t})}var el=n(828942),er=n(8512);let es=(0,_.lazy)(()=>n.e("12780").then(n.bind(n,448372))),eo=(0,_.lazy)(()=>n.e("12780").then(n.bind(n,458684))),ed=(0,_.lazy)(()=>n.e("74993").then(n.bind(n,613047))),ec=(0,_.lazy)(()=>n.e("95804").then(n.bind(n,984723))),eu=(0,_.lazy)(()=>Promise.resolve().then(n.bind(n,935410))),ep=(0,_.lazy)(()=>n.e("85050").then(n.bind(n,966421))),em=({auxData:e,carouselInfo:t,domain:n,handleMediaButtonClick:i,isHovered:a,link:l,mediaViewerExpandButtonRef:o,onImageClick:d,pin:c,showCarouselControls:u,showCarouselEllipsis:p,showCloseupShopDomainLinkButton:m,showDebugSignalsFeedbackButton:g,showDomainLink:h,showDomainLinkButton:v,showFlashlightButton:k,showPinTagButton:S,surfaceType:P,trafficSource:w,maxCloseupImageWidth:C,shouldPadImage:I,verticalOffset:T,horizontalOffset:j})=>{let{isRelatedPins10PercentVisible:A}=(0,ei.K)(),{mainImage:F,mediaViewerImage:E}=(0,b.G)(),L=(0,en.Z)(),{peekRedesignFastFollowsEnabled:D}=(0,ee.Z)(F),{isEnabled:R}=(0,y.Z)({dangerouslySkipActivation:!1}),K=(0,x.Z)({showProductDetailPage:!!c.is_eligible_for_pdp}),[M,Z]=(0,_.useState)(!1),z=a||M,O=(0,_.useCallback)(()=>Z(!0),[]),B=(0,_.useCallback)(e=>{e.currentTarget.contains(e.relatedTarget)||Z(!1)},[]),{containerWidth:N}=(0,f.ZP)({carouselData:t?.carouselData,mainImage:F,maxCloseupImageWidth:C,shouldPadImage:I,pinKey:{type:"deprecated",data:c}}),V=4*W.Z,U=V+(A||K?0:56),H=48+U+8,X=e=>D?{bottom:e,position:A?"absolute":"sticky",transition:A?"position 100ms cubic-bezier(0, 0, 1, 1)":"position 50ms cubic-bezier(0, 0, 1, 1)"}:{bottom:e,position:"sticky"},{isCloseupMediaViewerEnabled:em}=(0,Q.Z)({isShufflePin:!!c?.shuffle}),eg=c&&c.origin_pinner&&L.isAuth&&L.id===c.origin_pinner.id||!c?.is_go_linkless,eh=(0,er.zX)(c.digital_media_source_type),e_=(v||m)&&eg,ey=e_&&!l.startsWith("https://i.pinimg.com"),ef=!t||0===t.carouselData.index;return(0,s.jsxs)(r.xu,{dangerouslySetInlineStyle:{__style:{display:"contents"}},onBlur:B,onFocus:O,children:[h&&(0,s.jsx)(J,{horizontalOffset:j,name:"domain-link",verticalOffset:T,children:(0,s.jsxs)(r.kC,{alignItems:"center",height:"100%",justifyContent:"center",width:"100%",children:[(0,s.jsx)(r.xu,{paddingX:1,children:(0,s.jsx)(r.JO,{accessibilityLabel:"",color:"inverse",icon:"arrow-up-right",size:16})}),(0,s.jsx)(r.xu,{paddingX:1,children:(0,s.jsx)(r.xv,{color:"inverse",weight:"bold",children:n})})]})}),u&&t&&!R&&(0,s.jsxs)(J,{horizontalOffset:j,name:"carousel-controls",verticalOffset:T,children:[(0,s.jsx)(et.Z,{name:"SafeSuspense_CloseupImageOverlay_CarouselSliders",children:(0,s.jsx)($.Z,{children:(0,s.jsx)(eo,{backNode:(0,s.jsx)(el.Z,{backgroundColor:"default",hoverColor:"secondary",iconColor:"default",iconType:"back",showFab:z}),carouselData:{carouselSlots:t.carouselData.carousel_slots?.map(({id:e,title:t})=>({id:e,title:t})),entityId:t.carouselData.id??"",index:t.carouselData.index},carouselIndex:t.carouselData&&t.carouselData.index,componentType:t.componentType,forwardNode:(0,s.jsx)(el.Z,{backgroundColor:"default",hoverColor:"secondary",iconColor:"default",iconType:"forward",showFab:z}),handleCarouselSwipe:t.handleCarouselSwipe,pinKey:{type:"deprecated",data:c},sliderStyleOverride:{padding:"30px 12px"},viewParameter:t.viewParameter,viewType:t.viewType})})}),(0,s.jsx)(r.xu,{alignItems:"end",bottom:!0,display:"flex",height:405,justifyContent:"center",left:!0,padding:W.Z,position:"absolute",right:!0,children:!v&&p&&(0,s.jsx)(et.Z,{name:"SafeSuspense_CloseupImageOverlay_CarouselEllipsis",children:(0,s.jsx)($.Z,{children:(0,s.jsx)(G.Z,{children:(0,s.jsx)(es,{carouselData:{carouselSlots:t.carouselData.carousel_slots?.map(({id:e,title:t})=>({id:e,title:t})),entityId:t.carouselData.id??"",index:t.carouselData.index},carouselIndex:t.carouselData&&t.carouselData.index,componentType:t.componentType,handleCarouselSwipe:t.handleCarouselSwipe,isCloseup:!0,pinKey:{type:"deprecated",data:c},variant:"default",viewParameter:t.viewParameter,viewType:t.viewType})})})})})]}),k&&(0,s.jsxs)(J,{horizontalOffset:j,name:"flashlight-button",verticalOffset:T,children:[(0,s.jsx)(r.xu,{height:`calc(100% - ${48+V}px)`}),(0,s.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:X(U)},display:"flex",justifyContent:"end",paddingX:W.Z,right:!0,children:(0,s.jsx)(et.Z,{name:"SafeSuspense_CloseupImageOverlay_ShopButton",children:(0,s.jsx)($.Z,{children:(0,s.jsx)(G.Z,{children:(0,s.jsx)(ec,{imageSignature:c.image_signature,pinId:c.id,show:ef,surfaceType:P,trafficSource:w})})})})})]}),em&&(0,s.jsxs)(J,{horizontalOffset:j,name:"media-viewer-button",verticalOffset:T,children:[(0,s.jsx)(r.xu,{height:`calc(100% - ${k?(48+V)*2:V+48}px)`}),(0,s.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:X(H)},display:"flex",justifyContent:"end",paddingX:W.Z,right:!0,children:(0,s.jsx)(ea,{carouselData:t?.carouselData,disableAnimations:!0,displayWidth:N,children:(0,s.jsx)(et.Z,{name:"SafeSuspense_CloseupImageOverlay_MediaViewerButton",children:(0,s.jsx)($.Z,{children:(0,s.jsx)(G.Z,{children:(0,s.jsx)(r.xu,{ref:o,onMouseDown:()=>{new Image().src=E.url},children:(0,s.jsx)(eu,{animateOnMount:!1,dataTestId:"media-viewer-button",icon:"maximize",imageSignature:c.image_signature,onTap:i,variant:"view-larger"})})})})})})})]}),g&&(0,s.jsxs)(J,{horizontalOffset:j,name:"debug-signals-feedback",verticalOffset:T,children:[(0,s.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{height:"calc(100% - 115px)"}}}),(0,s.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:X(U)},display:"flex",justifyContent:"end",paddingX:W.Z,right:!0,children:(0,s.jsx)($.Z,{children:(0,s.jsx)(ep,{pinKey:{type:"deprecated",data:c}})})})]}),c.digital_media_source_type&&eh&&(0,s.jsx)(J,{horizontalOffset:j,name:"ai-generated-label",verticalOffset:T,children:(0,s.jsx)(q,{digitalMediaType:c.digital_media_source_type,isViewedByOwnerEmployeeOrAgency:c.is_viewed_by_owner_or_employee_or_partner_of_business||!1,shouldMoveAILabel:ey&&z})}),e_&&(0,s.jsxs)(J,{horizontalOffset:j,name:"domain-link-button",verticalOffset:T,children:[(0,s.jsx)(r.xu,{height:`calc(100% - ${48+V}px)`}),(0,s.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{...X(U),opacity:+!!z,pointerEvents:z?"auto":"none"}},display:"flex",justifyContent:"start",maxWidth:"calc(100% - 88px)",paddingX:W.Z,tabIndex:-1,children:(0,s.jsx)(Y.Z,{auxData:e,domain:n,link:l,onClick:d,pinKey:{type:"deprecated",data:c},trafficSource:w})})]}),S&&(0,s.jsx)(J,{horizontalOffset:j,name:"tag-button",verticalOffset:T,children:(0,s.jsx)(et.Z,{name:"SafeSuspense_CloseupImageOverlay_CloseupTagButton",children:(0,s.jsx)($.Z,{children:(0,s.jsx)(G.Z,{children:(0,s.jsx)(ed,{pin:c})})})})})]})};var eg=n(787017),eh=n(995415),e_=n(846721),ey=n(573647),ef=n(979904),ex=n(102134),ev=n(890479),eb=n(673616),ek=n(364843),eS=n(790427),eP=n(44344),ew=n(78762),eC=n(756334);let eI=(0,ew.Z)(()=>Promise.all([n.e("8126"),n.e("44581"),n.e("57207"),n.e("95853"),n.e("47820"),n.e("71309")]).then(n.bind(n,286533)),void 0,e=>286533,"app-common-react-components-closeup-CloseupShuffle-CloseupShuffle",e=>["8126","44581","57207","95853","47820","71309"]),eT=(0,_.memo)(({borderStyle:e,closeupWithinMasonryEnabled:t,imageWithPreview:n,peekRedesignFastFollowsEnabled:i,sizes:a,srcSet:l})=>(0,s.jsx)(eC.Z,{metricName:"CloseupImage",children:(0,s.jsx)(ev.Z,{id:"CloseupImage",children:(0,s.jsx)(U,{borderStyle:e,dominantColor:O.yc,fit:i||t?void 0:"contain",imageWithPreview:n,sizes:a,srcSet:l})})}));function ej({onImageClick:e,isHovered:t,pin:n,shouldPadImage:i,trafficSource:a,viewParameter:l,isORBACProfileManager:o,handleMediaButtonClick:d}){let c,m,{originalImageUrl:h,imageSignature:y,link:v,isScenePin:k,disablePinTagButton:S,showProductDetailPage:P,maxCloseupImageWidth:w,imageWithPreview:C}=(0,e_.Z)({pinKey:{type:"deprecated",data:n}}),I=(0,en.Z)(),{mainImage:T,carouselInfo:j,srcSet:A,srcSizes:F}=(0,b.G)(),L=(0,ex.Z)(),{peekRedesignFastFollowsEnabled:D}=(0,ee.Z)(T),R=(0,_.useRef)(null),K=(0,_.useRef)(null),{domain:M,shuffle:Z}=n,B=!!j?.carouselData,{naturalWidth:N,naturalHeight:V}=C,{closeupWithinMasonryEnabled:U,peekCloseupEnabled:H,clientTrackingParams:W,showCloseupContentRight:G,viewportSize:$,setCalculatedImageHeight:X}=(0,g.x4)(),q=(0,x.Z)({showProductDetailPage:!!n.is_eligible_for_pdp}),{isRTL:Y}=(0,u.B)();(0,_.useEffect)(()=>{R.current&&X&&X(R.current.clientHeight)},[R,X]);let J=(0,_.useMemo)(()=>C,[C]),{borderStyle:Q}=(0,_.useMemo)(()=>(0,p.Z)({isSideBySide:G,isPadded:i,isRTL:Y,closeupWithinMasonryEnabled:U,peekCloseupEnabled:H}),[G,i,Y,U,H]),{borderStyle:et}=(0,p.Z)({isSideBySide:G,isPadded:i,isRTL:Y,closeupWithinMasonryEnabled:U,peekCloseupEnabled:H}),{containerHeight:ei,containerWidth:ea,horizontalOffset:el,verticalOffset:er}=(0,f.ZP)({carouselData:j?.carouselData,mainImage:T,maxCloseupImageWidth:w,shouldPadImage:i,pinKey:{type:"deprecated",data:n}}),[es,eo]=(0,_.useState)({width:ea,height:ei}),ed=(0,_.useCallback)(()=>{let e=ea>ei?ei/ea:1,t=R.current;if(!t)return;let n=t.offsetWidth*e;eo(e=>{let i={height:t.offsetHeight||n,width:t.offsetWidth};return e.height!==i.height||e.width!==i.width?i:e})},[ei,ea]);(0,eP.Z)(ed,R);let ec=!!Z&&L(),eu=(0,eb.Z)({isHiddenPin:n.is_hidden,isUnsafePin:n.is_unsafe}),{currentDomain:ep}=(0,eh.Z)({carouselData:n.carousel_data&&{carouselSlots:n.carousel_data.carousel_slots&&n.carousel_data.carousel_slots.map(e=>({domain:e.domain,link:e.link})),index:n.carousel_data?.index},domain:n.domain}),ev=ep||M,ew={carousel_slot_id:void 0,carousel_data_id:void 0,carousel_slot_index:void 0,commerce_data:void 0};if(j&&j.carouselData&&j.carouselData.id){let{carousel_slots:e=[],id:t,index:n=0}=j.carouselData;c=e[n]&&e[n].link,ew.carousel_slot_id=e[n]&&e[n].id,ew.carousel_data_id=t,ew.carousel_slot_index=n,ev=e[n]&&e[n].domain||ev}let eC=(0,E.Z)({type:"deprecated",data:n})();eC&&(ew.commerce_data=eC);let ej=c||v||h||"",eA=(0,s.jsx)(eT,{borderStyle:Q,closeupWithinMasonryEnabled:U,imageWithPreview:J,peekRedesignFastFollowsEnabled:D,sizes:F,srcSet:A}),eF=eA;B&&(eF=(0,s.jsx)(z,{displayHeight:es?.height,displayWidth:es?.width,pinKey:{type:"deprecated",data:n}})),ec&&(eF=(0,s.jsx)(eI,{clientTrackingParams:W,naturalHeight:V,naturalWidth:N,pinId:n.id,shuffleId:Z?.id,children:(0,s.jsx)(r.xu,{width:"100%",children:eA})}));let{maxHeight:eE,fiftyPercentWidth:eL,fiftyPercentHeight:eD}=(0,O.Re)(),{maxHeight:eR}=(0,ef.Z)({pinKey:{type:"deprecated",data:n}}),{maxHeight:eK}=(0,ey.Z)({showProductDetailPage:!!n.is_eligible_for_pdp,mainImage:T,skipAspectRatioCheck:B}),{showCarouselControls:eM,showCloseupShopDomainLinkButton:eZ,showDebugSignalsFeedbackButton:ez,showDomainLink:eO,showDomainLinkButton:eB,showFlashlightButton:eN,showPinTagButton:eV,surfaceType:eU}=(0,eg.Z)({carouselInfo:j,disablePinTagButton:S,domain:ev||"",hasMetTrustAndSafetyCheck:eu,isCollageEnabled:ec,isEmployee:I.isAuth&&!!I.isEmployee,isORBACProfileManager:o,isScenePin:k,navLink:ej,pinKey:{type:"deprecated",data:n},showProductDetailPage:P});return q?m=eK:U?m=eR:D||(m="sm"===$?eD:eE),(0,s.jsxs)(r.xu,{ref:R,alignItems:"stretch",alignSelf:U?"center":void 0,dangerouslySetInlineStyle:{__style:{aspectRatio:(0,f.GJ)(N,V),backgroundColor:U?void 0:O.yc}},"data-test-id":"closeup-body-image-container",display:"flex",height:U?"100%":ei,maxHeight:m,maxWidth:eL,position:"relative",width:U?"100%":ea,children:[(0,s.jsxs)(r.xu,{dangerouslySetInlineStyle:{__style:{...q?void 0:et,display:U?"grid":"block"}},"data-test-id":"closeup-image",height:"auto",overflow:"hidden",width:"100%",children:[eF,(0,s.jsx)(em,{auxData:ew,carouselInfo:j,domain:ev??M??"",handleMediaButtonClick:d,horizontalOffset:el,imageSignature:y,isHovered:t,link:ej,maxCloseupImageWidth:w,mediaViewerExpandButtonRef:K,onImageClick:e,pin:n,shouldPadImage:i,showCarouselControls:eM,showCarouselEllipsis:!P,showCloseupShopDomainLinkButton:eZ,showDebugSignalsFeedbackButton:ez,showDomainLink:eO,showDomainLinkButton:eB,showFlashlightButton:eN,showPinTagButton:eV,surfaceType:eU,trafficSource:a,verticalOffset:er,viewParameter:l})]}),K&&(0,s.jsx)(r.mh,{zIndex:eS.lI,children:(0,s.jsx)(ek.Qp,{anchor:K.current,experienceIds:[506692],flyoutSize:"md",idealDirection:"up",placementId:12,showCaret:!0,textWeight:"normal"})})]})}var eA=n(96413),eF=n(677921),eE=n(453179),eL=n(274320),eD=n(716920),eR=n(123317),eK=n(724084),eM=n(543561),eZ=n(341742),ez=n(239728),eO=n(458460);let eB=(e,t)=>e?13799:0===t?227:228;var eN=n(71157),eV=n(996434),eU=n(886981),eH=n(281106),eW=n(461413),eG=n(181663),e$=n(445698),eX=n(589357);let eq={backgroundImage:"linear-gradient(to bottom, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",paddingTop:"30px",top:0};function eY({onImageClick:e,isHovered:t,pin:n,shouldPadImage:i,trafficSource:a,viewParameter:l,isORBACProfileManager:o,handleMediaButtonClick:d}){let c,{originalImageUrl:m,imageSignature:h,link:y,isScenePin:v,disablePinTagButton:k,maxCloseupImageWidth:P,imageWithPreview:w}=(0,e_.Z)({pinKey:{type:"deprecated",data:n}}),C=(0,en.Z)(),{closeupWithinMasonryEnabled:I,peekCloseupEnabled:T,viewportSize:j,clientTrackingParams:L,showCloseupContentRight:D}=(0,g.x4)(),{isRTL:R}=(0,u.B)(),K=(0,_.useRef)(null),{maxHeight:M,fiftyPercentHeight:Z,fiftyPercentWidth:z}=(0,O.Re)(),{maxHeight:B}=(0,ef.Z)({pinKey:{type:"deprecated",data:n}}),[N,V]=(0,_.useState)(!1),H=(0,x.Z)({showProductDetailPage:!!n.is_eligible_for_pdp}),{borderStyle:W}=(0,p.Z)({isSideBySide:D,isPadded:i,isRTL:R,closeupWithinMasonryEnabled:I,peekCloseupEnabled:T}),G=(0,eb.Z)({isHiddenPin:n.is_hidden,isUnsafePin:n.is_unsafe}),{mainImage:X}=(0,b.G)(),{domain:q="",id:Y,story_pin_data:J}=n,Q={carousel_slot_id:void 0,carousel_data_id:void 0,carousel_slot_index:void 0,commerce_data:void 0},ee=(0,E.Z)({type:"deprecated",data:n})();ee&&(Q.commerce_data=ee);let ei=y||m||"",{data:ea=[]}=(0,eU.Z)({name:"StoryPinTaggedProductsResource",options:{id:n.id},noCache:!0}),{pages:el=[]}=J||{},er=[5,6,2],es=el.filter(e=>{let t=e?.layout;return void 0!==t&&!er.includes(t)}),{activePageIndex:eo,captions:ed,currentPage:ec,handleMute:eu,handlePageChange:ep,handlePause:eh,handlePausePlay:ey,handlePlay:ex,handleUpdateVideoInfo:ev,handleVideoEnd:ek,handleVideoScrubbingNewPage:eS,handleWatchAgain:eP,isActive:ew,isSeeking:eC,mute:eI,progressInfo:eT,showEndCard:ej}=(({pages:e,viewType:t,viewParameter:n,pinId:i})=>{let{checkExperiment:a}=(0,eL.r)(),l=a("web_closeup_video_loop").anyEnabled,{clearSeekTime:r}=(0,eK.RC)(),{setIdeaPinActivePage:s}=(0,eO.Ut)(),[o,d]=(0,_.useState)(0),[c,p]=(0,_.useState)(!0),[m,g]=(0,_.useState)(!0),[h,y]=(0,_.useState)(!1),[f,x]=(0,_.useState)(null),v=(0,S.Z)(),b=e[o],k=(0,eD.g)(),P=(0,A.A)(),w=(0,_.useRef)(null),{blocks:[C]=[null]}=(0,eF.Z)({storyPinBlocks:b?.blocks||[],blocksToRender:[eR.h8.VIDEO]}),{seekTimes:I}=(0,eK.Hx)(),T=I&&I[i],j=C?.type===eR.h8.VIDEO&&C?.video,E=(0,u.B)().locale.toLowerCase(),L=j&&(j?.video_list?.V_720P?.captions_urls||j?.video_list?.V_HLSV3_MOBILE?.captions_urls)||{},D=E&&L[E]||Object.values(L)[0]||"",R=(0,_.useCallback)(i=>{(0,F.sX)("startNewPwt"),P&&P.abort("startNewPwt"),k&&(k.abort("startNewPwt"),k.start(),k.addBinaryAnnotation("page.current.index",i,"I16"),k.addBinaryAnnotation("page.count",e.length,"I16"),k.addBinaryAnnotation("view.type",t,"I32"),k.addBinaryAnnotation("view.parameter",n,"I32"))},[e.length,P,k,n,t]),K=(0,_.useCallback)(e=>{e&&e instanceof eM.B7&&(e.clear(),e=null)},[]),M=(0,_.useCallback)(t=>{K(w.current),!j&&e.length>1&&(w.current=new eM.B7(e=>{x({currentTime:e<1?e:1,duration:1})},()=>{t<e.length-1?(K(w.current),z(t+1)):(y(!0),p(!1))},eE.oN))},[e]),Z=(0,_.useCallback)(e=>{x({currentTime:0,duration:1}),M(e)},[M]);(0,eZ.Z)(()=>(P&&(P.addBinaryAnnotation("page.current.index",o,"I16"),P.addBinaryAnnotation("page.count",e.length,"I16"),P.addBinaryAnnotation("view.type",t,"I32"),P.addBinaryAnnotation("view.parameter",n,"I32")),(0,F.rt)("page.current.index",o,"I16"),(0,F.rt)("page.count",e.length,"I16"),(0,F.rt)("view.type",t,"I32"),(0,F.rt)("view.parameter",n,"I32"),Z(o),()=>{w.current&&w.current instanceof eM.B7&&w.current.clear()}));let z=(0,_.useCallback)(e=>{c||p(!0),h&&y(!1),Z(e),e!==o&&r(),d(e),s(e),R(e)},[o,r,Z,c,s,h,R]);(0,_.useEffect)(()=>{if(h&&y(!1),w.current&&T){let e=w.current;e.pause(),e.remaining=eE.oN-T*ez.gJ,x({currentTime:T/eE.P6,duration:1})}},[T]);let O=()=>{p(!1),w.current&&w.current.pause(),v({event_type:9324,view_type:t,view_parameter:n,component:eB(h,o),object_id_str:i,aux_data:{story_pin_page_id:o}})},B=()=>{if(p(!0),w.current){let e=w.current;T&&T>0&&r(),e.resume()}else f||Z(o);y(!1),v({event_type:9323,view_type:t,view_parameter:n,component:eB(h,o),object_id_str:i,aux_data:{story_pin_page_id:o}})},N=()=>{z(0)};return{activePageIndex:o,captions:D,currentPage:b,handleMute:()=>{g(e=>!e)},handlePageChange:z,handlePause:O,handlePausePlay:()=>{h||(c?O():B())},handlePlay:B,handleUpdateVideoInfo:e=>{x({currentTime:e?.currentTime??0,duration:e?.duration??1})},handleVideoEnd:a=>{l&&N(),a===e.length-1&&(y(!0),p(!1),s(0)),a===o&&o<e.length-1&&(z(o+1),v({event_type:101,view_type:t,view_parameter:n,component:eB(h,o),element:12261,object_id_str:i}))},handleVideoScrubbingNewPage:e=>{h&&y(!1),Z(e),d(e),s(e),R(e)},handleWatchAgain:N,isActive:c,isSeeking:!!T,mute:m,progressInfo:f,setMute:g,showEndCard:h}})({pages:es,viewType:3,viewParameter:l,pinId:Y}),{blocks:[eY]=[null]}=(0,eF.Z)({storyPinBlocks:ec?.blocks||[],blocksToRender:[eR.h8.IMAGE,eR.h8.VIDEO]}),eJ=eY?.type===eR.h8.VIDEO,eQ=eJ||es.length>1,{fontsLoaded:e0,mediaDataReceived:e1}=(0,e$.tq)({hasPin:!!n,pages:el}),{showCloseupShopDomainLinkButton:e2,showDebugSignalsFeedbackButton:e3,showDomainLink:e6,showDomainLinkButton:e4,showFlashlightButton:e7,showPinTagButton:e5,surfaceType:e8}=(0,eg.Z)({disablePinTagButton:k,domain:q,hasMetTrustAndSafetyCheck:G,isEmployee:C.isAuth&&!!C.isEmployee,isScenePin:v,navLink:ei,pinKey:{type:"deprecated",data:n},isORBACProfileManager:o}),{containerHeight:e9,containerWidth:te,horizontalOffset:tt,letterBoxAspectRatio:tn,letterBoxedHeight:ti,letterBoxedWidth:ta,verticalOffset:tl}=(0,f.ZP)({mainImage:X,maxCloseupImageWidth:P,pinKey:{type:"deprecated",data:n}}),{height:tr,width:ts}=X;return n.story_pin_data?.is_deleted?(0,s.jsx)(eW.Z,{color:"secondary",height:640,rounding:4,width:508}):(I?c=B:T&&(c="sm"===j?Z:M),(0,s.jsx)(r.xu,{alignSelf:I?"center":void 0,dangerouslySetInlineStyle:{__style:{...H?void 0:W,aspectRatio:I?(0,f.GJ)(ts,tr):void 0,background:O.yc}},"data-test-id":"closeup-body-image-container",height:I?"100%":e9,maxHeight:H?void 0:c,maxWidth:z,onMouseEnter:()=>{eQ&&V(!0)},onMouseLeave:()=>{V(!1)},position:"relative",width:I?"100%":te,children:ec?(0,s.jsxs)(_.Fragment,{children:[!eQ&&(0,s.jsx)(em,{auxData:Q,domain:q,handleMediaButtonClick:d,imageSignature:h,isHovered:t,link:ei,maxCloseupImageWidth:P,mediaViewerExpandButtonRef:K,onImageClick:e,pin:n,shouldPadImage:i,showCloseupShopDomainLinkButton:e2,showDebugSignalsFeedbackButton:e3,showDomainLink:e6,showDomainLinkButton:e4,showFlashlightButton:e7&&e1,showPinTagButton:e5,surfaceType:e8,trafficSource:a,viewParameter:l}),(N||!ew)&&(0,s.jsxs)(r.xu,{children:[(0,s.jsx)(r.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...eX.Ul,flexDirection:"column-reverse"}},display:"flex",height:eX.hy,paddingX:6,position:"absolute",width:"100%",zIndex:eR.Gf,children:(0,s.jsx)(eG.Z,{activePageIndex:eo,captionsUrl:ed,handleMute:eu,handlePause:eh,handlePausePlay:ey,handlePlay:ex,handleVideoScrubbingNewPage:eS,handleWatchAgain:eP,inMilliseconds:!0,isMuted:eI,isPanelOpen:!0,isPlaying:ew,isStoryPin:!0,onPageSelect:e=>ep(e),pageCount:es.length,pages:es,pinId:Y,progressInfo:eT,showEndCard:ej,showVideoControls:!0,viewParameter:156})}),(0,s.jsx)(r.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{...eq}},"data-test-id":"music-attribution",display:"flex",justifyContent:"center",overflow:"hidden",paddingY:5,position:"absolute",width:"100%",zIndex:eR.Gf,children:(0,s.jsx)(eA.Z,{handlePause:eh,handlePlay:ex,musicAttributions:ec?.music_attributions,shouldMute:ec?.should_mute,showEndCard:ej})})]}),(0,s.jsxs)(r.iP,{disabled:!N||ej,fullHeight:!0,onTap:ey,children:[(0,s.jsx)(eV.Z,{activePageIndex:eo,clientTrackingParams:L,customEndCard:!0,fontsLoaded:e0,horizontalOffset:tt,isActive:ew,muteVideos:eI,onEnded:ek,onUpdateVideoInfo:ev,ownerId:n.native_creator?.id??"",page:ec,pageAspectRatio:tn,pageHeight:ti,pageIndex:eo,pageWidth:ta,pin:n,pinId:Y,productPins:ea,shouldLogTimeSpent:!0,stillLoading:!e1,verticalOffset:tl,videoPinProgress:eT,viewParameter:l,viewType:3}),!ej&&!eC&&es.length>1&&!eJ&&(0,s.jsx)(eH.Z,{playing:ew})]}),ej&&n.native_creator&&(0,s.jsx)(et.Z,{name:"SIIPMediaContainer_VideoEndCard",children:(0,s.jsx)($.Z,{children:(0,s.jsx)(r.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,zIndex:eR.s5,children:(0,s.jsx)(eN.default,{clientTrackingParams:n.trackingParams||n.tracking_params,imageSrc:n.image_url??"",pinDescription:n.description??"",pinId:n.id,rounded:!1,watchAgain:eP})})})})]}):ec?null:(0,s.jsx)(U,{dominantColor:O.yc,fit:"contain",imageWithPreview:w})}))}var eJ=n(73579);let eQ=e=>{let{isHovered:t,onImageClick:n,pin:i,shouldPadImage:a,trafficSource:l,viewParameter:r,isORBACProfileManager:d,handleMediaButtonClick:c}=e,{isEligibleForStaticImageIdeaPin:u}=(0,eJ.Z)(i.story_pin_data_id),p=u?(0,s.jsx)(eY,{handleMediaButtonClick:c,isHovered:t,isORBACProfileManager:d,onImageClick:n,pin:i,shouldPadImage:a,trafficSource:l,viewParameter:r}):(0,s.jsx)(ej,{handleMediaButtonClick:c,isHovered:t,isORBACProfileManager:d,onImageClick:n,pin:i,shouldPadImage:a,trafficSource:l,viewParameter:r});return a?(0,s.jsx)(o,{children:p}):p};var e0=n(935410),e1=n(294851),e2=n(219057),e3=n(298638);let e6=(0,_.lazy)(()=>n.e("74993").then(n.bind(n,613047))),e4=({children:e,name:t,verticalOffset:n=0,horizontalOffset:i=0})=>(0,s.jsx)(r.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none",padding:`${n}px ${i}px`}},"data-test-id":`experimental-closeup-image-overlay-layer-${t}`,left:!0,position:"absolute",right:!0,top:!0,children:e}),e7=(void 0!==l||(l=n(971203)).hash&&"89029511c11617e1150976d1002228db"!==l.hash&&console.error("The definition of 'VideoContent_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l),e5=({closeupIsFirstPageInHistoryStack:e,customThumbnail:t,imageContainerRef:n,isWideVideo:i,pin:a,pinKey:l,shouldPadImage:d,flyoutShareProps:c,video:u,isORBACProfileManager:p,handleMediaButtonClick:h})=>{let y=(0,P.Z)(e7,l),f=!!a.promoter&&!a.is_downstream_promotion,x=f&&!a.is_eligible_for_web_closeup,{access:v,should_mute:b}=a||{},k=!!v&&v.includes("tag")||p,{closeupWithinMasonryEnabled:S}=(0,g.x4)(),{closeupBodyWidth:w}=(0,ei.K)(),{checkExperiment:C}=(0,eL.r)(),I=(0,e2.Z)(),{fiftyPercentWidth:T}=(0,O.Re)(),{maxHeight:j}=(0,ef.Z)({pinKey:y}),{isCloseupMediaViewerEnabled:A}=(0,Q.Z)({isShufflePin:!!a?.shuffle}),F=C("web_closeup_video_loop").anyEnabled,E=Math.max((w??1)/("number"==typeof j?j:1),(u.hls?.width??u?.mp4?.width??0)/(u.hls?.height??u?.mp4?.height??0)),L=S?w:m.Gg-m.d2,D=(0,_.useMemo)(()=>A&&C("media_viewer_videos").anyEnabled,[A,C]),R=(0,s.jsxs)(e3.Z,{isVideo:!0,isWideVideo:i,shouldPadImage:d,styleOverrides:d&&!S?{maxWidth:{maxWidth:L},minWidth:{minWidth:L},height:{},borderRadius:16}:{},variant:"default",children:[(0,s.jsx)(r.xu,{ref:n,"data-test-id":"closeup-video-with-visibility",maxHeight:j,maxWidth:T,width:"100%",children:(0,s.jsx)(e1.Z,{aspectRatio:S?E:void 0,autoplay:!I,customThumbnail:t,flyoutShareProps:c,isPromoted:f,loop:F||x,muted:b||e,objectFit:S?"contain":void 0,pinId:a.id,pinKey:y,shouldMute:b,variant:"default",video:u})}),k&&(0,s.jsx)(e4,{name:"tag-button",children:(0,s.jsx)(et.Z,{name:"SafeSuspense_VideoContent_CloseupTagButton",children:(0,s.jsx)($.Z,{children:(0,s.jsx)(G.Z,{children:(0,s.jsx)(e6,{pin:a})})})})}),D&&(0,s.jsxs)(e4,{name:"media-viewer-button",verticalOffset:136,children:[(0,s.jsx)(r.xu,{height:"100%"}),(0,s.jsx)(r.xu,{display:"flex",justifyContent:"end",paddingX:W.Z,right:!0,children:(0,s.jsx)(et.Z,{name:"SafeSuspense_CloseupImageOverlay_MediaViewerButton",children:(0,s.jsx)($.Z,{children:(0,s.jsx)(G.Z,{children:(0,s.jsx)(e0.default,{animateOnMount:!1,dataTestId:"media-viewer-button",icon:"maximize",imageSignature:a.image_signature,onTap:h,variant:"view-larger"})})})})})]})]});return d?(0,s.jsx)(o,{children:R}):R};var e8=n(617778),e9=n(123998);let te=e=>{let{clientTrackingParams:t,closeupIsFirstPageInHistoryStack:n,imageContainerRef:i,flyoutShareProps:a,isWideVideo:l,pin:o,shouldPadImage:d,trafficSource:c,isORBACProfileManager:u,isHovered:p,onImageClick:m,viewParameter:_,handleMediaButtonClick:y}=e,{video:f,imgSrc:v,isEmbeddedVideo:k,isYoutubePin:S}=(0,b.G)(),{closeupWithinMasonryEnabled:P}=(0,g.x4)(),w=(0,x.Z)({showProductDetailPage:!!o.is_eligible_for_pdp}),{checkExperiment:C}=(0,eL.r)(),I=(0,s.jsx)(ev.Z,{id:"ContextMenuClickthroughLogging",children:(0,s.jsx)(e8.Z,{clientTrackingParams:t,hovered:p,pinKey:{type:"deprecated",data:o},viewType:3,children:(0,s.jsx)(ev.Z,{id:"ImageContent",children:(0,s.jsx)(eQ,{handleMediaButtonClick:y,isHovered:p,isORBACProfileManager:u,onImageClick:m,pin:o,shouldPadImage:d,trafficSource:c,viewParameter:_})})})});f&&(I=(0,s.jsx)(ev.Z,{id:"VideoContent",children:(0,s.jsx)(e5,{closeupIsFirstPageInHistoryStack:n,customThumbnail:v,flyoutShareProps:a,handleMediaButtonClick:y,imageContainerRef:i,isORBACProfileManager:u,isWideVideo:l,pin:o,pinKey:{type:"deprecated",data:o},shouldPadImage:d,video:f})}));let T="50%";if(k){let e=o.attribution&&(o.attribution.author_name||o.attribution.url)?o.attribution.provider_name:null;"soundcloud"===e?T="30%":"vin"===e&&(T="100%"),I=(0,s.jsx)(ev.Z,{id:"EmbeddedVideoContent",children:(0,s.jsx)(h,{embedUrl:o.embed?.src,isWideVideo:l,paddingBottom:T,shouldPadImage:d})})}let j=C("web_closeup_youtube_player").group;if(S&&["enabled","enabled_autoplay","enabled_delay","employees"].includes(j)){let e=(0,eE.Mt)(o.link),t=["enabled_autoplay","enabled_delay"].includes(j),n=`https://www.youtube.com/embed/${e}?autoplay=${+!!t}&mute=${+!!t}&fs=0`;I=(0,s.jsx)(ev.Z,{id:"EmbeddedVideoContent-2",children:(0,s.jsx)(h,{embedUrl:n,isWideVideo:l,paddingBottom:T,shouldPadImage:d})})}let A=(0,E.Z)({type:"deprecated",data:o}),F=o.is_eligible_for_pdp?A():void 0;return(0,s.jsx)(e9.Z,{auxData:F,clientTrackingParams:t,component:85,viewParameter:_,children:(0,s.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{overflow:P?"clip":void 0}},rounding:P&&!w?4:void 0,children:I})})}},502447:function(e,t,n){n.d(t,{Z:()=>o}),n(167912);var i,a=n(782881),l=n(415546),r=n(7872);let s=(void 0!==i||(i=n(881010)).hash&&"120c47eff2cf4911de716b514608718f"!==i.hash&&console.error("The definition of 'useIsBoardOwnerOrCollaborator_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function o({pinKey:e,orbacActingAs:t,viewer:n}){let i=(0,l.Z)(s,e),o=!!i.pinner?.entityId&&(0,r.D3)(n,i.pinner.entityId,t),d=!!(i.board?.collaboratedByMe||i.board?.owner?.entityId)&&(0,a.Z)(i.board.collaboratedByMe,i.board.owner?.entityId,n);return o||d}},417827:function(e,t,n){n.r(t),n.d(t,{default:()=>T}),n(244311);var i,a,l=n(980787),r=n(415546),s=n(941404),o=n(647709),d=n(601686),c=n(581722);n(167912);var u=n(20256),p=n(351607),m=n(886981),g=n(105433),h=n(667294),_=n(937805),y=n(461951),f=n(525839),x=n(785893);function v({commentCount:e,commentImpressionTrackerRef:t,inCommentsImprovedDropdownExp:n,inCommentsPopoverExp:i,isDesktop:a,previewComment:l}){let r=(0,f.ZP)(),{mWebCloseupRedesignEnabled:s}=(0,_.Z)(),o=(0,h.useRef)(null),d=n||i,c=e>1,p=!a||d,m="aggregatedcomment"===l.type?l.text:l.details||"";m=p?`"${m}" ... `:`"${m}"`;let g=c?r._('view all comments', 'closeupCommentModule.commentModuleContent.cta.multipleComments.popover', 'Call to action to view comments. This is displayed when there are multiple comments on a Pin'):r._('view comment', 'closeupCommentModule.commentModuleContent.cta.singleComment.popover', 'Call to action to view comments. This is displayed when there is a single comment on a Pin'),v=c?r._('View all comments', 'closeupCommentModule.commentModuleContent.cta.multipleComments', 'Call to action to view comments. This is displayed when there are multiple comments on a Pin'):r._('View comment', 'closeupCommentModule.commentModuleContent.cta.singleComment', 'Call to action to view comments. This is displayed when there is a single comment on a Pin'),b=d?g:v;return(0,h.useEffect)(()=>{let e=t?.current,n=o?.current;p&&((e,t)=>{if(!e||!t)return;let n=e?.offsetHeight;if(e?.scrollHeight>n){let n='..." ',i=t.innerText,a=i,l=0,r=i.length;for(;l<=r;){let s=Math.floor((l+r)/2);t.innerText=i.slice(0,s)+n,e.scrollHeight>e.offsetHeight?r=s-1:(l=s+1,a=i.slice(0,s))}return t.innerText=a+n}})(e,n)},[b,t,m,p,o]),(0,x.jsx)(u.xu,{children:(0,x.jsxs)(u.xu,{ref:t,dangerouslySetInlineStyle:{__style:{textOverflow:"ellipsis",WebkitBoxOrient:"vertical",WebkitLineClamp:"2",display:"-webkit-box",color:y.C9x}},overflow:"hidden",children:[(0,x.jsx)(u.xv,{ref:o,color:"subtle",inline:!0,size:p&&!s?"300":"200",children:m}),p&&(0,x.jsx)(u.xu,{display:"inlineBlock",children:(0,x.jsx)(u.xv,{size:s?"200":"300",weight:"bold",children:b})})]})})}var b=n(32082);let k=(void 0!==i||(i=n(274360)).hash&&"361dbb7eac9d64408e9e81f7b01b2b75"!==i.hash&&console.error("The definition of 'CloseupCommentModule_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function S({inCommentsImprovedDropdownExp:e,inCommentsPopoverExp:t,onTap:n,pinKey:i,viewParameter:a}){let l=(0,g.lV)(),s=(0,o.HG)(),{aggregatedPinData:d}=(0,r.Z)(k,i)||{},{commentCount:h,entityId:_}=d||{},y=(0,c.v9)(e=>(0,b.Z)(e,{aggregatedPinDataId:_,aggregatedComments:l}))[0],f=y?.type==="aggregatedcomment"?!!y.text:!!y?.details,S=(0,m.Z)(_?{name:"UnifiedCommentsPreviewResource",options:{aggregated_pin_id:_,redux_normalize_feed:!e}}:null).isLoaded&&f,P=(0,p.ZP)({componentType:13696,impressionType:"Comment",loggingId:y?.id,viewParameter:a,viewType:3});return S?(0,x.jsx)(u.iP,{onTap:n,children:(0,x.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{paddingTop:e?12:4,paddingBottom:e?16:4}},children:(0,x.jsx)(v,{commentCount:h??0,commentImpressionTrackerRef:P,inCommentsImprovedDropdownExp:!!e,inCommentsPopoverExp:!!t,isDesktop:s,previewComment:y})})}):null}var P=n(680288);let w=(void 0!==a||(a=n(318653)).hash&&"3a8cd51fec23643de121636949bbbcf6"!==a.hash&&console.error("The definition of 'UnifiedCommentModule_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a);function C({logCommunityViewIntent:e,pinKey:t,viewParameter:n}){let i=(0,r.Z)(w,t),{commentModalConfig:{setIsCommentThreadModalOpen:a}}=(0,P.B)();return(0,x.jsx)(S,{onTap:()=>{a(!0),e()},pinKey:i,viewParameter:n})}function I({inCommentsImprovedDropdownExp:e,inCommentsPopoverExp:t,logCommunityViewIntent:n,pinKey:i,viewParameter:a}){let l=(0,r.Z)(w,i),{setIsCommentThreadExpanded:s}=(0,d.x4)();return(0,x.jsx)(S,{inCommentsImprovedDropdownExp:e,inCommentsPopoverExp:t,onTap:()=>{s?.(!0),n()},pinKey:l,viewParameter:a})}let T=function(e){let t=(0,o.HG)(),{logContextEvent:n}=(0,l.u)(),{inCommentsImprovedDropdownExp:i}=e,a=()=>{n({component:13464,element:11533,event_type:10554,view_type:3}),t&&(0,s.tj)("dweb.unified_comment_module.community_view_intent",{tags:{experimentGroup:i?"improved_dropdown":"popover"}})};return t?(0,x.jsx)(I,{...e,logCommunityViewIntent:a}):(0,x.jsx)(C,{...e,logCommunityViewIntent:a})}},561692:function(e,t,n){n.d(t,{ZP:()=>aZ,l6:()=>aK});var i,a,l,r,s,o,d,c,u,p,m,g,h,_=n(667294),y=n(581722),f=n(616550),x=n(130845),v=n(873707);let b=Object.freeze(["JP"]);var k=n(20256),S=n(414772);n(167912);var P=n(934645),w=n(415546),C=n(351607),I=n(431338),T=n(785893);let j=(void 0!==i||(i=n(934191)).hash&&"9fe338bb0275ffff2818b274fce014af"!==i.hash&&console.error("The definition of 'CloseupMainPinImpression_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);var A=n(228121),F=n(688379),E=n(728371),L=n(878709),D=n(149739),R=n(478086),K=n(525839),M=n(302148);let Z=e=>{if(!e)return null;let{categorizedIngredients:t}=e.recipe;return t&&t.length>0?{...e,categorizedIngredients:t}:null};var z=n(643875),O=n(665827),B=n(176465),N=n(594414),V=n(706563),U=n(63749),H=n(324307),W=n(601686),G=n(785195),$=n(846051),X=n(213967),q=n(872353);let Y=(void 0!==a||(a=n(957661)).hash&&"c6b0de206743312221bd0e0b89d2f0aa"!==a.hash&&console.error("The definition of 'CardSourceDescriptionText_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),J=function(e){let{onUpdate:t,showMore:n,pinKey:i,isArticle:a,showSponsorshipAttribution:l,hasAffiliateLink:r,hasAffiliateProducts:s,instagramPostLink:o,onToggle:d}=e;(0,_.useEffect)(()=>{t?.()},[t]),(0,_.useEffect)(()=>{t?.()},[n,t]);let c=(0,K.ZP)(),u=(0,w.Z)(Y,i),{closeupWithinMasonryEnabled:p,peekCloseupEnabled:m}=(0,W.x4)(),{carouselInfo:g}=(0,L.G)(),{closeupUnifiedDescription:h,userMentionTags:y,richMetadata:f,storyPinData:x}=u,v=(h||"").trim(),b=g?.carouselData;if(b){let e=b.carousel_slots??[],t=b.index??0;e[t]&&e[t].details&&(v=e[t].details)}let S=f?.tutorial?.description,P=u.pinAdditionalNote||"",C=`${v}

${P}`;C=v?C:P;let I=(v=P?C:v)&&S&&S.trim()===v,j=v?v.replace(/\s+/g," "):"",A=j=!n&&j&&j.length?(0,H.ZP)(j,a?195:200):j;j&&y&&(A=(0,T.jsx)(R.Z,{description:j,mentionLinkColor:"shopping",pinKey:u,shouldAdjustOffset:!0}));let J=v&&v.length>(a?195:200),Q=null,ee=Z((0,z.Z)((0,O.Z)((0,B.Z)(e)))),et=x?.metadata?.basics;if(et){let e,{keyValueBlocks:t,listBlocks:n}=et;u&&u.domain&&u.link&&(e={domain:u.domain,url:u.link});let i=[];e?.domain&&(i=[...i,e.domain]);let a=(t||[]).map(e=>(0,$.Z)(e.categoryType,e.value,c)).filter(e=>""!==e);a.length>0&&(i=[...i,...a]),(n??[]).forEach(({heading:e,blocks:t})=>{e&&(i=[...i,e]),(t??[]).forEach(e=>{"StoryPinListBlock"===e.__typename&&e.blocks&&(e.blocks??[]).forEach(e=>{"text"in e&&e.text&&(i=[...i,e.text])})})}),Q=(0,X.Z)(i)}else if(ee){let{prepTime:e,cookTime:t,totalTime:n,servingSummary:i,serves:a}=ee.recipe,l=n||t||e;if(t&&e){let n=t.h||0,i=t.m||0;l={h:n+(e.h||0),m:i+(e.m||0)}}let r=l?(0,U.Z)((0,V.X)(l),c):null,s=u.richMetadata?.recipe?.aggregateRating?.reviewCount;i&&(Q=a?(0,T.jsxs)(k.xv,{inline:!0,size:D.n,children:[a," ",c._('servings', 'closeup.CardSourceDescriptionText.servesLabel', 'Label for servings')]},"recipe"):(0,T.jsx)(k.xv,{inline:!0,size:"200",children:i},"recipe")),r&&(Q=Q?(0,M.nk)("{{ timeLabel }}  {{ description }}",{timeLabel:r,description:Q}):r),"number"==typeof s&&s>0&&(Q=Q?(0,M.nk)(c._('{{ reviewCount }} reviews \xB7 {{ description }}', 'number of reviews on a recipe and the description', 'number of reviews on a recipe and the description'),{reviewCount:s,description:Q}):s);let o=u.richMetadata?.recipe?.aggregateRating?.ratingValue,d=Number(o);Number.isNaN(d)&&(d=0),d>=.25&&(Q=Q?(0,M.nk)("{{ ratings }} {{ description }}",{ratings:(0,T.jsx)(N.Z,{max_rating:u.richMetadata?.recipe?.aggregateRating?.bestRating,rating:o},o),description:Q}):(0,T.jsx)(N.Z,{max_rating:u.richMetadata?.recipe?.aggregateRating?.bestRating,rating:o},o))}if(!j||I)return null;let en=4;return p?en=0:m&&(en=2),v?(0,T.jsxs)(k.xu,{marginBottom:p?0:l&&(r||s)?2:4,marginTop:en,children:[(0,T.jsxs)(E.Z,{descriptionDir:(0,q.j)(v),children:[(0,T.jsx)(F.Z,{description:v||"",enableAdditionalNoteSpace:""!==P,pinKey:u}),o]}),l&&(0,T.jsx)(k.xu,{marginTop:1,children:(0,T.jsx)(G.Z,{hasAffiliateLink:r,hasAffiliateProducts:s})})]}):(0,T.jsxs)("span",{children:[(0,T.jsx)(k.xv,{color:p?"subtle":void 0,inline:!0,size:"200",children:(0,T.jsx)(k.xu,{dangerouslySetInlineStyle:{__style:{display:"inline"}},"data-test-id":"description",children:Q?(0,M.nk)("{{ recipeInfo }}  {{ description }}",{recipeInfo:Q,description:A}):A})}),J&&!n&&(0,T.jsx)(k.xu,{"data-test-id":"more-button",display:"inlineBlock",marginStart:1,children:(0,T.jsx)(k.iP,{fullWidth:!1,onTap:d,children:(0,T.jsx)(k.xv,{inline:!0,size:"200",weight:"bold",children:c._('More', ' - ', ' -- ')})})})]})},Q=(e,t)=>e.length>300?e:e.length+t.length+3>300?`${e} ${t}...`:`${e} ${t}`,ee=(void 0!==l||(l=n(354418)).hash&&"d6d83b429981e4bc762e3872608eedbd"!==l.hash&&console.error("The definition of 'Description_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l);function et(e){let[t,n]=(0,_.useState)(!1),{pinKey:i,onUpdate:a,showSponsorshipAttribution:l,hasAffiliateLink:r,hasAffiliateProducts:s,instagramPostLink:o}=e,d=(0,w.Z)(ee,i);if(!d.entityId)return null;let c=!!d.aggregatedPinData,u=!!d.description,p=d.pinAdditionalNote||"",m=!!d.richMetadata?.recipe,g=!!d.richMetadata?.article,h=d.richMetadata?.article?.description,y=!!d.richMetadata?.tutorial,f=g&&!m&&!y;return(0,T.jsx)(_.Fragment,{children:(0,T.jsx)("span",{className:"richPinInformation","data-test-id":"richPinInformation-description",children:u||p||c?(0,T.jsx)(J,{hasAffiliateLink:r,hasAffiliateProducts:s,instagramPostLink:o,isArticle:f,onToggle:()=>n(!0),onUpdate:a,pinKey:d,showMore:t,showSponsorshipAttribution:l}):f&&h&&(0,T.jsx)(k.xu,{marginBottom:3,children:(0,T.jsx)(k.xv,{children:h.split(" ").map(e=>e.trim()).reduce(Q,"")})})})})}var en=n(758516);function ei({mediaAttribution:{author:e,authorUrl:t,ccUrl:n,link:i,mediaType:a,providerName:l}}){let r=(0,K.ZP)(),s=!!(l&&i);if(!e&&!s)return null;let o=s?r._('from {{ provider }}', 'closeup.attribution.imageWithProvider', 'Image source attribution withprovider but no author on pin closeup'):null;return e&&(o="VIDEO"===a?s?r._('Video by {{ author }} on {{ provider }}', 'closeup.attribution.videoWithAuthorProvider', 'Video source attribution on pin closeup'):r._('Video by {{ author }}', 'closeup.attribution.videoWithAuthor', 'Video source attribution on pin closeup when there is an author but no provider'):s?r._('Photo by {{ author }} on {{ provider }}', 'closeup.attribution.photoWithAuthorProvider', 'Photo source attribution on pin closeup'):r._('Photo by {{ author }}', 'closeup.attribution.photoWithAuthor', 'Photo source attribution on pin closeup when there is an author but no providers')),(0,T.jsx)(k.xu,{"data-test-id":"media-attribution",display:"inlineBlock",children:(0,T.jsxs)(k.xv,{color:"default",size:"200",children:[!!o&&(0,T.jsx)(en.Z,{text:(0,M.nk)(o,{author:(0,T.jsx)(k.rU,{display:"inlineBlock",href:t??"",rel:"nofollow",underline:"hover",children:(0,T.jsx)(k.xv,{size:"200",weight:"bold",children:e})},"author"),provider:s?(0,T.jsx)(k.xu,{display:"inlineBlock",marginEnd:1,children:(0,T.jsx)(k.rU,{display:"inlineBlock",href:i??"",rel:"nofollow",underline:"always",children:l},"provider")}):null})}),n&&(0,T.jsx)(k.rU,{href:n,rel:"nofollow",children:r._('(cc)', 'creative commons link text', 'creative commons link text')})]})})}function ea({attribution:{authorName:e,authorUrl:t,ccUrl:n,providerName:i,url:a},embed:l}){let r=(0,K.ZP)(),s=!!(i&&a);if(!e&&!s)return null;let o=null;return s?o=e?l?.src&&"gif"!==l.type&&"pinstory"!==l.subtype?r._('Video by {{ author }} on {{ provider }}', 'closeup.attribution.videoWithAuthorProvider', 'Video source attribution on pin closeup'):r._('Photo by {{ author }} on {{ provider }}', 'closeup.attribution.photoWithAuthorProvider', 'Photo source attribution on pin closeup'):r._('from {{ provider }}', 'closeup.attribution.imageWithProvider', 'Image source attribution withprovider but no author on pin closeup'):e&&(o=l?.src&&"gif"!==l.type&&"pinstory"!==l.subtype?r._('Video by {{ author }}', 'closeup.attribution.videoWithAuthor', 'Video source attribution on pin closeup when there is an author but no provider'):r._('Photo by {{ author }}', 'closeup.attribution.photoWithAuthor', 'Photo source attribution on pin closeup when there is an author but no providers')),(0,T.jsx)(k.xu,{"data-test-id":"photo-attribution",display:"inlineBlock",children:(0,T.jsxs)(k.xv,{color:"default",size:"200",children:[!!o&&(0,T.jsx)(en.Z,{text:(0,M.nk)(o,{author:(0,T.jsx)(k.rU,{display:"inlineBlock",href:t??"",rel:"nofollow",underline:"hover",children:(0,T.jsx)(k.xv,{size:"200",weight:"bold",children:e})},"author"),provider:s?(0,T.jsx)(k.xu,{display:"inlineBlock",marginEnd:1,children:(0,T.jsx)(k.rU,{display:"inlineBlock",href:a??"",rel:"nofollow",underline:"always",children:i},"provider")}):null})}),n&&(0,T.jsx)(k.rU,{href:n,rel:"nofollow",children:r._('(cc)', 'creative commons link text', 'creative commons link text')})]})})}let el=(void 0!==r||(r=n(799379)).hash&&"7142df6a7a3c1aee54267c5441d3d50b"!==r.hash&&console.error("The definition of 'CloseupAttributionAndDescription_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r),er=e=>{let{isStoryPin:t,pinKey:n,onUpdate:i,instagramPostLink:a}=e,l=(0,w.Z)(el,n),r=l.entityId&&(!!l.attribution?.providerUrl&&!!l.attribution.providerName||!!l.attribution?.authorName),s=l.entityId&&(!!l.mediaAttribution?.link&&!!l.mediaAttribution.providerName||!!l.mediaAttribution?.author),o=null;if(r||s){let{closeupUnifiedDescription:e}=l,t=(e||"").trim()?"{{ credit }}":"{{ credit }}";o=l.mediaAttribution?(0,M.nk)(t,{credit:l.mediaAttribution&&(0,T.jsx)(ei,{mediaAttribution:{author:l.mediaAttribution.author,authorUrl:l.mediaAttribution.authorUrl,ccUrl:l.mediaAttribution.ccUrl,link:l.mediaAttribution.link,mediaType:l.mediaAttribution.mediaType,providerName:l.mediaAttribution.providerName}},"article-pin")}):(0,M.nk)(t,{credit:l.attribution&&(0,T.jsx)(ea,{attribution:{authorName:l.attribution.authorName,authorUrl:l.attribution.authorUrl,ccUrl:l.attribution.ccUrl,providerName:l.attribution.providerName,url:l.attribution.url},embed:l.embed&&{type:l.embed.type,src:l.embed.src,subtype:l.embed.subtype}},"article-pin")})}return(0,T.jsxs)(k.xv,{inline:!0,children:[o,!t&&(0,T.jsx)(et,{instagramPostLink:a,onUpdate:i,pinKey:l})]})};var es=n(952018),eo=n(886981);function ed({creatorId:e,children:t}){let{data:n}=(0,eo.Z)({name:"UserResource",options:{field_set_key:"grid_item",user_id:e}});return t(n)}var ec=n(995415),eu=n(453179),ep=n(776250),em=n(274320),eg=n(355919),eh=n(8512);function e_({hasOfficialUser:e,domain:t,hasLinkDomainOfficialUser:n,hasLinkUserWebsiteOfficialUser:i,hasNativeCreator:a,hasThirdPartyPinOwner:l,isPromoted:r,pinnerDomainUrl:s,pinnerDomainVerified:o}){return(i||n||l||e||o&&s===t)&&!r||!!a}let ey=(void 0!==s||(s=n(543996)).hash&&"b640d34fae5bf66634c4dffcbb8ea6d4"!==s.hash&&console.error("The definition of 'useCloseupBodyUtils_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),s);function ef(e){let t=(0,w.Z)(ey,e),{checkExperiment:n}=(0,em.r)(),i=n("closeup_attribution_overhaul").anyEnabled,{currentDomain:a}=(0,ec.Z)({carouselData:t.carouselData&&{carouselSlots:t.carouselData.carouselSlots&&t.carouselData.carouselSlots.map(e=>({domain:e.domain,link:e.link})),index:t.carouselData?.index},domain:t.domain}),l=!!t?.isGoLinkless,r=!!t.link&&t.link.startsWith("https://i.pinimg.com"),s=(0,_.useCallback)(e=>!l&&(e&&!r?!!t.link:!t.isEligibleForPdp&&!!(0,eu._S)(a)&&!r),[a,t.isEligibleForPdp,t.link,l,r]),o=(0,ep.Z)({hasPin:!!t,hasPinRichMetadata:!!t.richMetadata,hasPinRichMetadataProducts:!!t.richMetadata?.products,hasPinRichMetadataArticle:!!t.richMetadata?.article,hasPinRichMetadataRecipe:!!t.richMetadata?.recipe,hasPinStoryPinData:!!t.storyPinData}),d=(0,_.useCallback)(e=>e||o,[o]),c=t.linkDomain,u=!!t.nativeCreator,p=!!t.originPinner,m=!!t.thirdPartyPinOwner,g=!!t.linkUserWebsite?.officialUser,h=!!c,y=!!c?.officialUser,f=!!t.creatorClass,x=t.pinner;x=u?t.nativeCreator:h&&c?.officialUser?c.officialUser:t.originPinner||t.pinner;let{pinCreditLink:v,pinCredit:b}=(0,eh.Xe)({hasLinkDomain:h,hasNativeCreator:u,hasOriginPinner:p,pinDomain:t.domain,sourceUserUsername:x?.username??null,sourceUserFullName:x?.fullName??null}),k=!!x,S=!!v&&!!b,P=!!t.closeupAttribution;return{getShowClickthroughLink:s,getViewParameter:d,makeDetailsArgs:(0,_.useCallback)(e=>({isShopTheLook:!!t.aggregatedPinData?.isShopTheLook,showCreatorCard:i?!!t.closeupUnifiedAttribution?.entityId:e_({hasOfficialUser:P,domain:t.domain??"",hasLinkDomainOfficialUser:y,hasLinkUserWebsiteOfficialUser:g,hasNativeCreator:u,hasThirdPartyPinOwner:m,isPromoted:!!t.isPromoted,pinnerDomainUrl:t.pinner?.domainUrl??"",pinnerDomainVerified:!!t.pinner?.domainVerified})||!P&&k&&S,creatorId:i?t.closeupUnifiedAttribution?.entityId??null:t.closeupAttribution?.entityId??x?.entityId??null,showCanonicalComments:!!t.isEligibleForAggregatedComments,showReactions:(0,eg.J6)({board:t.board?.isCollaborative||t.board?.collaboratedByMe?{isCollaborative:t.board.isCollaborative??null,collaboratedByMe:t.board.collaboratedByMe??null}:null,videos:t.videos?.entityId?{entityId:t.videos.entityId}:null,isDownstreamPromotion:t.isDownstreamPromotion,isPromoted:t.isPromoted,storyPinDataId:t.storyPinDataId},e),isCreatorClassPin:f}),[f,y,g,u,m,P,S,k,t.aggregatedPinData?.isShopTheLook,t.board?.collaboratedByMe,t.board?.isCollaborative,t.closeupAttribution?.entityId,t.domain,t.isDownstreamPromotion,t.isEligibleForAggregatedComments,t.isPromoted,t.pinner?.domainUrl,t.pinner?.domainVerified,t.storyPinDataId,t.videos?.entityId,x?.entityId,i,t.closeupUnifiedAttribution?.entityId])}}var ex=n(592821),ev=n(998951),eb=n(139707),ek=n(569437),eS=n(314021),eP=n(391501),ew=n(980787),eC=n(617778),eI=n(355940),eT=n(506662),ej=n(15667),eA=n(821806),eF=n(627925),eE=n(644493),eL=n(271910),eD=n(7872),eR=n(611499),eK=n(685178);function eM({children:e}){let{closeupWithinMasonryEnabled:t,peekCloseupEnabled:n}=(0,W.x4)(),i=8,a=4;return n?(i=0,a=eR.O5):t&&(i=void 0,a=void 0),(0,T.jsx)(k.xu,{marginBottom:i,marginTop:a,children:e})}var eZ=n(78762);let ez=(0,eZ.Z)(()=>n.e("35563").then(n.bind(n,72526)),void 0,e=>72526,"app-www-closeup-duplo-PinRecipeRating",e=>["35563"]),eO=(0,eZ.Z)(()=>Promise.resolve().then(n.bind(n,417827)),void 0,e=>417827,"app-common-react-components-closeup-CloseupCommentModule-UnifiedCommentModule",e=>[]),eB=(0,_.lazy)(()=>n.e("96615").then(n.bind(n,174753))),eN=(void 0!==o||(o=n(265532)).hash&&"15807bc974d02364f9d5b356bf1164d9"!==o.hash&&console.error("The definition of 'DefaultMetadata_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),o),eV=(0,_.memo)(function({pinKey:e,clientTrackingParams:t,inCommentsPopoverExp:n,isStoryPin:i,isDeletedStoryPin:a,viewParameter:l,trafficSource:r,details:s,viewer:o,onClickThrough:d,onCloseupBodyUpdate:c,orbacActingAs:u,outerPaddingSize:p,viewportSize:m,shouldShowPartnerModule:g,trendsData:h,showTrendsOnPinCloseup:y,showPinStats:x,showShoppingModule:v}){let b,S=(0,K.ZP)(),{checkExperiment:P}=(0,em.r)(),{logContextEvent:C}=(0,ew.u)(),{carouselInfo:I}=(0,L.G)(),j=(0,w.Z)(eN,e),{getShowClickthroughLink:D,makeDetailsArgs:R}=ef(j),{creatorId:M,showCreatorCard:Z}=R(!!a),{sideBySideFullWidthCTAEnabled:z}=(0,eb.Z)(),O=D(i),B=(0,ek.Z)({pinKey:j,pinId:j.entityId,viewParameter:l,trafficSource:r}),{closeupUnifiedDescription:N,closeupUserNote:V,commentsDisabled:U,pinAdditionalNote:H}=j,$=N?.trim(),X=j.storyPinData?.metadata?.basics?.keyValueBlocks?.map(({categoryType:e,value:t})=>({categoryType:e,value:t}))??[],Y=X.length>0,J=(0,ev.Z)(V)||!!j.richMetadata,Q=j.richMetadata?.recipe?.name&&j.richMetadata.recipe.categorizedIngredients&&j.richMetadata.recipe.categorizedIngredients.length>0,{closeupWithinMasonryEnabled:ee,peekCloseupEnabled:et}=(0,W.x4)(),en=(0,eD.q6)(o,j.pinner?.entityId,u),[ei,ea]=(0,_.useState)(!1),el=(0,f.TH)(),{isAuthenticated:eo,userAgent:{isMobile:ec}}=(0,ej.B)(),ep=n&&!U,eg=(0,T.jsx)(eL.q,{children:({hovered:e,onMouseEnter:n,onMouseLeave:i})=>(0,T.jsx)(eC.Z,{clientTrackingParams:t,hovered:e,pinKey:j,trafficSource:r,viewType:3,children:(0,T.jsx)(k.xu,{onMouseEnter:n,onMouseLeave:i,children:(0,T.jsx)(eK.Z,{carouselInfo:I,isLink:O,onClick:B,onTitleCheck:ea,pinKey:j})})})}),eh=()=>Z&&(0,T.jsx)(es.Z,{"data-testid":"closeup-metadata-creator",marginTop:ee?(p??eR.ER)/2:0,paddingBottom:ee?(p??eR.ER)/2:0,paddingRight:8*!ee,children:(0,T.jsx)(ed,{creatorId:M,children:e=>!!e&&(0,T.jsx)(eM,{children:(0,T.jsx)(eS.default,{clientTrackingParams:t,componentType:126,impressionType:"User",input:j,isORBACProfileManager:en,loggingId:M,officialUser:e,slotIndex:0,viewParameter:l,viewType:3})})})}),e_=P("dweb_closeup_links").anyEnabled,ey=j.isInstagramApi&&j.nativeCreator?.websiteUrl&&j.nativeCreator?.isPrimaryWebsiteVerified&&j.nativeCreator?.isDirectToSiteAllowed,{link:eZ,trackedLink:eV,utmLink:eU}=j||{};if(I&&I.carouselData&&I.carouselData.id){let{carousel_slots:e=[],index:t=0}=I.carouselData;b=e[t]&&e[t].link}let eH=b||(0,eu.Zt)({trackedLink:eV,link:eZ,utmLink:eU})||"",eW=(0,eu.vj)(eH),eG=eH;ey&&e_?eG=j.nativeCreator.websiteUrl:eW||(eG=(0,eE.Z)(eH)??eH);let e$=!eo&&(0,eT.am)(el),eX=!!(j.promoter&&!j.isDownstreamPromotion)&&j.promoter?.entityId===j.nativeCreator?.entityId,{sponsorship:eq,storyPinData:eY,affiliateLink:eJ}=j,eQ=!!eJ,e0=!!eY?.hasAffiliateProducts,e1=(!!eq?.sponsor||e0||eQ)&&(eG||v)&&!eX&&!e$,e2=o.isAuth&&j.originPin?.originPinner?.entityId===o.id,e3=O&&eG&&(e2||!j.isGoLinkless),e6=et&&!ee?p??eR.ER:0,e4=eW?S._('See recipe', 'closeup.defaultMetadata.visitButton', 'Button to visit recipe link on Pin'):S._('Visit site', 'closeup.defaultMetadata.visitButton', 'Button to visit link on Pin'),e7=()=>e3&&(0,T.jsx)(es.Z,{marginTop:et?p??eR.ER:void 0,paddingBottom:et?(p??eR.ER)/2:void 0,paddingRight:e6,children:(0,T.jsx)(k.xu,{"data-test-id":"visit-site-button",children:(0,T.jsx)(eP.Z,{clientTrackingParams:t,color:"gray",fullWidth:z,link:eG,onClickThrough:()=>{e_&&C({event_type:102,element:162,component:4,aux_data:{is_claimed_domain:ey}}),d()},pinKey:j,text:e4})})});return(0,T.jsxs)(k.xu,{marginTop:ee?4:void 0,children:[g&&(i||ee)&&(0,T.jsx)(es.Z,{paddingRight:(p??eR.ER)/2,children:(0,T.jsx)(k.xu,{"data-test-id":"PartnerModule",width:"100%",children:(0,T.jsx)(eI.Z,{name:"SafeSuspense_Closeup_PartnerModule",children:(0,T.jsx)(eA.Z,{children:(0,T.jsx)(eB,{borderStyle:ex.te,isStoryPin:i,pinKey:j,showPinStats:x,trendsData:y?h?.data?.results:null,viewportSize:m})})})})}),(0,T.jsxs)(k.xu,{alignItems:ee?"start":void 0,display:ee?"flex":void 0,justifyContent:ee?"between":void 0,children:[(0,T.jsxs)(k.kC.Item,{flexBasis:ee&&e3?"77%":"100%",children:[!ei&&(0,T.jsx)(es.Z,{paddingRight:ee?void 0:p,children:(0,T.jsx)(k.xu,{color:"light","data-test-id":"closeup-title",display:"inlineBlock",children:eg})}),et&&eh(),(0,T.jsx)(k.xu,{direction:et?"column":void 0,display:et?"flex":void 0,height:et?"100%":void 0,children:(0,T.jsxs)(es.Z,{paddingRight:p,children:[Y&&(0,T.jsx)(k.xu,{marginTop:ee?eR.O5:4,children:(0,T.jsx)(A.Z,{hasMetadataTemplateType:!!j.storyPinData?.metadata?.templateType,keyValueBlocks:X})}),!Y&&!!Q&&(0,T.jsx)(k.xu,{marginTop:ee?eR.O5:void 0,tabIndex:0,children:(0,T.jsx)(ez,{boldText:!1,fallback:(0,T.jsx)(k.xH,{accessibilityLabel:S._('Loading Pin recipe rating', 'closeupDefaultMetadata.PinRecipeRating.loading.label', 'Spinner indicates pin recipe rating is loading'),show:!0}),pinKey:j,textSize:"300"})}),(0,T.jsxs)(_.Fragment,{children:[!!(i&&$&&J)&&(0,T.jsx)(k.xu,{marginTop:ee?eR.O5:8,width:ee?"100%":void 0,children:(0,T.jsx)(E.Z,{descriptionDir:(0,q.j)($),children:(0,T.jsx)(F.Z,{description:$||"",pinKey:j})})}),!i&&(j.attribution||$||H)&&ee&&(0,T.jsx)(k.kC,{alignItems:"baseline",direction:"row",justifyContent:"start",children:(0,T.jsx)(k.xu,{marginBottom:ee&&!Q?eR.O5:void 0,marginTop:ee?eR.O5:void 0,width:"100%",children:(0,T.jsx)(er,{instagramPostLink:(0,T.jsx)(eF.Z,{closeupLinkEnabled:e_,nativeCreatorCloseupLinkEligible:!!ey,peekCloseupEnabled:et,uriComponent:eH}),isStoryPin:i,onUpdate:c,pinKey:j})})}),e1&&(ec||ee)&&(0,T.jsx)(k.xu,{marginTop:2,children:(0,T.jsx)(G.Z,{hasAffiliateLink:eQ,hasAffiliateProducts:e0})})]})]})}),ee&&eh()]}),ee&&(0,T.jsx)(k.xu,{alignItems:"stretch",display:z?"block":"flex",flex:"grow",justifyContent:"end",children:e7()})]}),et&&e7(),ep&&(0,T.jsx)(eO,{inCommentsPopoverExp:n,pinKey:j,viewParameter:l}),(0,T.jsx)(_.Fragment,{children:s})]})});function eU(e){return(0,T.jsx)(eV,{...e})}var eH=n(295483),eW=n(546345),eG=n(439122),e$=n(502447),eX=n(73579),eq=n(492841);let eY=(0,_.lazy)(()=>n.e("99339").then(n.bind(n,157720))),eJ=(0,_.memo)(function({inCommentsImprovedDropdownExp:e,inCommentsPopoverExp:t,isCommentSectionOpen:n,isStoryPin:i,isVideoPin:a,isDeletedStoryPin:l,orbacActingAs:r,orbacSubjectId:s,onCommentSectionClick:o,onCloseupBodyUpdate:d,outerPaddingSize:c=eR.g9,pin:u,viewer:p,shouldShowStlCarouselForOwnPin:m,storyPinTaggedProducts:g=[],taggedProducts:h,closeupContext:y,isLoadingNewlyCreatedComment:x,viewParameter:v,detailsScrollContainerRef:b}){let{makeDetailsArgs:S}=ef({type:"deprecated",data:u}),{checkExperiment:P}=(0,em.r)(),{isShopTheLook:w,showCanonicalComments:C}=S(!!l),I=(0,K.ZP)(),j=(0,f.TH)(),{isAuthenticated:A}=(0,ej.B)(),F=P("dweb_closeup_links").anyEnabled,E=u.is_instagram_api&&u.native_creator?.website_url&&u.native_creator?.is_primary_website_verified,{link:L,utm_link:D,tracked_link:R}=u,M=(0,eu.Zt)({utmLink:D,link:L,trackedLink:R}),N=Z((0,z.Z)((0,O.Z)((0,B.Z)({pin:u})))),V=(h||[]).filter(e=>(function(e){if("pin_tag"===e.type){let{x_percent:t,y_percent:n}=e;if(t>0&&t<=100&&n>0&&n<=100)return!0}return!1})(e)),U=(0,eD.q6)(p,u.pinner?.id,r),{closeupWithinMasonryEnabled:H,peekCloseupEnabled:W}=y,$=!A&&(0,eT.am)(j),X=!!(u.promoter&&!u.is_downstream_promotion)&&u.promoter?.id===u.native_creator?.id,{sponsorship:q,story_pin_data:Y,affiliate_link:J}=u,Q=!!J,ee=!!Y?.has_affiliate_products,et=(!!q||ee||Q)&&!X&&!$,en=(u.aggregated_pin_data?.comment_count??0)+(u.aggregated_pin_data?.did_it_data?.images_count??0),ei=!l&&C&&(e?!u.comments_disabled:!t),ea=(e?!!en:!W)||(u.aggregated_pin_data?.comment_count??0)>0,el=!i&&(!((u.rich_summary?.products??[]).length||(u.rich_metadata?.products??[]).length)&&w&&V.length>0||m)&&!a,eo=i&&g&&g.length>0,ed=(0,e$.Z)({pinKey:{type:"deprecated",data:u},orbacActingAs:r,viewer:p}),{isEligibleForStaticImageIdeaPin:ec}=(0,eX.Z)(u.story_pin_data_id),ep=ec&&g&&g.length>0,{paddingLeft:eg,paddingRight:eh,marginTop:e_,marginBottom:ey}=H?{paddingLeft:0,paddingRight:0,marginTop:0,marginBottom:e&&ei?0:2}:W?{paddingLeft:0,paddingRight:c/2,marginTop:2,marginBottom:2}:{paddingLeft:c/2,paddingRight:c,marginTop:10,marginBottom:6},ex=u.favorited_by_me?I._('Remove from favorites', 'closeup.metadataDetails.removeFromFavorites', 'Text for button allowing users to unfavorite a saved Pin'):I._('Add to favorites', 'closeup.metadataDetails.addToFavorites', 'Text for button allowing users to favorite a saved Pin'),ev=[...el||eo||ep?[(0,T.jsx)(es.Z,{paddingLeft:H?void 0:c/2,paddingRight:H?void 0:c,children:(0,T.jsx)(eI.Z,{name:"SafeSuspense_CloseupBody_StlCloseupModule",children:(0,T.jsx)(eA.Z,{children:(0,T.jsx)(eY,{closeupImageSignature:u.image_signature??"",isOwnCreatedPin:m,pin:u,pinId:u.id,taggedObjects:eo||ep?g:V,type:el?"stl":"story",viewParameter:v})})})},"closeupStlModuleMetadataPadding")]:[],...N?[(0,T.jsx)(es.Z,{paddingLeft:0,paddingRight:H?void 0:c/2,children:(0,T.jsx)(eq.Z,{recipeProps:N})},"closeupRecipeMetadataPadding")]:[],...!l&&ed?[(0,T.jsx)(es.Z,{paddingRight:H?void 0:c/2,children:(0,T.jsxs)(k.xu,{alignItems:"center",display:"flex",justifyContent:"between",marginBottom:2*!H,marginTop:2*!H,children:[H?(0,T.jsx)(k.xv,{size:"300",weight:"bold",children:ex}):(0,T.jsx)(k.xv,{weight:"bold",children:ex}),(0,T.jsx)(eW.Z,{pinKey:{type:"deprecated",data:u}})]})},"closeupFavoriteBarMetadataPadding")]:[]];return(0,T.jsx)(_.Fragment,{children:(0,T.jsxs)(k.kC,{alignItems:"stretch","data-testid":"closeup-metadata-details-flex",direction:"column",flex:"grow",height:W?"100%":void 0,justifyContent:"start",children:[H?null:(0,T.jsxs)(es.Z,{"data-testid":"closeup-metadata-details",paddingLeft:H?void 0:W?0:c/2,paddingRight:H?void 0:c/2,children:[(0,T.jsx)(k.kC,{alignItems:"baseline",direction:"row",justifyContent:"start",children:(0,T.jsx)(k.xu,{marginTop:W?void 0:2,width:"100%",children:(0,T.jsx)(er,{instagramPostLink:(0,T.jsx)(eF.Z,{closeupLinkEnabled:F,nativeCreatorCloseupLinkEligible:!!E,peekCloseupEnabled:W,uriComponent:M}),isStoryPin:i,onUpdate:d,pinKey:{type:"deprecated",data:u}})})}),et&&!H&&(0,T.jsx)(G.Z,{hasAffiliateLink:Q,hasAffiliateProducts:ee})]}),(0,T.jsx)(_.Fragment,{children:ev.map((e,t)=>(0,T.jsxs)(_.Fragment,{children:[e,H&&(0,T.jsx)(k.xu,{marginBottom:2,marginTop:2,width:"100%",children:(0,T.jsx)(eG.Z,{show:!!(ei&&ea||t<ev.length-1),surface:"closeup-metadata-details"})})]},`detailFragment-${e.key}`))}),!ev.length&&!t&&(0,T.jsx)(k.xu,{marginBottom:2,marginTop:ei&&ea?2:0,width:"100%",children:(0,T.jsx)(eG.Z,{show:H&&ei&&ea,surface:"closeup-metadata-details"})}),ei&&(0,T.jsx)(eI.Z,{name:"CanonicalCard",children:(0,T.jsx)(es.Z,{paddingLeft:eg,paddingRight:eh,children:(0,T.jsx)(k.xu,{marginBottom:ey,marginTop:e_,children:(0,T.jsx)(eH.Z,{aggregatedPinId:u.aggregated_pin_data?.id,closeupAttributionId:u.closeup_attribution?.id,closeupAttributionUsername:u.closeup_attribution?.username,commentCount:u.aggregated_pin_data?.comment_count??0,commentsDisabled:u.comments_disabled,inCommentsImprovedDropdownExp:e,isCommentSectionOpen:n,isLoadingNewCreatedComment:x,isORBACProfileManager:U,isShopTheLook:w,isVideo:!!u.videos?.video_list,onCommentSectionClick:o,orbacSubjectId:s,photoCount:u.aggregated_pin_data?.did_it_data?.images_count??0,pinId:u.id,pinKey:{type:"deprecated",data:u},pinnerId:u.pinner?.id,scrollContainerRef:b,shouldShowHeading:ea,storyPinDataId:u.story_pin_data?.id,viewParameter:v})})})})]})})});function eQ(e){return(0,T.jsx)(eJ,{...e})}var e0=n(25339);function e1({maxHeight:e,pin:t,showShoppingModule:n,trafficSource:i,viewParameter:a}){let l={height:"48px",padding:"80px 4px 16px 4px",pointerEvents:"none",transition:"opacity 0.1s ease-in-out",width:"100%",zIndex:1},[r,s]=(0,_.useState)(!1),[o,d]=(0,_.useState)(!0),c=(0,_.useRef)(null),u=()=>{let e=c.current;if(!e)return;let{scrollTop:t,scrollHeight:n,clientHeight:i}=e;s(0!==t),d(t+i!==n)};return(0,_.useEffect)(()=>{let e=c.current;if(e)return e.addEventListener("scroll",u),()=>{e.removeEventListener("scroll",u)}},[]),n&&(0,T.jsxs)(k.xu,{ref:c,dangerouslySetInlineStyle:{__style:{borderLeft:ex.tc}},"data-test-id":"peek-variant-shopping-module-container",height:"auto",maxHeight:e,overflow:"scrollY",children:[(0,T.jsx)(k.xu,{dangerouslySetInlineStyle:{__style:{...l,background:"linear-gradient(0deg, rgba(255, 255, 255, 0.00) 0%, #FFF 100%)",opacity:+!!r}},"data-test-id":"peek-variant-top-gradient",position:"absolute",top:!0}),(0,T.jsx)(e0.Z,{moduleWidth:ex.LV,pinKey:{type:"deprecated",data:t},trafficSource:i,viewParameter:a}),(0,T.jsx)(k.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...l,background:"linear-gradient(180deg, rgba(255, 255, 255, 0.00) 0%, #FFF 100%)",opacity:+!!o}},position:"absolute"})]})}var e2=n(341742),e3=n(25837);let e6=e3.cI+16,e4=`calc(100vh - ${e6}px)`;function e7(e=100){let[t,n]=(0,_.useState)(e4),i=(0,_.useRef)(null),a=`calc(${e??"100"}vh - ${e6}px)`;return(0,e2.Z)(()=>{if(!window)return;let t=window.innerHeight-e6,l=i.current?.clientHeight||0;l>t*(e??100)/100&&(a=l.toString()),n(t>l?a:l)}),{descriptionContentMaxHeight:t,visualContentContainerRef:i}}function e5(){let[e,t]=(0,_.useState)(""),n=(0,_.useRef)(null),i=(0,_.useRef)(null),a=(0,_.useRef)(null),l=(0,_.useRef)(null);return(0,_.useEffect)(()=>{let t=()=>{e&&n.current&&n.current.handleEgSurveyClick(e)};return window.addEventListener("focus",t),()=>window.removeEventListener("focus",t)},[e]),{clickthroughComponentForSurvey:e,setClickthroughComponentForSurvey:t,webLinkSurveyRef:n,imageContainerRef:i,legoLinkClickthroughAnchorRef:a,maybeLinkRef:l}}var e8=n(96413),e9=n(442082),te=n(979904),tt=n(629178),tn=n(555242),ti=n(890479),ta=n(521009),tl=n(364843),tr=n(821342),ts=n(390843),to=n(906498),td=n(123317),tc=n(448505),tu=n(790427);let tp=(0,_.lazy)(()=>n.e("18364").then(n.bind(n,206837))),tm=(0,_.lazy)(()=>n.e("71002").then(n.bind(n,154709)));function tg({handleImageClickThrough:e,imageContainerRef:t,isStoryPin:n,isWideVideo:i,onSaveButtonClick:a,pin:l,setClickthroughComponentForSurvey:r,showRepinOnInitialRender:s,trafficSource:o,viewParameter:d,viewParameterType:c,visualContentContainerRef:u={current:null}}){let[p,m]=(0,_.useState)(!1),{previous:g}=(0,ts.ou)(),h=(0,W.x4)(),y=(0,tc.Z)(),f=(0,L.G)(),x=(0,tr.Z)(),{getViewParameter:v}=ef({type:"deprecated",data:l}),b=(0,ta.Z)(),S=0===g.length,{imgSrc:w,video:C}=f,{isCloseupMediaViewerEnabled:I}=(0,tt.Z)({isShufflePin:!!l?.shuffle}),{executeWithViewTransition:j}=(0,tn.Z)({_enableViewTransitions:I}),A=(0,P.Z)({showProductDetailPage:!!l.is_eligible_for_pdp}),{anyEnabled:F}=(0,to.Z)(),E=()=>{m(e=>!e)},D=()=>{m(!1)},R=e=>({gridDescription:l.description,imageSrc:e,isFlyoutOpen:p,onFlyoutDismiss:D,onToggleFlyout:E,pinId:l.id}),{clientTrackingParams:K,paneWidth:M,closeupWithinMasonryEnabled:Z,peekCloseupEnabled:z,setIsCloseupMediaViewerOpen:O}=h,{fiftyPercentWidth:B}=(0,ex.Re)(),{maxHeight:N}=(0,te.Z)({pinKey:{type:"deprecated",data:l}}),V=(0,_.useCallback)(()=>{e&&e(),r("imageContainer")},[e,r]);if(n)return null;let{domain:U,music_attributions:H,pinner:G,should_mute:$}=l,X=!!U&&!!l.link&&!l.link.startsWith("https://i.pinimg.com"),q=()=>{b({aux_data:{image_signature:l.image_signature},component:128,event_type:101,element:I?15864:15865,view_type:3}),j(()=>{O(!0)})},Y=(0,eD.q6)(x,G?.id,y);return(0,T.jsxs)(k.xu,{ref:u,dangerouslySetInlineStyle:{__style:{containerType:F?"inline-size":"normal",display:z||A?"flex":"block",height:z||A?"100%":void 0}},"data-test-id":"visual-content-container",children:[(0,T.jsx)(ti.Z,{id:"ElementUIStateController",children:(0,T.jsx)(eL.q,{children:({hovered:e,onMouseEnter:n,onMouseLeave:a})=>(0,T.jsxs)(k.xu,{alignSelf:z||A?"center":void 0,direction:Z?"column":void 0,display:"flex",justifyContent:"center",maxHeight:A?void 0:N,maxWidth:B,onMouseEnter:n,onMouseLeave:a,position:"relative",width:"100%",children:[C&&H?.length!==0&&(0,T.jsx)(k.xu,{alignItems:"center","data-test-id":"music-attribution",display:"flex",justifyContent:"center",marginTop:6,overflow:"hidden",paddingY:8,position:"absolute",top:!0,width:M,zIndex:td.Ls,children:(0,T.jsx)(ti.Z,{id:"MusicAttribution",children:(0,T.jsx)(e8.Z,{musicAttributions:H,shouldMute:!!$})})}),(0,T.jsx)(ti.Z,{id:"VisualContent",children:(0,T.jsx)(e9.Z,{clientTrackingParams:K,closeupIsFirstPageInHistoryStack:S,flyoutShareProps:R(w),handleMediaButtonClick:q,imageContainerRef:t,isHovered:e,isORBACProfileManager:Y,isWideVideo:i,onImageClick:V,pin:l,shouldPadImage:!1,showDomainLink:X,trafficSource:o,viewParameter:v(c)})}),l&&l.showFeedback&&(0,T.jsx)(ti.Z,{id:"VisualContentObscuredOverlay",children:(0,T.jsx)(eA.Z,{children:(0,T.jsx)(tp,{pin:l})})})]})})}),(0,T.jsx)(k.mh,{zIndex:tu.lI,children:(0,T.jsx)(ti.Z,{id:"ExperienceTooltip",children:(0,T.jsx)(tl.Qp,{anchor:u.current,experienceIds:[506204],flyoutSize:"md",forceDirection:!Z,idealDirection:Z?"right":"down",placementId:12,showCaret:!0,textWeight:"normal"})})}),I&&(0,T.jsx)(eI.Z,{name:"SafeSuspense_CloseupImageOverlay_MediaViewer",children:(0,T.jsx)(ti.Z,{id:"CloseupMediaViewer",children:(0,T.jsx)(eA.Z,{children:(0,T.jsx)(tm,{flyoutShareProps:R(w),onClose:({isExitButton:e,isClick:t})=>{b({aux_data:{image_signature:l.image_signature},component:128,event_type:t?101:97,element:e?15867:15866,view_type:3}),j(()=>{O(!1)})},onImageClick:()=>{e&&e()},onSaveButtonClick:a,pin:l,rounding:24,showRepinOnInitialRender:s,trafficSource:o,viewParameter:d})})})})]})}var th=n(573647),t_=n(289032),ty=n(218831);let tf={__style:{marginBottom:"0",marginTop:"0",maxWidth:eR.KP,minWidth:eR.Gg}},tx=(0,_.memo)(function({children:e,isWideVideo:t}){let{showCloseupContentRight:n,maxWidth:i,paneWidth:a,peekCloseupEnabled:l,closeupWithinMasonryEnabled:r,viewportSize:s}=(0,W.x4)(),{maxHeight:o}=(0,ex.Re)(),{mainImage:d}=(0,L.G)(),{peekRedesignFastFollowsEnabled:c}=(0,eb.Z)(d),u=n||t?i:a;return u=r&&"sm"!==s||l?void 0:u,r?(0,T.jsx)(k.xu,{"data-test-id":"closeup-lego-container",height:"100%",children:e}):(0,T.jsx)(k.xu,{"data-test-id":"closeup-lego-container",display:"flex",height:"100%",maxHeight:c?void 0:o,maxWidth:u,position:"relative",rounding:8,width:"100%",children:(0,T.jsx)("div",{onClick:e=>{e.stopPropagation()},style:{display:"flex"},children:(0,T.jsx)(k.xu,{dangerouslySetInlineStyle:{__style:{cursor:"auto"}},display:"flex",children:(0,T.jsx)(k.xu,{dangerouslySetInlineStyle:t?tf:{},display:"flex",children:e})})})})});function tv(e){return(0,T.jsx)(tx,{...e})}var tb=n(327387),tk=n(477464),tS=n(44344),tP=n(603316);let tw=(0,eZ.Z)(()=>Promise.all([n.e("86934"),n.e("9767")]).then(n.bind(n,347353)),{ssr:!1},e=>347353,"ChangeBoardModalCommon",e=>["86934","9767"]),tC=(0,eZ.Z)(()=>Promise.all([n.e("44880"),n.e("55759")]).then(n.bind(n,523226)),void 0,e=>523226,"CloseupActionBarCommon",e=>["44880","55759"]),tI=(0,eZ.Z)(()=>n.e("62220").then(n.bind(n,941798)),void 0,e=>941798,"app-common-react-components-closeup-LeadGen-LeadGenCloseupBodyContent",e=>["62220"]),tT=(0,eZ.Z)(()=>n.e("30644").then(n.bind(n,596423)),void 0,e=>596423,"app-common-react-components-closeup-CloseupBody-CloseupInlineCommentComposer",e=>["30644"]),tj=(0,_.lazy)(()=>n.e("90657").then(n.bind(n,156020))),tA=({children:e,metadataContainerRef:t,closeupWithinMasonryEnabled:n})=>n?(0,T.jsx)(k.xu,{ref:t,width:"100%",children:e}):(0,T.jsx)(_.Fragment,{children:e}),tF=(0,_.memo)(({children:e,clientTrackingParams:t,pinKey:n,pinImageUrl:i,closeupNavigationType:a})=>{let l=(0,w.Z)(j,n),r=(0,P.Z)({showProductDetailPage:!!l.isEligibleForPdp}),s=(0,_.useMemo)(()=>l,[l]),o=(0,I.Z)(s),{entityId:d}=l,c=(0,_.useMemo)(()=>o(),[o]),u=(0,_.useMemo)(()=>l.isEligibleForPdp?c:{},[c,l.isEligibleForPdp]),p=(0,_.useMemo)(()=>({imageURL:i,clientTrackingParams:t}),[t,i]),m=(0,_.useMemo)(()=>({pin_id:d}),[d]);return(0,T.jsx)(C.Fw,{clientTrackingParams:t,closeupImpressionType:13,closeupNavigationType:a,componentType:85,contextLogData:u,impressionAuxFields:p,impressionType:"Pin",loggingId:d,slotIndex:-1,viewData:m,viewType:3,children:({impressionTrackerRef:t})=>(0,T.jsx)(k.xu,{ref:t,"data-test-id":"closeup-visual-container",width:r?"100%":void 0,children:e})})}),tE=(0,_.memo)(tg);function tL({isWideVideo:e,didShortClickThrough:t,webLinkSurveyState:{webLinkSurveyRef:n,imageContainerRef:i,legoLinkClickthroughAnchorRef:a,maybeLinkRef:l},pin:r,outerBodyStyle:s,inCommentsImprovedDropdownExp:o,inCommentsPopoverExp:d,isEligibleForPinReactions:c,isStoryPin:u,trafficSource:p,visualContentContainer:m,outerPaddingSize:g,isInStream:h,metadataContainerRef:x,onClickThrough:v,viewParameter:b,metadata:S,viewer:w,orbacSubjectId:C,setIsLoadingNewlyCreatedComment:I=()=>{},descriptionContentMaxHeight:j,marginBottom:A=0,isDeletedStoryPin:F,onSaveButtonClick:E,showRepinOnInitialRender:L,goBack:D,onUpdate:R,routePush:M,closeupActionBarMaxWidth:Z,visualContentContainerRef:z,showPDPComments:O,actionBarContainerRef:B,blendedUIScrollContainerRef:N}){let{descriptionPaneWidth:V,viewportSize:U,clientTrackingParams:H,closeupWithinMasonryEnabled:G,peekCloseupEnabled:$,showCloseupContentRight:X}=(0,W.x4)(),q=(0,y.v9)(({changeBoardFromToast:e})=>e)||{},Y=(0,e0.F)(r.id),{makeDetailsArgs:J}=ef({type:"deprecated",data:r}),{showCanonicalComments:Q}=J(!!F),ee=Y&&0!==Y.length,et=(0,K.ZP)(),en=(0,f.k6)(),ei=(0,_.useRef)(null),{setCloseupBodyWidth:ea}=(0,ty.K)(),el=(0,_.useCallback)(()=>{let e=x.current;e&&ea(t=>{let n=e.offsetWidth;return t!==n?n:t})},[x,ea]);(0,tS.Z)(el,x);let er=(0,tc.Z)(),{is_eligible_for_aggregated_comments:es,pinner:eo}=r,ed=(0,eD.q6)(w,eo?.id,er),ec=r.comments_disabled?0:(r.aggregated_pin_data?.comment_count??0)+(r.aggregated_pin_data?.did_it_data?.images_count??0),eu=!(ed&&!C)&&(!r.is_eligible_for_pdp||!!O)&&!r.comments_disabled&&!!es&&!(o||d),ep=!!r.promoted_is_lead_ad,em=0!==Object.keys(r).length,eg=z?.current?.clientHeight||0,[eh,e_]=(0,_.useState)(!0);(0,_.useEffect)(()=>{let e=(0,t_.Z)(()=>{G&&e_(0===window.scrollY)},50);return window.addEventListener("scroll",e,{passive:!0}),()=>{window.removeEventListener("scroll",e)}},[G]),(0,e2.Z)(()=>{r.closeup_attribution?.id&&(0,tP.nP)("web.closeup.has_attribution.yes"),(0,tP.nP)("web.closeup.has_attribution.no")});let ey=(0,_.useMemo)(()=>(0,tk.Z)(en,p),[en,p]),ev=(0,_.useMemo)(()=>(r.images&&r.images["236x"]?.url)??"",[r.images]),eb=(0,_.useMemo)(()=>({type:"deprecated",data:r}),[r]),ek=(0,T.jsx)(ti.Z,{id:"CloseupMainPinImpressionAuthDesktop",children:(0,T.jsx)(tF,{clientTrackingParams:H,closeupNavigationType:ey,pinImageUrl:ev,pinKey:eb,children:m})}),{fiftyPercentWidth:eS,fiftyPercentHeight:eP}=(0,ex.Re)(),ew=e&&!G?eR.KP:void 0;ew=$?eS:ew;let eC=(u||G)&&!$?void 0:j;$&&(eC="sm"===U?eP:Math.max(ex.ql,z?.current?.clientHeight??0));let eT={...s,boxShadow:"unset",border:ex.tc,overflow:"clip"},ej=o?Q&&!r.comments_disabled:!d,eF=G&&g&&!ej?g:0,eE=(0,P.Z)({showProductDetailPage:!!r.is_eligible_for_pdp}),eL="sm"===U,{maxHeight:eK}=(0,th.Z)({showProductDetailPage:!!r.is_eligible_for_pdp,skipAspectRatioCheck:!0}),eM=(0,_.useMemo)(()=>(0,T.jsx)(ti.Z,{id:"CloseupInlineCommentComposer",children:(0,T.jsx)(tT,{aggregatedPinDataId:r.aggregated_pin_data?.id,closeupAttributionId:r.closeup_attribution?.id,commentCount:ec,disablePhotoCommentSelection:!!r.done_by_me,inCommentsImprovedDropdownExp:o,isEligibleForPinReactions:c,isPDP:r.is_eligible_for_pdp,orbacSubjectId:C,pinId:r.id,privatePin:"secret"===r.privacy,reactionByMe:r.reaction_by_me||0,reactionCounts:r.reaction_counts,setIsLoadingNewlyCreatedComment:I,showCommentComposer:eu,showReactBackground:!G,storyPinDataId:r.story_pin_data_id,viewParameter:b})}),[r.aggregated_pin_data?.id,r.closeup_attribution?.id,ec,r.done_by_me,o,c,r.is_eligible_for_pdp,C,r.id,r.privacy,r.reaction_by_me,r.reaction_counts,I,eu,G,r.story_pin_data_id,b]),eZ=(0,_.useMemo)(()=>(!G||eE)&&eu?X?(0,T.jsx)(k.Le,{bottom:0,children:eM}):eM:null,[G,eE,eu,X,eM]);return(0,T.jsx)(_.Fragment,{children:(0,T.jsxs)(k.xu,{height:"100%",marginBottom:A,position:"relative",width:"100%",children:[(0,T.jsx)(tv,{isWideVideo:e,children:(0,T.jsxs)(k.xu,{display:G?void 0:"flex",position:"relative",children:[!t&&(0,T.jsx)(eA.Z,{children:(0,T.jsx)(ti.Z,{id:"WebLinkSurvey",children:(0,T.jsx)(tj,{ref:n,imageContainerRef:i,legoLinkClickthroughAnchorRef:a,maybeLinkRef:l,pin:{aggregatedPinData:r.aggregated_pin_data&&{isShopTheLook:r.aggregated_pin_data.is_shop_the_look},board:r.board&&{entityId:r.board.id,owner:r.board.owner&&{entityId:r.board.owner.id??""}},entityId:r.id,imageSignature:r.image_signature,isDownstreamPromotion:r.is_downstream_promotion,isPromoted:r.is_promoted,link:r.link,recommendationReason:r.recommendation_reason&&{reason:r.recommendation_reason.reason}}})})}),(0,T.jsx)(k.xu,{color:em?"default":"transparent",dangerouslySetInlineStyle:{__style:{...eT}},"data-test-id":"closeup-body-style",display:"flex",paddingX:G&&!eE?4:void 0,position:"relative",children:(0,T.jsx)(tA,{closeupWithinMasonryEnabled:G,metadataContainerRef:x,children:(0,T.jsx)(k.kC,{alignItems:"stretch",height:G?"100%":void 0,justifyContent:"start",children:(0,T.jsx)(tb.Z,{children:em?(0,T.jsx)(_.Fragment,{children:r.promoted_is_lead_ad?(0,T.jsx)(ti.Z,{id:"LeadGenCloseupBodyContent",children:(0,T.jsx)(tI,{clientTrackingParams:H,pin:r,data:!!r,goBack:D,onUpdate:R,viewParameter:b,onSaveButtonClick:E,showRepinOnInitialRender:L,actionBarContainerRef:B,trafficSource:p,onClickThrough:v,isStoryPin:u,descriptionPaneWidth:V,metadataContainerRef:x,visualContentContainer:m,visualContentContainerHeight:eg,showLeadPinStdBeta:ep})}):(0,T.jsxs)(_.Fragment,{children:[(0,T.jsxs)(k.xu,{alignContent:"center",alignItems:"stretch",alignSelf:"center",dangerouslySetInlineStyle:{__style:eE?{overflowY:"auto",overflowX:"hidden"}:{}},direction:"column",display:"flex",justifyContent:"start",maxHeight:eK,width:"100%",children:[!eE&&G&&(0,T.jsx)(k.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{...!eh?eR.fF:{},borderTop:eh?void 0:ex.tc,position:"sticky",top:"80px"}},"data-test-id":"closeup-action-bar",display:"flex",justifyContent:"center",marginEnd:-4,marginStart:-4,overflow:"visible",paddingX:4,zIndex:tu.$8,children:(0,T.jsx)(ti.Z,{id:"CloseupActionBar",children:(0,T.jsx)(tC,{actionBarContainerRef:B,goBack:D,gridDescription:r.description??"",inCommentsImprovedDropdownExp:o,inCommentsPopoverExp:d,isDeletedStoryPin:!!F,isEligibleForAggregatedComments:!!es,isEligibleForPinReactions:c,isOnSecretBoard:!1,isStoryPin:u,onEditSubmit:R,onSaveButtonClick:E,outerPaddingSize:g,pin:r,routePush:M,scrollContainerRef:N?.current||x.current,showRepinOnInitialRender:L,viewParameter:b})})}),ek]}),(0,T.jsx)(k.xu,{dangerouslySetInlineStyle:{__style:{containerType:eE&&X?"size":void 0,overflow:$&&eL?"scroll":void 0,flexBasis:eE&&!eL?"70%":void 0}},"data-test-id":"description-content-container",direction:"column",display:"flex",flex:"grow",height:eE&&eL?void 0:"100%",maxHeight:eE?eR.Id:eC,maxWidth:ew,minHeight:eE&&!eL?eR.dm:void 0,paddingX:eE?4:void 0,width:e||G?void 0:V,children:r?(0,T.jsxs)(_.Fragment,{children:[(!h&&!G||eE)&&(0,T.jsx)(eI.Z,{name:"SafeSuspense_CloseupBody_CloseupActionBar",children:(0,T.jsx)(tC,{actionBarContainerRef:ei,goBack:D,gridDescription:r.description??"",inCommentsImprovedDropdownExp:o,inCommentsPopoverExp:d,isDeletedStoryPin:!!F,isEligibleForAggregatedComments:!!es,isEligibleForPinReactions:c,isOnSecretBoard:!1,isStoryPin:u,maxWidth:Z,onEditSubmit:R,onSaveButtonClick:E,outerPaddingSize:g,pin:r,routePush:M,scrollContainerRef:N?.current||x.current,showRepinOnInitialRender:L,viewParameter:b})}),(0,T.jsx)(k.xu,{dangerouslySetInlineStyle:{__style:{paddingLeft:G?void 0:$?ex.Gd:eR.g9,paddingBottom:G?eF:void 0}},direction:"column",display:"flex",flex:"grow",children:(0,T.jsxs)(k.xu,{ref:G?void 0:x,alignItems:"stretch",direction:"column",display:"flex",flex:"grow",justifyContent:"start",overflow:G||eE?void 0:"auto",children:[(0,T.jsx)(k.xu,{alignItems:"stretch",dangerouslySetInlineStyle:{__style:{rowGap:G?4*eR.O5:void 0}},direction:"column",display:"flex",height:$||eE?"100%":void 0,justifyContent:"start",width:$?"100%":void 0,children:S}),G&&!eE&&eu&&eM]})}),eZ]}):(0,T.jsx)(k.xu,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",paddingY:4,children:(0,T.jsx)(k.xH,{accessibilityLabel:et._('Pin details loading', ' - ', ' -- '),show:!0})})}),$&&"lg"===U&&(0,T.jsx)(ti.Z,{id:"PeekVariantShoppingModule",children:(0,T.jsx)(e1,{maxHeight:z?.current?.clientHeight,pin:r,showShoppingModule:ee,trafficSource:p,viewParameter:b})})]})}):(0,T.jsx)(k.kC,{alignItems:"center",height:300,justifyContent:"center",width:"100%",children:(0,T.jsx)(k.xH,{accessibilityLabel:et._('Pin loading', ' - ', ' -- '),show:!0})})})})})})]})}),q.shouldOpenModal&&q.newPin&&q.originalPinId===r.id&&(0,T.jsx)(eI.Z,{name:"SafeSuspense_CloseupBody_ChangeBoardModal",children:(0,T.jsx)(ti.Z,{id:"ChangeBoardModal",children:(0,T.jsx)(tw,{experience:q.experience,pinKey:{type:"deprecated",data:q.newPin}})})})]})})}let tD=(0,_.memo)(tL),tR=(0,_.memo)(function({isStoryPin:e,isVideoPin:t,isWideVideo:n,pin:i,taggedProducts:a,trafficSource:l,viewParameterType:r,onClickThrough:s,didShortClickThrough:o,goBack:d,isCloseupMaximized:c=!1,isInStream:u=!1,isDeletedStoryPin:p,onSaveButtonClick:m,onUpdate:g,outerBodyStyle:h,outerPaddingSize:y,routePush:f,showRepinOnInitialRender:x,viewType:v,isCommentSectionOpen:b,onCommentSectionClick:P,onCloseupBodyUpdate:w,shouldShowStlCarouselForOwnPin:C,storyPinTaggedProducts:I,clientTrackingParams:j,viewportSize:A,shouldShowPartnerModule:F,trendsData:E,showTrendsOnPinCloseup:L,showPinStats:D}){let{checkExperiment:R}=(0,em.r)(),[K,M]=(0,_.useState)(!1),Z=(0,_.useRef)(null),z=(0,_.useRef)(null),O=(0,W.x4)(),{closeupWithinMasonryEnabled:B}=O,N=(0,tr.Z)(),V=B&&!!i.is_eligible_for_aggregated_comments&&"enabled_popover"===R("ce_dweb_new_closeup_comment_module").group,U=B&&!!i.is_eligible_for_aggregated_comments&&"enabled_dropdown"===R("ce_dweb_new_closeup_comment_module").group,H=!i.is_promoted&&!i.is_downstream_promotion&&!p,G=(0,tc.Z)(),$=(0,eD.lJ)(N,G),X=e5(),q=(0,_.useCallback)(()=>{s&&s({componentType:129}),X.setClickthroughComponentForSurvey("legoMaybeLink")},[s,X]),Y=e7(),{getViewParameter:J}=ef({type:"deprecated",data:i}),Q=J(r),{setClickthroughComponentForSurvey:ee,imageContainerRef:et}=X,{group:en}=R("webpack_react_profiler");if("enabled_slow_closeupbody"===en){let e=performance.now(),t=e;for(;t-e<30;)t=performance.now()}let ei=(0,_.useCallback)(()=>{s({wasImageClicked:!0})},[s]),ea=(0,_.useMemo)(()=>i,[i]),el=(0,_.useMemo)(()=>l,[l]),er=(0,_.useMemo)(()=>Q,[Q]),es=(0,_.useMemo)(()=>r,[r]),eo=(0,T.jsx)(tE,{handleImageClickThrough:ei,imageContainerRef:et,isStoryPin:e,isWideVideo:n,onSaveButtonClick:m,pin:ea,setClickthroughComponentForSurvey:ee,showRepinOnInitialRender:x,trafficSource:el,viewParameter:er,viewParameterType:es,visualContentContainerRef:Y.visualContentContainerRef}),ed=(0,T.jsx)(ti.Z,{id:"MetadataDetails",children:(0,T.jsx)(eQ,{closeupContext:O,detailsScrollContainerRef:z.current,inCommentsImprovedDropdownExp:U,inCommentsPopoverExp:V,isCommentSectionOpen:b,isDeletedStoryPin:p,isLoadingNewlyCreatedComment:K,isStoryPin:e,isVideoPin:t,onCloseupBodyUpdate:w,onCommentSectionClick:P,orbacActingAs:G,orbacSubjectId:$,outerPaddingSize:y,pin:i,shouldShowStlCarouselForOwnPin:C,storyPinTaggedProducts:I,taggedProducts:a,viewer:N,viewParameter:Q})}),ec=(0,_.useMemo)(()=>({type:"deprecated",data:i}),[i]),eu=(0,T.jsx)(ti.Z,{id:"DefaultMetadata",children:(0,T.jsx)(eU,{clientTrackingParams:j,details:ed,inCommentsPopoverExp:V,isDeletedStoryPin:p,isStoryPin:e,onClickThrough:s,onCloseupBodyUpdate:w,orbacActingAs:G,outerPaddingSize:y,pinKey:ec,shouldShowPartnerModule:F,showPinStats:D,showTrendsOnPinCloseup:L,trafficSource:l,trendsData:E,viewer:N,viewParameter:Q,viewportSize:A})}),ep=(0,T.jsx)(tD,{actionBarContainerRef:Z,descriptionContentMaxHeight:Y.descriptionContentMaxHeight,didShortClickThrough:o,goBack:d,inCommentsImprovedDropdownExp:U,inCommentsPopoverExp:V,isCloseupMaximized:c,isEligibleForPinReactions:H,isInStream:u,isStoryPin:e,isWideVideo:n,metadata:eu,metadataContainerRef:z,onClickThrough:q,onSaveButtonClick:m,onUpdate:g,orbacSubjectId:$,outerBodyStyle:h,outerPaddingSize:y,pin:i,routePush:f,setIsLoadingNewlyCreatedComment:M,showRepinOnInitialRender:x,trafficSource:l,viewer:N,viewParameter:Q,viewType:v,visualContentContainer:eo,visualContentContainerRef:Y.visualContentContainerRef,webLinkSurveyState:X}),eg=(0,T.jsx)(ti.Z,{id:"CloseupPostDownloadUpsellProvider",children:(0,T.jsx)(S.z8,{pin:i,children:ep})}),eh=(0,_.useMemo)(()=>({web_gestalt_calico:{anyEnabled:!0,group:"enabled"}}),[]);return i?.ad_data?.exclude_from_grid_rep_tests&&R("web_exclude_from_grid_rep_tests").anyEnabled?(0,T.jsx)("div",{className:"excludeFromGridRepTests",children:(0,T.jsx)(k.II,{value:eh,children:eg})}):eg});function tK(e){return(0,T.jsx)(tR,{...e})}var tM=n(86295);let tZ=[tM.gO.ADMIN,tM.gO.CAMPAIGN_MANAGER];var tz=n(753261),tO=n(774721),tB=n(222555),tN=n(389965),tV=n(462585);let tU=(0,eZ.Z)(()=>n.e("96615").then(n.bind(n,174753)),{ssr:!1},e=>174753,"CloseupPartnerModule",e=>["96615"]),tH=(0,eZ.Z)(()=>n.e("54347").then(n.bind(n,15863)),{ssr:!1},e=>15863,"SponsorshipApprovalModule",e=>["54347"]),tW=(0,_.memo)(function({permissions:e,pinId:t,sponsorshipStatus:n,creatorUsername:i}){return(0,T.jsx)(k.xu,{"data-test-id":"sponsorship-approval-module",display:"flex",children:(0,T.jsx)(eI.Z,{name:"SafeSuspense_Closeup_SponsorshipApprovalModule",children:(0,T.jsx)(tH,{business_role:e,creatorUsername:i??"",pinId:t,sponsorshipStatus:n})})})}),tG=(0,_.memo)(function({borderStyle:e,isStoryPin:t,closeupWidth:n,isWideVideo:i,viewportSize:a,pinKey:l,showPinStats:r,trendsData:s}){return(0,T.jsx)(k.xu,{"data-test-id":"PartnerModule",width:"lg"===a&&i?n:"100%",children:(0,T.jsx)(eI.Z,{name:"SafeSuspense_Closeup_PartnerModule",children:(0,T.jsx)(tU,{borderStyle:e,isStoryPin:t,pinKey:l,showPinStats:r,trendsData:s,viewportSize:a})})})}),t$=(0,_.memo)(function({clientTrackingParams:e,closeupWithinMasonryEnabled:t,didShortClickThrough:n,executeClickthrough:i,handleBackButtonClick:a,handleCarouselSwipe:l,handleCloseupBodyContainerRef:r,handleIdeaCloseupCommentIconClick:s,handleSaveClicked:o,isCloseupMaximized:d,isCommentThreadExpanded:c,isEligibleForStaticImageIdeaPin:u,isLimitedLogin:p,maxWidth:m,onToggleIdeaPinCloseupPanel:g,peekCloseupEnabled:h,pin:y,pinDerivedData:f,pinResource:x,routePush:b,shopping:S,showRepinOnInitialRender:P,storyPinTaggedProducts:w,trafficSource:C,trendsData:I,updateViewportSize:j,userBusinessRoleResource:A,viewportSize:F}){let E,L=(0,ej.B)(),D=(0,tr.Z)(),{checkExperiment:R}=(0,em.r)(),K=(0,tc.Z)(),{id:M,sponsorship:Z,story_pin_data_id:z,story_pin_data:O}=y,N=!!z&&!u,V=!!O?.is_deleted,{creator:U,sponsor:H,status:W}=Z||{},{username:G}=U||{},{username:$}=H||{},{refresh:X}=x,q=(0,eD.lJ)(D,K),{data:Y}=A||{},J=!y.is_repin&&!!$,Q=$===(D.isAuth?D.username:void 0)?[tM.V3.OWNER]:Y?.permissions,ee=(0,_.useMemo)(()=>$===(D.isAuth?D.username:void 0)?[tM.V3.OWNER]:Y?.permissions,[Y?.permissions,$,D]),et=$===(D.isAuth?D.username:void 0)||!!Q?.find(e=>tZ.includes(e)),en=$===(D.isAuth?D.username:void 0)||!!Q?.find(e=>tZ.includes(e)),{isWideVideo:ei}=(0,tB.Z)((0,B.Z)({pin:y}))||{},ea=(0,tO.Z)({type:"deprecated",data:y},D,q),el=(0,v.CA)(I?.data),er=J&&D.isAuth&&R("mweb_web_android_ios_backend_clbc_display_controls").anyEnabled&&(et&&0===W||en&&1===W),es=y.link_domain?.official_user?.username||y.native_creator?.username,eo=(0,eD.Ms)(D,K)===es&&(0,eD.nl)(D,K)&&L.experimentsClient.checkExperiment("web_stl_tooling").anyEnabled,ed=N&&(O?.pages?.length??0)>0,ec=(0,tz.WE)(D,F,ea,el,I,er);E=N?{boxShadow:void 0,borderRadius:void 0}:t?ex.ko:ex.te;let eu=er&&"number"==typeof W,ep=ec&&!N&&!t,eg=(0,_.useMemo)(()=>el?I?.data?.results:null,[el,I]),eh=(0,_.useMemo)(()=>({type:"deprecated",data:y}),[y]);return(0,T.jsx)(k.xu,{dangerouslySetInlineStyle:{__style:N?{...ex.BI.storyPinGradientStyle}:{}},"data-test-id":"gradient",display:"flex",flex:h?void 0:"grow",id:"gradient",justifyContent:"center",marginBottom:4*!t,width:h?void 0:"100%",children:(0,T.jsxs)(_.Fragment,{children:[ed&&O&&(0,T.jsx)(tN.Z,{appConfig:{type:"authDesktop",onClickThrough:i,onNavigateBack:a},clientTrackingParams:e,onIdeaPinCloseupCommentClick:()=>{s(!0)},onTogglePanel:g,pin:y,storyPinData:O,variant:"closeup",viewParameterType:157,viewType:3}),(0,T.jsx)(tV.Z,{isStoryPin:N,isWideVideo:ei,children:(0,T.jsx)(eI.Z,{name:"CloseupBody",children:(0,T.jsxs)(k.xu,{ref:r,color:"default",direction:"column",display:"flex",height:"100%",width:"100%",children:[(0,T.jsxs)(k.xu,{alignItems:ei?"center":void 0,direction:ei?"column":void 0,display:ei?"flex":void 0,children:[eu&&(0,T.jsx)(tW,{creatorUsername:G,permissions:ee,pinId:M,sponsorshipStatus:W}),ep&&(0,T.jsx)(tG,{borderStyle:E,closeupWidth:m,isStoryPin:N,isWideVideo:ei,pinKey:eh,showPinStats:ea,trendsData:eg,viewportSize:F})]}),(0,T.jsx)(k.xu,{"data-test-id":"closeup-body",flex:"grow",children:(0,T.jsx)(ti.Z,{id:"CloseupBody",children:(0,T.jsx)(tK,{clientTrackingParams:e,didShortClickThrough:n,goBack:a,handleCarouselSwipe:l,isCloseupMaximized:d,isCommentSectionOpen:c,isDeletedStoryPin:!!V,isStoryPin:N,isVideoPin:f.isVideoPin,isWideVideo:!!ei,onClickThrough:i,onCloseupBodyUpdate:j,onCommentSectionClick:s,onSaveButtonClick:o,onUpdate:X,outerBodyStyle:E,outerPaddingSize:eR.ER,pin:y,routePush:b,shopping:S,shouldShowPartnerModule:ec,shouldShowStlCarouselForOwnPin:eo,showPinStats:ea,showRepinOnInitialRender:!p&&P,showTrendsOnPinCloseup:el,storyPinTaggedProducts:w,trafficSource:C,trendsData:I,viewParameterType:ed?157:void 0,viewportSize:F,viewType:3})})})]})})})]})})});function tX(e){return(0,T.jsx)(t$,{...e})}var tq=n(501392);let tY=e=>"enabled_onclick_compare_copy"===e||"enabled_onclick_explore_copy"===e,tJ=e=>"enabled_onhover_compare_copy"===e||"enabled_onhover_explore_copy"===e||"employees"===e;function tQ({url:e,images:t,id:n,label:i,onPinClick:a,position:l=0}){let[r,s]=(0,_.useState)(!1),{logContextEvent:o}=(0,ew.u)();return(0,T.jsx)(k.xu,{"aria-selected":r?"true":"false","data-test-id":"recent-pin",id:n,role:"option",children:(0,T.jsx)(k.Tg,{href:e,onMouseEnter:()=>{s(!0),o({event_type:105,component:15421,element:18070,aux_data:{position:l.toString()}})},onMouseLeave:()=>{s(!1)},onTap:()=>{o({event_type:101,component:15421,element:18070,aux_data:{position:l.toString()}}),a&&a()},rounding:3,tabIndex:-1,tapStyle:"compress",children:(0,T.jsx)(k.zd,{height:137,rounding:3,wash:r,width:103,children:t["236x"]?.url&&(0,T.jsx)(k.Ee,{alt:i,fit:"cover",naturalHeight:t["236x"]?.height??1,naturalWidth:t["236x"]?.width??1,src:t["236x"].url})})})})}let t0={backdropFilter:"blur(4px)",backgroundColor:"rgba(255, 255, 255, 0.90)"},t1={...t0,transitionDuration:"0.3s",transitionTimingFunction:"cubic-bezier(0.34, 1.56, 0.64, 1)",transitionProperty:"transform, opacity",transformOrigin:"bottom left"},t2={...t0};function t3({toggle:e,recentPins:t,experimentGroup:n,onPinClick:i,l2Interest:a,isAnimatingOut:l,splitByVertical:r,handleMouseLeave:s}){var o;let d=(0,K.ZP)(),c=(0,_.useRef)(null),u=(0,k.JZ)(),[p,m]=(0,_.useState)(!1),{logContextEvent:g}=(0,ew.u)();(0,e2.Z)(()=>{m(!0)});let h=(0,_.useMemo)(()=>{let e=u?t2:t1;if(u){let t=0;return l?t=0:p&&(t=1),{...e,opacity:t,transform:"scale(1)"}}let t=0,n=.9;return l?(t=0,n=.9):p&&(t=1,n=1),{...e,opacity:t,transform:`scale(${n})`}},[u,p,l]);o=()=>{tY(n)&&e()},(0,_.useEffect)(()=>{let e=e=>{!c.current||c.current.contains(e.target)||o(e)},t=e=>{"Escape"===e.key&&o(e)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),document.addEventListener("keydown",t),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e),document.removeEventListener("keydown",t)}},[c,o]);let y=(0,_.useMemo)(()=>"enabled_onclick_explore_copy"===n||"enabled_onhover_explore_copy"===n?d._('Previously explored', 'breadcrumbs.expanded.previouslyExplored', 'Title shown when users can view previously explored pins in the breadcrumbs'):d._('Compare ideas', 'breadcrumbs.expanded.compareIdeas', 'Title shown when users can view recently viewed pins in the breadcrumbs'),[n,d]),f="enabled_onclick_compare_copy"===n||"enabled_onhover_compare_copy"===n||"employees"===n,x=tY(n);return(0,T.jsxs)(k.xu,{ref:c,alignItems:"start",borderStyle:"shadow",dangerouslySetInlineStyle:{__style:h},"data-test-id":"breadcrumbs-expanded",direction:"column",display:"flex",justifyContent:"center",onMouseLeave:s,padding:4,rounding:5,children:[(0,T.jsxs)(k.kC,{alignItems:"center",justifyContent:"between",width:"100%",children:[(0,T.jsx)(k.xv,{weight:"bold",children:y}),x&&(0,T.jsx)(k.hU,{accessibilityLabel:d._('Close breadcrumbs', 'breadcrumbs.expanded.closeBreadcrumbs', 'Label for the button that closes the expanded breadcrumbs view'),icon:"minimize",iconColor:"darkGray",onClick:()=>{g({event_type:101,component:15421,element:18071}),e()},size:"sm"})]}),f&&(0,T.jsx)(k.xv,{color:"subtle",size:"100",children:r&&a?(0,M.nk)(d._('Recently viewed {{ interestName }} ideas', 'breadcrumbs.expanded.recentlyViewedInterestIdeas', 'Subtitle shown above the list of recently viewed ideas for a specific interest in the breadcrumbs, interestName: the name of the interest category'),{interestName:a.toLowerCase()}).join(""):d._('Recently viewed Pins', 'breadcrumbs.expanded.recentlyViewedPins', 'Subtitle shown above the list of recently viewed pins in the breadcrumbs')}),(0,T.jsx)(k.xu,{marginTop:2,children:(0,T.jsx)(k.kC,{gap:2,children:t.map((e,t)=>(0,T.jsx)(tQ,{...e,onPinClick:i,position:t},e.id))})})]})}var t6=n(573631);let t4={backdropFilter:"blur(4px)",backgroundColor:"rgba(255, 255, 255, 0.90)",animationDelay:"100ms",transitionDelay:"100ms",transitionDuration:".85s",transitionTimingFunction:"cubic-bezier(.19, 1.32, .48, 1)",transitionProperty:"transform, opacity",filter:"drop-shadow( 0px 0px 8px rgba(0,0,0,0.1))",shrink:0},t7={backdropFilter:"blur(4px)",backgroundColor:"rgba(255, 255, 255, 0.90)",transitionProperty:"opacity",transitionDuration:".85s",transitionTimingFunction:"ease-out",filter:"drop-shadow( 0px 0px 8px rgba(0,0,0,0.1))"},t5={...t4,transform:"translateY(200px)",opacity:0},t8={...t4,transform:"translateY(0)",opacity:1},t9={...t7,transform:"translateY(200px)",opacity:0},ne={...t7,transform:"translateY(0)",opacity:1},nt={...t4,transform:"translateY(0)",opacity:1},nn={...t7,transform:"translateY(0)",opacity:1},ni={border:"1px solid white",transform:"rotate(-3deg)",borderRadius:"9px",transition:"transform 0.2s ease-out",marginBottom:"1px"},na={border:"1px solid white",transform:"rotate(-3deg)",borderRadius:"9px"};function nl({toggle:e,recentPins:t,shouldShow:n,experimentGroup:i,showFirstTimeUI:a,isHovered:l=!1,isAnimatingOut:r,handleMouseEnter:s,handleMouseLeave:o}){let d=(0,_.useMemo)(()=>t.slice(0,3),[t]),[c,u]=(0,_.useState)(!1),p=(0,k.JZ)(),m=(0,t6.b)(),g=(0,K.ZP)(),{logContextEvent:h}=(0,ew.u)();(0,_.useEffect)(()=>{u(!0)},[]);let y=(0,_.useMemo)(()=>71,[]),f=(0,_.useMemo)(()=>r?{...p?nn:nt,opacity:1}:m?p?{...n?ne:t9,opacity:c&&n?1:0}:{...n?t8:t5,opacity:c&&n?1:0}:{...p?nn:nt,opacity:+!!c},[n,p,m,c,r]),x=(0,_.useCallback)(()=>{tY(i)&&(h({event_type:101,component:15421,element:18069}),e())},[e,i,h]),v=(0,_.useCallback)(e=>{let t=`${-(14*e)}px`;if(p)return{...na,transform:`rotate(-3deg) translateX(${t})`};if(!(a||l&&!tJ(i)))return{...ni,transform:`rotate(-3deg) translateX(${t})`};switch(e){case 0:return{...ni,transform:`rotate(-5deg) translateX(${-(14*e)-2}px) translateY(0px)`};case 1:return{...ni,transform:`rotate(-3deg) translateX(${-(14*e)}px) translateY(-2px)`};case 2:return{...ni,transform:`rotate(1deg) translateX(${-(14*e)+2}px) translateY(1px)`};default:return{...ni,translate:t}}},[l,p,i,a]);return(0,T.jsx)(k.iP,{accessibilityLabel:g._('Recently viewed Pins', 'breadcrumbs.minified.recentlyViewedPins', 'Accessibility label for the breadcrumbs minified component'),onMouseEnter:s,onMouseLeave:tY(i)?o:void 0,onTap:x,rounding:5,children:(0,T.jsx)(k.xu,{borderStyle:"shadow",dangerouslySetInlineStyle:{__style:f},"data-test-id":"breadcrumbs-minified",direction:"column",display:"flex",justifyContent:"center",paddingX:3,paddingY:2,role:"button",rounding:5,children:(0,T.jsxs)(k.kC,{alignItems:"center",direction:"row",gap:2,children:[(0,T.jsx)(k.kC,{gap:0,justifyContent:"between",width:y,children:d.map(({images:e,id:t,label:n},i)=>{let a=e["236x"],l=a?.url;return(0,T.jsx)(k.xu,{borderStyle:"raisedBottomShadow",dangerouslySetInlineStyle:{__style:v(i)},height:44,width:33,zIndex:new k.Ry(3-i),children:(0,T.jsx)(k.zd,{height:42,rounding:2,width:31,children:l?(0,T.jsx)(k.Ee,{alt:n||`Pin ${i+1}`,fit:"cover",naturalHeight:a.height??1,naturalWidth:a.width??1,src:a.url}):(0,T.jsx)(k.xu,{height:"100%",width:"100%"})})},t)})}),a&&(0,T.jsx)(k.xv,{overflow:"noWrap",size:"300",weight:"bold",children:g._('Compare ideas', 'breadcrumbs.expanded.compareIdeas', 'Title shown when users can view recently viewed pins in the breadcrumbs')})]})})})}var nr=n(111330),ns=n(366291),no=n(753143),nd=n(77836);function nc({l2Interest:e,pinId:t}){let n,[i,a]=(0,_.useState)(!1),[l,r]=(0,_.useState)(!1),[s,o]=(0,_.useState)(!1),[d,c]=(0,_.useState)(!1),[u,p]=(0,_.useState)(!1),{checkExperiment:m}=(0,em.r)(),g=(0,_.useRef)(null),{logContextEvent:h}=(0,ew.u)(),y=m("closeup_dweb_breadcrumbs"),f=m("closeup_dweb_breadcrumbs_by_vertical"),{experience:x}=(0,tl.Ow)(12),v=!1;y.anyEnabled?n=y.group:f.anyEnabled&&(n=f.group,v=!0),(0,e2.Z)(()=>{let e=setTimeout(()=>{r(!0)},1e3);return()=>clearTimeout(e)}),(0,e2.Z)(()=>{h({event_type:120,component:15421}),x?.experience_id===507740&&c(!0)}),(0,_.useEffect)(()=>{if(tY(n))try{let e=(0,no.M0)().getItem(nr.GT);"true"===e&&(a(!0),(0,no.M0)().removeItem(nr.GT))}catch{(0,tP.nP)("web.closeup.breadcrumbs.localStorage_errors",{tags:{operation:"getItem"}})}},[n]);let{data:b,refresh:S,isFetching:P,isLoaded:w}=(0,ns.Z)({url:"/v3/users/me/recent/engaged/pin/stories/",params:{pin_preview_count:6,l2_interest:v&&e?e:void 0,fields:"pin.description,pin.id,pin.images[236x]"},enabledRouteRefresh:!0,noCache:!0});(0,_.useEffect)(()=>{S()},[t,S]);let C=(0,_.useMemo)(()=>{if(!b||!Array.isArray(b))return[];let e=b?.find(e=>"user_recently_viewed_pins"===e.story_type)?.objects?.map(({id:e,images:t,description:n})=>({images:t,id:e,label:n,url:`/pin/${e}`}))||[],n=b?.find(e=>"user_recently_saved_pins"===e.story_type)?.objects?.map(({id:e,images:t,description:n})=>({images:t,id:e,label:n,url:`/pin/${e}`}))?.filter(t=>!e.some(e=>e.id===t.id))||[],i=[...e,...n].filter(e=>e.id!==t).slice(0,5);return(0,tP.nP)(`web.closeup.breadcrumbs.displayed_pins.${i.length}`),i},[b,t]),I=(0,_.useCallback)(()=>{tY(n)&&(c(!1),i?(o(!0),p(!1),setTimeout(()=>{a(!1),o(!1)},300)):a(!0))},[i,n]),j=(0,_.useCallback)(()=>{p(!0),tJ(n)&&(d&&(g?.current?.click(),c(!1)),h({event_type:105,element:18069,component:15421}),a(!0))},[n,d,h]),A=(0,_.useCallback)(()=>{p(!1),tJ(n)&&(o(!0),setTimeout(()=>{a(!1),o(!1)},300))},[n]),F=(0,_.useCallback)(()=>{if(tY(n)&&(i||s))try{(0,no.M0)().setItem(nr.GT,"true")}catch{(0,tP.nP)("web.closeup.breadcrumbs.localStorage_errors",{tags:{operation:"setItem"}})}},[n,i,s]),E=(0,_.useMemo)(()=>({toggle:I,recentPins:C,shouldShow:l,experimentGroup:n,l2Interest:e,onPinClick:F,isAnimatingOut:s,isHovered:u,splitByVertical:v,showFirstTimeUI:d,handleMouseEnter:j,handleMouseLeave:A}),[I,C,l,n,e,F,s,u,v,d,j,A]);return!n||v&&!e||C.length<3||P||!w?null:(0,T.jsx)(eI.Z,{name:"BreadCrumbs",children:(0,T.jsxs)(eA.Z,{children:[(0,T.jsxs)(k.xu,{position:"relative",children:[(0,T.jsx)(k.xu,{ref:g,bottom:!0,left:!0,position:"absolute",children:(0,T.jsx)(nl,{...E})}),(i||s)&&(0,T.jsx)(k.xu,{bottom:!0,left:!0,position:"absolute",zIndex:new k.Ry(1),children:(0,T.jsx)(t3,{...E})})]}),(0,T.jsx)(k.mh,{zIndex:nd.pS,children:(0,T.jsx)(tl.N,{anchors:{3022:g.current},idealDirection:"up",onAnchorTouch:"complete",placementId:12,scrollToDismiss:!0})})]})})}var nu=n(93966),np=n(67831),nm=n(956077),ng=n(159527),nh=n(368974),n_=n(230543),ny=n(74459);function nf({pin:e,pinResource:t,topLevelTrafficSource:n,firstLoadComplete:i,relatedModulesContent:a,onWrapperClick:l,beforeBodyContent:r,afterBodyContent:s,isVideoPin:o,bodyContent:d,backButton:c}){let u=(0,np.A)(),{closeupWithinMasonryEnabled:p,peekCloseupEnabled:m,viewportSize:g}=(0,W.x4)(),{mainImage:h}=(0,L.G)(),{sideBySideRedesignFastFollowsEnabled:y}=(0,eb.Z)(),f=(0,n_.t)(),x=(0,ny.Z)(),{isAuth:v}=(0,tr.Z)(),{checkExperiment:b}=(0,em.r)(),[S,w]=(0,_.useState)(!1),C=b("closeup_dweb_breadcrumbs").anyEnabled||b("closeup_dweb_breadcrumbs_by_vertical").anyEnabled&&e.l2_dominant_interest,I=(0,P.Z)({showProductDetailPage:!!e.is_eligible_for_pdp});(0,_.useEffect)(()=>{let e;return C&&(e=setTimeout(()=>{w(!0)},1e3)),()=>clearTimeout(e)},[C]),(0,e2.Z)(()=>{e.l2_dominant_interest?(0,tP.nP)("web.closeup.breadcrumbs.has_vertical.yes"):(0,tP.nP)("web.closeup.breadcrumbs.has_vertical.no")});let{error:j}=t,{story_pin_data_id:A}=e||{},[F,E]=(0,_.useState)(p||!o);(0,_.useEffect)(()=>{let e=F?void 0:setTimeout(()=>E(!0),1e3*!p);return()=>clearTimeout(e)},[p,F]);let{isEligibleForStaticImageIdeaPin:D}=(0,eX.Z)(e.story_pin_data_id),R=(0,_.useRef)(null),K=(0,_.useRef)(null),[M,Z]=(0,_.useState)(void 0),z=nu.yF+nu.oX,O=Math.floor((M??1)/z),B=z*O-nu.oX,N=(0,_.useCallback)(()=>{R.current&&K.current&&Z(window.innerWidth)},[]);(0,tS.Z)(()=>{window&&(0,tP.nP)("web.closeup.closeup_redesign.handleResize",{sampleRate:.1,tags:{sideBySideEnabled:y,isStoryPin:!!A,isVideoPin:o,windowHeight:window.innerHeight,windowWidth:window.innerWidth}}),m&&N()},R),(0,e2.Z)(()=>{window&&(0,tP.nP)("web.closeup.closeup_redesign.initialRender",{sampleRate:.1,tags:{sideBySideEnabled:y,isStoryPin:!!A,isVideoPin:o,windowHeight:window.innerHeight,windowWidth:window.innerWidth}})}),(0,_.useEffect)(()=>{m&&N()},[N,m]);let[V,U]=(0,_.useState)(!1);(0,_.useEffect)(()=>{let e=(0,ng.Z)(function(){h&&window&&(window.scrollY>h.height?U(!0):U(!1))},150);return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[h]);let{maxWidth:H}=(0,ex.Re)();if(0===Object.keys(e).length&&j)return(0,T.jsx)(nh.Z,{});let G=!!A&&!D,$=F&&a,X=(0,ep.Z)({hasPin:!!e,hasPinRichMetadata:!!e?.rich_metadata,hasPinRichMetadataProducts:!!e?.rich_metadata?.products,hasPinRichMetadataArticle:!!e?.rich_metadata?.article,hasPinRichMetadataRecipe:!!e?.rich_metadata?.recipe,hasPinStoryPinData:!!e?.story_pin_data}),q=(0,T.jsx)("div",{ref:K,className:"Closeup Module","data-test-id":i?"closeup-data-loaded":"",onClick:e=>{!v&&(G||l(e),(0,nm.sX)("closefakemodal"),u&&u?.abort("closefakemodal"))},role:"presentation",style:{cursor:v?void 0:"zoom-out",display:"flex",width:"100%",maxWidth:H,margin:m?"0 auto":void 0},children:(0,T.jsxs)(k.kC,{alignItems:"stretch",direction:"row",flex:"grow",justifyContent:"center",children:[m?(0,T.jsxs)(k.xu,{dangerouslySetInlineStyle:{__style:{flexDirection:"column"}},display:"flex",marginTop:5,children:[c,r]}):(0,T.jsx)(_.Fragment,{children:r}),d,s]})},"closeup-content");return(0,T.jsxs)(k.xu,{ref:R,width:"100%",children:[(0,T.jsxs)(k.kC,{direction:p?"row":"column",justifyContent:"center",children:[!p&&q,p&&!I&&(c||r)&&(0,T.jsx)(k.xu,{alignItems:"center","data-test-id":i?"closeup-data-loaded":"",direction:"column",display:"flex",marginStart:4,children:(0,T.jsxs)(k.Le,{top:f+2,children:[c,(0,T.jsx)(k.xu,{"aria-hidden":V,dangerouslySetInlineStyle:{__style:{transition:"opacity 300ms ease-in-out"}},opacity:+!V,children:r})]})}),(0,T.jsx)(k.kC.Item,{flex:"grow",children:(0,T.jsxs)(k.xu,{alignItems:"stretch",dangerouslySetInlineStyle:{__style:{paddingRight:p&&!I?"80px":void 0}},direction:"column",display:"flex",justifyContent:"center",paddingX:4*!p,width:"100%",children:[m&&B&&"lg"!==g&&(0,T.jsx)(k.kC.Item,{alignSelf:"center",children:(0,T.jsx)(ti.Z,{id:"ShoppingModule",children:(0,T.jsx)(e0.Z,{moduleWidth:B,pinKey:{type:"deprecated",data:e},trafficSource:n,viewParameter:X})})}),I&&(0,T.jsx)(k.xu,{dangerouslySetInlineStyle:{__style:{marginLeft:`${x+24}px`,marginTop:`${f+8}px`}},left:!0,position:"fixed",top:!0,zIndex:new k.Ry(1),children:c}),$]})})]}),S&&(0,T.jsx)(k.Le,{bottom:0,children:(0,T.jsx)(k.xu,{bottom:!0,left:!0,padding:4,position:"absolute",children:(0,T.jsx)(ti.Z,{id:"BreadCrumbs",children:(0,T.jsx)(nc,{l2Interest:e.l2_dominant_interest?.label,pinId:e.id})})})})]})}var nx=n(762802),nv=n(704088),nb=n(123998);let nk=(0,eZ.Z)(()=>Promise.resolve().then(n.bind(n,437320)),{ssr:!1},e=>437320,"ExperienceHeroCommon",e=>[]),nS=function({abortNoActionPlacementTimeout:e,classProps:t,classState:n,commerceData:i,showCloseupContentRight:a,showProductDetailPage:l,paneWidth:r,maxWidth:s,descriptionPaneWidth:o,handleCarouselSwipe:d,handleFocus:c,setIsCommentAttachmentSelectorOpen:u,setIsCommentComposerFocused:p,setIsCommentPopoverInteractionActive:m,setIsCommentThreadExpanded:g,setIsCloseupMediaViewerOpen:h,setIsMediaViewerOpen:y,setIsProductDetailsExpanded:f,setIsShoppingModuleExpanded:x,handleBackButtonClick:v,closeupContent:b,isCommentAttachmentSelectorOpen:k,isCommentComposerFocused:S,isCommentPopoverInteractionActive:P,isCommentThreadExpanded:w,isCloseupMediaViewerOpen:C,isMediaViewerOpen:I,isProductDetailsExpanded:j,isShoppingModuleExpanded:A,closeupWithinMasonryEnabled:F,peekCloseupEnabled:E,setAbortNoActionPlacementTimeout:D,clientTrackingParams:R,calculatedImageHeight:K,setCalculatedImageHeight:M}){let{pin:Z,pinId:z}=t,{visualState:{carouselData:O,mainImage:N,previewImage:V},viewportSize:U}=n,H=!I&&!C&&!k&&!F,G=(0,_.useMemo)(()=>({showCloseupContentRight:a,showProductDetailPage:l,viewportSize:U,paneWidth:r,maxWidth:s,descriptionPaneWidth:o,isCommentAttachmentSelectorOpen:k,isCommentComposerFocused:S,isCommentPopoverInteractionActive:P,isCommentThreadExpanded:w,isCloseupMediaViewerOpen:C,isMediaViewerOpen:I,isProductDetailsExpanded:j,isShoppingModuleExpanded:A,setIsCommentAttachmentSelectorOpen:u,setIsCommentComposerFocused:p,setIsCommentPopoverInteractionActive:m,setIsCommentThreadExpanded:g,setIsCloseupMediaViewerOpen:h,setIsMediaViewerOpen:y,setIsProductDetailsExpanded:f,setIsShoppingModuleExpanded:x,closeupWithinMasonryEnabled:F,peekCloseupEnabled:E,setAbortNoActionPlacementTimeout:D,clientTrackingParams:R,calculatedImageHeight:K,setCalculatedImageHeight:M}),[K,R,F,o,C,k,S,P,w,I,j,A,s,r,E,D,M,h,u,p,m,g,y,f,x,a,l,U]),$=(0,_.useMemo)(()=>({mainImage:N,previewImage:V,carouselInfo:O&&{carouselData:O,handleCarouselSwipe:d,viewType:C?675:3,componentType:Z.is_eligible_for_pdp?14186:85,viewParameter:(0,ep.Z)({hasPin:!0,hasPinRichMetadata:!!Z.rich_metadata,hasPinRichMetadataProducts:!!Z.rich_metadata?.products,hasPinRichMetadataArticle:!!Z.rich_metadata?.article,hasPinRichMetadataRecipe:!!Z.rich_metadata?.recipe,hasPinStoryPinData:!!Z.story_pin_data})}}),[O,d,C,N,Z.is_eligible_for_pdp,Z.rich_metadata,Z.story_pin_data,V]);return(0,T.jsx)(W.bq,{value:G,children:(0,T.jsxs)(L.A,{overrideValue:$,pinKey:{type:"deprecated",data:Z},children:[(0,T.jsx)(tl.k6,{placementId:1000141}),(0,T.jsx)(tl.k6,{placementId:1000499}),(0,T.jsx)(tl.H6,{placementId:1000140}),(0,T.jsx)(tl.OR,{abortNoActionPlacementTimeout:e,extraContext:{pin_id:z,is_promoted:Z.is_promoted},placementId:1000564}),(0,T.jsx)(tl.iH,{placementId:12}),(0,T.jsx)(tl.b9,{placementId:12}),(0,T.jsx)(tl.nj,{placementId:12}),(0,T.jsx)(tl._f,{placementId:12}),(0,T.jsx)(nv.Z,{placementId:12}),(0,T.jsx)(nb.Z,{auxData:i,clientTrackingParams:R,objectId:z,view:3,viewParameter:(0,B.Z)(t)?(0,ep.Z)({hasPin:!!Z,hasPinRichMetadata:!!Z.rich_metadata,hasPinRichMetadataProducts:!!Z.rich_metadata?.products,hasPinRichMetadataArticle:!!Z.rich_metadata?.article,hasPinRichMetadataRecipe:!!Z.rich_metadata?.recipe,hasPinStoryPinData:!!Z.story_pin_data}):void 0,children:(0,T.jsxs)("div",{className:"reactCloseupScrollContainer","data-test-id":"closeup-layout",onFocus:c,children:[(0,T.jsx)(eI.Z,{name:"SafeSuspense_Closeup_ExperienceHero",children:(0,T.jsx)(nk,{placementId:12})}),(0,T.jsx)(tl.O9,{placementId:12}),b,H&&(0,T.jsx)(nx.Z,{onClose:v}),(0,T.jsx)(tl.RK,{placementId:12})]})})]})})};var nP=n(127753);let nw=(0,eZ.Z)(()=>Promise.resolve().then(n.bind(n,589183)),void 0,e=>589183,"app-common-react-components-closeup-CloseupRelatedModules-CloseupRelatedModulesInclusiveFilters",e=>[]),nC=(0,eZ.Z)(()=>n.e("82713").then(n.bind(n,204204)),void 0,e=>204204,"app-common-react-components-closeup-CloseupRelatedModules-CloseupRelatedModuleOneTapConfiguration",e=>["82713"]),nI=(0,eZ.Z)(()=>n.e("99743").then(n.bind(n,412098)),void 0,e=>412098,"app-common-react-components-closeup-CloseupRelatedModules-CloseupRelatedModulesHeader",e=>["99743"]),nT=(void 0!==d||(d=n(718611)).hash&&"535b0dce979f4e368b354c1d7db63f73"!==d.hash&&console.error("The definition of 'CloseupRelatedModule_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),d),nj=(0,_.forwardRef)(({clientTrackingParams:e,pinKey:t,searchQuery:n,setRelatedPinsHeaderRef:i,slotIndex:a,story:l,trafficSource:r,viewParameter:s,viewportSize:o},d)=>{let c=(0,w.Z)(nT,t),{closeupWithinMasonryEnabled:u}=(0,W.x4)();if(!l)return null;let{story_type:p}=l,m=(0,nP.oV)(p);return"related_products_collage"===p?(0,T.jsx)(k.xu,{alignSelf:"center","data-test-id":"related-modules-one-tap-configuration",children:(0,T.jsx)(nC,{pinKey:c,searchQuery:n,slotIndex:a,storyKey:{type:"deprecated",data:l},trafficSource:r,viewParameter:s,viewportSize:o})}):(0,nP.HM)(p)&&m?!u&&(0,T.jsx)(k.xu,{alignSelf:"center",children:(0,T.jsx)(nw,{filter:m,story:l,viewParameter:s})}):"related_modules_header"===p?(0,T.jsx)(k.xu,{ref:i,"data-test-id":"related-modules-header",children:(0,T.jsx)(nI,{ref:d,clientTrackingParams:e,slotIndex:a,storyId:l.id,storyType:p,title:l.title?.format,viewParameter:s})}):null});var nA=n(181993);function nF(){let e=(0,K.ZP)();return(0,T.jsxs)(k.xu,{paddingY:16,children:[(0,T.jsxs)(k.kC,{alignItems:"center",direction:"column",gap:4,children:[(0,T.jsx)(k.xv,{align:"center",size:"500",weight:"bold",children:e._('You\'ve reached the end', 'closeup.filteredFeed.enfOfFeed.title', 'message to let users know they have reached the end of the filtered feed in closeup')}),(0,T.jsx)(k.xv,{align:"center",children:e._('Try removing a few filters to help us show more results.', 'closeup.filteredFeed.enfOfFeed.actionOne', 'message to let users know they can remove filters to see more results')})]}),(0,T.jsx)(nA.Z,{})]})}function nE(){let e=(0,K.ZP)();return(0,T.jsx)(k.xu,{paddingY:16,children:(0,T.jsxs)(k.kC,{alignItems:"center",direction:"column",gap:4,children:[(0,T.jsx)(k.xv,{align:"center",size:"500",weight:"bold",children:e._('No results found', 'closeup.filteredFeed.noResultsFound.title', 'message to let users know there are no results found for the selected filters in closeup')}),(0,T.jsx)(k.xv,{align:"center",children:e._('Try removing a few filters to help us show more results.', 'closeup.filteredFeed.noResultsFound.actionOne', 'message to let users know they can remove filters to see more results')}),(0,T.jsx)(nA.Z,{})]})})}var nL=n(589183);let nD={cursor:"auto"},nR=e=>{e.stopPropagation()};function nK({className:e,children:t}){return(0,T.jsx)("div",{className:e,onClick:nR,role:"presentation",style:nD,children:t})}let nM=["closeup_module","shopping_module","inclusive_filters_module"];function nZ(e){return e.filter(e=>"object"==typeof e&&null!==e&&"type"in e&&nM.includes(e.type)).length}function nz(e){if(!e)return"";let[t,n]=e.split(":");return t&&n?t.includes("skin_color")?JSON.stringify({10:{tab_option_selections:[n]}}):t.includes("hair_pattern")?JSON.stringify({11:{tab_option_selections:[n]}}):t.includes("body_type_range")?JSON.stringify({12:{tab_option_selections:[n]}}):"":""}var nO=n(449930),nB=n(142689),nN=n(748065),nV=n(940280);function nU({isFromBackButton:e,referringSource:t,relatedModulesRef:n}){!e&&n?.current&&t===nV.i.SHOPPING_FILTER&&setTimeout(()=>{n.current?.scrollIntoView(),window.scrollBy(0,-100)},10)}var nH=n(184857),nW=n(744862),nG=n(47426),n$=n(661037);function nX({coverImages:e,height:t,isHovered:n,onClick:i,onMouseEnter:a,onMouseLeave:l,textType:r,text:s,url:o,width:d,dataTestId:c}){let u=e&&(e["236x"]||e["280x280"]);return(0,T.jsx)(n$.Z,{backgroundColor:"gray",coverImage:u,height:t,isHovered:n,onClick:i,onMouseEnter:a,onMouseLeave:l,url:o,width:d,children:(0,T.jsx)(k.xu,{alignItems:"center","data-test-id":c,display:"flex",height:t,justifyContent:"center",padding:3,position:"absolute",top:!0,width:d||"100%",children:"text"===r?(0,T.jsx)(k.xu,{alignItems:"center",display:"flex",height:48,padding:3,children:(0,T.jsx)(k.X6,{align:"center",color:"light",size:"600",children:s})}):(0,T.jsx)(k.xu,{alignItems:"center",color:"secondary",display:"flex",height:48,padding:3,rounding:"pill",children:(0,T.jsx)(k.xv,{align:"center",weight:"bold",children:s})})})})}let nq=[81];function nY({data:e}){let{action:t,container_type:n,objects:i,title:a}=e||{},{format:l}=a??{},{text:r,url:s,user:o={}}=t??{},{image_large_url:d,full_name:c,avatar_color_index:u}=o,{images:p}=i?.find(e=>"pin"===e.type)||{},m=null,g=(0,nG.Z)({url:s})?"nofollow":"none";return 81===n&&(m=(0,T.jsxs)(k.kC,{direction:"column",gap:{row:0,column:2},children:[(0,T.jsxs)(k.xu,{position:"relative",children:[(0,T.jsx)(nX,{coverImages:p??void 0,height:nu.yF,text:l??"",textType:"text",url:s??""}),o.imageUrl&&(0,T.jsx)(k.xu,{left:!0,padding:2,position:"absolute",top:!0,children:(0,T.jsx)(nW.qE,{color:u||void 0,name:c||"",outline:!0,size:"md",src:d??""})})]}),(0,T.jsx)(k.ZP,{fullWidth:!0,href:s??"",rel:g,size:"lg",text:r??""})]})),m}var nJ=n(624076),nQ=n(673616),n0=n(469167),n1=n(115247),n2=n(806438),n3=n(355363),n6=n(849233),n4=n(517250),n7=n(955421),n5=n(378888),n8=n(725191),n9=n(78187),ie=n(845421);let it=(0,eZ.Z)(()=>n.e("75139").then(n.bind(n,113066)),void 0,e=>113066,"app-packages-StructuredFeed-ModuleReps-utils-StructuredFeedStoryModule",e=>["75139"]);function ii(e){return e.columnSpan??e.display_options?.content_display?.grid_layout?.cols??1}let ia=(void 0!==c||(c=n(327060)).hash&&"3fa8620068a79dc4a73dbbcde3f352f9"!==c.hash&&console.error("The definition of 'CloseupRelatedPins_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),c),il=({closeupBody:e,surface:t="RelatedPinGrid",clientTrackingParams:n,isFilteredFeed:i,lfvExperiences:a,relatedPinsResource:l,setHasRelatedPins:r,i18n:s,closeupWithinMasonryEnabled:o,logContextEvent:d,relatedPinsInRow:c,pin:u,relatedPinsContainerRef:p,topLevelTrafficSource:m,viewParameter:g,relatedModulesStopwatch:h})=>{let y,[x,v]=(0,_.useState)(l.auxData?.grid_layout?.w_h_ratio),[b,S]=(0,_.useState)(!0),P=(0,_.useRef)(null),w=(0,_.useRef)(null),C=(0,nN.Z)(),I=(0,_.useMemo)(()=>(l.data||[]).filter(e=>[n9.Mq.SKIN,n9.Mq.HAIR,n9.Mq.BODY].includes(e?.story_type)).find(e=>(0,nP.HM)(e?.story_type??"")),[l]),{closeupMasonryModules:j,hasShoppingModule:A,inclusiveFilters:F}=(0,nO.ZP)({pinId:u.entityId,inclusiveModuleToCache:I,showProductDetailPage:!1}),E=F?(0,nP.oV)(F.story_type??""):"",{inInclusiveEfficientRefinements:L}=(0,nB.Z)(E),{search:D}=(0,f.TH)(),R=nz(new URLSearchParams(D).get("filters")??""),K=o&&L&&R,M=(0,eo.Z)(K?{name:"ApiResource",options:{url:`/v3/pins/${u.entityId}/related/pins/filter/`,data:{fields:nH.Z,related_pins_tabs_selections:R}}}:null),Z=K?M:l,{isAtEnd:z,fetchMore:O,data:B,isFetching:N,nextBookmark:V}=Z;(0,e2.Z)(()=>{d({event_type:13,view_parameter:g,view_type:3,component:86,clientTrackingParams:n})}),(0,_.useEffect)(()=>{!x&&Z.auxData?.grid_layout?.w_h_ratio&&(v(Z.auxData.grid_layout.w_h_ratio),P.current=window)},[o,x,Z]);let U=`relatedPins:${u.entityId}`,H=(0,_.useMemo)(()=>["related_products_button_footer","related_domain_carousel","related_products_feed_header"],[]),W=(B&&B?.findIndex(e=>"pin"===e.type))??0,G=(B||[]).slice(W).filter(e=>!H.includes(e?.story_type)),$=(0,_.useMemo)(()=>[...o?j:[],...G||[]],[o,j,G]),X=(0,_.useMemo)(()=>(B||[]).slice(W).filter(e=>!H.includes(e?.story_type)),[B,W,H]),q=(0,_.useMemo)(()=>{let e=[];return o&&e.push(...j),e.push(...X),e},[j,o,X]),Y=C?q:$,J=L&&A&&!!F,Q=(0,_.useMemo)(()=>({pin_id:u.entityId}),[u.entityId]),ee=(0,_.useMemo)(()=>nZ(Y),[Y]),et=({data:n,itemIdx:i})=>{let l,r=(0,ep.Z)({hasPin:!!u,hasPinRichMetadata:!!u.richMetadata,hasPinRichMetadataProducts:!!u.richMetadata?.products,hasPinRichMetadataArticle:!!u.richMetadata?.article,hasPinRichMetadataRecipe:!!u.richMetadata?.recipe,hasPinStoryPinData:!!u.storyPinData}),s=i-ee;if(J&&("shopping_module"===n.type||"inclusive_filters_module"===n.type))"shopping_module"===n.type&&(l=(0,T.jsxs)(k.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",children:[(0,T.jsx)(e0.Z,{moduleWidth:"100%",pinKey:u,trafficSource:m,viewParameter:r}),F?.story_type&&E&&(0,T.jsx)(k.xu,{marginTop:2,children:(0,T.jsx)(nL.default,{filter:E,story:F,viewParameter:r})})]}));else switch(n.type){case"closeup_module":l=e;break;case"shopping_module":l=(0,T.jsx)(e0.Z,{moduleWidth:"100%",pinKey:u,trafficSource:m,viewParameter:r});break;case"inclusive_filters_module":E&&(l=(0,T.jsx)(nL.default,{filter:E,story:F,viewParameter:r}));break;case"story":switch((0,tP.nP)("web_story_card_type",{sampleRate:1,tags:{story_type:n.story_type||"unknown",surface:"closeup"}}),n.story_type){case"BUBBLE_ONE_COL":l=(0,T.jsx)(n8.default,{bubbles:n.objects,id:n.id,referringSource:n.referring_source,slotIndex:s,storyType:n.story_type,title:n.title,viewParameter:r,viewType:3});break;case"related_query_shop_upsell_closeup":l=(0,T.jsx)(nJ.default,{itemIdx:s,story:n,viewParameter:r,viewType:3});break;default:l=null}n.container_type&&(nq.includes(n.container_type)?l=(0,T.jsx)(nY,{data:n}):(0,n7.Z)(n.container_type)&&(l=(0,T.jsx)(it,{initialSlotIndex:s,story:n,storyKey:{type:"deprecated",data:n},styleOverrides:{showModuleBorder:ii(n)>1},view:3,viewParameter:r})));break;default:let o=(0,n2.Z)(a);l=(0,T.jsx)(ie.Z,{componentType:13007,duploQueryRef:null,imageOnlyOption:o?"image-only":"default",pinId:n.id,pinImageCrop:x?{height:n4.zX*x,width:n4.zX}:null,slotIndex:s,surface:t,trackingParams:n?.tracking_params,viewData:C?Q:{pin_id:u.entityId},viewParameter:r,viewType:3})}return(0,T.jsx)(nK,{children:l})},en=Z.data?Z.data.length:0;(0,_.useEffect)(()=>{r(0!==en)},[en,r]);let ei=(0,_.useRef)(!0),ea=(0,_.useRef)(0),el=()=>{ea.current=performance.now()};(0,_.useEffect)(()=>{ei.current&&(b||(h?.abort(),ei.current=!1),0!==en&&(z&&(h?.stop(),ei.current=!1),ea.current>0&&(h?.stop(ea.current),ei.current=!1)))},[b,z,h,h?.isTiming,en]);let er=(i||!!K)&&V===n6.qx,es=(0,nQ.Z)({isHiddenPin:u?.isHidden,isUnsafePin:u?.isUnsafe}),ed=!!(o&&(1===Y.length||A&&2===Y.length)),ec=(0,_.useMemo)(()=>o?(0,nO.fz)(L):void 0,[o,L]);return C?y=ec:o&&(y=(0,nO.fz)(!!L)),(0,T.jsx)(n1.Z,{onVisibilityChange:e=>{S(e.some(e=>e.isIntersecting))},options:{threshold:[0]},children:e=>(0,T.jsx)(k.xu,{ref:e,children:(0,T.jsx)(k.xu,{ref:p,children:(0,T.jsx)(nb.Z,{clientTrackingParams:n,component:86,viewParameter:(0,ep.Z)({hasPin:!!u,hasPinRichMetadata:!!u.richMetadata,hasPinRichMetadataProducts:!!u.richMetadata?.products,hasPinRichMetadataArticle:!!u.richMetadata?.article,hasPinRichMetadataRecipe:!!u.richMetadata?.recipe,hasPinStoryPinData:!!u.storyPinData}),children:(0,T.jsxs)(_.Fragment,{children:[(0,T.jsx)(n3.Z,{isAtEndOfFeed:z,isPlaceholderGrid:N&&(!Y.length||ed),itemCount:Y.length,stopwatchContext:h,stopwatchSetVisuallyCompleteResult:el,children:(0,T.jsx)(n0.default,{_getResponsiveModuleConfigForSecondItem:y,align:o?"center":void 0,cacheKey:U,getColumnSpanConfig:o?ii:void 0,isFetching:N,isGridCentered:c,isLoadedAccessibilityLabel:Y.length>0?s._('Loaded more related product results', 'closeup.relatedProducts.results', 'Accessibility label for loaded more related product results'):s._('Loaded related products result', 'closeup.relatedProducts.results', 'Accessibility label for loaded related products result'),isLoadingAccessibilityLabel:Y.length>0?s._('Loading more related products results', 'closeup.relatedProducts.loading', 'Accessibility label for loading more related products results'):s._('Loading related products results', 'closeup.relatedProducts.loading', 'Accessibility label for loading related products results'),isLoadingStateEnabled:es,items:Y,layout:"basic",loadItems:O,masonryRef:w,minCols:o?2:void 0,renderItem:et,scrollContainerRef:P,serverRender:!0,virtualize:nO.o1})}),er&&en>0&&(0,T.jsx)(nF,{}),er&&0===en&&(0,T.jsx)(nE,{})]})})})})})};function ir({pinKey:e,relatedModulesRef:t,...n}){let i=(0,K.ZP)(),a=(0,ta.Z)(),{clientTrackingParams:l,closeupWithinMasonryEnabled:r}=(0,W.x4)(),s=(0,f.TH)(),o=(0,f.k6)(),d=(0,w.Z)(ia,e),c=(0,n5.mB)(s.search).rs,u=o?.action==="POP";return(0,_.useEffect)(()=>{nU({isFromBackButton:u,referringSource:c,relatedModulesRef:t})},[u,s,c,t]),(0,T.jsx)(il,{...n,clientTrackingParams:l,closeupWithinMasonryEnabled:r,i18n:i,logContextEvent:a,pin:d,relatedPinsInRow:r})}var is=n(231760),io=n(458963),id=n(756334);let ic=new Set([...ex.aW,"related_domain_carousel","related_products_collage",n9.Mq.SKIN,n9.Mq.HAIR,n9.Mq.BODY]),iu=(void 0!==u||(u=n(824065)).hash&&"8b3eeb9b4671e020ac715d9513179386"!==u.hash&&console.error("The definition of 'CloseupRelatedModulesContainer_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),u);function ip({clientTrackingParams:e,closeupBody:t,isVideoPin:n,isYoutubePin:i,pinKey:a,relatedResourceOptions:l,searchQuery:r,relatedPinsContainerRef:s,setRelatedPinsHeaderRef:o,topLevelTrafficSource:d,trafficSource:c,viewParameter:u,viewportSize:p,relatedModulesStopwatch:m}){let{closeupWithinMasonryEnabled:g}=(0,W.x4)(),[h,y]=(0,_.useState)(!n),{checkExperiment:x}=(0,em.r)(),{search:v}=(0,f.TH)(),b=new URLSearchParams(v).get("utm_source"),S=(0,eo.Z)(h&&"ads_manager"!==b?l:null),P=(0,io.Z)(),C=(0,_.useRef)(null),I=(0,_.useCallback)(e=>{e&&(C.current=e)},[]),[j,A]=(0,_.useState)(!0);(0,_.useEffect)(()=>{let e=h?void 0:setTimeout(()=>y(!0),g&&(n||i&&"enabled_delay"===x("web_closeup_youtube_player").group)?1e3:0);return()=>clearTimeout(e)},[g,n,h,x,i]);let F=(0,w.Z)(iu,a);return(0,T.jsx)(id.Z,{metricName:"RelatedModulesFeed",children:(0,T.jsxs)(k.xu,{ref:I,"data-test-id":"relatedPins",direction:"column",display:"flex",flex:"grow",position:"relative",children:[j&&(S.data||[]).filter(e=>ic.has(e.story_type)).map((t,n)=>(0,T.jsx)(k.xu,{"data-test-id":`related-module-${t.id}`,direction:"column",display:"flex",children:(0,T.jsx)(nj,{ref:C,clientTrackingParams:e,pinKey:F,searchQuery:r,setRelatedPinsHeaderRef:o,slotIndex:n,story:t,trafficSource:c,viewParameter:u,viewportSize:p})},`related-module-${t.id}`)),(0,T.jsx)(ir,{closeupBody:t,lfvExperiences:P,pinKey:F,relatedModulesRef:C,relatedModulesStopwatch:m,relatedPinsContainerRef:s,relatedPinsResource:S,setHasRelatedPins:A,topLevelTrafficSource:d,viewParameter:u})]})})}function im(e){let t=(0,t6.b)(),n=(0,is.B6)(t?"related_feed_pageload":"related_feed");return(0,e2.Z)(()=>{n?.start()}),(0,T.jsx)(ip,{...e,relatedModulesStopwatch:n})}let ig=["236x","474x","564x","736x"];function ih({carouselData:e,images:t,product:n,shouldUnifyImageSizes:i}){return e?.carousel_slots?.length?e:n?.additional_images?.length?function(e,t,n,i,a){let l=[...e?[{images:e}]:[],...(t??[]).map(({canonical_images:e,image_signature:t})=>({images:e||void 0,image_signature:t||void 0}))];return{carousel_slots:i?function(e){function t(e,{imageKey:t,height:n,width:i}){return e.images&&e.images[t]&&(e={...e,images:{...e.images,[t]:{...e.images[t],height:n,width:i}}}),e}let n=ig.map(function(t){let n=Math.min(...e.map(e=>e.images&&e.images[t]&&e.images[t].height||1/0)),i=Math.min(...e.map(e=>e.images&&e.images[t]&&e.images[t].width||1/0));return{imageKey:t,height:n,width:i}});return e.map(e=>n.reduce(t,e))}(l):l,index:n||0,id:a}}(t,n.additional_images,e?.index,i,n.id):e||void 0}var i_=n(607652);let iy=e=>{let{url:t,width:n,height:i}=e||{};return t&&n&&i?{url:t,width:n,height:i}:void 0};function ix(e){let{pin:t,pinId:n,pinResource:i}=e,a=(0,_.useMemo)(()=>t,[t]),l=(0,_.useMemo)(()=>({pinKey:{type:"deprecated",data:a}}),[a]),{mainPinImage:r}=(0,i_.Z)(l);return(0,_.useMemo)(()=>(e=>{let t={...e.pin,...e.pinResource.data},n=ih({carouselData:t.carousel_data,images:t.images,product:(t.rich_metadata||t.rich_summary)?.products?.[0]});return{availableWidthForContentOnRight:!1,backButtonLabelFitInScreen:null,closeupBodyContainerHeight:0,closeupContainerHeight:0,firstLoadComplete:!1,didLongClickThrough:!1,didPinClickThrough:!1,didShortClickThrough:!1,didMountAfterSavePlacement:!1,isCloseupMaximized:!1,isCommentSectionOpen:!0,isOverRelatedPins:null,isRelatedInterestsBannerDismissed:!1,intervalId:null,landOnCurrentPage:!1,loginModalOptions:null,modalOpen:!1,myTry:e.pin?{isDoneByMe:!!e.pin.done_by_me}:null,newshubCloseupCapBackButtonCount:0,passScrollThreshold:!1,pin:t,pinId:e.pinId,campaignCreationTriggered:!1,relatedPinsUpsellShown:!1,showBackButton:!0,showProductDetailPage:!!t.is_eligible_for_pdp,shopping:{catalogId:-1,variantId:void 0},viewportSize:"lg",visualState:{carouselData:n&&{...n,index:e.pin.carousel_data?.index||0},mainImage:e.mainImage,previewImage:iy(t.images?.["236x"])},v1DeprecationModalDismissed:!1}})({pin:a,pinId:n,pinResource:i,mainImage:r}),[r,a,n,i])}let iv=(0,tl.RL)(12,(e,t)=>({pin_id:e.pinId,email_id:e.emailId,did_long_clickthrough:t.didLongClickThrough||!1,did_pin_clickthrough:t.didPinClickThrough||!1,did_repin:t.didRepin||!1,is_own_or_group_pin:t.is_own_or_group_pin||!1,login_page_type:t.loginPageType||"unknown",scroll_to_threshold:t.scrollToThreshold,pin_image_signature:t.pin_image_signature,is_creator_card_shown:!!e_({domain:e.pin.domain??"",hasLinkDomainOfficialUser:!!e.pin.link_domain?.official_user,hasLinkUserWebsiteOfficialUser:!!e.pin.link_user_website?.official_user,hasNativeCreator:!!e.pin.native_creator,hasThirdPartyPinOwner:!!e.pin.third_party_pin_owner,isPromoted:!!e.pin.is_promoted,pinnerDomainUrl:e.pin.pinner?.domain_url??"",pinnerDomainVerified:!!e.pin.pinner?.domain_verified}),creator_username:e.pin?.closeup_attribution?.full_name}));var ib=n(518285),ik=n(782881),iS=n(974297),iP=n(30216),iw=n(686319),iC=n(278533),iI=n(761256),iT=n(503863),ij=n(817309),iA=n(887946),iF=n(572227),iE=n(91479),iL=n(87853),iD=n(973940),iR=n(322888);let iK=(void 0!==p||(p=n(208540)).hash&&"efee9cd30f69b524ed9920746ed65ceb"!==p.hash&&console.error("The definition of 'useHandleBackButtonClick_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),p);function iM({logCommerceAuxData:e,deepLinkBackGoesToBoard:t,element:n,goBack:i,pinKey:a,routePush:l,trafficSource:r,viewer:s,requestContext:o,viewType:d,viewParameterType:c,componentType:u},p,m){let g=(0,w.Z)(iK,a),h=(0,I.Z)(g),y=s.isAuth&&s.partner;return{onHandleBackButtonClick:(0,_.useCallback)(()=>{let a=g.promotedLeadForm?.leadId,s=e?h():null;g.promotedIsLeadAd?(p({event_type:4100,view_type:175,view_parameter:null,component:null,object_id_str:g.entityId,aux_data:{...s,lead_form_id:a,is_lead_ad:1}}),p({event_type:10369,view_type:175,view_parameter:null,component:14307,duration_ns:13606e6,object_id_str:g.entityId,aux_data:{lead_form_id:a,is_lead_ad:1}})):p({aux_data:s,event_type:101,view_type:d||3,view_parameter:c||(0,ep.Z)({hasPin:!0,hasPinRichMetadata:!!g.richMetadata,hasPinRichMetadataProducts:!!g.richMetadata?.products,hasPinRichMetadataArticle:!!g.richMetadata?.article,hasPinRichMetadataRecipe:!!g.richMetadata?.recipe,hasPinStoryPinData:!!g.storyPinData}),...u?{component:u}:void 0,element:n||34});let _="deep_linking"===r&&!t,{utm_source:f,news_hub_id:x}=function(e){let t=e.searchParams;return{utm_source:t.get("utm_source")??"",utm_medium:t.get("utm_medium")??"",utm_campaign:t.get("utm_campaign")??"",news_hub_id:t.get("news_hub_id")??""}}(new URL(o.fullPath,o.origin));return!m&&"31"==`${f}`&&x?l(`/news_hub/${x}`):_?l(y?"/homefeed/":"/"):i()},[u,t,n,h,i,e,p,g.entityId,g.promotedIsLeadAd,g.promotedLeadForm?.leadId,g.richMetadata,g.storyPinData,o.fullPath,o.origin,l,r,c,d,y,m])}}var iZ=n(199593),iz=n(314011);function iO({conversation_id:e,senderId:t,pinId:n}){(0,iw.Z)({url:`/v3/conversations/${e}/message/mark_seen/`,method:"POST",data:{sender:t,pin:n}})}function iB(e){let{clientTrackingParams:t,closeupWithinMasonryEnabled:n=!1,conversation_id:i,conversationOpen:a,didRepin:l,getStringifiedCommerceAuxData:r,isEligibleForStaticImageIdeaPin:s,isLandingPage:o,logContextEvent:d,onHandleBackButtonClick:c,openInbox:u,orbacActingAs:p,peekCloseupEnabled:m=!1,pin:g,pinDerivedData:h,pinId:y,pinResource:f,relatedPinsContainerRef:x,senderId:v,setAbortNoActionPlacementTimeout:b,setIsCommentThreadExpanded:k,setMostRecentPinId:S,setMostRecentPinImage:P,setPlacementExtraContext:w,shouldShowInbox:C,storyPinTaggedProductsResource:I,verticalNavWidth:j,viewer:A}=e,{pin:F,shopping:E,visualState:L,isCloseupMaximized:D=!1,isCommentSectionOpen:R=!1,didShortClickThrough:K=!1,didPinClickThrough:M=!1,firstLoadComplete:Z=!1,intervalId:z,viewportSize:O="lg",isOverRelatedPins:N=!1}=e.initialState||{},[V,U]=(0,_.useState)(F),[H,W]=(0,_.useState)(L),[G,$]=(0,_.useState)(D),[X,q]=(0,_.useState)(R),[Y,J]=(0,_.useState)(K),[Q,ee]=(0,_.useState)(M),[et,en]=(0,_.useState)(Z),[ei,ea]=(0,_.useState)(z),[el,er]=(0,_.useState)(O),[es,eo]=(0,_.useState)(N),ed=(0,_.useRef)(!1),ec=(0,_.useRef)(!1),em=(0,_.useRef)(0),eg=(0,_.useRef)(null),eh=(0,_.useRef)(null),e_=(0,iD.Z)(y),ey=(0,iD.Z)(l),ef=(0,iD.Z)(o),ev=(0,_.useCallback)(e=>{eg.current=e},[]),eb=(0,_.useCallback)(e=>{eh.current=e},[]),ek=(0,_.useCallback)(()=>{if(!ec.current)return;let{BREAKPOINT:e,EXP_SM_BREAKPOINT:t,SM_BREAKPOINT:i}=(0,ex.le)({verticalNavWidth:j}),a=n?t:i,l="lg";"undefined"!=typeof window&&window.innerWidth<e&&(l=window.innerWidth<a?"sm":"md"),er(l)},[n,j]),eS=(0,_.useMemo)(()=>(0,ng.Z)(ek,50),[ek]),eP=(0,_.useCallback)(()=>{clearInterval(ei),w&&w({didLongClickThrough:!0})},[ei,w]),{pinFormattedLink:ew,trafficSource:eC,isCloseupMediaViewerOpen:eI}=e,eT=(0,_.useCallback)(e=>{let n=!!g?.story_pin_data_id&&s,{wasImageClicked:i,auxData:a,componentType:l=n?228:4,elementType:o=i?35:n?11157:361,viewType:c=eI?675:3}=e||{},u=(0,ep.Z)({hasPin:!!g,hasPinRichMetadata:!!g?.rich_metadata,hasPinRichMetadataProducts:!!g?.rich_metadata?.products,hasPinRichMetadataArticle:!!g?.rich_metadata?.article,hasPinRichMetadataRecipe:!!g?.rich_metadata?.recipe,hasPinStoryPinData:!!g?.story_pin_data}),p={...r?.(),...a||{},is_promoted:g?.is_promoted};A?.isAuth&&!Q&&w&&(w({didPinClickThrough:!0}),ee(!0)),n&&d?.({event_type:102,view_type:132,view_parameter:3549,element:12971,aux_data:{pin_id:g?.id,url:ew}}),d?.({event_type:101,object_id_str:y,component:l,element:o,clientTrackingParams:t,aux_data:{...r?.(),...a||{}}}),d?.({event_type:12,object_id_str:y,view_type:c,view_parameter:u,component:l,element:o,aux_data:{...p,...(0,ij.Z)(g.link_utm_applicable_and_replaced)},clientTrackingParams:t}),d?.({event_type:8948,view_type:c,view_parameter:u,component:l,element:o,object_id_str:y,clientTrackingParams:t,aux_data:{click_type:"clickthrough",closeup_navigation_type:eC&&(0,eu.sV)(eC)?"deeplink":"click",...r?.(),...a||{}}}),i&&ea(window.setInterval(eP,12e4)),em.current=Date.now(),Y&&J(!1),b(!0)},[ew,A,eC,d,r,s,eI,g,Q,w,y,t,Y,b,eP]),ej=(0,_.useCallback)(()=>{clearInterval(ei),w&&w({didLongClickThrough:!1})},[ei,w]),eA=(0,_.useCallback)(()=>{em.current>0&&(J(Date.now()-em.current<5e3),em.current=0)},[]),eF=(0,_.useCallback)(()=>{d?.({event_type:101,object_id_str:V?.id,component:4,element:0,clientTrackingParams:t,aux_data:{...r?.()}}),b(!0)},[d,V?.id,t,r,b]),eE=(0,_.useCallback)(()=>{c()},[c]),{isEnabled:eL}=(0,tq.Z)({dangerouslySkipActivation:!0}),eK=(0,_.useCallback)(e=>{et&&((0,tP.nP)(`closeup.dweb.css_carousel.${eL?"enabled":"control"}.global_carousel_index_update`,{sampleRate:1,tags:{index:e}}),W(t=>({...t,carouselData:{...t.carouselData||{},index:e}})))},[et,eL]),eM=(0,_.useMemo)(()=>(0,ng.Z)(()=>{if(!eh.current)return;let e=e3.hu,t=(eh.current?.getBoundingClientRect().top??0)<=e;eo(e=>!!t||e&&t),!t&&es&&eo(!1)},10),[es]),eZ=(0,_.useCallback)(e=>{$(!e),eg&&(eg.ariaHidden=!e)},[$]),ez=(0,_.useCallback)(e=>{e.stopPropagation(),eE()},[eE]),eO=(0,_.useCallback)(e=>{q(!!e),k?.(!!e),e&&d?.({component:13464,element:11981,event_type:10554,view_type:3})},[d,k]),eB=(0,_.useCallback)(()=>{let t=g?.board||{},n=e.viewer,i=t.is_collaborative&&(0,ik.Z)(t?.collaborated_by_me,t?.owner?.id,n);return!!(n.isAuth&&g?.pinner?.id===n.id||i)},[g?.board,g?.pinner?.id,e.viewer]),eN=(0,_.useCallback)(()=>{let t,{mainImage:n}=e;if(!et)return;let i=ih({carouselData:g?.carousel_data,images:g?.images,product:g?.rich_metadata?.products?.[0]||g?.rich_summary?.products?.[0]}),a=(i?.carousel_slots||[])[0]||{},l=(0,iS.Z)(a.images),r=H.carouselData,s=H.mainImage||{url:""},o=r?.index||0;t=i&&(i.carousel_slots?.length||0)>1?{mainImage:n,carouselData:{...i,index:o},previewImage:iy(g?.images?.["236x"])}:l?.url?{mainImage:{url:l.url,height:l.height||1,width:l.width||1}}:{mainImage:n,previewImage:iy(g?.images?.["236x"])};let d=t.carouselData?.id,c=r?.id,u=t.carouselData?.carousel_slots,p=r?.carousel_slots,m=t.mainImage?.url??"",h=s.url??"";(c!==d||JSON.stringify(p)!==JSON.stringify(u)||h!==m)&&W(t)},[g,e,et,H]);(0,_.useEffect)(()=>{let{didRepin:t,isLandingPage:n,pinResource:{data:a},pwtSurfaceContext:l}=e;eN(),et&&!ed.current&&(l?.removeConstraint?.("thumbnailsLoaded"),(0,nm.l7)("thumbnailsLoaded"),ed.current=!0),a&&!et&&(a.carousel_data&&(a.carousel_data.index=H.carouselData?.index||0),U(a),en(!0)),i&&v&&y&&e_!==y&&iO({conversation_id:i,senderId:v,pinId:y});let r={};((0,no.M0)().getItem(nr.W3)||"").includes(`/pin/${y}`)&&n&&(r.loginPageType="pin"),t&&(r.didRepin=!0),g?.image_signature&&(r.pin_image_signature=g.image_signature),r.is_own_or_group_pin=eB();let s=ey!==t||e.isLandingPage!==ef||e_!==y;!(0,iI.Z)(r)&&s&&w&&w({...r})},[y,v,i,e,et,ed,H.carouselData,w,e_,eN,g.image_signature,eB,ey,ef]),(0,e2.Z)(()=>(ec.current=!0,i&&v&&y&&iO({conversation_id:i,senderId:v,pinId:y}),i&&(a?.(i),C&&u?.()),g?.image_signature&&P?.(g.image_signature),y&&S?.(y),w&&w({is_own_or_group_pin:eB()}),ek(),window.addEventListener("resize",eS),window.addEventListener("focus",eA),window?.location?.search?.includes("invite_code=")&&(0,iC.Z)(),()=>{window.removeEventListener("resize",eS),window.removeEventListener("focus",eA),ec.current=!1}));let eV=eR.u6,eU=e.isCommentThreadExpanded||!1,{recommendation_reason:eH}=g,{contextPinIds:eW,experimentsClient:{checkExperiment:eG},landingContext:e$,searchQuery:eX,topLevelTrafficSource:eq,topLevelTrafficSourceDepth:eY}=e,eJ={name:"RelatedModulesResource",options:{additional_fields:(0,_.useCallback)(()=>{let e=[],t=eG("hfp_gen_ai_topics_opt_out_dweb",{dangerouslySkipActivation:!0}).group;return t&&(["control_pwt","enabled_pwt"].includes(t)&&eG("hfp_gen_ai_topics_opt_out_dweb"),"control_pwt"!==t&&e&&!e.includes("pin.gen_ai_topics")&&(e=[...e,"pin.gen_ai_topics"])),e},[eG])(),pin_id:g.id||y,context_pin_ids:eW,homefeed_source_sig:eH&&["NAVBOOST_P2P","NAVBOOST_PFY","INSTANT_PFY_NON_MATERIALIZABLE","P2P","P2P_CLICKTHROUGH","FRESH_TEXT_EMBEDDINGS","INTENTIONAL_DISTRIBUTION_GEMINI_V5"].includes(eH.reason||"")&&eH.reason_id,page_size:12,search_query:eX,source:eC,top_level_source:eq,top_level_source_depth:eY,is_pdp:!1,landing_context:e$}},eQ=(0,eD.q6)(A,g.pinner?.id,p),e0=(!!g.id||!!y)&&!eQ||n,{data:e1}=I||{},{isLimitedLogin:e6,routePush:e4,showRepinOnInitialRender:e7,trendsData:e5,userBusinessRoleResource:e8}=e,e9=(0,T.jsx)(tX,{clientTrackingParams:t,closeupWithinMasonryEnabled:n,didShortClickThrough:Y,executeClickthrough:eT,handleBackButtonClick:eE,handleCarouselSwipe:eK,handleCloseupBodyContainerRef:ev,handleIdeaCloseupCommentIconClick:eO,handleSaveClicked:eF,isCloseupMaximized:G,isCommentThreadExpanded:eU,isEligibleForStaticImageIdeaPin:s,isLimitedLogin:e6,maxWidth:eV,onToggleIdeaPinCloseupPanel:eZ,peekCloseupEnabled:m,pin:g,pinDerivedData:h,pinResource:f,routePush:e4,shopping:E,showRepinOnInitialRender:e7,storyPinTaggedProducts:e1,trafficSource:eC,trendsData:e5,updateViewportSize:ek,userBusinessRoleResource:e8,viewportSize:el}),te=(0,T.jsx)(iE.Z,{handleScroll:eM,onClick:eE,showShadow:es}),tt=(0,T.jsx)(nf,{backButton:te,bodyContent:e9,firstLoadComplete:et,isVideoPin:h.isVideoPin,onWrapperClick:ez,pin:g,pinResource:f,relatedModulesContent:e0?(0,T.jsx)(is._m,{children:(0,T.jsx)(is.IQ,{children:(0,T.jsx)(im,{clientTrackingParams:t,closeupBody:e9,isVideoPin:h.isVideoPin,isYoutubePin:h.isYoutubePin,pinKey:{type:"deprecated",data:g},relatedPinsContainerRef:x,relatedResourceOptions:eJ,searchQuery:eX,setRelatedPinsHeaderRef:eb,topLevelTrafficSource:eq,trafficSource:eC,viewParameter:(0,ep.Z)({hasPin:!!g,hasPinRichMetadata:!!g?.rich_metadata,hasPinRichMetadataProducts:!!g?.rich_metadata?.products,hasPinRichMetadataArticle:!!g?.rich_metadata?.article,hasPinRichMetadataRecipe:!!g?.rich_metadata?.recipe,hasPinStoryPinData:!!g?.story_pin_data}),viewportSize:el})})}):(0,T.jsx)(_.Fragment,{})}),{abortNoActionPlacementTimeout:tn,calculatedImageHeight:ti,isCommentAttachmentSelectorOpen:ta,isCommentComposerFocused:tl,isCommentPopoverInteractionActive:tr,isMediaViewerOpen:ts,isShoppingModuleExpanded:to,setCalculatedImageHeight:td,setIsCloseupMediaViewerOpen:tc,setIsCommentAttachmentSelectorOpen:tu,setIsCommentComposerFocused:tp,setIsCommentPopoverInteractionActive:tm,setIsMediaViewerOpen:tg,setIsShoppingModuleExpanded:th}=e;return(0,T.jsx)(nS,{abortNoActionPlacementTimeout:tn,calculatedImageHeight:ti,classProps:e,classState:{...e.initialState,pin:V,shopping:E,visualState:H,isCloseupMaximized:G,isCommentSectionOpen:X,didShortClickThrough:Y,didPinClickThrough:Q,firstLoadComplete:et,intervalId:ei,viewportSize:el,isOverRelatedPins:es},clientTrackingParams:t,closeupContent:tt,closeupWithinMasonryEnabled:n,descriptionPaneWidth:eV-eR.Gg-4*!!n,handleBackButtonClick:eE,handleCarouselSwipe:eK,handleFocus:ej,isCloseupMediaViewerOpen:eI,isCommentAttachmentSelectorOpen:ta,isCommentComposerFocused:tl,isCommentPopoverInteractionActive:tr,isCommentThreadExpanded:eU,isMediaViewerOpen:ts,isShoppingModuleExpanded:to,maxWidth:eV,paneWidth:eR.Gg,peekCloseupEnabled:m,setAbortNoActionPlacementTimeout:b,setCalculatedImageHeight:td,setIsCloseupMediaViewerOpen:tc,setIsCommentAttachmentSelectorOpen:tu,setIsCommentComposerFocused:tp,setIsCommentPopoverInteractionActive:tm,setIsCommentThreadExpanded:k,setIsMediaViewerOpen:tg,setIsShoppingModuleExpanded:th,showCloseupContentRight:!n&&(({isWideVideo:e,viewportSize:t,peekCloseupEnabled:n})=>!["md","sm"].includes(t)&&!e||n&&"sm"!==t)({isWideVideo:!!(0,tB.Z)((0,B.Z)({pin:g}))?.isWideVideo,viewportSize:el,peekCloseupEnabled:m}),showProductDetailPage:!1})}let iN=iv(function(e){var t;let{logContextEvent:n}=(0,ew.u)(),{pin:i,viewer:a,pinResource:l,pinId:r,goToCampaignCreation:s,deepLinkBackGoesToBoard:o,goBack:d,routePush:c,trafficSource:u}=e,p=(0,K.ZP)(),m=(0,em.r)(),g=(0,iF.Z)(),h=(0,ej.B)(),[y,x]=(0,_.useState)(!1),[k,S]=(0,_.useState)(!1),[P,w]=(0,_.useState)(!1),[C,j]=(0,_.useState)(!1),[A,F]=(0,_.useState)(!1),[E,L]=(0,_.useState)(!1),[D,R]=(0,_.useState)(!1),[M,Z]=(0,_.useState)(0),[z,O]=(0,_.useState)(!1),B=(0,ny.Z)(),N=(0,_.useRef)(null),{isRelatedPins10PercentVisible:V,setIsRelatedPins10PercentVisible:U}=(0,ty.K)();(0,_.useEffect)(()=>{let e=new IntersectionObserver(([e])=>{U(!!e&&e.isIntersecting)},{root:null,rootMargin:"-100px 0px 0px 0px",threshold:[0,.01,.02,.03,.04,.05,.06,.07,.08,.09,.1]}),t=N?.current;return N?.current&&e.observe(N?.current),()=>{t&&e.unobserve(t)}},[N,U]);let{setMostRecentPinId:H,setMostRecentPinImage:W}=(0,iz.R)(),G=(0,I.Z)({type:"deprecated",data:i}),$=(0,eu.sY)(i.embed?.type)&&"gif"||i.is_eligible_for_pdp&&"productPin"||i.rich_summary?.type_name==="recipe"&&"recipePin"||!!i.story_pin_data_id&&"storyPin"||!!i.videos?.video_list&&"video"||"image",{conversationOpen:X}=(0,iZ.Z)(),q=(0,tc.Z)(),Y=(0,ib.Z)(),J=(0,np.A)(),Q=(0,f.TH)(),ee=(0,iL.dI)(),[et,en]=(0,_.useState)(!1),{advertiser:ei}=h,ea=(0,iR.F0)(ei,r),el=(0,iA.Z)({type:"deprecated",data:i}),{landingContext:er}=(0,iT.Z)(),es=(0,eD.lJ)(a,q),ed=(0,iP.Z)({pinKey:{type:"deprecated",data:i}}),ec=m.checkExperiment("web_news_hub_landing_back_to_hf")?.anyEnabled,{onHandleBackButtonClick:ep}=iM({logCommerceAuxData:i.promoted_is_lead_ad,deepLinkBackGoesToBoard:o,goBack:d,routePush:c,trafficSource:u,viewer:a,requestContext:h,pinKey:{type:"deprecated",data:i}},n,ec);(0,_.useEffect)(()=>{l.data&&!et&&s&&en(!0)},[l.data,et,s]);let eg=!!i,eh=(0,_.useRef)(!1);eg&&J&&!eh.current&&(J.addBinaryAnnotation("pinType",$,"STRING"),(0,nm.rt)("pinType",$,"STRING"),eh.current=!0);let e_=i.sponsorship?.sponsor?.id,ey=!i.is_repin&&!!e_,ef=(0,eo.Z)(e_&&ey&&a.isAuth&&"storyPin"===$?{name:"ApiResource",options:{url:`/ads/v4/business_access/businesses/${e_}/me/ad_accounts_permissions/`}}:null),ex=a.isAuth&&(t=a.country,!b.includes(t))&&(0,v.Gv)({orbacSubjectId:es,pinIsRepin:i.is_repin,pinPinnerId:i.pinner?.id,viewerId:a.id,viewerIsPartner:a.isPartner}),{data:ev,isLoaded:ek}=(0,eo.Z)(ex?{name:"ApiResource",options:{url:`/v3/trends/partner/${a.id||""}/trends_for_pin/${i.id}/`,data:{number_terms_to_return:10}}}:null),{sideBySideRedesignFastFollowsEnabled:eS}=(0,eb.Z)(),eP=(0,_.useMemo)(()=>({data:ev,isLoaded:!ex||ek}),[ev,ek,ex]),eC=!!i.story_pin_data_id,eI=ix({pin:i,pinId:r,pinResource:l}),{mainPinImage:eT}=(0,i_.Z)({pinKey:{type:"deprecated",data:i}});return et?(window.location.assign(ea),(0,T.jsx)(_.Fragment,{})):(0,T.jsx)(iB,{...e,abortNoActionPlacementTimeout:z,calculatedImageHeight:M,clientTrackingParams:ed,closeupWithinMasonryEnabled:eS,conversationOpen:X,experimentsClient:m,getSterlingURL:Y,getStringifiedCommerceAuxData:G,i18n:p,initialState:eI,isCloseupMediaViewerOpen:A,isCommentAttachmentSelectorOpen:y,isCommentComposerFocused:k,isCommentPopoverInteractionActive:P,isCommentThreadExpanded:C,isEligibleForStaticImageIdeaPin:eC,isMediaViewerOpen:E,isRelatedPins10PercentVisible:V,isShoppingModuleExpanded:D,landingContext:er,location:Q,logContextEvent:n,mainImage:eT,onHandleBackButtonClick:ep,orbacActingAs:q,peekCloseupEnabled:!eS,pinFormattedLink:el,pwtSurfaceContext:J,relatedPinsContainerRef:N,requestContext:h,setAbortNoActionPlacementTimeout:O,setCalculatedImageHeight:Z,setIsCloseupMediaViewerOpen:F,setIsCommentAttachmentSelectorOpen:x,setIsCommentComposerFocused:S,setIsCommentPopoverInteractionActive:w,setIsCommentThreadExpanded:j,setIsMediaViewerOpen:L,setIsShoppingModuleExpanded:R,setMostRecentPinId:H,setMostRecentPinImage:W,toastManager:ee,trackInteraction:g,trendsData:eP,userBusinessRoleResource:ef,verticalNavWidth:B})});function iV(e){let t=(0,eo.Z)({name:"StoryPinTaggedProductsResource",options:{noCache:!0,id:e.pin.id}});return(0,T.jsx)(iN,{...e,storyPinTaggedProductsResource:t})}var iU=n(877956),iH=n(169053);function iW(e){let{previous:t}=(0,ts.ou)(),n=0===t.length,{children:i}=e,a=(0,f.TH)(),l=(0,tr.Z)(),r=(0,y.I0)(),{isBot:s}=(0,ej.B)(),{dropdownOpen:o}=(0,iZ.Z)(),d=(0,iH.JC)(),c=!!d[e.pinId]&&(d[e.pinId].saved||!!d[e.pinId].savedInfo),u=d[e.pinId]||e.pinResource.data||{},p=e.pinResource.data?.story_pin_data?.pages?.[0]?.blocks?.[0]?.video,m=u?.story_pin_data?.pages?.[0]?.blocks?.[0];p&&m&&!m?.video&&((u?.story_pin_data?.pages?.[0]?.blocks?.[0]).video=p);let g="inbox"===(0,n5.mB)(a.search).tab;return i({isLandingPage:n,isLimitedLogin:!!l.isAuth&&l.isLimitedLogin,didRepin:c,openInbox:o,pin:u,shouldShowInbox:g,updateExperienceForPlacement:e=>{r((0,iU.pz)([e],s))}})}var iG=n(115939),i$=n(399656),iX=n(369416);let iq=`
      ::view-transition-group(image),
      ::view-transition-group(video) {
        animation-timing-function: cubic-bezier(0.55, 0, 0, 1);
      }
      ::view-transition-old([view-transition-name="video"]) {
        display: none;
      }
      ::view-transition-new([view-transition-name="video"]) {
        animation: none;
      }
    `,iY=function({children:e}){return(0,T.jsxs)(_.Fragment,{children:[(0,T.jsx)(iX.Z,{unsafeCSS:iq}),e]})};var iJ=n(249013),iQ=n(67484),i0=n(780879);let i1={display:"block",position:"relative",cursor:"auto"};var i2=n(371941),i3=n(734871);function i6(e){let{disabled:t,height:n,top:i=0,zIndex:a}=e,l=(0,_.useRef)(null),r=(0,i3.Z)();if(t)return e.children;let s=l.current?.getBoundingClientRect().top||0;return(0,T.jsx)(k.xu,{ref:l,"data-test-id":"product-sticky-container",id:"product-sticky-container ",children:(0,T.jsx)(k.Le,{height:n,top:r+i+s,zIndex:a,children:e.children})})}function i4({isStoryPin:e,isWideVideo:t,pin:n,trafficSource:i,viewParameterType:a,onClickThrough:l,showStructuredDescription:r,didShortClickThrough:s,goBack:o,isInStream:d=!1,isDeletedStoryPin:c,onSaveButtonClick:u,onUpdate:p,outerBodyStyle:m,routePush:g,showPartnerModule:h,showPinStats:y,showTrendsOnPinCloseup:f,showRepinOnInitialRender:x,trendsData:v,viewType:b}){let k=(0,_.useRef)(null),S=(0,_.useRef)(null),P=(0,_.useRef)(null),w=(0,tr.Z)(),{closeupWithinMasonryEnabled:C,clientTrackingParams:I}=(0,W.x4)(),{checkExperiment:j}=(0,em.r)(),A=(0,tc.Z)(),F=(0,eD.lJ)(w,A),E=e7(90),L=e5(),{isCloseupMediaViewerEnabled:D}=(0,tt.Z)({isShufflePin:!!n?.shuffle}),R=(0,_.useCallback)(()=>{l&&l({componentType:129}),L.setClickthroughComponentForSurvey("legoMaybeLink")},[l,L]),[K,M]=(0,_.useState)(!1),Z=!!n.is_eligible_for_aggregated_comments,z=C&&Z&&"enabled_dropdown"===j("ce_dweb_new_closeup_comment_module").group,O=C&&Z&&"enabled_popover"===j("ce_dweb_new_closeup_comment_module").group,{setClickthroughComponentForSurvey:B,imageContainerRef:N}=L,{getViewParameter:V}=ef({type:"deprecated",data:n}),U=V(a),H=(0,_.useCallback)(()=>{l({wasImageClicked:!0})},[l]),G=eR.ER,$=(0,T.jsx)(ti.Z,{id:"VisualContentContainer",children:(0,T.jsx)(tg,{handleImageClickThrough:H,imageContainerRef:N,isStoryPin:e,isWideVideo:t,onSaveButtonClick:u,pin:n,setClickthroughComponentForSurvey:B,trafficSource:i,viewParameter:U,viewParameterType:a,visualContentContainerRef:Z?E.visualContentContainerRef:void 0})}),X=(0,T.jsx)(ti.Z,{id:"ProductStickyContainer-2",children:(0,T.jsx)(i6,{disabled:!1,top:-16,zIndex:tu.mS,children:$})}),q=r&&!D?X:$,Y=(0,e$.Z)({pinKey:{type:"deprecated",data:n},orbacActingAs:A,viewer:w}),J=(0,T.jsx)(_.Fragment,{children:(0,T.jsx)(ti.Z,{id:"ProductMetadata",children:(0,T.jsx)(i2.Z,{blendedUIScrollContainerRef:P,clientTrackingParams:I,detailsScrollContainerRef:k.current,inCommentsImprovedDropdownExp:z,inCommentsPopoverExp:O,isBoardOwnerOrCollaborator:Y,isLoadingNewlyCreatedComment:K,onClickThrough:l,outerPaddingSize:G,pinKey:{type:"deprecated",data:n},showPartnerModule:h,showPDPComments:Z,showPinStats:y,showStructuredDescription:r,showTrendsOnPinCloseup:f,trendsData:v,viewParameter:U})})});return(0,T.jsx)(ti.Z,{id:"CloseupBodyLayout",children:(0,T.jsx)(tL,{actionBarContainerRef:S,blendedUIScrollContainerRef:P,closeupActionBarMaxWidth:C?void 0:eR.CI,descriptionContentMaxHeight:Z?E.descriptionContentMaxHeight:void 0,didShortClickThrough:s,disableLeadPin:!0,goBack:o,inCommentsImprovedDropdownExp:z,inCommentsPopoverExp:O,isCloseupMaximized:!1,isDeletedStoryPin:c,isEligibleForPinReactions:!n.is_promoted&&!n.is_downstream_promotion&&!c,isInStream:d,isStoryPin:e,isWideVideo:t,marginBottom:8*!C,metadata:J,metadataContainerRef:k,onClickThrough:R,onSaveButtonClick:u,onUpdate:p,orbacSubjectId:F,outerBodyStyle:m,outerPaddingSize:G,pin:n,routePush:g,setIsLoadingNewlyCreatedComment:M,showPDPComments:Z,showRepinOnInitialRender:x,trafficSource:i,viewer:w,viewParameter:U,viewType:b,visualContentContainer:q,visualContentContainerRef:Z?E.visualContentContainerRef:void 0,webLinkSurveyState:L})})}let i7=(0,eZ.Z)(()=>n.e("96615").then(n.bind(n,174753)),{ssr:!1},e=>174753,"CloseupPartnerModule",e=>["96615"]),i5=(0,eZ.Z)(()=>n.e("54347").then(n.bind(n,15863)),{ssr:!1},e=>15863,"SponsorshipApprovalModule",e=>["54347"]),i8={boxShadow:"0 1px 20px 0 rgba(0, 0, 0, 0.1)",borderRadius:32},i9={boxShadow:void 0,borderRadius:16},ae=({closeupWithinMasonryEnabled:e,didShortClickThrough:t,executeClickthrough:n,handleBackButtonClick:i,handleSaveButtonClick:a,isLimitedLogin:l,maxWidth:r,orbacActingAs:s,pin:o,pinResource:d,routePush:c,showRepinOnInitialRender:u,showStructuredDescription:p,trendsData:m,userBusinessRoleResource:g,trafficSource:h,viewer:y,viewportSize:f})=>{let{checkExperiment:x}=(0,em.r)(),{id:b,sponsorship:S,story_pin_data_id:P,story_pin_data:w}=o,C=!!P,I=!!w?.is_deleted,{creator:j,sponsor:A,status:F}=S||{},{username:E}=j||{},{username:L}=A||{},{refresh:D}=d,R=(0,eD.lJ)(y,s),{data:K}=g||{},M=!o.is_repin&&!!L,Z=L===y.username?[tM.V3.OWNER]:K?.permissions,z=L===y.username||!!Z?.find(e=>tZ.includes(e)),O=L===y.username||!!Z?.find(e=>tZ.includes(e)),{isWideVideo:N}=(0,tB.Z)((0,B.Z)({pin:o}))||{},V=(0,tO.Z)({type:"deprecated",data:o},y,R),U=(0,v.CA)(m?.data),H=M&&y.isAuth&&x("mweb_web_android_ios_backend_clbc_display_controls").anyEnabled&&(z&&0===F||O&&1===F),W=C&&(w?.pages?.length??0)>0,G=(0,tz.WE)(y,f,V,U,m,H),$=e?i9:i8;return(0,T.jsx)(k.xu,{dangerouslySetInlineStyle:{__style:C?{...i1,width:"100%"}:{}},"data-test-id":"gradient",display:"flex",id:"gradient",justifyContent:"center",children:(0,T.jsx)(_.Fragment,{children:(0,T.jsx)(ti.Z,{id:"ResponsiveCloseupContainer",children:(0,T.jsx)(tV.Z,{isStoryPin:C,isWideVideo:N,children:(0,T.jsx)(eI.Z,{name:"CloseupBody",children:(0,T.jsxs)(k.xu,{children:[(0,T.jsxs)(k.xu,{alignItems:N?"center":void 0,direction:N?"column":void 0,display:N?"flex":void 0,children:[H&&"number"==typeof F&&(0,T.jsx)(k.xu,{"data-test-id":"sponsorship-approval-module",display:"flex",children:(0,T.jsx)(eI.Z,{name:"SafeSuspense_Closeup_SponsorshipApprovalModule",children:(0,T.jsx)(ti.Z,{id:"SponsorshipApprovalModule",children:(0,T.jsx)(eA.Z,{children:(0,T.jsx)(i5,{business_role:Z,creatorUsername:E??"",pinId:b,sponsorshipStatus:F})})})})}),G&&!e&&(0,T.jsx)(k.xu,{"data-test-id":"PartnerModule",width:"lg"===f&&N?r:"100%",children:(0,T.jsx)(eI.Z,{name:"SafeSuspense_Closeup_PartnerModule",children:(0,T.jsx)(ti.Z,{id:"PartnerModule",children:(0,T.jsx)(eA.Z,{children:(0,T.jsx)(i7,{borderStyle:$,isStoryPin:C,pinKey:{type:"deprecated",data:o},showPinStats:V,trendsData:U?m?.data?.results:null,viewportSize:f})})})})})]}),(0,T.jsx)(ti.Z,{id:"ProductDetailPageBody",children:(0,T.jsx)(i4,{didShortClickThrough:t,goBack:i,isDeletedStoryPin:!!I,isStoryPin:C,isWideVideo:!!N,onClickThrough:n,onSaveButtonClick:a,onUpdate:D,outerBodyStyle:C?null:$,pin:o,routePush:c,showPartnerModule:G,showPinStats:V,showRepinOnInitialRender:!l&&u,showStructuredDescription:p,showTrendsOnPinCloseup:U,trafficSource:h,trendsData:m,viewParameterType:W?157:void 0,viewType:3})})]})})})})})})},at=(0,eZ.Z)(()=>n.e("75139").then(n.bind(n,113066)),void 0,e=>113066,"StructuredFeedStoryModule",e=>["75139"]),an=(0,eZ.Z)(()=>n.e("65346").then(n.bind(n,667980)),void 0,e=>667980,"app-common-react-components-closeup-CloseupRelatedModules-DomainModule",e=>["65346"]),ai=(0,eZ.Z)(()=>Promise.resolve().then(n.bind(n,589183)),void 0,e=>589183,"app-common-react-components-closeup-CloseupRelatedModules-CloseupRelatedModulesInclusiveFilters",e=>[]),aa=(0,eZ.Z)(()=>n.e("99743").then(n.bind(n,412098)),void 0,e=>412098,"app-common-react-components-closeup-CloseupRelatedModules-CloseupRelatedModulesHeader",e=>["99743"]),al=(void 0!==m||(m=n(149627)).hash&&"cce8a8d5ad05c8e6c1137bf7c8845c2a"!==m.hash&&console.error("The definition of 'ProductDetailPageRelatedModule_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),m),ar=(0,_.forwardRef)(({clientTrackingParams:e,pinKey:t,setRelatedPinsHeaderRef:n,slotIndex:i,story:a,topLevelTrafficSource:l,viewParameter:r,viewportSize:s},o)=>{let d=(0,w.Z)(al,t),{closeupWithinMasonryEnabled:c}=(0,W.x4)();if(!a)return null;let{container_type:u,story_type:p}=a,m=(0,nP.oV)(p);if((0,n7.Z)(u)){let e=88===u,t=90===u;return(0,T.jsx)(k.xu,{marginBottom:e||t?0:12,paddingX:12*!!t,children:(0,T.jsx)(at,{componentFallback:13176,initialSlotIndex:i,story:a,storyKey:{type:"deprecated",data:a},surface:"ShoppingDynamicHeightGrid",view:3,viewParameter:r})})}return(0,nP.HM)(p)&&m?!c&&(0,T.jsx)(k.xu,{alignSelf:"center",children:(0,T.jsx)(ai,{filter:m,story:a,viewParameter:r})}):["related_products_feed_header","related_modules_header"].includes(p)?(0,T.jsx)(k.xu,{ref:n,"data-test-id":"related-modules-header",children:(0,T.jsx)(aa,{ref:o,clientTrackingParams:e,slotIndex:i,storyId:a.id,storyType:p,title:a.title?.format,viewParameter:r})}):"related_domain_carousel"===p?(0,T.jsx)(k.xu,{display:"flex",justifyContent:"center",marginBottom:12,children:(0,T.jsx)(an,{closeupImageSignature:d.imageSignature||"",data:a,slotIndex:i,storyId:a.id,storyType:p,topLevelTrafficSource:l,viewParameter:r,viewportSize:s})}):null});var as=n(713705),ao=n(619256);let ad=(0,eZ.Z)(()=>n.e("75139").then(n.bind(n,113066)),void 0,e=>113066,"app-packages-StructuredFeed-ModuleReps-utils-StructuredFeedStoryModule",e=>["75139"]),ac=()=>(0,T.jsx)(_.Fragment,{children:Array(12).fill(void 0).map((e,t)=>(0,T.jsx)(k.xu,{marginEnd:4,width:as.j},`empty-pin-${t}`))}),au=(void 0!==g||(g=n(502396)).hash&&"86cb4963f4714e2184c01e13236c3616"!==g.hash&&console.error("The definition of 'ProductDetailPageRelatedPins_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),g);function ap(e){return 154===e.container_type?2:e.columnSpan??e.display_options?.content_display?.grid_layout?.cols??1}function am({surface:e="PdpRelatedPinGrid",closeupBody:t,closeupInclusiveFilters:n,isFetching:i=!1,pinKey:a,relatedPins:l,showResponsiveInclusiveFilters:r,topLevelTrafficSource:s}){let o=(0,K.ZP)(),{closeupWithinMasonryEnabled:d}=(0,W.x4)(),c=(0,w.Z)(au,a),u=(0,io.Z)(),p=(0,_.useRef)(null),m=(0,ep.Z)({hasPin:!!c,hasPinRichMetadata:!!c.richMetadata,hasPinRichMetadataProducts:!!c.richMetadata?.products,hasPinRichMetadataArticle:!!c.richMetadata?.article,hasPinRichMetadataRecipe:!!c.richMetadata?.recipe,hasPinStoryPinData:!!c.storyPinData}),g=(0,_.useMemo)(()=>nZ(l),[l]),h=({data:i,itemIdx:a})=>{let l=(0,n2.Z)(u),r=a-g,o=null;switch(i.type){case"closeup_module":o=t;break;case"shopping_module":o=(0,T.jsx)(e0.Z,{moduleWidth:"100%",pinKey:c,trafficSource:s,viewParameter:m});break;case"inclusive_filters_module":o=n;break;case"story":switch(154===i.container_type&&(o=(0,T.jsx)(ao.Z,{slotIndex:r,story:i,viewParameter:m,viewType:3})),i.story_type){case"BUBBLE_ONE_COL":o=(0,T.jsx)(n8.default,{bubbles:i.objects,id:i.id,referringSource:i.referring_source,slotIndex:r,storyType:i.story_type,title:i.title,viewParameter:m,viewType:3});break;case"related_query_shop_upsell_closeup":o=(0,T.jsx)(nJ.default,{itemIdx:r,story:i,viewParameter:m,viewType:3})}(0,n7.Z)(i.container_type)&&(o=(0,T.jsx)(ad,{initialSlotIndex:r,story:i,storyKey:{type:"deprecated",data:i},styleOverrides:{showModuleBorder:ap(i)>1},view:3,viewParameter:m}));break;default:o=(0,T.jsx)(ie.r,{componentType:13176,imageOnlyOption:l?"image-only":"default",pinId:i.id,pinKey:{type:"deprecated",data:i},slotIndex:r,surface:e,trackingParams:i.tracking_params,viewData:{pin_id:c.entityId},viewParameter:m,viewType:3})}return(0,T.jsx)(nK,{children:o})},y={isLoadedAccessibilityLabel:l.length>0?o._('Loaded more related product results', 'closeup.relatedProducts.results', 'Accessibility label for loaded more related product results'):o._('Loaded related products result', 'closeup.relatedProducts.results', 'Accessibility label for loaded related products result'),isLoadingAccessibilityLabel:l.length>0?o._('Loading more related products results', 'closeup.relatedProducts.loading', 'Accessibility label for loading more related products results'):o._('Loading related products results', 'closeup.relatedProducts.loading', 'Accessibility label for loading related products results')},f=d?(0,T.jsx)(n0.default,{_getResponsiveModuleConfigForSecondItem:(0,nO.fz)(!!r),align:"center",getColumnSpanConfig:ap,isFetching:i,isLoadingStateEnabled:!0,items:l,layout:"basic",masonryRef:p,minCols:2,renderItem:h,serverRender:!0,virtualize:nO.o1,...y}):(0,T.jsxs)(k.xu,{dangerouslySetInlineStyle:{__style:{marginLeft:"5px"}},children:[(0,T.jsx)(n0.default,{getColumnSpanConfig:ap,isFetching:i,isLoadingStateEnabled:!0,items:l,renderItem:h,...y}),(0,T.jsx)(ac,{})]});return(0,T.jsx)(id.Z,{metricName:"RelatedModulesFeed",children:(0,T.jsx)(nb.Z,{component:86,viewParameter:m,children:f})})}var ag=n(598579),ah=n(730647);let a_=(void 0!==h||(h=n(937046)).hash&&"85ae0703574c2bc161bc13206c3184f8"!==h.hash&&console.error("The definition of 'ProductDetailPageRelatedModules_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),h),ay=(0,_.forwardRef)(({clientTrackingParams:e,closeupBody:t,excludeStories:n,initialSlotIndex:i=0,isFilteredFeed:a,pinKey:l,relatedModulesFeedResource:r,setRelatedPinsHeaderRef:s,topLevelTrafficSource:o,viewParameter:d,viewportSize:c},u)=>{let p=(0,w.Z)(a_,l),{search:m}=(0,f.TH)(),{closeupWithinMasonryEnabled:g}=(0,W.x4)(),h=nz(new URLSearchParams(m).get("filters")??""),y=(0,_.useMemo)(()=>(r.data||[]).filter(e=>["SKIN_TONE_FILTER_QUERIES","hair_pattern_filter_queries","inclusive_onebar_pills_on_closeup"].includes(e?.story_type??"")).find(e=>(0,nP.HM)(e?.story_type??"")),[r]),{closeupMasonryModules:x,inclusiveFilters:v}=(0,nO.ZP)({pinId:p.entityId,inclusiveModuleToCache:y,showProductDetailPage:!0}),b=v?(0,nP.oV)(v.story_type??""):"",{inInclusiveEfficientRefinements:S}=(0,nB.Z)(b),P=g&&S&&h,C=(0,eo.Z)(P?{name:"ApiResource",options:{url:`/v3/pins/${p.entityId}/related/pins/filter/`,data:{fields:nH.Z,related_pins_tabs_selections:h}}}:null),{data:I,isAtEnd:j,isFetching:A,fetchMore:F,nextBookmark:E}=P?C:r,L=(0,_.useMemo)(()=>(I||[]).filter(e=>!(n&&"story"===e.type&&e.story_type&&n.includes(e.story_type))),[I,n]),D=a&&E===n6.qx,R=I?I.length:0,K=(0,_.useMemo)(()=>(0,ah.Z)(L),[L]),M=(0,_.useCallback)(e=>!!("pin"===e.type||"story"===e.type&&(ag.v8.has(e.story_type)||ag.AW.has(e.story_type)||154===e.container_type)),[]),Z=(0,f.k6)(),z=(0,_.useRef)(i),O=(0,n5.mB)(m).rs,B=Z?.action==="POP";(0,_.useEffect)(()=>{nU({isFromBackButton:B,referringSource:O,relatedModulesRef:u})},[B,m,O,u]);let N=(0,_.useMemo)(()=>v&&b?(0,T.jsx)(nL.default,{filter:b,story:v,viewParameter:d}):null,[v,b,d]),{storyModules:V,allPins:U}=(0,_.useMemo)(()=>{let t=[],n=[...x],i=0;return K.length>0&&K.forEach((a,l)=>{0===l&&(z.current=0,i=0);let r=0;Array.isArray(a)?(r+=a.length,n.push(...a.filter(M))):"story"===a.type&&(r+="objects"in a&&Array.isArray(a.objects)?a.objects.length:1,t.push((0,T.jsx)(k.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",children:(0,T.jsx)(ar,{ref:u,clientTrackingParams:e,pinKey:p,setRelatedPinsHeaderRef:s,slotIndex:i,story:a,topLevelTrafficSource:o,viewParameter:d,viewportSize:c})},Array.isArray(a)?a[0]?.id:a.id))),z.current=i+=r}),{storyModules:t,allPins:n}},[x,K,M,e,p,s,o,d,c,u]);return(0,T.jsxs)(_.Fragment,{children:[V,(0,T.jsx)(ti.Z,{id:"ProductDetailPageRelatedPins",children:(0,T.jsx)(am,{closeupBody:t,closeupInclusiveFilters:N,initialSlotIndex:z.current,isFetching:A,pinKey:p,relatedPins:U,showResponsiveInclusiveFilters:S,surface:a?"ShoppingDynamicHeightGrid":void 0,topLevelTrafficSource:o})}),(0,T.jsx)(k.gr,{fetchMore:F,isAtEnd:j,isFetching:A}),D&&R>0&&(0,T.jsx)(nF,{}),D&&0===R&&(0,T.jsx)(nE,{})]})});function af({relatedPinsContainerRef:e,relatedResourceOptions:t,viewParameter:n,...i}){let{search:a}=(0,f.TH)(),l=new URLSearchParams(a).get("utm_source"),r=(0,eo.Z)("ads_manager"===l?null:t);return(0,T.jsx)(k.xu,{ref:e,"data-test-id":"relatedPins",direction:"column",display:"flex",flex:"grow",position:"relative",children:(0,T.jsx)(ti.Z,{id:"RelatedModulesFeed",children:(0,T.jsx)(ay,{...i,ref:e,excludeStories:[],initialSlotIndex:0,isFilteredFeed:!1,relatedModulesFeedResource:r,relatedResourceOptions:t,viewParameter:n})})})}var ax=n(374114),av=n(884620),ab=n(300540),ak=n(97781),aS=n(966838);function aP({conversation_id:e,senderId:t,pinId:n}){(0,iw.Z)({url:`/v3/conversations/${e}/message/mark_seen/`,method:"POST",data:{sender:t,pin:n}})}function aw(e){let{clientTrackingParams:t,closeupWithinMasonryEnabled:n,conversation_id:i,conversationOpen:a,didRepin:l,dispatch:r,goToCampaignCreation:s,i18n:o,initialState:d,isLandingPage:c,isLimitedLogin:u,logContextEvent:p,mainImage:m,onHandleBackButtonClick:g,openInbox:h,orbacActingAs:y,peekCloseupEnabled:f,pin:x,pinFormattedLink:v,pinId:b,pinResource:S,pwtSurfaceContext:w,requestContext:C,routePush:j,senderId:A,setAbortNoActionPlacementTimeout:F,setMostRecentPinId:E,setMostRecentPinImage:L,setPlacementExtraContext:D,shouldShowInbox:R,showRepinOnInitialRender:K,showStructuredDescription:M,toastManager:Z,trackInteraction:z,trafficSource:O,trendsData:N,userBusinessRoleResource:V,verticalNavWidth:U,viewer:H}=e,{visualState:W,didShortClickThrough:G=!1,isOverRelatedPins:$=!1,viewportSize:X="lg",firstLoadComplete:q=!1,campaignCreationTriggered:Y=!1,intervalId:J}=d||{},Q=d?.didPinClickThrough||!1,[ee,et]=(0,_.useState)(W),[en,ei]=(0,_.useState)(G),[ea,el]=(0,_.useState)(X),[er,es]=(0,_.useState)($),[eo,ed]=(0,_.useState)(q),[ec,em]=(0,_.useState)(Y),[eg,eh]=(0,_.useState)(J),[e_,ey]=(0,_.useState)(Q),ef=(0,_.useCallback)(()=>{et(e=>{let t=ih({carouselData:x.carousel_data,images:x.images,product:(x.rich_metadata||x.rich_summary)?.products?.[0]});return{...e,carouselData:t}})},[x]);(0,e2.Z)(()=>{let e=function({richPinData:e={}}){return e?.products?.[0]}({richPinData:x.rich_summary});!ee.carouselData&&(e?.has_multi_images||e?.videos?.length)&&ef()});let[ex,ev]=(0,_.useState)(!1),eb=(0,_.useRef)(!1),ek=(0,_.useRef)(null),eS=(0,_.useRef)(0),eP=(0,_.useMemo)(()=>{let e=(x||{}).board||{},t=e.is_collaborative&&(0,ik.Z)(e.collaborated_by_me,e.owner?.id,H);return!!(H.isAuth&&x.pinner?.id===H.id||t)},[x,H]),ew=(0,_.useCallback)(()=>{let{isWideVideo:e}=(0,tB.Z)((0,B.Z)({pin:x}))||{};eb.current&&el(function({isWideVideo:e,hasCarouselData:t,closeupWithinMasonryEnabled:n,verticalNavWidth:i}){let{BREAKPOINT:a,WIDE_VIDEO_BREAKPOINT:l,WIDE_PDP_BREAKPOINT:r,SM_BREAKPOINT:s,EXP_SM_BREAKPOINT:o,SM_WITH_CAROUSEL_BREAKPOINT:d}=(({verticalNavWidth:e})=>({BREAKPOINT:1056+e,WIDE_VIDEO_BREAKPOINT:998+e,WIDE_PDP_BREAKPOINT:1300+e,SM_BREAKPOINT:680+e,EXP_SM_BREAKPOINT:860+e,SM_WITH_CAROUSEL_BREAKPOINT:960+e,BACK_BUTTON_WIDE_BREAKPOINT:1135+e,BACK_BUTTON_WIDE_CAROUSEL_BREAKPOINT:1465+e,BACK_BUTTON_WITH_LABEL_WIDE_BREAKPOINT:1340+e,BACK_BUTTON_WITH_LABEL_WIDE_CAROUSEL_BREAKPOINT:1640+e,BACK_BUTTON_NARROW_CAROUSEL_BREAKPOINT:780+e,BACK_BUTTON_NARROW_BREAKPOINT:630+e}))({verticalNavWidth:i}),c=a,u=n?o:s;return(e&&(c=l),t&&(c=r,u=n?d:u),window?.innerWidth<u)?"sm":window?.innerWidth<c?"md":"lg"}({isWideVideo:!!e,hasCarouselData:!!ee?.carouselData,closeupWithinMasonryEnabled:n,verticalNavWidth:U}))},[n,x,U,ee?.carouselData]),eC=(0,_.useCallback)(()=>{eS.current>0&&(ei(Date.now()-eS.current<5e3),eS.current=0)},[]);(0,e2.Z)(()=>{eb.current=!0,i&&A&&b&&aP({conversation_id:i,senderId:A,pinId:b}),i&&(a(i),R&&h()),x.image_signature&&L(x.image_signature),b&&E(b),D&&D({is_own_or_group_pin:eP});let e=(0,no.M0)().getItem(nr.M8)||"";return e&&e===b&&((0,no.M0)().removeItem(nr.M8),z({action:"trigger",item:"unauth-save-button-quicksave"}),(0,ax.Z)({description:x.description,entityId:x.id,link:x.link,promotedIsRemovable:x.promoted_is_removable,title:x.title},o).then(e=>{let{id:t,url:n,name:i}=e;r((0,aS.d)({boardId:t,url:n,title:i||"",pinId:b,nodeId:x.node_id})),Z.showToast(({hideToast:t})=>(0,T.jsx)(ak.Z,{boardName:e.name,boardUrl:e.url,onHide:t,pinImageUrl:x.images?.["236x"]?.url??""}))})),ew(),window.addEventListener("resize",ew),window.addEventListener("focus",eC),window?.location?.search?.includes("invite_code=")&&(0,iC.Z)(),()=>{window.removeEventListener("resize",ew),window.removeEventListener("focus",eC),eb.current=!1}});let eI=(0,_.useCallback)(()=>{let{advertiser:e}=C,t=(0,iR.F0)(e,b);em(!0),window.location.assign(t)},[b,C]),eT=(0,_.useCallback)((e,t)=>{let n={visualState:ee,didShortClickThrough:en,didPinClickThrough:e_,isOverRelatedPins:er,firstLoadComplete:eo,campaignCreationTriggered:ec,intervalId:eg,viewportSize:ea,backButtonLabelFitInScreen:!1,closeupBodyContainerHeight:0,closeupContainerHeight:0},i=function(e,t){switch(t.type){case"gallerySelect":return{shopping:t.select};case"pinLoaded":{let n=e.myTry?{}:{myTry:{isDoneByMe:t.pin.done_by_me}};return{pin:t.pin,...n,firstLoadComplete:!0}}case"tryChange":return{myTry:{isDoneByMe:t.isDoneByMe}};default:throw"impossible"}}(n,e);i.visualState!==n.visualState&&i.visualState&&et(i.visualState),i.didShortClickThrough!==n.didShortClickThrough&&i.didShortClickThrough&&ei(i.didShortClickThrough),i.didPinClickThrough!==n.didPinClickThrough&&i.didPinClickThrough&&ey(i.didPinClickThrough),i.isOverRelatedPins!==n.isOverRelatedPins&&i.isOverRelatedPins&&es(i.isOverRelatedPins),i.firstLoadComplete!==n.firstLoadComplete&&i.firstLoadComplete&&ed(i.firstLoadComplete),i.campaignCreationTriggered!==n.campaignCreationTriggered&&i.campaignCreationTriggered&&em(i.campaignCreationTriggered),i.intervalId!==n.intervalId&&eh(i.intervalId),i.viewportSize!==n.viewportSize&&i.viewportSize&&el(i.viewportSize),t&&t()},[ee,en,e_,er,eo,ec,eg,ea]),ej=(0,_.useCallback)(()=>{let e;if(!eo)return;let t=ih({carouselData:x.carousel_data,images:x.images,product:(x.rich_metadata||x.rich_summary)?.products?.[0]}),n=(t?.carousel_slots||[])[0]||{},i=(0,iS.Z)(n.images),a=ee.carouselData,l=ee.mainImage||{url:""},r=a?.index||0;e=t&&(t.carousel_slots?.length||0)>1?{mainImage:m,carouselData:{...t,index:r},previewImage:iy(x.images?.["236x"])}:i?.url?{mainImage:{url:i.url,height:i.height||1,width:i.width||1}}:{mainImage:m,previewImage:iy(x.images?.["236x"])},(a?.id!==e.carouselData?.id||JSON.stringify(a?.carousel_slots)!==JSON.stringify(e.carouselData?.carousel_slots)||l.url!==e.mainImage.url)&&(et(e),ew())},[eo,x.carousel_data,x.images,x.rich_metadata,x.rich_summary,ee.carouselData,ee.mainImage,m,ew]),eA=(0,_.useCallback)(()=>{let{carouselData:e}=ee;return function({viewportSize:e,hasCarouselData:t}){return t&&["lg","md"].includes(e)}({viewportSize:ea,hasCarouselData:!!e})},[ea,ee]);(0,_.useEffect)(()=>{ej(),!eo||eA()||ex||(w?.removeConstraint("thumbnailsLoaded"),(0,nm.l7)("thumbnailsLoaded"),ev(!0));let{data:e}=S;e&&!eo&&(e.carousel_data&&(e.carousel_data.index=ee.carouselData?.index||0),eT({type:"pinLoaded",pin:e})),i&&A&&b&&aP({conversation_id:i,senderId:A,pinId:b}),S.data&&!ec&&s&&eI();let t={};((0,no.M0)().getItem(nr.W3)||"").includes(`/pin/${b}`)&&c&&(t.loginPageType="pin"),l&&(t.didRepin=!0),x.image_signature&&(t.pin_image_signature=x.image_signature),t.is_own_or_group_pin=eP,!(0,iI.Z)(t)&&D&&D({...t})},[eo,ec,S.data,b,ee.carouselData,x.image_signature,i,A,l,c,ex,s,ej,eA,S,eP,D,w,eT,eI]);let eF=(0,_.useCallback)(e=>{ek.current=e||null},[]),eE=(0,_.useCallback)(()=>{clearInterval(eg),D&&D({didLongClickThrough:!0})},[eg,D]),eL=(0,I.Z)({type:"deprecated",data:x}),eK=(0,_.useCallback)(e=>{let n=!!x.story_pin_data,{wasImageClicked:i,auxData:a,componentType:l=n?228:4,elementType:r=i?35:n?11157:361,viewType:s=3}=e||{},o=(0,ep.Z)({hasPin:!0,hasPinRichMetadata:!!x.rich_metadata,hasPinRichMetadataProducts:!!x.rich_metadata?.products,hasPinRichMetadataArticle:!!x.rich_metadata?.article,hasPinRichMetadataRecipe:!!x.rich_metadata?.recipe,hasPinStoryPinData:!!x.story_pin_data}),d={...eL(),...a||{}};H&&H.isAuth&&!e_&&D&&(D({didPinClickThrough:!0}),ey(!0)),n&&p({event_type:102,view_type:132,view_parameter:3549,element:12971,aux_data:{pin_id:x.id,url:v}}),p({event_type:101,object_id_str:b,component:l,element:r,aux_data:d,clientTrackingParams:t}),p({event_type:12,object_id_str:b,view_type:s,view_parameter:o,component:l,element:r,aux_data:d,clientTrackingParams:t}),p({event_type:8948,view_type:s,view_parameter:o,component:l,element:r,object_id_str:b,aux_data:{click_type:"clickthrough",closeup_navigation_type:O&&(0,eu.sV)(O)?"deeplink":"click",...d}}),p({event_type:12,object_id_str:b,view_type:s,view_parameter:o,component:l,element:r,aux_data:{...d,...(0,ij.Z)(x.link_utm_applicable_and_replaced)},clientTrackingParams:t}),i&&eh(window.setInterval(eE,12e4)),eS.current=Date.now(),en&&ei(!1),F(!0)},[x.story_pin_data,x.rich_metadata,x.id,eL,H,e_,D,p,b,t,O,en,F,v,eE,x.link_utm_applicable_and_replaced]),eM=(0,_.useCallback)(()=>{clearInterval(eg),D&&D({didLongClickThrough:!1})},[eg,D]),eZ=(0,_.useCallback)(()=>{p({event_type:101,object_id_str:x.id,component:4,element:13306,clientTrackingParams:t,aux_data:{...eL()}}),F(!0)},[x.id,p,t,eL,F]),ez=(0,_.useCallback)(()=>{g()},[g]),eO=(0,_.useCallback)(e=>{eo&&et(t=>({...t,carouselData:{...t.carouselData||{},index:e}}))},[eo]),eB=(0,_.useCallback)(()=>(0,ng.Z)(()=>{if(!ek.current)return;let e=e3.hu,t=ek.current.getBoundingClientRect().top<=e;er!==t&&es(t)},10)(),[er]),eN=(0,_.useCallback)(e=>{e.stopPropagation(),ez()},[ez]),{abortNoActionPlacementTimeout:eV,contextPinIds:eU,getAdditionalFields:eH,pinDerivedData:eW,topLevelTrafficSource:eG,topLevelTrafficSourceDepth:e$,searchQuery:eX,isCommentAttachmentSelectorOpen:eq,isCommentComposerFocused:eY,isCommentPopoverInteractionActive:eJ,isCommentThreadExpanded:eQ,isProductDetailsExpanded:e0,setIsCommentAttachmentSelectorOpen:e1,setIsCommentComposerFocused:e6,setIsCommentPopoverInteractionActive:e4,setIsCommentThreadExpanded:e7,setIsProductDetailsExpanded:e5,isCloseupMediaViewerOpen:e8,setIsCloseupMediaViewerOpen:e9,landingContext:te,relatedPinsContainerRef:tt}=e,tn=eL(),{isWideVideo:ta}=(0,tB.Z)((0,B.Z)({pin:x}))||{},tl=(0,P.Z)({showProductDetailPage:!0})?"sm"!==ea:!n&&(({isWideVideo:e,viewportSize:t,peekCloseupEnabled:n})=>!["md","sm"].includes(t)&&!e||n&&"sm"!==t)({isWideVideo:!!ta,viewportSize:ea,peekCloseupEnabled:f}),{recommendation_reason:tr}=x,ts=(0,_.useMemo)(()=>({name:"RelatedModulesResource",options:{additional_fields:eH(),pin_id:x.id,context_pin_ids:eU,homefeed_source_sig:tr&&["NAVBOOST_P2P","NAVBOOST_PFY","INSTANT_PFY_NON_MATERIALIZABLE","P2P","P2P_CLICKTHROUGH","FRESH_TEXT_EMBEDDINGS","INTENTIONAL_DISTRIBUTION_GEMINI_V5"].includes(tr.reason??"")&&tr.reason_id,page_size:12,search_query:eX,source:O,top_level_source:eG,top_level_source_depth:e$,is_pdp:x.is_eligible_for_pdp,landing_context:te}}),[eH,x.id,eU,tr,eX,O,eG,e$,x.is_eligible_for_pdp,te]),to=(0,eD.q6)(H,x.pinner?.id,y),td=!!x.id&&!to||n,tc=n?eR.Gg:eR.CI,tu=eA()&&tl?eR.Ch:tc,tp=eA()?eR.Gb:eR.Kn,tm=n||"lg"!==ea?tu:tp-tu,tg=eo&&(eA()||n),th=tg&&(0,T.jsx)(ti.Z,{id:"ProductStickyContainer",children:(0,T.jsx)(i6,{disabled:!M||n,children:(0,T.jsx)(ti.Z,{id:"ImageContainerPerf",children:(0,T.jsx)(ab.Z,{containerId:"InnerScrollContainer",children:(0,T.jsx)(ti.Z,{id:"SecondaryCarousel",children:(0,T.jsx)(av.Z,{commerceData:tn,pinId:x.id,size:"sm",surfaceType:"closeup",viewParameter:(0,ep.Z)({hasPin:!!x,hasPinRichMetadata:!!x.rich_metadata,hasPinRichMetadataProducts:!!x.rich_metadata?.products,hasPinRichMetadataArticle:!!x.rich_metadata?.article,hasPinRichMetadataRecipe:!!x.rich_metadata?.recipe,hasPinStoryPinData:!!x.story_pin_data})})})})})})}),t_=tg&&(0,T.jsx)(k.xu,{width:80}),ty=(0,_.useMemo)(()=>(0,T.jsx)(ti.Z,{id:"ProductDetailPageBodyContainer",children:(0,T.jsx)(ae,{closeupWithinMasonryEnabled:n,didShortClickThrough:en,executeClickthrough:eK,handleBackButtonClick:ez,handleSaveButtonClick:eZ,isLimitedLogin:u,maxWidth:tp,orbacActingAs:y,pin:x,pinResource:S,routePush:j,showRepinOnInitialRender:K,showStructuredDescription:M,trafficSource:O,trendsData:N,userBusinessRoleResource:V,viewer:H,viewportSize:ea})}),[n,en,eK,ez,eZ,u,tp,y,x,S,j,K,M,O,N,V,H,ea]),tf=(0,T.jsx)(ti.Z,{id:"CloseupContent",children:(0,T.jsx)(nf,{isVideoPin:eW.isVideoPin,pin:x,pinResource:S,topLevelTrafficSource:eG,didShortClickThrough:en,firstLoadComplete:eo,viewportSize:ea,relatedModulesContent:td?(0,T.jsx)(ti.Z,{id:"ProductDetailPageRelatedModules",children:(0,T.jsx)(af,{closeupBody:ty,pinKey:{type:"deprecated",data:x},relatedPinsContainerRef:tt,relatedResourceOptions:ts,setRelatedPinsHeaderRef:eF,topLevelTrafficSource:eG,viewParameter:(0,ep.Z)({hasPin:!!x,hasPinRichMetadata:!!x.rich_metadata,hasPinRichMetadataProducts:!!x.rich_metadata?.products,hasPinRichMetadataArticle:!!x.rich_metadata?.article,hasPinRichMetadataRecipe:!!x.rich_metadata?.recipe,hasPinStoryPinData:!!x.story_pin_data}),viewportSize:ea})}):(0,T.jsx)(_.Fragment,{}),afterBodyContent:t_,beforeBodyContent:th,bodyContent:ty,onWrapperClick:eN,backButton:(0,T.jsx)(iE.Z,{onClick:ez}),isProductDetailsExpanded:e0,peekCloseupEnabled:f,setIsCommentAttachmentSelectorOpen:e1,setIsCommentComposerFocused:e6,setIsCommentPopoverInteractionActive:e4,setIsCommentThreadExpanded:e7,setIsCloseupMediaViewerOpen:e9,setIsProductDetailsExpanded:e5,closeupWithinMasonryEnabled:n,setAbortNoActionPlacementTimeout:F})});return(0,T.jsx)(ti.Z,{id:"CloseupLayout",children:(0,T.jsx)(nS,{abortNoActionPlacementTimeout:eV,beforeBodyContent:th,classProps:{...e,location:{pathname:"",search:"",hash:""}},classState:{...e.initialState,pin:x,visualState:ee,didShortClickThrough:en,didPinClickThrough:e_,firstLoadComplete:eo,intervalId:eg,viewportSize:ea,isOverRelatedPins:er},clientTrackingParams:t,commerceData:tn,showCloseupContentRight:tl,showProductDetailPage:!0,paneWidth:tu,maxWidth:tp,descriptionPaneWidth:tm,handleCarouselSwipe:eO,handleFocus:eM,handleScroll:eB,handleBackButtonClick:ez,closeupContent:tf,isCloseupMediaViewerOpen:e8,isCommentAttachmentSelectorOpen:eq,isCommentComposerFocused:eY,isCommentPopoverInteractionActive:eJ,isCommentThreadExpanded:eQ,isProductDetailsExpanded:e0,peekCloseupEnabled:f,setIsCommentAttachmentSelectorOpen:e1,setIsCommentComposerFocused:e6,setIsCommentPopoverInteractionActive:e4,setIsCommentThreadExpanded:e7,setIsCloseupMediaViewerOpen:e9,setIsProductDetailsExpanded:e5,closeupWithinMasonryEnabled:n,setAbortNoActionPlacementTimeout:F})})}let aC=iv(function(e){let{clientTrackingParams:t,pin:n,pinResource:i,pinId:a,viewer:l,deepLinkBackGoesToBoard:r,goBack:s,routePush:o,trafficSource:d}=e,{logContextEvent:c}=(0,ew.u)(),u=(0,iF.Z)(),p=(0,K.ZP)(),m=(0,ej.B)(),g=(0,em.r)(),{checkExperiment:h}=g,f=!!(n.is_eligible_for_pdp&&!n.story_pin_data&&n.formatted_description?.components),[x,b]=(0,_.useState)(!1),[k,S]=(0,_.useState)(!1),[P,w]=(0,_.useState)(!1),[C,j]=(0,_.useState)(!1),[A,F]=(0,_.useState)(!1),[E,L]=(0,_.useState)(!1),[D,R]=(0,_.useState)(!1),M=(0,_.useRef)(null),{setMostRecentPinId:Z,setMostRecentPinImage:z}=(0,iz.R)(),O=(0,I.Z)({type:"deprecated",data:n}),B=(0,iA.Z)({type:"deprecated",data:n}),N=(0,eu.sY)(n.embed?.type)&&"gif"||!!n.is_eligible_for_pdp&&"productPin"||n.rich_summary?.type_name==="recipe"&&"recipePin"||n.story_pin_data_id&&"storyPin"||!!n.videos?.video_list&&"video"||"image",{conversationOpen:V}=(0,iZ.Z)(),U=(0,ny.Z)(),{landingContext:H}=(0,iT.Z)(),W=(0,tc.Z)(),G=(0,eD.lJ)(l,W),$=n.sponsorship?.sponsor?.id,X=!n.is_repin&&!!$,q=(0,eo.Z)($&&X&&l.isAuth&&"storyPin"===N?{name:"ApiResource",options:{url:`/ads/v4/business_access/businesses/${$}/me/ad_accounts_permissions/`}}:null),{onHandleBackButtonClick:Y}=iM({logCommerceAuxData:!0,deepLinkBackGoesToBoard:r,element:13310,goBack:s,routePush:o,trafficSource:d,viewer:l,requestContext:m,pinKey:{type:"deprecated",data:n}},c),J=l.isAuth&&(0,v.Gv)({orbacSubjectId:G,pinIsRepin:n.is_repin,pinPinnerId:n.pinner?.id,viewerId:l.id,viewerIsPartner:l.isPartner}),{data:Q,isLoaded:ee}=(0,eo.Z)(J?{name:"ApiResource",options:{url:`/v3/trends/partner/${l.id||""}/trends_for_pin/${n.id}/`,data:{number_terms_to_return:10}}}:null),{sideBySideRedesignFastFollowsEnabled:et}=(0,eb.Z)(),en=ix({pin:n,pinId:a,pinResource:i}),{mainPinImage:ei}=(0,i_.Z)({pinKey:{type:"deprecated",data:n}}),ea=(0,_.useCallback)(()=>{let e=[],t=h("hfp_gen_ai_topics_opt_out_dweb",{dangerouslySkipActivation:!0}).group;return t&&(["control_pwt","enabled_pwt"].includes(t)&&h("hfp_gen_ai_topics_opt_out_dweb"),"control_pwt"!==t&&e&&!e.includes("pin.gen_ai_topics")&&(e=[...e,"pin.gen_ai_topics"])),e},[h]);return(0,T.jsx)(ti.Z,{id:"ProductDetailPageInner",children:(0,T.jsx)(aw,{...e,abortNoActionPlacementTimeout:x,clientTrackingParams:t,closeupWithinMasonryEnabled:et,conversationOpen:V,dispatch:(0,y.I0)(),experimentsClient:g,getAdditionalFields:ea,getSterlingURL:(0,ib.Z)(),getStringifiedCommerceAuxData:O,i18n:p,initialState:en,isCloseupMediaViewerOpen:D,isCommentAttachmentSelectorOpen:k,isCommentComposerFocused:P,isCommentPopoverInteractionActive:C,isCommentThreadExpanded:A,isProductDetailsExpanded:E,landingContext:H,logContextEvent:c,mainImage:ei,onHandleBackButtonClick:Y,orbacActingAs:W,peekCloseupEnabled:!et,pinFormattedLink:B,pwtSurfaceContext:(0,np.A)(),relatedPinsContainerRef:M,requestContext:m,setAbortNoActionPlacementTimeout:b,setIsCloseupMediaViewerOpen:R,setIsCommentAttachmentSelectorOpen:S,setIsCommentComposerFocused:w,setIsCommentPopoverInteractionActive:j,setIsCommentThreadExpanded:F,setIsProductDetailsExpanded:L,setMostRecentPinId:Z,setMostRecentPinImage:z,showStructuredDescription:f,toastManager:(0,iL.dI)(),trackInteraction:u,trendsData:{data:Q,isLoaded:!J||ee},userBusinessRoleResource:q,verticalNavWidth:U})})});var aI=n(688170),aT=n(785873),aj=n(669442);function aA(e,t=!1){let n=e||window.location.href;(0,aT.Z)(`/login?next=${t?(0,aj.Z)(n,{type:"signup"}):encodeURIComponent(n)}`)}var aF=n(469978),aE=n(288910),aL=n(990103);let aD=(0,eZ.Z)(()=>n.e("8479").then(n.bind(n,702042)),void 0,e=>702042,"app-common-react-components-StatusPin-StatusPinCloseup",e=>["8479"]),aR=(0,x.Z)(e=>({isVideoPin:!!e&&(0,eu.iR)(e),isYoutubePin:!!e&&(0,eu.oU)({isVideo:e.is_video,link:e.link})}));function aK({checkExperiment:e,clientTrackingParams:t,currentHistoryStack:n,history:i,location:a,params:l,pinResource:r,requestContext:s,searchPinCloseupViewed:o,goToCampaignCreation:d,showRepin:c,closeupComponentToRender:u,...p}){let m=r.data,g=r.isLoaded,h=(0,_.useRef)(null),y=(0,tr.Z)(),f="id"in y?y.id:"",x=g&&m&&m.pinner&&y.isAuth&&y.username===m.pinner.username&&g&&m&&"extension"===m.method,{trafficSource:v,topLevelTrafficSource:b,topLevelTrafficSourceDepth:k,contextPinIds:S}=(0,iG.Z)(n,y.isAuth);k>1&&"pin"!==v&&(0,tP.nP)("p2p.traffic_source.client",{sampleRate:.1,tags:{trafficSource:v,topLevelTrafficSource:b,topLevelTrafficSourceDepth:k}});let P=(0,aI._)(n),w=(0,n5.mB)(a.search);(0,_.useEffect)(()=>{h.current!==m&&function({history:e,isBot:t,location:n,viewerId:i,viewerIsAuth:a}){!t&&i&&"undefined"!=typeof window&&(0,aF.U)(window.location,i,!1,a,t=>e.replace(t,n.state))}({history:i,isBot:s.isBot,location:a,viewerId:f,viewerIsAuth:y.isAuth}),h.current=m},[i,a,h,m,s.isBot,y.isAuth,y,f]),(0,_.useEffect)(()=>()=>{P&&m?.id&&o(m.id,P)},[m?.id,P,o]);let C=(0,_.useMemo)(()=>({viewType:3,viewParameter:(0,ep.Z)({hasPin:!!m,hasPinRichMetadata:!!m?.rich_metadata,hasPinRichMetadataProducts:!!m?.rich_metadata?.products,hasPinRichMetadataArticle:!!m?.rich_metadata?.article,hasPinRichMetadataRecipe:!!m?.rich_metadata?.recipe,hasPinStoryPinData:!!m?.story_pin_data})}),[m]),I=(0,_.useMemo)(()=>({featuredCommentId:l.comment_id||""}),[l.comment_id]),j=(0,_.useMemo)(()=>(function({boardUrl:e,currentHistoryStack:t,history:n,isFromExtension:i=!1,hasViewerPartner:a}){return()=>t.map(e=>{var t;return!!(t=e.location)&&((0,aI.C)(t)||(({pathname:e})=>/^\/pin\/[\w-]+\/activity\/tried\/?$/.test(e))(t))}).find(e=>!0===e)||i?i&&1===t.length?void n.push(e??""):void n.goBack():void(a?n.push("/homefeed/"):n.push("/"))})({boardUrl:m?.board?.url,currentHistoryStack:n,history:i,isFromExtension:!!x,hasViewerPartner:!!("partner"in y&&y.partner)}),[n,i,x,m?.board?.url,y]);return(0,T.jsx)(ti.Z,{id:"FeaturedCommentProvider",children:(0,T.jsx)(iJ.h,{children:(0,T.jsx)(iQ.Q,{value:I,children:(0,T.jsx)(ti.Z,{id:"SearchParamsContextProvider",children:(0,T.jsx)(aE.v,{value:C,children:(0,T.jsx)(ti.Z,{id:"OneBarProductFiltersContextProvider",children:(0,T.jsx)(i0.f,{children:(0,T.jsx)(ti.Z,{id:"ViewTransitionProvider",children:(0,T.jsx)(iY,{children:(0,T.jsx)(ti.Z,{id:"ExperienceCloseupFeatures",children:(0,T.jsx)(tl.Ig,{children:(0,T.jsx)(ti.Z,{id:"CloseupBodyContextProvider",children:(0,T.jsx)(ty.C,{children:(0,T.jsx)(ti.Z,{id:"CloseupReduxWrapper",children:(0,T.jsx)(iW,{pinId:l.id||"",pinResource:r,children:({isLandingPage:e,isLimitedLogin:n,didRepin:a,openInbox:s,pin:o,shouldShowInbox:m,updateExperienceForPlacement:g})=>{let h={clientTrackingParams:t,contextPinIds:S,conversation_id:w.conversation_id,deepLinkBackGoesToBoard:x,emailId:w.e_t,forceSendFeedback:w.fsf,goBack:j,goToCampaignCreation:d,messageId:w.message,onLoginClick:aA,pinId:l.id??"",pinResource:r,routePush:i.push,searchQuery:P,senderId:w.sender,showRepinOnInitialRender:c,topLevelTrafficSource:b,topLevelTrafficSourceDepth:k,trafficSource:v,viewer:y,didRepin:a,isLandingPage:e,isLimitedLogin:n,openInbox:s,pin:o,pinDerivedData:aR(o),shouldShowInbox:m,updateExperienceForPlacement:g,...p};switch(u){case"ProductDetailPage":return(0,T.jsx)(ti.Z,{id:"ProductDetailPage",children:(0,T.jsx)(aC,{...h})});case"CloseupWithStoryPinProducts":return(0,T.jsx)(ti.Z,{id:"CloseupWithStoryPinProducts",children:(0,T.jsx)(iV,{...h})});default:return(0,T.jsx)(ti.Z,{id:"CloseupDefault",children:(0,T.jsx)(iN,{...h})})}}})})})})})})})})})})})})})})})}function aM(e){let{pinResource:t}=e,n=t.data,{is_hidden:i,is_unsafe:a}=n||{},l=n?.story_pin_data?.has_product_pins,r=(0,nQ.Z)({isHiddenPin:i,isUnsafePin:a});return(0,T.jsx)(ti.Z,{id:"CloseupContainerCommon",children:(0,T.jsx)(aK,{...e,closeupComponentToRender:r&&l?"CloseupWithStoryPinProducts":"CloseupDefault"})})}function aZ(e){let t=(0,y.I0)(),n=(0,tr.Z)(),i=(0,f.UO)(),a=(0,ts.aX)(),l={...e,history:(0,f.k6)(),location:(0,f.TH)(),params:i,requestContext:(0,ej.B)(),searchPinCloseupViewed:(e,n)=>t((0,aL.Y4)(e,n))},{checkExperiment:r}=(0,em.r)(),s=(0,_.useMemo)(()=>{let e=[],t=r("hfp_gen_ai_topics_opt_out_closeup",{dangerouslySkipActivation:!0}).group;return t&&(["control_pwt","enabled_pwt"].includes(t)&&r("hfp_gen_ai_topics_opt_out_closeup"),"control_pwt"===t||e.includes("pin.gen_ai_topics")||(e=[...e,"pin.gen_ai_topics"])),e},[r]);return(0,T.jsx)(i$.Z,{addFields:s,orbacSubjectId:(0,eD.lJ)(n,(0,tc.Z)()),pinId:i.id||"",children:({pinResource:e})=>{let t=e&&e.data;return t&&(0,eu._J)(t.video_status)?(0,T.jsx)(W.bq,{children:(0,T.jsx)(aD,{...l,onClickThrough:()=>{},pinKey:{type:"deprecated",data:t}})}):(0,T.jsx)(ti.Z,{id:"CloseupContainerInner",children:(0,_.createElement)(aM,{...l,key:i.id,checkExperiment:r,currentHistoryStack:a,pinResource:e})})}})}},589183:function(e,t,n){n.r(t),n.d(t,{default:()=>p});var i=n(894980),a=n(261458),l=n(980787),r=n(127753),s=n(274320),o=n(341742),d=n(601686),c=n(78187),u=n(785893);function p({filter:e,story:t,viewParameter:n}){let{logContextEvent:p}=(0,l.u)(),{closeupWithinMasonryEnabled:m}=(0,d.x4)(),{checkExperiment:g}=(0,s.r)(),{custom_properties:h,title:_,objects:y}=t,{format:f="",args:x=[]}=_||{},{query:v=""}=x[0]||{},b=g("web_skin_tone_filters_closeup_migration",{dangerouslySkipActivation:!0}).anyEnabled,{viewComponentType:k,viewType:S,elementType:P,inInclusiveEfficientRefinements:w,inclusiveFilterParam:C,onClickApplyFilters:I}=(0,a.Z)({filter:e,searchQuery:v,viewParameter:n,closeupSkinToneDataMigration:b});if((0,o.Z)(()=>{p({element:P,event_type:13,component:k,view_type:S,view_parameter:n,aux_data:{story_type:k}})}),!e)return null;let T=(()=>{switch(e){case c.ti.BODY:return y;case c.ti.SKIN:if(b)return h?.skin_tone_filter_list;return(0,r.ZP)(e,h)||[];case c.ti.HAIR:return(0,r.ZP)(e,h)||[];default:return[]}})();if(!T||T.length<1)return null;let j=m?c.CT.CLOSEUP_FEED:c.CT.CLOSEUP_STACKED,A=w?c.CT.CLOSEUP_RESPONSIVE:j,F=m&&!w;return(0,u.jsx)(i.Z,{currentlyAppliedFiltersParamTerm:F?void 0:w?C:void 0,filter:e,filterList:T,headerTitle:f??"",moduleType:F?c.CT.CLOSEUP_FEED:A,onClickApplyFilters:I,searchQuery:v,showAuthCloseupWithinMasonry:F,viewParameter:n,viewType:S})}},894980:function(e,t,n){n.d(t,{Z:()=>o});var i=n(20256),a=n(592821),l=n(8258),r=n(78187),s=n(785893);let o=({filter:e,filterList:t,headerTitle:n,searchQuery:o,viewParameter:d,showAuthCloseupWithinMasonry:c=!1,moduleType:u=r.CT.CLOSEUP_FEED,currentlyAppliedFiltersParamTerm:p,onClickApplyFilters:m,viewType:g})=>{let h=e===r.ti.HAIR,_=(0,s.jsx)(l.Z,{currentlyAppliedFiltersParamTerm:p,filters:t,headerTitle:n,moduleType:u,onClickApplyFilters:m,query:h?o:void 0,showHairPatternEducationIcon:h,type:e,viewParameter:d,viewType:g});return c?(0,s.jsx)(i.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{border:a.tc,gap:"12px"}},"data-test-id":"auth-inclusive-filter",direction:"column",display:"flex",justifyContent:"center",padding:4,rounding:6,children:_}):_}},261458:function(e,t,n){n.d(t,{Z:()=>c});var i=n(616550),a=n(142689),l=n(980787),r=n(662490),s=n(490186),o=n(940280),d=n(78187);let c=({filter:e,searchQuery:t,viewParameter:n,unauthCloseupRedesignEnabled:c=!1,closeupSkinToneDataMigration:u=!1})=>{let{logContextEvent:p}=(0,l.u)(),m=(0,i.k6)(),{pathname:g,search:h}=(0,i.TH)(),_=new URLSearchParams(h).get("filters"),{inInclusiveEfficientRefinements:y}=(0,a.Z)(e),f=e===d.ti.SKIN?13863:13864,x=e===d.ti.SKIN?13803:14935,v=e===d.ti.SKIN?10418:13358;return{onClickApplyFilters:i=>{let a=u?i:(0,r.Z)(i,e),l=c?o.i.RS:o.i.TYPED;if(t&&p({element:v,view_type:3,view_parameter:n,event_type:101,component:x,aux_data:{entered_query:t,filter_value:a,story_type:f}}),y){let e=a?`?filters=${a}`:"";_&&_===a?m.push(g):m.replace(`${g}${e}`)}else{let e=(0,s.Z)({query:t||"",rs:l||"",scope:"pins",filters:a});m.push(e)}},viewComponentType:f,viewType:3,clickComponentType:x,elementType:v,inInclusiveEfficientRefinements:y,inclusiveFilterParam:_}}},728371:function(e,t,n){n.d(t,{Z:()=>g});var i=n(667294),a=n(633301),l=n(20256),r=n(149739),s=n(525839),o=n(369416),d=n(601686),c=n(238187),u=n(937314),p=n(785893);function m({isDarkMode:e,onPress:t,testID:n,label:i,peekCloseupEnabled:a,withShadow:s}){return(0,p.jsxs)(l.xu,{dangerouslySetInlineStyle:{__style:{background:e?"black":"white"}},"data-test-id":n,display:"inlineBlock",position:"relative",children:[s&&(0,p.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{background:e?"linear-gradient(90deg, rgba(0, 0, 0, 0) 0%, black 100%)":"linear-gradient(90deg, rgba(255, 255, 255, 0) 0%, white 100%)",right:"100%"}},height:"100%",position:"absolute",width:"48px"}),(0,p.jsx)(l.iP,{fullWidth:!1,onTap:t,children:(0,p.jsxs)(l.xv,{size:a?"200":r.n,weight:"bold",children:["...",i]})})]})}function g({children:e,isDarkMode:t,descriptionDir:n}){let g=(0,i.useRef)(null),[h,_]=(0,i.useState)(0),[y,f]=(0,i.useState)(0),[x,v]=(0,i.useState)(!0),[b,k]=(0,i.useState)(!1),[S,P]=(0,i.useState)(!1),[w,C]=(0,i.useState)(!1),I=(0,s.ZP)(),{closeupWithinMasonryEnabled:T,peekCloseupEnabled:j}=(0,d.x4)(),A=T||j,F=A?1:3,E=600*!!A;(0,i.useEffect)(()=>{if(g.current&&x){let e,t=(0,c.xW)(g.current),n=(e=g.current).offsetHeight<e.scrollHeight||e.offsetWidth<e.scrollWidth;k(()=>!!n&&(g.current&&(g.current.style.webkitLineClamp="unset",f(g.current?.scrollHeight??0),g.current.style.webkitLineClamp=F.toString()),!0)),v(!1),C(t>=F&&n),_(g.current?.clientHeight)}},[x,v,F,h,y,b]);let L=`${h}px`,D=`${h+y}px`,R=`
    .TruncatedDescription-enter{
      max-height: ${L};
    }
    .TruncatedDescription-enter-active {
      max-height: ${D};
      transition: max-height ${E}ms cubic-bezier(.25,1,.5,1);
    }
    .TruncatedDescription-enter-done {
      max-height: ${D};
    }
    .TruncatedDescription-exit {
      max-height: ${D};
    }
    .TruncatedDescription-exit-active {
      max-height: ${L};
      transition: max-height ${E}ms cubic-bezier(.25,1,.5,1);
    }
    .TruncatedDescription-exit-done {
      max-height: ${L};
    }
    [data-test-id="truncated-description"] div[role=button] {
      outline-offset: -2px;
      outline-width: 2px;
    }
  `,K=e=>{let n=e?I._('more', 'storyPin.previewText.more', 'Story pin preview more text truncation'):I._('less', 'storyPin.previewText.less', 'Story pin preview less text truncation');return(0,p.jsx)(m,{isDarkMode:t,label:n,onPress:()=>P(e),peekCloseupEnabled:j,testID:`${e?"more":"less"}-description-container`,withShadow:e&&A})},M=(0,i.useRef)(null);return(0,p.jsxs)(i.Fragment,{children:[(0,p.jsx)(o.Z,{unsafeCSS:R}),(0,p.jsx)(a.Z,{classNames:"TruncatedDescription",in:S,nodeRef:M,onEnter:()=>k(!1),onExited:()=>k(!0),timeout:E,children:(0,p.jsx)(l.xu,{ref:M,"data-test-id":"truncated-description",flex:"grow",overflow:A?"hidden":"visible",position:"relative",width:T?"100%":void 0,children:(0,p.jsx)(u.Z,{dir:n,children:(0,p.jsxs)(l.xv,{ref:g,align:"ltr"===n?"forceLeft":void 0,lineClamp:x||b?F:0,size:j?"200":r.n,children:[e,w?(0,p.jsxs)(i.Fragment,{children:[S&&K(!1),(0,p.jsx)(l.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{transition:A?"opacity 200ms ease-in-out":void 0,visibility:b?"visible":"hidden"}},opacity:+!!b,position:"absolute",right:!0,children:K(!0)})]}):null]})})})})]})}},998951:function(e,t,n){function i(e){return"string"==typeof e&&("function"==typeof e.replaceAll?e.replaceAll(" ",""):e.replace(/ /g,"")).length>0}n.d(t,{Z:()=>i})},762802:function(e,t,n){n.d(t,{Z:()=>s});var i=n(667294),a=n(765533),l=n(603316);class r extends i.PureComponent{constructor(...e){var t,n,i;super(...e),t="handleKeyDown",n=e=>{let{onClose:t,goToNext:n,goToPrevious:i}=this.props,r=e.keyCode||e.code;!e.ctrlKey&&!e.metaKey&&(["input","select","button","textarea"].includes(((document.activeElement||{}).tagName||"").toLowerCase())||document.activeElement&&document.activeElement.isContentEditable||(r===a.Z.LEFT?(e.preventDefault(),e.stopPropagation(),i&&i(),(0,l.nP)("web_keydown_left")):r===a.Z.RIGHT?(e.preventDefault(),e.stopPropagation(),n&&n(),(0,l.nP)("web_keydown_right")):r===a.Z.ESCAPE&&(e.preventDefault(),e.stopPropagation(),t())))},(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in this?Object.defineProperty(this,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[t]=n}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}render(){return null}}let s=r},846721:function(e,t,n){n.d(t,{Z:()=>v});var i,a=n(667294);n(167912);var l=n(507438),r=n(102134),s=n(878709),o=n(821342),d=n(415546),c=n(525839),u=n(411354),p=n(453179),m=n(274320),g=n(664897),h=n(448505),_=n(7872),y=n(218831),f=n(601686);let x=(void 0!==i||(i=n(224266)).hash&&"c3027cfec56abe15f0990c2bc6707062"!==i.hash&&console.error("The definition of 'useMediaContainer_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function v({pinKey:e}){let t=(0,c.ZP)(),n=(0,o.Z)(),{checkExperiment:i}=(0,m.r)(),v=(0,h.Z)(),{mainImage:b,carouselInfo:k,previewImage:S,isGif:P,imgSrc:w}=(0,s.G)(),C=(0,r.Z)(),I=(0,d.Z)(x,e),T=(0,g.Z)(),{aggregatedPinData:j,altText:A,autoAltText:F,isEligibleForPdp:E,isEligibleForRelatedProducts:L,pinner:D,richMetadata:R,trackedLink:K,utmLink:M,link:Z,method:z,shuffle:O}=I,B=!E&&k?.carouselData,N=!!j?.isShopTheLook,V=!!O&&C(),U=!!L&&!N&&!E&&!B&&!V,H=(0,_.nl)(n,v)&&i("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,W=I.imageSpec_orig?.url,G=k?.carouselData?function(e){let{carousel_slots:t,index:n}=e;return t&&void 0!==n&&(t[n]||{}).image_signature?t[n].image_signature:null}(k.carouselData):I.imageSignature,$=(0,p.Zt)({trackedLink:K,link:Z,utmLink:M}),X="catalog_bulk_create"===z||R?.products,q=$&&X?decodeURIComponent($):$,Y=(0,_.Ms)(n,v)===D?.username&&H,{closeupWithinMasonryEnabled:J,paneWidth:Q,showProductDetailPage:ee}=(0,f.x4)(),{closeupBodyWidth:et}=(0,y.K)(),{height:en,width:ei}=b,ea=(0,a.useMemo)(()=>({naturalWidth:ei,naturalHeight:en,alt:(0,l.Z)({altText:A,autoAltText:F,i18n:t}),src:P?w:!T&&w?.startsWith("https://i.pinimg.com/")?(0,u.Z)(w)||S?.url||"":S?.url||""}),[ei,en,A,F,t,P,T,w,S?.url]),el=(0,a.useMemo)(()=>({naturalHeight:ea.naturalHeight,naturalWidth:ea.naturalWidth,mainImage:{alt:ea.alt,src:P?ea.src:w},...!P&&{previewImage:{alt:"",src:P?"":ea.src}}}),[ea.alt,ea.naturalHeight,ea.naturalWidth,ea.src,w,P]);return{disablePinTagButton:Y,imageProps:ea,imageSignature:G,imageWithPreview:el,isScenePin:U,link:q,maxCloseupImageWidth:J&&et||Q,originalImageUrl:W,showProductDetailPage:ee}}},399656:function(e,t,n){n.d(t,{Z:()=>g});var i=n(667294),a=n(642411),l=n(980787),r=n(776250),s=n(67831),o=n(956077),d=n(886981),c=n(431338),u=n(821342),p=n(647709),m=n(653621);function g(e){let{logContextEvent:t}=(0,l.u)(),n=(0,s.A)(),g=(()=>{let e=(0,p.HG)(),{isAuth:t}=(0,u.Z)(),n=t&&e,i=(0,s.A)();return i?e=>{"DEFAULT"!==e&&i.setSegment(e),n&&(({segment:e})=>{let t=(({segment:e})=>m.GL.get(e)??new Set)({segment:e});return new Set([...m.hO].filter(e=>!t.has(e)))})({segment:e}).forEach(e=>{i.removeConstraint(e),(0,o.l7)(e)})}:null})(),h=(0,d.Z)({name:"PinResource",options:(0,a.Z)(e.pinId,e.orbacSubjectId,e.addFields)}),_=h.data,y=(0,c.Z)(null!=_?{type:"deprecated",data:_}:null);return(0,i.useEffect)(()=>{if(!_)return;let e=(0,r.Z)({hasPin:!!_,hasPinRichMetadata:!!_.rich_metadata,hasPinRichMetadataProducts:!!_.rich_metadata?.products,hasPinRichMetadataArticle:!!_.rich_metadata?.article,hasPinRichMetadataRecipe:!!_.rich_metadata?.recipe,hasPinStoryPinData:!!_.story_pin_data});t({event_type:7408,view_parameter:e,object_id_str:_.id,view_type:3,view_data:{pin_id:_.id,closeup_rich_types:_.shopping_flags||[]},aux_data:{...y()}}),_.aggregated_pin_data&&(_.aggregated_pin_data.is_shop_the_look||_.aggregated_pin_data.is_stela)&&t({event_type:7579,view_parameter:e,object_id_str:_.id,view_type:3,aux_data:{commerce_data:JSON.stringify({pin_is_shop_the_look:_.aggregated_pin_data.is_shop_the_look,pin_is_stela:_.aggregated_pin_data.is_stela})}}),(0,o.Nx)("resource"),n&&n.markConstraintComplete("resource");let i="DEFAULT";_.is_eligible_for_pdp?i=_.is_eligible_for_pdp_plus?"product_detail_page_plus":"product_detail_page":_.story_pin_data_id&&(i="story_pin"),"DEFAULT"!==i&&(0,o.Yl)(i),g&&g(i)},[_,y]),e.children({pinResource:h})}},71157:function(e,t,n){n.r(t),n.d(t,{default:()=>u});var i=n(20256),a=n(707915),l=n(704300),r=n(521009),s=n(525839),o=n(123317),d=n(341742),c=n(785893);let u=({clientTrackingParams:e,watchAgain:t,imageSrc:n,pinDescription:u,pinId:p,rounded:m=!0})=>{let g=(0,s.ZP)(),h=(0,r.Z)();(0,d.Z)(()=>{h({event_type:120,view_type:3,component:13799})});let _=()=>{t()};return(0,c.jsx)(i.xu,{alignItems:"center",bottom:!0,color:"dark","data-test-id":"story-pin-end-card",direction:"column",display:"flex",height:"100%",justifyContent:"center",left:!0,opacity:.9,padding:4,position:"absolute",right:!0,rounding:m?o.yR:0,top:!0,width:"100%",children:(0,c.jsx)(i.kC,{alignItems:"center",direction:"column",height:"100%",justifyContent:"center",width:"100%",children:(0,c.jsxs)(i.kC,{alignContent:"start",direction:"column",gap:{row:0,column:8},justifyContent:"start",children:[(0,c.jsx)(i.kC,{alignItems:"center",justifyContent:"start",children:(0,c.jsx)(l.default,{buttonText:g._('Send', 'end.video.send.icon.label', 'Clickable label when pressed opens share sheet after video is finished'),clientTrackingParams:e,imageSrc:n,pinDescription:u,pinId:p,shownWithinMasonry:!0})}),(0,c.jsxs)(i.kC,{alignItems:"center",children:[(0,c.jsx)(a.Z,{accessibilityLabel:g._('Replay button', 'storyPin.closeup.endCard.replay', 'Button label to navigate to previous page'),handleClick:_,icon:"refresh",iconColor:"white",testId:"closeup-replay-button"}),(0,c.jsx)(i.xu,{children:(0,c.jsx)(i.iP,{onTap:_,rounding:2,children:(0,c.jsx)(i.X6,{color:"light",overflow:"normal",size:"400",children:g._('Replay', 'storyPin.closeup.endCard.replay', 'Button label to navigate to previous page')})})})]})]})})})}},179639:function(e,t,n){n.d(t,{Z:()=>h});var i=n(667294),a=n(20256),l=n(592821),r=n(979904),s=n(869985),o=n(980787),d=n(525839),c=n(399806),u=n(218831),p=n(601686),m=n(785893);class g extends i.PureComponent{constructor(...e){var t,n,i;super(...e),t="startAudiblePlayTime",n=this.props.muted?null:new Date,(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in this?Object.defineProperty(this,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[t]=n}componentDidUpdate(e){e.muted!==this.props.muted&&(this.startAudiblePlayTime=this.props.muted?null:new Date)}componentWillUnmount(){let{musicRecordingId:e,muted:t,pinId:n,video:i}=this.props;if(e&&!t&&this.startAudiblePlayTime&&Date.now()-this.startAudiblePlayTime.getTime()>=2e3){let{hlsv3:t,mp4:a}=(0,c.Z)({vEXP3:i.video_list?.V_EXP3,vEXP4:i.video_list?.V_EXP4,vEXP5:i.video_list?.V_EXP5,vEXP6:i.video_list?.V_EXP6,vEXP7:i.video_list?.V_EXP7,v720P:i.video_list?.V_720P,vHLSV3MOBILE:i.video_list?.V_HLSV3_MOBILE})||{},l=(a||t)?.duration||0;this.props.logContextEvent({event_type:8999,object_id_str:e,aux_data:{pin_id:n,story_pin_music_duration:l}})}}render(){let{activePageIndex:e,aspectRatio:t,blockHeight:n,blockWidth:i,closeupBodyWidth:l,closeupStoryPinViewability:r,closeupWithinMasonryEnabled:o,customEndCard:d,isPlaying:u,muted:p,onEnded:g,onUpdateVideoInfo:h,pageIndex:_,pin:y,pinId:f,maxHeight:x,video:v,videoThumbnailStartTime:b}=this.props,{hlsv3:k,mp4:S}=(0,c.Z)({vEXP3:v.video_list?.V_EXP3,vEXP4:v.video_list?.V_EXP4,vEXP5:v.video_list?.V_EXP5,vEXP6:v.video_list?.V_EXP6,vEXP7:v.video_list?.V_EXP7,v720P:v.video_list?.V_720P,vHLSV3MOBILE:v.video_list?.V_HLSV3_MOBILE})??{},P=S||k;if(!P)return null;let{height:w,thumbnail:C,width:I}=P,T=t??(I??1)/(w??1),j={height:"100%",left:"0",top:"0",width:"100%"},A=o&&l?(l??i)/(Number(x)??n):i/n;if(!o&&Math.abs(A-T)>.01){if(A<T){let e=100*T/A;j.width=`${e}%`,j.left=`-${(e-100)/2}%`}else if(A>T){let e=100*A/T;j.height=`${e}%`,j.top=`-${(e-100)/2}%`}}let F="number"==typeof e&&_<=e+3;return(0,m.jsx)(a.xu,{height:"100%",overflow:"hidden",position:"relative",width:"100%",children:(0,m.jsx)(a.xu,{height:"100%",position:"absolute",width:"100%",children:F||u||b?(0,m.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:j},position:"absolute",children:(0,m.jsx)(s.Z,{aspectRatio:o?A:t,autoplay:u,closeupStoryPinViewability:r,contextLogData:{component:0===_?227:228,element:10957,objectId:f,story_pin_page_id:_,view:3,viewParameter:157},customEndCard:d,customThumbnail:C,isPromoted:!1,loop:!1,muted:p,objectFit:S?o?"contain":"cover":void 0,onEnded:()=>{g&&g(_)},onTimeChange:({time:e})=>{h&&"number"==typeof P.duration&&P.duration>0&&h({currentTime:e,duration:P.duration/1e3})},pinId:f,pinKey:null===y?null:{type:"deprecated",data:y},preferMp4:!!S,showControls:"hover",variant:"storyPin",video:{id:v.id,hlsv3:k,mp4:S},videoThumbnailStartTime:b})}):C&&(0,m.jsx)(a.Ee,{alt:this.props.i18n._('Video cover image', 'closeup.storyPin.videoCover', 'cover image displayed for a video'),fit:"cover",naturalHeight:w??1,naturalWidth:I??1,src:C})})})}}function h(e){let{logContextEvent:t}=(0,o.u)(),{pin:n}=e,i=(0,d.ZP)(),{closeupWithinMasonryEnabled:a}=(0,p.x4)(),{closeupBodyWidth:s}=(0,u.K)(),{maxHeight:c}=(0,l.Re)(),{maxHeight:h}=(0,r.Z)({pinKey:null===n?null:{type:"deprecated",data:n}});return(0,m.jsx)(g,{...e,closeupBodyWidth:s,closeupWithinMasonryEnabled:a,i18n:i,logContextEvent:t,maxHeight:a?h:c})}},248762:function(e,t,n){n.d(t,{Z:()=>J}),n(167912);var i,a,l=n(20256),r=n(112931),s=n(592821),o=n(616550),d=n(883817),c=n(980787),u=n(886981),p=n(785893);let m=({block:{block_style:{height:e=0,width:t=0,x_coord:n=0,y_coord:i=0,rotation:a=0}={},original_comment_id:r},horizontalOffset:m=0,pageAspectRatio:g,scaleFactor:h,verticalOffset:_=0})=>{let{logContextEvent:y}=(0,c.u)(),f=s._B/g,x=t*s._B*h/100,v=n*s._B*h/100+m,b=(0,o.k6)(),{data:k}=(0,u.Z)({name:"AggregatedCommentResource",options:{commentId:r,field_set_key:"comment_reply_sticker"}});return(0,p.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{left:v,top:i*f*h/100+_,transform:`rotate(${a}deg)`}},display:"flex",height:e*f*h/100,margin:-1,padding:1,position:"absolute",rounding:2,width:x,zIndex:d.B_,children:(0,p.jsx)(l.iP,{onTap:()=>{y({event_type:102,view_type:1,component:227,element:12541,aux_data:{comment_id:r}}),k?.pin_id&&b.push(`/pin/${k.pin_id}/comments/${r||""}`)},rounding:"pill"})})};var g=n(291892),h=n(7525);function _({src:e,fallbackSrc:t,...n}){let i=(0,h.Z)(e);return(0,p.jsx)(g.Z,{...n,src:i?e:t})}var y=n(581722);function f({isUseCache:e,signature:t}){return(0,y.v9)(({pinbuilder:n})=>{let{storyPinItemBlocks:i}=n;if(!e)return null;for(let e of Object.keys(i))if(i[e].media?.signatureEdited===t||i[e].media?.signature===t)return i[e];return null})}var x=n(667294),v=n(111923),b=n(865540),k=n(982166),S=n(525839),P=n(542092);let w=({aggregatedCommentId:e,onDismiss:t})=>{let n=(0,S.ZP)(),i=(0,b.Z)(),a=(0,v.Z)(),[r,s]=(0,x.useState)(""),o=(0,p.jsx)(l.kC,{justifyContent:"end",children:(0,p.jsx)(l.zx,{color:"red",disabled:!r,onClick:()=>{(async()=>{await a({fromUnifiedComment:!0,objectType:P.o.aggregatedComment,objectId:e,tags:"[]",text:r})})(),t()},text:n._('Post', 'ideapin.questionsticker.replymodal.postbutton', 'Post reply to creator Q&A question')})});return(0,p.jsx)(k.ZP,{accessibilityModalLabel:"reply to creator Q and A question",align:"start",footer:o,heading:n._('Reply', 'ideapin.questionsticker.replymodal', 'Reply to creator Q&A question'),onDismiss:t,children:(0,p.jsx)(l.xu,{paddingX:8,paddingY:1,children:(0,p.jsx)(l.Kx,{id:"ideaPinQuestionStickerReplyModalTextArea",onChange:({value:e})=>{s(e)},placeholder:i?n._('Your reply will show up as a public comment on this Pin.', 'pin.questionsticker.replymodal.placeholder', 'Placeholder for creator Q&A reply textarea'):n._('Your reply will show up as a public comment on this Idea Pin.', 'ideapin.questionsticker.replymodal.placeholder', 'Placeholder for creator Q&A reply textarea'),value:r})})})};var C=n(744862),I=n(821342),T=n(415546),j=n(302148),A=n(123317),F=n(294711);let E=(void 0!==i||(i=n(303965)).hash&&"7e8d917850c8329247291df0d281a59b"!==i.hash&&console.error("The definition of 'StoryPinStickerBlockCloseup_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function L({block:e,elementType:t,horizontalOffset:n=0,onFlyoutOpen:i,pageAspectRatio:a,pageIndex:r,pinKey:m,scaleFactor:g,tooltipElementType:h,verticalOffset:_=0,videoPinProgress:y}){let{logContextEvent:f}=(0,c.u)(),[v,b]=(0,x.useState)(!1),[k,P]=(0,x.useState)(!1),L=(0,x.useRef)(null),D=(0,o.k6)(),R=(0,S.ZP)(),K=(0,T.Z)(E,m),M=(0,I.Z)(),{block_style:{height:Z=0,width:z=0,x_coord:O=0,y_coord:B=0,rotation:N=0}={},end_time:V,error_message:U,interactive_sticker_type:H=null,is_removed:W,is_valid:G,start_time:$,sticker_data:X,type:q}=e,Y=K?.entityId,{board_id:J,question_comment_id:Q}=X||{},{image_small_url:ee,full_name:et,username:en=""}=e.user??{},ei=null,ea=G&&5===H&&!!J,el=G&&7===H&&!!Q,er=(0,u.Z)(J&&ea?{name:"BoardResource",options:{field_set_key:"tagged_board_preview",board_id:J}}:null),{is_collaborative:es,pin_count:eo,url:ed}=er.data||{};q===A.h8.PRODUCT_STICKER?ei=Y?`/pin/${Y}/`:"/":q===A.h8.MENTION_STICKER?ei=`/${en}/`:ea&&(ei=er.isLoaded?`${ed}`:null);let ec=s._B/a,eu=z*s._B*g/100,ep=O*s._B*g/100+n,{currentTime:em}=y||{},eg=!(0,F.Z)({currentTime:em,endTime:V,startTime:$}),eh=()=>{f({event_type:123,component:228,element:h,view_type:3,view_parameter:157,aux_data:{story_pin_page_id:r}}),b(!1)};(0,x.useEffect)(()=>(document.addEventListener("scroll",()=>{b(!1)}),()=>document.removeEventListener("scroll",()=>{b(!1)})),[]);let e_=()=>{let e=null,t=M.isAuth?M?.avatar_color_index:void 0;switch(q){case A.h8.PRODUCT_STICKER:let{gridTitle:n,imageSpec_236x:i,richSummary:a,description:r}=K||{},{displayName:s,products:o}=a||{},d=((o||[])[0]||{}).offerSummary||{},{price:c,maxPrice:u}=d||{},m=!!d&&(!!c||!!u),g=s||n||r;e=(0,p.jsxs)(x.Fragment,{children:[(0,p.jsx)(l.xu,{flex:"none",children:(0,p.jsx)(l.zd,{height:40,rounding:3,wash:!0,width:40,children:i?.url&&(0,p.jsx)(l.Ee,{alt:"",color:"lightGray",fit:"cover",naturalHeight:1,naturalWidth:1,src:i.url})})}),(0,p.jsx)(l.xu,{flex:"grow",paddingX:2,children:m?(0,p.jsxs)(l.kC,{alignContent:"center",alignItems:"stretch",direction:"column",flex:"grow",justifyContent:"center",children:[(0,p.jsx)(l.xv,{color:"shopping",lineClamp:1,size:"100",weight:"bold",children:c}),(0,p.jsx)(l.xv,{lineClamp:1,size:"100",children:g})]}):(0,p.jsx)(l.xv,{lineClamp:1,size:"100",children:g})}),(0,p.jsx)(l.xu,{flex:"none",children:(0,p.jsx)(l.Sj,{bgColor:"transparent",icon:"arrow-forward",iconColor:"darkGray",size:"xs"})})]});break;case A.h8.MENTION_STICKER:e=(0,p.jsxs)(x.Fragment,{children:[(0,p.jsx)(l.xu,{flex:"none",children:(0,p.jsx)(C.qE,{color:t,name:et??"",size:"sm",src:ee??void 0})}),(0,p.jsx)(l.xu,{flex:"grow",paddingX:2,children:(0,p.jsx)(l.xv,{lineClamp:1,size:"200",weight:"bold",children:et})}),(0,p.jsx)(l.xu,{flex:"none",children:(0,p.jsx)(l.Sj,{bgColor:"transparent",icon:"arrow-forward",iconColor:"darkGray",size:"xs"})})]});break;case A.h8.GENERIC_STICKER:e=[5].includes(H)?G?er.isLoaded?(0,p.jsxs)(x.Fragment,{children:[(0,p.jsxs)(l.xu,{flex:"grow",paddingX:2,children:[(0,p.jsx)(l.xv,{lineClamp:1,size:"100",weight:"bold",children:es?R._('Explore this group board', 'closeup.StoryPin.stickerBlock.boardSticker.clickLabel', 'Label explaining click action when group board tag flyout showing'):R._('Explore this board', 'closeup.StoryPin.stickerBlock.boardSticker.clickLabel', 'Label explaining click action when board tag flyout showing')}),(0,p.jsx)(l.xv,{size:"100",children:(!!eo||0===eo)&&(0,j.nk)(R.ngettext('{{ pinCount }} Pin', '{{ pinCount }} Pins', eo, 'closeup.StoryPin.stickerBlock.boardSticker.boardLabel', 'Caption when board tag flyout that showing number of Pins on board'),{pinCount:eo})})]}),(0,p.jsx)(l.xu,{flex:"none",children:(0,p.jsx)(l.Sj,{bgColor:"transparent",icon:"arrow-forward",iconColor:"darkGray",size:"xs"})})]}):(0,p.jsxs)(l.xu,{alignItems:"center",direction:"row",display:"flex",flex:"grow",paddingY:2,children:[(0,p.jsx)(l.xu,{marginEnd:1,paddingX:2,children:(0,p.jsx)(l.xv,{color:"subtle",lineClamp:1,size:"100",children:R._('Loading board...', 'closeup.StoryPin.stickerBlock.boardSticker.loadingText', 'Label explaining board sticker still loading')})}),(0,p.jsx)(l.xH,{accessibilityLabel:R._('Board is loading', 'closeup.StoryPin.stickerBlock.boardSticker.loadingSpinnerText', 'Accessibility label for board loading spinner'),show:!0,size:"sm"})]}):(0,p.jsx)(l.xu,{paddingX:2,paddingY:2,children:(0,p.jsx)(l.xv,{color:"subtle",lineClamp:1,size:"200",weight:"bold",children:U})}):(0,p.jsx)(l.xu,{paddingX:2,paddingY:2,children:(0,p.jsx)(l.xv,{color:"subtle",lineClamp:1,size:"200",weight:"bold",children:R._('Sticker not supported yet', 'closeup.StoryPin.stickerBlock.genericStickerError', 'Label explaining this sticker has not been implemented yet')})});break;case A.h8.VTO_MAKEUP_STICKER:e=(0,p.jsx)(l.xv,{size:"300",weight:"bold",children:R._('Try this sticker on your phone!', 'closeup.storyPin.vtoMakeupSticker', 'Caption when @vitural-try-on-makeup tag is tapped for Web')})}return(0,p.jsx)(l.xu,{alignItems:"center","data-test-id":q,display:"flex",justifyContent:"center",padding:q===A.h8.PRODUCT_STICKER?1:3,width:"100%",children:W?(0,p.jsx)(l.xv,{color:"subtle",size:"200",weight:"bold",children:R._('Tag removed!', 'closeup.storyPin.stickerBlock', 'Caption when the tag is removed')}):e})};return(0,p.jsx)(x.Fragment,{children:eg?null:(0,p.jsxs)(l.xu,{ref:L,dangerouslySetInlineStyle:{__style:{left:ep,top:B*ec*g/100+_,transform:`rotate(${N}deg)`}},"data-test-id":(q||"")+"_container",display:"flex",height:Z*ec*g/100+2*s.Xw,margin:-1,padding:1,position:"absolute",rounding:2,width:eu+2*s.Xw,zIndex:d.B_,children:[(0,p.jsx)(l.iP,{disabled:eg,onTap:v?eh:({event:e})=>{eg||(f({event_type:101,component:228,element:t,view_type:3,view_parameter:157,aux_data:{story_pin_page_id:r}}),el?P(!0):(({event:e})=>{f({event_type:120,component:228,element:h,view_type:3,view_parameter:157,aux_data:{error_message:!G&&U?U:null,story_pin_page_id:r}}),b(!0),i&&(e.stopPropagation(),i())})({event:e}))},rounding:"pill"}),v&&(0,p.jsx)(l.mh,{zIndex:d.ej,children:(0,p.jsx)(l.J2,{_deprecatedShowCaret:!0,anchor:L.current,idealDirection:"up",onDismiss:eh,positionRelativeToAnchor:!1,size:W?"flexible":"sm",children:W?e_():(0,p.jsx)(l.iP,{fullWidth:!0,onTap:({event:e})=>{e.preventDefault(),W||(f({event_type:101,component:228,element:h,object_id_str:Y,view_type:3,view_parameter:157,aux_data:{story_pin_page_id:r}}),ei?D.push(ei):eh())},children:e_()})})}),!!Q&&k&&(0,p.jsx)(w,{aggregatedCommentId:Q,onDismiss:()=>{P(!1)}})]})})}var D=n(445698),R=n(47676),K=n(238187),M=n(452750);function Z({block:e,fontsLoaded:t,horizontalOffset:n=0,pageAspectRatio:i,scaleFactor:a,thumbnail:r,verticalOffset:s=0}){let{block_style:o,style:d=A.Cc,text:c}=e,{alignment:u,font:m,font_size:g,highlight_color:h,vertical_alignment:_=A.Cc.vertical_alignment}=d,{hex_color:y=A.Cc.hex_color}=d??{},[f,v]=(0,x.useState)(0),[b,k]=(0,x.useState)([]),S=m||A.Cc.font,{name:P,default_size:w,letter_spacing:C,line_height:I}=S,T=(0,M.Z)(S),j=Math.round(100*(o?.width||100))/1e4,F=Math.round(100*(o?.height||100))/1e4,E=Math.round(100*(o?.x_coord||0))/1e4,L=Math.round(100*(o?.y_coord||0))/1e4;(0,x.useEffect)(()=>{if(t){let e=(0,K.KV)({text:c,boxHeight:R.q8/i*F,boxWidth:R.q8*j,font:T,startFontSize:Math.floor(g||w||24)});k(e.lines),v(e.fontSize)}},[t,c]);let Z=f*a,z=h?(0,A.pE)(Z,I):{x:0,y:0},O=j*R.q8*a+2*z.x,B=F*(R.q8/i)*a+2*z.y,N=n+E*R.q8*a-z.x,V=r?`${100*L}%`:s+L*(R.q8/i)*a-z.y;return(0,p.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{left:N,top:V}},display:"flex",height:B,position:"absolute",width:O,children:(0,p.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:(0,D.RK)({alignment:u,verticalAlignment:_})},children:(0,p.jsx)(l.xu,{display:"inlineBlock",maxWidth:"100%",children:(0,p.jsx)("p",{style:(0,D.BN)({fontSize:Z,hexColor:y,letterSpacing:C,lineHeight:I,name:P}),children:b.map((e,t)=>(0,p.jsx)("span",{"data-gestalt-valid-html":"Text",style:(0,D.xm)({fontSize:Z,hasText:e.text.length>0,highlightColor:h||null,lineHeight:I}),children:t===b.length-1?e.text:(0,p.jsxs)(x.Fragment,{children:[e.text," ",(0,p.jsx)("br",{})]})},`paragraphLine-${t}-${(c??"").substr(0,9)}`))})})})})}var z=n(179639);function O({ownerId:e}){let t=(0,S.ZP)(),n=(0,I.Z)(),i=n.isAuth&&n.id===e;return(0,p.jsxs)(l.xu,{alignItems:"center",color:"tertiary",direction:"column",display:"flex",height:"100%",justifyContent:"center",width:"100%",children:[(0,p.jsx)(l.xv,{color:"inverse",children:i?t._('Your video is processing!', 'closeup.storyPin.videoPlaceholder', 'Let user know that their video is still processing'):t._('This video is still processing!', 'closeup.storyPin.videoPlaceholder', 'Let user know that this video is still processing')}),(0,p.jsx)(l.xv,{color:"inverse",children:t._('Check back in a few minutes.', 'closeup.storyPin.videoPlaceholder', 'Let user know to come back in a couple of minutes to view the video')})]})}var B=n(139707),N=n(934645),V=n(67831),U=n(716920),H=n(956077),W=n(85574),G=n(601686),$=n(653621);function X({block:e,isActive:t,pwtTrackImageLoad:n,thumbnail:i}){let a,o=(0,S.ZP)(),{closeupWithinMasonryEnabled:d,isCloseupMediaViewerOpen:c,peekCloseupEnabled:u,showProductDetailPage:m}=(0,G.x4)(),h=(0,N.Z)({showProductDetailPage:m}),{borderStyle:y}=i||h?{}:(0,W.Z)({closeupWithinMasonryEnabled:d,peekCloseupEnabled:u}),x=e.image?.images?.["750x"]||e.image?.images?.["474x"],{height:v=1,width:b=1}=x||{},k=f({isUseCache:!0,signature:e.image_signature}),{peekRedesignFastFollowsEnabled:P}=(0,B.Z)(x);return x||k?(a=i?"cover":d||P?"none":"contain",(0,p.jsx)(l.xu,{alignItems:u?"center":void 0,dangerouslySetInlineStyle:{__style:{...y,aspectRatio:d?(0,r.GJ)(b,v):void 0,contain:"strict",display:u?"grid":"block",justifySelf:d?"center":void 0}},height:d?"100%":"inherit",overflow:"hidden",width:d?void 0:"inherit",children:k?(0,p.jsx)(_,{_enableViewTransitions:!0,alt:o._('Story pin image', 'closeup.storypin.renderer', 'Alt text for story pin image'),color:s.yc,elementTiming:"StoryPinImageBlock-MainPinImage",fallbackSrc:k.media?.src??"",fit:a,isActive:t,naturalHeight:v,naturalWidth:b,onLoad:n,src:x?.url??"",suppressViewTransitionTags:c}):(0,p.jsx)(g.Z,{_enableViewTransitions:!0,alt:o._('Story pin image', 'closeup.storypin.renderer', 'Alt text for story pin image'),borderStyle:y,color:s.yc,elementTiming:"StoryPinImageBlock-MainPinImage",fetchPriority:d?"high":void 0,fit:a,isActive:t,naturalHeight:x?.height??1,naturalWidth:x?.width??1,onLoad:n,src:x?.url??"",suppressViewTransitionTags:c})})):null}function q({activePageIndex:e,block:t,closeupStoryPinViewability:n,customEndCard:i,isActive:a,isSplitLayout:r=!1,musicRecordingId:o,muted:d,onEnded:c,onUpdateVideoInfo:u,ownerId:m,pageAspectRatio:g,pageDimensions:h,pageIndex:_,pin:y,pinId:x,scaleFactor:v,stillLoading:b,videoThumbnailStartTime:k,thumbnail:S=!1}){let{block_style:{height:P=100,width:w=100,x_coord:C=0,y_coord:I=0}={},video:T}=t,{closeupWithinMasonryEnabled:j}=(0,G.x4)(),A=s._B/g,{height:F,width:E}=h,L=w*s._B*v/100,D=w<100?Math.min(Math.max(100,w)-Math.abs(C),w):Math.min(Math.max(w-Math.abs(C),0),100),R=P<100?Math.min(Math.max(100,P)-Math.abs(I),P):Math.min(Math.max(P-Math.abs(I),0),100),K=j?"100%":R*A*v/100,M=j?"100%":D*s._B*v/100,Z=Math.max(I,0)*A*v/100,B=Math.max(C,0)*s._B*v/100,N=f({isUseCache:!T,signature:t.video_signature});if(b)return null;let{media:V}=N||{},{duration:U,src:H}=V||{},W=!!H&&!!U;return T||W?!!(T?.video_list?.V_HLSV3_MOBILE||T?.video_list?.V_720P||W)&&(0,p.jsx)(l.xu,{height:r?"50%":"100%",overflow:"hidden",position:"relative",children:(0,p.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{alignSelf:"anchor-center",left:B,top:Z}},height:S?F:K,overflow:"hidden",position:"absolute",width:S?E:M,children:(0,p.jsx)(z.Z,{activePageIndex:e,aspectRatio:g,blockHeight:S?F:P*A*v/100,blockWidth:S?E:L,closeupStoryPinViewability:n,customEndCard:i,isPlaying:a,musicRecordingId:o,muted:d,onEnded:c,onUpdateVideoInfo:u,pageIndex:_,pin:y,pinId:x,video:T||{video_list:{V_EXP7:{duration:U?1e3*U:0,url:H}}},videoThumbnailStartTime:k})})}):(0,p.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{left:B,top:Z}},height:K,position:"absolute",width:M,children:(0,p.jsx)(O,{ownerId:m})})}let Y=(void 0!==a||(a=n(35312)).hash&&"8bb1bb1f7bafeed0fe43bed44ef12d2a"!==a.hash&&console.error("The definition of 'StoryPinBlock_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a);function J({activePageIndex:e,block:t,closeupStoryPinViewability:n,customEndCard:i,disableProductStickers:a,fontsLoaded:r,horizontalOffset:o,isActive:d,isSplitLayout:c=!1,musicRecordingId:u,muteVideos:g,onEnded:h,onFlyoutOpen:_,onUpdateVideoInfo:y,ownerId:f,pageAspectRatio:x,pageHeight:v,pageIndex:b,pageWidth:k,pin:S,pinId:P,previewOnly:w,pinKey:C,stillLoading:I=!1,thumbnail:j=!1,transform:F,verticalOffset:E,videoPinProgress:D,videoThumbnailStartTime:R}){let K=(0,T.Z)(Y,C),{closeupWithinMasonryEnabled:M}=(0,G.x4)(),{block_style:{height:z=100,width:O=100,x_coord:B=0,y_coord:N=0}={},interactive_sticker_type:W=null}=t,J=(0,U.g)(),Q=(0,V.A)();if(0===z||0===O)return null;let ee=k/s._B;switch(t.type){case A.h8.PARAGRAPH:case A.h8.HEADING:return(0,p.jsx)(Z,{block:t,fontsLoaded:r,horizontalOffset:o,pageAspectRatio:x,scaleFactor:ee,thumbnail:j,verticalOffset:E});case A.h8.VIDEO:return(0,p.jsx)(q,{activePageIndex:e,block:t,closeupStoryPinViewability:n,customEndCard:i,isActive:d,isSplitLayout:c,musicRecordingId:u,muted:g,onEnded:h,onUpdateVideoInfo:y,ownerId:f,pageAspectRatio:x,pageDimensions:{height:v,width:k},pageIndex:b,pin:S,pinId:P,scaleFactor:ee,stillLoading:I,thumbnail:j,videoThumbnailStartTime:R});case A.h8.IMAGE:let{scaleX:et=1,scaleY:en=1}=F||{};return(0,p.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{display:M?"grid":"block",height:`${z}%`,left:`${B*et}%`,top:`${N*en}%`,width:`${O}%`}},overflow:"hidden",position:"absolute",children:(0,p.jsx)(X,{block:t,isActive:d,pwtTrackImageLoad:()=>{J&&d&&(J.addBinaryAnnotation("pin.id",P,"STRING"),J.addBinaryAnnotation("video",!1,"BOOL"),J.stop()),d&&(Q&&(Q.addBinaryAnnotation("pin.id",P,"STRING"),Q.addBinaryAnnotation("video",!1,"BOOL"),Q.removeConstraint($._z),Q.markConstraintComplete($.pM)),(0,H.rt)("pin.id",P,"STRING"),(0,H.rt)("video",!1,"BOOL"),(0,H.Nx)($.pM),(0,H.l7)($._z))},thumbnail:j})});case A.h8.MENTION_STICKER:return!w&&(0,p.jsx)(L,{block:{...t},elementType:12120,horizontalOffset:o,onFlyoutOpen:_,pageAspectRatio:x,pageIndex:b,pinKey:null,scaleFactor:ee,tooltipElementType:12121,verticalOffset:E,videoPinProgress:D});case A.h8.GENERIC_STICKER:return!w&&(e=>{let t=5===W;return(0,p.jsx)(L,{block:{...e},elementType:t?12827:12858,horizontalOffset:o,onFlyoutOpen:_,pageAspectRatio:x,pageIndex:b,pinKey:null,scaleFactor:ee,tooltipElementType:t?12828:12859,verticalOffset:E,videoPinProgress:D})})(t);case A.h8.PRODUCT_STICKER:return!w&&!a&&(0,p.jsx)(L,{block:{...t},elementType:12223,horizontalOffset:o,onFlyoutOpen:_,pageAspectRatio:x,pageIndex:b,pinKey:K,scaleFactor:ee,tooltipElementType:12224,verticalOffset:E,videoPinProgress:D});case A.h8.VTO_MAKEUP_STICKER:return!w&&(0,p.jsx)(L,{block:{...t},elementType:12561,horizontalOffset:o,onFlyoutOpen:_,pageAspectRatio:x,pageIndex:b,pinKey:null,scaleFactor:ee,tooltipElementType:12561,verticalOffset:E,videoPinProgress:D});case A.h8.COMMENT_REPLY_STICKER:return t.type===A.h8.COMMENT_REPLY_STICKER&&!w&&(0,p.jsx)(m,{block:t,horizontalOffset:o,pageAspectRatio:x,scaleFactor:ee,verticalOffset:E});default:return null}}},996434:function(e,t,n){n.d(t,{Z:()=>c});var i=n(20256),a=n(592821),l=n(248762),r=n(677921),s=n(123317),o=n(123998),d=n(785893);function c({activePageIndex:e,clientTrackingParams:t,closeupStoryPinViewability:n,customEndCard:c,fontsLoaded:u,horizontalOffset:p,isActive:m,isPreview:g,muteVideos:h,onEnded:_,onFlyoutOpen:y,onUpdateVideoInfo:f,ownerId:x,page:v,pageAspectRatio:b,pageHeight:k,pageIndex:S,pageWidth:P,pin:w,pinId:C,productPins:I,shouldLogTimeSpent:T=!0,stillLoading:j=!1,verticalOffset:A,videoPinProgress:F,viewParameter:E,viewType:L}){let{nonRenderableBlocks:D,blocks:R}=(0,r.Z)({storyPinBlocks:v.blocks??[]}),K=!!R.find(e=>e.type===s.h8.VIDEO),M=!!R.find(e=>!!e.video&&e.type===s.h8.VIDEO&&e.video_signature),Z=D.find(e=>e.type===s.h8.MUSIC),z=Z?.type==="story_pin_music_block"?Z.provider_recording_id:void 0,O=()=>(0,d.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{background:a.yc}},height:"100%",children:!g&&R.filter(e=>!K||M||e.type===s.h8.VIDEO).map((t,i)=>{let a=(I||[]).find(e=>[e.id,e.cacheable_id].includes(t.pin_id));return(0,d.jsx)(l.Z,{activePageIndex:e,block:t,closeupStoryPinViewability:n,customEndCard:c,disableProductStickers:!0,fontsLoaded:u,horizontalOffset:p,isActive:m,isSplitLayout:3===v.layout,musicRecordingId:z,muteVideos:h,onEnded:_,onFlyoutOpen:y,onUpdateVideoInfo:f,ownerId:x,pageAspectRatio:b,pageHeight:k,pageIndex:S,pageWidth:P,pin:w,pinId:C,pinKey:null!=a?{type:"deprecated",data:a}:null,stillLoading:j,verticalOffset:A,videoPinProgress:F},`${v.id??""}-${t.type??""}-${i}`)})});return T?(0,d.jsx)(o.Z,{auxData:{story_pin_page_id:S},clientTrackingParams:t,component:0===S?227:228,shouldUseGrandparentId:!0,view:L,viewParameter:E,children:O()}):O()}},677921:function(e,t,n){n.d(t,{Z:()=>l});var i=n(123317);let a=[i.h8.COMMENT_REPLY_STICKER,i.h8.GENERIC_STICKER,i.h8.HEADING,i.h8.IMAGE,i.h8.MENTION_STICKER,i.h8.PARAGRAPH,i.h8.PRODUCT_STICKER,i.h8.VIDEO,i.h8.VTO_MAKEUP_STICKER];function l({storyPinBlocks:e=[],blocksToRender:t=a}){let n=[],l=[],r=[];return e.forEach(e=>{t.includes(e.type)?e.type===i.h8.PARAGRAPH||e.type===i.h8.HEADING?l.push(e):r.push(e):n.push(e)}),r.push(...l),{nonRenderableBlocks:n,textBlocks:l,blocks:r}}},249013:function(e,t,n){n.d(t,{g:()=>s,h:()=>r});var i=n(667294),a=n(785893);let l=(0,i.createContext)(void 0);function r({children:e}){let[t,n]=(0,i.useState)(!1),r=(0,i.useRef)(null),s=()=>{null!==r.current&&(window.clearTimeout(r.current),r.current=null)};(0,i.useEffect)(()=>()=>s(),[]);let o=(0,i.useCallback)(()=>{s(),n(!0),r.current=window.setTimeout(()=>{n(!1),r.current=null},2e3)},[]),d=(0,i.useMemo)(()=>({animateVisitSite:t,triggerVisitButtonAnimation:o}),[t,o]);return(0,a.jsx)(l.Provider,{value:d,children:e})}function s(){return(0,i.useContext)(l)||{animateVisitSite:!1,triggerVisitButtonAnimation:()=>{}}}},878709:function(e,t,n){n.d(t,{A:()=>g,G:()=>u});var i,a=n(667294);n(167912);var l=n(729434),r=n(415546),s=n(453179),o=n(607652),d=n(785893);let{Provider:c,get:u}=(0,l.Z)("VisualContext"),p=(void 0!==i||(i=n(441590)).hash&&"f5ddfd6a30ebe10b0f0a7b0bf12bea4e"!==i.hash&&console.error("The definition of 'VisualContext_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),m=({children:e,pinKey:t,overrideValue:n={}})=>{let i=(0,r.Z)(p,t),{videos:l,embed:u,link:m,isVideo:g}=i??{},h=(0,a.useMemo)(()=>l?.videoList?.v720P?.url?{duration:l.videoList.v720P.duration||void 0,height:l.videoList.v720P.height||void 0,thumbnail:l.videoList.v720P.thumbnail||void 0,url:l.videoList.v720P.url||void 0,width:l.videoList.v720P.width||void 0,captions_urls:l.videoList.v720P.captionsUrls||void 0}:void 0,[l?.videoList?.v720P?.duration,l?.videoList?.v720P?.height,l?.videoList?.v720P?.thumbnail,l?.videoList?.v720P?.url,l?.videoList?.v720P?.width,l?.videoList?.v720P?.captionsUrls]),_=(0,a.useMemo)(()=>l?.videoList?.vHLSV4?.url?{duration:l.videoList.vHLSV4.duration||void 0,height:l.videoList.vHLSV4.height||void 0,thumbnail:l.videoList.vHLSV4.thumbnail||void 0,url:l.videoList.vHLSV4.url||void 0,width:l.videoList.vHLSV4.width||void 0}:void 0,[l?.videoList?.vHLSV4?.duration,l?.videoList?.vHLSV4?.height,l?.videoList?.vHLSV4?.thumbnail,l?.videoList?.vHLSV4?.url,l?.videoList?.vHLSV4?.width]),y=(0,a.useMemo)(()=>l?.videoList?.vHLSV3MOBILE?.url?{duration:l.videoList.vHLSV3MOBILE.duration||void 0,height:l.videoList.vHLSV3MOBILE.height||void 0,thumbnail:l.videoList.vHLSV3MOBILE.thumbnail||void 0,url:l.videoList.vHLSV3MOBILE.url||void 0,width:l.videoList.vHLSV3MOBILE.width||void 0}:void 0,[l?.videoList?.vHLSV3MOBILE?.duration,l?.videoList?.vHLSV3MOBILE?.height,l?.videoList?.vHLSV3MOBILE?.thumbnail,l?.videoList?.vHLSV3MOBILE?.url,l?.videoList?.vHLSV3MOBILE?.width]),f=(0,a.useMemo)(()=>{let e=h||_||y;return l?.entityId&&e?{id:l.entityId,hasVideo:e,mp4:h||void 0,hls:_||void 0,hlsv3:y||void 0}:null},[_,y,h,l?.entityId]),x=(0,s.sY)(u?.type),v=(0,s.oU)({isVideo:g,link:m}),{mainPinImage:b,srcSet:k,srcSizes:S}=(0,o.Z)({pinKey:i}),P=i?.imageSpec_1200x||i?.imageSpec_orig||i?.imageSpec_736x||i?.imageSpec_564x||i?.imageSpec_474x||i?.imageSpec_236x,w=(0,a.useMemo)(()=>({height:P?.height??1,url:P?.url??"",width:P?.width??1}),[P]),C=i?.imageSpec_236x,I=(0,a.useMemo)(()=>C?.url?{height:C.height??1,url:C.url,width:C.width??1}:null,[C]),T=(0,a.useMemo)(()=>{let e=u?.subtype==="pinstory",t=n.mainImage||b;return{...n,mainImage:t,previewImage:void 0===n.previewImage?I:n.previewImage,mediaViewerImage:w,video:f,embed:u,isYoutubePin:v,isEmbeddedVideo:!!u?.src&&!x&&!e,isGif:x,imgSrc:x&&u?.src?u.src:t.url,...x?{}:{srcSet:k},srcSizes:S}},[b,I,w,f,u,v,x,k,S,n]);return(0,d.jsx)(c,{value:T,children:e})},g=({children:e,pinKey:t,overrideValue:n={}})=>(0,d.jsx)(m,{overrideValue:n,pinKey:t,children:e})},25339:function(e,t,n){n.d(t,{F:()=>Z,Z:()=>O});var i,a,l,r,s,o=n(667294);n(167912);var d=n(20256),c=n(592821),u=n(581722),p=n(821342),m=n(848171),g=n(415546),h=n(801082),_=n(351607),y=n(274320),f=n(886981),x=n(482694),v=n(757947),b=n(634232),k=n(63773),S=n(785893);let P=(void 0!==i||(i=n(220054)).hash&&"d9b26cdb236cdd26cd01183eab07f81d"!==i.hash&&console.error("The definition of 'CSSCarouselModule_story' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function w({auxData:e={},heading:t,itemWidth:n,itemWidthHeightRatio:i,productTagParentPinId:a,saveButtonOptions:l,showMarkers:r=!1,showNavigationButtons:s=!0,storyKey:c,subHeading:u,surface:p,view:m=3,viewParameter:h}){let _=(0,g.Z)(P,c),y=_?.objects?[..._.objects]:[],f=_.displayOptions?.contentDisplay?.itemWidthHeightRatio,w=n*(f??i??1),C=(0,o.useCallback)(({item:t,index:i})=>{let r;if(i===y.length-1&&_.action?.text&&_.action?.url&&(r=_.action,r?.text&&r?.url&&k.Lf.has(r?.location))){let i="Pin"===t.__typename&&t.imageSpec_236x?.url;return i&&(0,S.jsx)(v.Z,{auxData:e,buttonText:_.action?.text,imageWidth:n,previewImageSrc:i,storyId:_.storyId??"",storyType:_.storyType,url:_.action.url,view:m,viewParameter:h},`pin-ActionItemRep-${t.entityId}`)}return"Pin"===t.__typename?(0,S.jsx)(b.Z,{auxData:e,boardKey:null,imageWidth:n,isInDesktopCarousel:!0,item:t,itemWidthHeightRatio:f,pinKey:t,productTagParentPinId:a,relatedInterestKey:null,saveButtonOptions:l,slotIndex:i,storyKey:_,surface:p,view:m,viewParameter:h},`pin-${t.entityId}`):null},[e,y.length,n,f,_,a,l,p,m,h]);return(0,S.jsxs)(d.kC,{direction:"column",gap:4,children:[(0,S.jsxs)(d.xu,{marginStart:6,children:[u&&(0,S.jsx)(d.xv,{size:"200",children:u}),(0,S.jsx)(d.X6,{accessibilityLevel:2,align:"start",size:"400",children:t})]}),(0,S.jsx)(d.xu,{position:"relative",children:(0,S.jsx)(x.Z,{itemHeight:w,items:y,itemWidth:n,mode:"multi",renderItem:C,showNavigationButtons:s,showScrollMarkers:r})})]})}var C=n(647709),I=n(664897),T=n(85363),j=n(766033),A=n(611499),F=n(601686),E=n(607233),L=n(169053);let D=(0,n(78762).Z)(()=>Promise.resolve().then(n.bind(n,431870)),void 0,e=>431870,"app-packages-StructuredFeed-ModuleReps-CarouselModule-CarouselModule",e=>[]),R=(void 0!==a||(a=n(263032)).hash&&"739ecb0736bfecf3911084ec22416c60"!==a.hash&&console.error("The definition of 'ShoppingModule_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),K=(void 0!==l||(l=n(220149)).hash&&"8dbadcc717705db56290e7675e591f95"!==l.hash&&console.error("The definition of 'ShoppingModule_v3GetStelaShoppingCarousel' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l),M=(void 0!==r||(r=n(650719)).hash&&"9b72b1fb8ac15ff6e966eb2e7fedbb74"!==r.hash&&console.error("The definition of 'ShoppingModuleQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r);function Z(e){let t=(0,p.Z)(),n=t&&t.isAuth,i=(0,C.HG)(),a=(0,j.Z)(),l=function({pinId:e}){return(0,u.v9)(({pinbuilder:t})=>{if(!e)return null;let{pinItems:n,pinTags:i}=t,a=n?.[e];if(!a)return null;let l=a.pinTagIds??[];if(0===l.length)return null;let r=l.map(e=>i?.[e]).filter(Boolean);return r.length>0?r:null})}({pinId:e}),r=(0,L.S6)(),s=(0,h.Z)({strategy:a?"GRAPHQL":"LEGACY",query:M,variables:{pinId:e,isDesktop:i,isAuth:n},options:{fetchPolicy:l?"store-and-network":"network-only"},useGetLegacyData:({pinId:e})=>{let t=n?`/v3/visual_search/stela/pins/${e}/module/`:`/v3/seo/stela/pins/${e}/module/`,i=(0,f.Z)({name:"ApiResource",noCache:!!l,options:{url:t,data:{fields:(0,E.Z)()}}}),a=i.data?.map(e=>({...e,objects:e?.objects?.map(e=>{if(e?.type==="pin"&&e?.id){let t=r(e?.id||"");if(t)return t}return e})}));return i?{...i,data:a}:null}}),o=s?.v3GetStelaShoppingCarouselQuery?.__typename==="V3GetStelaShoppingCarousel"?s.v3GetStelaShoppingCarouselQuery:null,d=(0,g.Z)(K,o);return d?d.data:null}let z=({children:e,id:t,storyRef:i,viewParameter:a,pinId:l,hasAutoTags:r})=>{let o=(void 0!==s||(s=n(336209)).hash&&"967fc795bbfb9844686a21d73abf35e0"!==s.hash&&console.error("The definition of 'ShoppingModule_story' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),s),{contentIds:c,displayOptions:u,slot:p,storyId:m,storyType:h,trackingParams:y}=(0,g.Z)(o,i),f=u?.contentDisplay?.componentType,x=(0,_.ZP)({clientTrackingParams:y,componentType:f,contextLogData:{story_id:m,story_type:h,content_ids:c,has_auto_tags:r,root_pin_id:l},impressionType:"Story",loggingId:m,slotIndex:p||0,viewParameter:a,viewType:3});return(0,S.jsx)(d.xu,{ref:x,marginTop:4,children:e},t)};function O({moduleWidth:e,pinKey:t,trafficSource:n,unauthCloseupRedesignEnabled:i,viewParameter:a}){let{checkExperiment:l}=(0,y.r)(),{isAuth:r}=(0,p.Z)(),s=(0,j.Z)(),u=r&&l("web_stl_css_carousel").anyEnabled,{closeupWithinMasonryEnabled:h,peekCloseupEnabled:_,viewportSize:f}=(0,F.x4)(),x=h||i,v=(0,g.Z)(R,t),b=(0,o.useRef)(null),[k,P]=(0,o.useState)(void 0),C=Z(v.entityId),E=C?.[0],L=(v?.collectionPin?.itemData||[]).some(e=>e?.source===7);((0,I.Z)()?o.useEffect:o.useLayoutEffect)(()=>{!u&&b.current&&x&&P(Math.floor((b.current.offsetWidth+8)/175))},[C,x,175,b.current?.offsetWidth]);let K=(0,o.useMemo)(()=>s?null:function(e){let t=e?(0,m.G5)(e):null;return t&&"LegacyData"===t.kind?t.singularLegacyData:null}(E),[s,E]),M=(0,T.Z)({checkExperiment:l,cropSource:5,isProductPage:!0,pinId:v.entityId,requestParams:E?.action?.requestParams??"",surfaceType:"stl",trafficSource:n}),O=_&&"lg"===f,B=(0,o.useMemo)(()=>({buttonSizeOverride:"lg",carouselContainerMarginBottom:x?0:void 0,flexDirection:O?"column":"row",gutterWidth:c.Gd,justifyContent:"start",navigationFabSize:32,showPagination:x}),[x,O]),N=(0,o.useMemo)(()=>x?{type:"inline"}:{type:"classic"},[x]),V=(0,o.useMemo)(()=>{if(!x&&!(_&&"lg"===f))return{};let e={paddingLeft:u?void 0:`${c.Gd}px`};return x?{...e,border:c.tc}:e},[x,_,f,u]);return C&&0!==C.length?(0,S.jsx)(o.Fragment,{children:(0,S.jsx)(d.kC,{alignItems:"center",dataTestId:"shopping-module",direction:"column",justifyContent:"center",width:e,children:(0,S.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:V},maxWidth:i?e:void 0,rounding:4*!!x,width:e,children:C?.filter(Boolean).map(e=>{if(null==e)return null;let{action:t,containerType:n,storyId:i}=e;if(139!==n)return null;{let n=e.title?.format||"",l=r&&t?.url?t.url:M;return(0,S.jsx)(z,{hasAutoTags:L,id:i,pinId:v.entityId,storyRef:e,viewParameter:a,children:(0,S.jsx)(d.xu,{ref:b,children:u?(0,S.jsx)(w,{auxData:{has_auto_tags:L,root_pin_id:v.entityId},heading:n,itemWidth:175,itemWidthHeightRatio:1,productTagParentPinId:v.entityId,saveButtonOptions:N,showMarkers:x,showNavigationButtons:!0,storyKey:e,surface:"ShoppingGridSmallCarousel",view:3,viewParameter:a}):(0,S.jsxs)(d.kC,{direction:"column",gap:2,children:[(0,S.jsx)(d.xu,{marginStart:2,children:(0,S.jsx)(d.X6,{accessibilityLevel:2,align:"start",id:"shop-the-look-heading",size:"400",children:n})}),(0,S.jsx)(D,{addContentRight:(0,S.jsx)(d.xu,{width:A.g9}),allowHover:!0,contentVisibleItemCountOverride:k,dangerouslySetActionUrl:l,disableHeader:!0,itemWidth:x?175:void 0,itemWidthHeightRatio:1,pinKey:v,productTagParentPinId:v.entityId,saveButtonOptions:N,story:K,storyKey:e,styleOverrides:B,surface:"ShoppingGridSmallCarousel",view:3,viewParameter:a})]})})},i)}})})})}):null}},995415:function(e,t,n){n.d(t,{Z:()=>i});let i=({carouselData:e,domain:t})=>{let n="",i=t||"";if(e){let{carouselSlots:t=[]}=e,a=e.index??0;t&&t[a]&&(n=t[a].link||"",i=t[a].domain||i)}return{carouselLink:n,currentDomain:i}}},115939:function(e,t,n){n.d(t,{Z:()=>r});var i=n(378888);let a=/^\/pin\/(.*[^\/])\/$/,l={"/":"feed_home","/homefeed":"feed_home","/pin/:id":"pin","/pin/:id/comments":"pin","/pin/:id/activity/tried":"pin","/pin/:id/activity/comments":"pin","/pin/:id/visual-search":"flashlight","/discover/article/:id":"explore_article","/discover/article/:title/:id":"explore_article","/topics/:interest":"feed_interest","/categories/:interest":"feed_category","/news_hub/:id":"notifications","/explore/:interest":"seo_auth","/interest/:id":"seo_auth","/search/:scope":"search","/following":"feed_following","/:username/pins":"user_pins","/:username/tried":"user_tries","/:username/:slug":"board","/:username/:slug/edit":"board","/:username/:slug/invite":"board","/:username/:slug/:section_slug":"board","/story_feed":"shop_feed"};function r(e,t){let n=["pin"],r=[],s=1,o="unknown",d="unknown",c=!0;for(let t=e.length-1;t>0;t-=1){let a=function(e,t){if(t<=0)return"unknown";let n=e[t-1],a=n?.match?.path||"",r=["stela","stl"].includes((0,i.mB)(n?.location?.search).surfaceType??"");if(a&&"/pin/:id/visual-search"===a&&r)return"shop_feed";let s=a in l?l[a]:"unknown";return a?s:"feed_home"}(e,t);n.splice(0,0,a),c&&("pin"===(o=a)?s+=1:c=!1)}for(let t=e.length-2;t>=0;t-=1){let n=(e[t]?.location?.pathname||"").match(a);if(n&&2===n.length)r.splice(0,0,n[1].split("/")[0]);else break}return 1===n.length?(d="deep_linking",o="deep_linking"):(d=n[n.length-2],"pin"===o&&(o="deep_linking")),"seo_auth"!==d||t||(d="seo_unauth"),"seo_auth"!==o||t||(o="seo_unauth"),("search"===d||"search"===o)&&e.length>=s+1&&"/search/buyable_pins/"===(e[e.length-s-1]?.location?.pathname||"")&&(o="shop_feed","search"===d&&(d="shop_feed")),{trafficSource:d,topLevelTrafficSource:o,topLevelTrafficSourceDepth:s,contextPinIds:r}}},642411:function(e,t,n){n.d(t,{Z:()=>i});let i=(e,t,n,i)=>({id:e,field_set_key:"auth_web_main_pin",add_fields:n?n.join(","):void 0,client_tracking_params:void 0,noCache:!0,fetch_visual_search_objects:!0,...t?{orbac_subject_id:t}:Object.freeze({}),get_page_metadata:!!i})},573647:function(e,t,n){n.d(t,{Z:()=>r});var i=n(934645),a=n(611499),l=n(601686);function r({showProductDetailPage:e=!1,mainImage:t,skipAspectRatioCheck:n=!1}={}){let{viewportSize:s}=(0,l.x4)();if(!(0,i.Z)({showProductDetailPage:e}))return{maxHeight:void 0};if(!n&&t){let{height:e=0,width:n=0}=t;if(n/e<.25)return{maxHeight:void 0}}return{maxHeight:"sm"===s?a.E$:a.Id}}},979904:function(e,t,n){n.d(t,{Z:()=>u}),n(422578);var i,a=n(995415),l=n(934645),r=n(415546),s=n(644493),o=n(664897),d=n(601686);let c=(void 0!==i||(i=n(331047)).hash&&"f82ccc429683f2cb3ed96de5adc86f80"!==i.hash&&console.error("The definition of 'useCalculateMaxWidthAndHeightForSideBySideVariant_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function u({pinKey:e}){let t,{closeupWithinMasonryEnabled:n}=(0,d.x4)(),i=(0,o.Z)(),u=(0,r.Z)(c,e),p=(0,l.Z)({showProductDetailPage:!!u?.isEligibleForPdp});if(!n)return{maxHeight:void 0};let m=u?.richMetadata?.products?.[0],g=m?.offerSummary,h=g?.price||g?.standardPrice,_=u?.linkDomain?.officialUser?.firstName,y=!!u?.closeupAttribution?.firstName||_,f=u?.linkUserWebsite?.officialUser?.firstName,x=u?.trackedLink||u?.link||"",v=(0,s.Z)(x)??x,{currentDomain:b}=(0,a.Z)({carouselData:u?.carouselData&&{carouselSlots:u?.carouselData.carouselSlots&&u?.carouselData.carouselSlots.map(e=>({domain:e.domain,link:e.link})),index:u?.carouselData?.index},domain:u?.domain}),k=b.split(".")[0],S=0,P=0;if(t=84+18*!!h,S+=23*!!u?.closeupUnifiedTitle+40*!!y,P+=(f||_||k)&&v?64:0,t+=Math.max(S,P),i)return{maxHeight:p?void 0:`calc(round(100vh, 1px) - 80px - ${t}px)`};let w=Math.round(window.innerHeight)-80-t;return{maxHeight:p?void 0:w}}},102134:function(e,t,n){n.d(t,{Z:()=>r});var i=n(274320),a=n(15667),l=n(647709);let r=()=>{let{isAuthenticated:e}=(0,a.B)(),t=(0,l.HG)(),{checkExperiment:n}=(0,i.r)();return()=>e&&t&&n("auth_dweb_shuffle_renderer_closeup_v2").anyEnabled}},629178:function(e,t,n){n.d(t,{Z:()=>o});var i=n(667294),a=n(616550),l=n(15667),r=n(647709),s=n(688170);let o=({isShufflePin:e})=>{let{isAuthenticated:t}=(0,l.B)(),n=(0,r.HG)(),o=(0,s.C)((0,a.TH)());return(0,i.useMemo)(()=>({isCloseupMediaViewerEnabled:t&&n&&o&&!e}),[t,n,o,e])}},449930:function(e,t,n){n.d(t,{ZP:()=>g,fz:()=>u,mg:()=>m,o1:()=>c});var i=n(667294),a=n(592821),l=n(934645),r=n(25339),s=n(601686);function o(e){return"object"==typeof e&&null!==e&&"type"in e&&"shopping_module"===e.type}function d(e){return"object"==typeof e&&null!==e&&"type"in e&&"inclusive_filters_module"===e.type}let c=e=>"object"!=typeof e||null===e||!("virtualize"in e)||(e.virtualize??!0),u=(e,t)=>n=>{if(!e&&o(n)||e&&(o(n)||d(n))||t&&(o(n)||d(n)))return{min:2,max:9}},p=({inBlendedUIExp:e,isAuth:t=!0})=>{let n=t?a.ne:a.tm;return e?{...n,columnSpan:{...n.columnSpan,...a.DO}}:n};function m(e,t,n){let l=p({inBlendedUIExp:!1,isAuth:!1}),r=(0,i.useMemo)(()=>({...a.tV}),[]),s=(0,i.useMemo)(()=>({...a.MB}),[]);return{closeupMasonryModules:(0,i.useMemo)(()=>{if(!t)return[];let e=[l];return e.push(r),n&&e.push(s),e},[t,l,n,s,r])}}function g({pinId:e,inclusiveModuleToCache:t,showProductDetailPage:n}){let o=(0,r.F)(e),{closeupWithinMasonryEnabled:d}=(0,s.x4)(),c=(0,l.Z)({showProductDetailPage:n}),[u,m]=(0,i.useState)(t);!u&&t&&m(t);let g=(0,i.useMemo)(()=>p({inBlendedUIExp:c}),[c]),h=(0,i.useMemo)(()=>({...a.tV}),[]),_=(0,i.useMemo)(()=>({...a.MB}),[]),y=o&&o.length>0,f=(0,i.useMemo)(()=>{let e=[g];return y&&e.push(h),u&&e.push(_),e},[g,y,u,h,_]);return d?{closeupMasonryModules:f,hasShoppingModule:y,inclusiveFilters:u}:{closeupMasonryModules:[],inclusiveFilters:void 0}}},139707:function(e,t,n){n.d(t,{Z:()=>s});var i=n(899117),a=n(274320),l=n(15667),r=n(647709);function s(e){let{isAuthenticated:t}=(0,l.B)(),n=(0,r.HG)(),{checkExperiment:s}=(0,a.r)(),o=t&&n&&s("closeup_dweb_peek_redesign_fast_follow").anyEnabled,d=s("closeup_dweb_peek_redesign_fast_follow").group,c=t&&n&&s("closeup_dweb_side_by_side_redesign_fast_follow").anyEnabled,u=c?s("closeup_dweb_side_by_side_redesign_fast_follow").group:"";return{peekRedesignFastFollowsExpGroup:d,peekRedesignFastFollowsEnabled:o&&(0,i.Z)(d,e),sideBySideRedesignFastFollowsExpGroup:u,sideBySideRedesignFastFollowsEnabled:c,sideBySideFullWidthCTAEnabled:"enabled_full_width_cta"===u||"employees"===u,sideBySidePWTDeferActionBarLoad:"enabled_pwt_defer_action_bar_load"===u}}},142689:function(e,t,n){n.d(t,{Z:()=>r});var i=n(139707),a=n(274320),l=n(78187);function r(e){let{checkExperiment:t}=(0,a.r)(),{sideBySideRedesignFastFollowsEnabled:n}=(0,i.Z)(),r=n&&e===l.ti.SKIN&&t("web_closeup_inclusive_refinement",{dangerouslySkipActivation:!0}).anyEnabled,s=n&&e===l.ti.HAIR&&t("web_closeup_hair_refinement",{dangerouslySkipActivation:!0}).anyEnabled,o=n&&e===l.ti.BODY&&t("web_btr_closeup",{dangerouslySkipActivation:!0}).anyEnabled;return{inInclusiveEfficientRefinements:!!(r||s||o)}}},73579:function(e,t,n){n.d(t,{Z:()=>i});let i=e=>({isEligibleForStaticImageIdeaPin:!!e})},149739:function(e,t,n){n.d(t,{n:()=>i});let i="300"},736802:function(e,t,n){n.d(t,{Z:()=>r});var i=n(20256),a=n(785893);let l=/^(?!.*#.*#)#[\p{L}\p{N}_]\S*$/gu;function r({closeupWithinMasonryEnabled:e=!1,peekCloseupEnabled:t=!1,mWebCloseupRedesignEnabled:n=!1,text:r}){let s=t||n?"200":"300";return r.split(new RegExp(/(#\S*)/)).map((t,n)=>{let r=`${n}-${t}`;return t.match(l)?(0,a.jsx)(i.xv,{color:"link",inline:!0,size:s,children:(0,a.jsx)(i.rU,{display:"inline",href:`/search/pins/?q=${encodeURIComponent(t.replace("#",""))}`,underline:"none",children:t})},r):(0,a.jsx)(i.xv,{color:e?"subtle":void 0,inline:!0,size:s,children:t},r)})}},569437:function(e,t,n){n.d(t,{Z:()=>u}),n(167912);var i,a=n(30216),l=n(980787),r=n(415546),s=n(817309),o=n(453179),d=n(431338);let c=(void 0!==i||(i=n(394292)).hash&&"d38a7b9f18791089cd1df852e3863570"!==i.hash&&console.error("The definition of 'useHandleTitleClick_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),u=function({pinKey:e,pinId:t,viewParameter:n,trafficSource:i}){let{logContextEvent:u}=(0,l.u)(),p=(0,r.Z)(c,e),m=(0,a.Z)({pinKey:p}),g=(0,d.Z)(p);return()=>{let e=g();u({event_type:12,object_id_str:t,view_type:3,component:85,view_parameter:n,clientTrackingParams:m,aux_data:{...e,...(0,s.Z)(p?.linkUtmApplicableAndReplaced)}}),u({event_type:8948,clientTrackingParams:m,view_type:3,view_parameter:n,component:85,object_id_str:t,aux_data:{click_type:"clickthrough",closeup_navigation_type:i&&(0,o.sV)(i)?"deeplink":"click",...e}})}}},478086:function(e,t,n){n.d(t,{Z:()=>y});var i,a=n(667294);n(244311);var l=n(20256),r=n(471998),s=n(736802),o=n(980787),d=n(415546),c=n(805205),u=n(601686),p=n(785893);let m=(void 0!==i||(i=n(658559)).hash&&"93be5ba2b479913d0e23e4971f11a9cd"!==i.hash&&console.error("The definition of 'DescriptionWithLinksAndMentions_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),g=e=>null!=e&&e>-1,h=({color:e,mention:t,tagObjectId:n,tagType:i,textSize:a})=>{let{logContextEvent:r}=(0,o.u)();return(0,p.jsx)(l.rU,{display:"inlineBlock",href:`/${t.substr(1)}`,onClick:({event:e})=>{e.stopPropagation(),r({event_type:101,element:11915,aux_data:{tag_id:n,tag_type:i}})},underline:"none",children:(0,p.jsx)(l.xv,{color:e,inline:!0,overflow:"normal",size:a,weight:"bold",children:t},t)},n)},_=({color:e,link:t,tagObjectId:n,tagType:i,text:a,textSize:r})=>{let{logContextEvent:s}=(0,o.u)(),d=(0,c.Z)({site:"www"}),u=t.startsWith("pinterest://")?t.replace("pinterest://",`${d}/`):t;return(0,p.jsx)(l.xv,{color:e,inline:!0,overflow:"normal",size:r,children:(0,p.jsx)(l.rU,{display:"inlineBlock",href:u,onClick:({event:e})=>{e.stopPropagation(),s({event_type:101,element:18123,aux_data:{tag_id:n,tag_type:i,url:t}})},underline:"hover",children:a},n)},a)},y=({description:e,mentionLinkColor:t,pinKey:n,shouldAdjustOffset:i,shouldMakeHashtagLinksFromText:l,textSize:o,descriptionLinks:c,userMentionTags:y})=>{let{closeupWithinMasonryEnabled:f,peekCloseupEnabled:x}=(0,u.x4)(),v=(0,d.Z)(m,n),{hyperlinkKeywordsEnabled:b}=(0,r.Z)(v),k=y?.length?y.map(e=>({...v?.userMentionTags?.find(t=>t.offset===e.originalOffset),...e})):v?.userMentionTags??[],S=c?.length?c.map(e=>({...v?.descriptionLinks?.find(t=>t.offset===e.originalOffset),...e})):v?.descriptionLinks??[],P=k.length>0,w=b&&S.length>0;if(!P&&!w)return(0,p.jsx)(a.Fragment,{children:e});let C=0,I=[];return[...k.map(t=>({...t,type:"mention",offset:i?((e,t)=>{let n=t.substr(0,e);return(e??0)-(n.length-n.replace(/\s+/g," ").length)})(t.offset??0,e):t.offset??0})),...b?S.map(e=>({...e,type:"link",offset:e.offset??0})):[]].filter(e=>g(e.offset)&&g(e.length)).sort((e,t)=>(e.offset??0)-(t.offset??0)).forEach(n=>{let i=n?.offset??0,a=n?.length??0,l=e.substr(C,i-C),r=e.substr(i,a);I.push(l),n?.type==="mention"?I.push((0,p.jsx)(h,{color:t,mention:r,tagObjectId:n.objectId,tagType:n.tagType,textSize:o})):n?.type==="link"&&n?.link&&I.push((0,p.jsx)(_,{color:t,link:n.link,tagObjectId:n.objectId,tagType:n.tagType,text:r,textSize:o})),C=i+a}),I.push(e.substr(C)),(l?I.flatMap(e=>"string"!=typeof e?e:(0,s.Z)({closeupWithinMasonryEnabled:f,peekCloseupEnabled:x,text:e})):I).reduce((e,t)=>(0,p.jsxs)(a.Fragment,{children:[e,t]}),null)}},184857:function(e,t,n){n.d(t,{Z:()=>i});let i=["aggregatedpindata.aggregated_stats","aggregatedpindata.creator_analytics","aggregatedpindata.id","aggregatedpindata.is_shop_the_look","aggregatedpindata.pin_tags","board.collaborated_by_me","board.followed_by_me","board.id","board.image_thumbnail_url","board.is_collaborative","board.layout","board.name","board.owner()","board.privacy","board.type","board.url","buyableproductmetadata.display_active_max_price","buyableproductmetadata.display_active_min_price","buyableproductmetadata.short_description","buyableproductmetadata.title","comment.commenter()","comment.created_at","comment.deletable_by_me","comment.id","comment.text","comment.type","pin.access","pin.ad_data","pin.ad_destination_url","pin.ad_match_reason","pin.additional_hide_reasons","pin.aggregated_pin_data()","pin.alt_text","pin.attribution","pin.board()","pin.carousel_data()","pin.collection_pin()","pin.comment_count","pin.comments(limit:5,resume:true)","pin.created_at","pin.creator_analytics","pin.debug_info_html","pin.description","pin.description_html","pin.domain","pin.dominant_color","pin.done_by_me","pin.embed","pin.favorited_by_me","pin.grid_description","pin.grid_title","pin.has_required_attribution_provider","pin.id","pin.image_crop","pin.image_signature","pin.images[170x,136x136,236x,474x,736x,orig]","pin.is_downstream_promotion","pin.is_eligible_for_web_closeup","pin.is_go_linkless","pin.is_native","pin.is_playable","pin.is_promoted","pin.is_quick_promotable","pin.is_repin","pin.is_uploaded","pin.is_video","pin.is_whitelisted_for_tried_it","pin.link","pin.manual_interest_tags","pin.method","pin.native_creator()","pin.pinner()","pin.price_currency","pin.price_value","pin.privacy","pin.promoted_is_removable","pin.promoter()","pin.reaction_counts","pin.repin_count","pin.rich_summary()","pin.shopping_flags","pin.product_metadata()","product_metadata.shopping_flags","pin.should_open_in_stream","pin.sponsorship","pin.story_pin_data()","pin.story_pin_data_id","pin.title","pin.tracking_params","pin.type","pin.videos()","pin.view_tags","pincarouselslot.details","pincarouselslot.id","pincarouselslot.images[60x60,136x136,170x,236x,474x,564x,736x,600x315,orig]","pincarouselslot.link","pincarouselslot.title","pincarouselslot.videos()","user.ads_only_profile_site","user.blocked_by_me","user.explicitly_followed_by_me","user.full_name","user.id","user.image_large_url","user.image_small_url","user.is_ads_only_profile","user.type","user.username","video.id","video.video_list[V_HLSV4,V_720P,V_HLSV3_WEB,V_HLSV3_MOBILE,V_EXP3,V_EXP4,V_EXP5,V_EXP6,V_EXP7]"]},723329:function(e,t,n){n.d(t,{Z:()=>R});var i,a,l,r,s,o,d=n(667294);n(244311);var c=n(20256),u=n(471998),p=n(934645),m=n(980787),g=n(415546),h=n(525839),_=n(67831),y=n(956077),f=n(295429),x=n(478086),v=n(57293),b=n(785893);let k=(void 0!==i||(i=n(953095)).hash&&"0115eb52db8bd36a1a82754d3c39b478"!==i.hash&&console.error("The definition of 'StructuredDescription_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),S=(void 0!==a||(a=n(184963)).hash&&"733093776dc8e837966fbdda29e9d4c5"!==a.hash&&console.error("The definition of 'StructuredDescriptionText_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),P=({children:e,dangerouslySetInlineStyle:t,marginTop:n})=>(0,b.jsx)(c.xu,{dangerouslySetInlineStyle:t,"data-test-id":"structured-description",marginTop:n,children:e}),w=({content:e,order:t,type:n,pinKey:i})=>{let a=(0,g.Z)(S,i),{hyperlinkKeywordsEnabled:l}=(0,u.Z)(a);if(!e)return null;let r=n===v.X.HEADER,s=[v.X.HEADER,v.X.BOLD].includes(n),o=t>0&&r?4:2*(0!==t);return a&&l?(0,b.jsx)(P,{marginTop:o,children:(0,b.jsx)(c.xv,{color:"subtle",inline:!0,size:"200",weight:s?"bold":"normal",children:(0,b.jsx)(x.Z,{description:e,mentionLinkColor:"link",pinKey:a,shouldAdjustOffset:!1,textSize:"200"})})}):(0,b.jsx)(P,{marginTop:o,children:(0,b.jsx)(c.xv,{color:"subtle",size:"200",weight:s?"bold":"normal",children:e})})},C=({content:e,order:t})=>e?(0,b.jsx)(P,{marginTop:2*(0!==t),children:e}):null,I=({content:e,order:t,isInBlendedUIExp:n})=>Array.isArray(e)&&0!==e.length?(0,b.jsx)(P,{marginTop:2*(0!==t),children:e.map(e=>(0,b.jsxs)(c.xu,{direction:"row",display:"flex",marginStart:1,marginTop:1,children:[(0,b.jsx)(c.xv,{color:n?"subtle":"default",inline:!0,size:"200",weight:"bold",children:""}),(0,b.jsx)(c.xu,{marginStart:1,children:(0,b.jsx)(c.xv,{color:n?"subtle":"default",size:"200",children:e})})]},e))}):null,T=({accessibilityLabel:e,content:t,order:n})=>t&&"object"==typeof t?(0,b.jsx)(P,{dangerouslySetInlineStyle:{__style:{borderTop:"1px solid #ddd",borderBottom:"1px solid #ddd"}},marginTop:2*(0!==n),children:(0,b.jsx)(c.iA,{accessibilityLabel:e,children:(0,b.jsx)(c.iA.Body,{children:Object.entries(t).map(([e,t],n)=>(0,b.jsxs)(c.iA.Row,{children:[(0,b.jsx)(c.iA.Cell,{children:(0,b.jsx)(c.xv,{size:"100",weight:"bold",children:e})}),(0,b.jsx)(c.iA.Cell,{children:(0,b.jsx)(c.xv,{size:"100",children:String(t)})})]},n))})})}):null,j=({accessibilityLabel:e,content:t,order:n})=>{if(!Array.isArray(t)||t.length<2)return null;let i=t[0],a=t.slice(1);return(0,b.jsx)(P,{dangerouslySetInlineStyle:{__style:{borderTop:"1px solid #ddd",borderBottom:"1px solid #ddd"}},marginTop:2*(0!==n),children:(0,b.jsxs)(c.iA,{accessibilityLabel:e,children:[(0,b.jsx)(c.iA.Header,{children:(0,b.jsx)(c.iA.Row,{children:i.map((e,t)=>(0,b.jsx)(c.iA.HeaderCell,{children:(0,b.jsx)(c.xv,{size:"100",weight:"bold",children:e})},t))})}),(0,b.jsx)(c.iA.Body,{children:a.map((e,t)=>(0,b.jsx)(c.iA.Row,{children:e.map((e,t)=>(0,b.jsx)(c.iA.Cell,{children:(0,b.jsx)(c.xv,{size:"100",children:e})},t))},t))})]})})},A=e=>{let t=(void 0!==l||(l=n(176694)).hash&&"1754355dbabe4462412dea1f15de578a"!==l.hash&&console.error("The definition of 'StructuredDescriptionComponent_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l),i=(0,g.Z)(t,e.pinKey),a=(0,h.ZP)(),r=(0,p.Z)({showProductDetailPage:!0});switch(e.type){case v.X.POINTS:return(0,b.jsx)(I,{...e,isInBlendedUIExp:r});case v.X.SPECS:return(0,b.jsx)(T,{accessibilityLabel:a._('Specification view of description', 'webapp.app.www-unified.components.structuredDescription.StructuredDescription.StructuredSpecs', 'Content represented in specification format'),...e});case v.X.TABLE:return(0,b.jsx)(j,{accessibilityLabel:a._('Table view of description', 'webapp.app.www-unified.components.structuredDescription.StructuredDescription.StructuredTable', 'Content represented in table format'),...e});case v.X.ELEMENT:return(0,b.jsx)(C,{...e});default:return(0,b.jsx)(w,{...e,pinKey:i})}};function F({descriptions:e,onLoad:t,pinKey:n}){let i=(0,g.Z)(k,n);return((0,d.useEffect)(()=>{"function"==typeof t&&t()},[t]),0===e.length)?null:e.map(({content:e,type:t},n)=>(0,b.jsx)(A,{content:e,order:n,pinKey:i,type:t},n))}let E=(void 0!==r||(r=n(736142)).hash&&"9758e05746f41597abb102ff4c921bd8"!==r.hash&&console.error("The definition of 'ProductDescription_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r),L=({structuredDescription:e,type:t,pinKey:i})=>{let a=(void 0!==s||(s=n(324778)).hash&&"0ea92af6ed3e580e484b6776204f5277"!==s.hash&&console.error("The definition of 'ProductDescriptionAccordion_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),s),l=(0,g.Z)(a,i),r=(0,h.ZP)(),o=(0,_.A)(),u=(0,d.useCallback)(()=>{(0,y.Nx)("description"),o&&o.markConstraintComplete("description")},[o]),p="expandable"===t&&e[0].type===v.X.PARAGRAPH,m=r._('Product Details', 'productDetails.accordionHeader.text', 'text in tap area to open product description accordion panel');return(0,b.jsx)(f.Z,{heading:m,children:(0,b.jsx)(c.xu,{paddingY:+!p,children:(0,b.jsx)(F,{descriptions:e,onLoad:u,pinKey:l})})})},D=({isOpen:e,onOpen:t,structuredDescription:i,pinKey:a})=>{let l=(void 0!==o||(o=n(340682)).hash&&"81e3f3067a653af5d6211a19842d2603"!==o.hash&&console.error("The definition of 'ProductDescriptionPreview_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),o),r=(0,g.Z)(l,a),s=(0,p.Z)({showProductDetailPage:!0}),[u,m]=(0,d.useState)(!1),f=(0,h.ZP)(),x=(0,d.useRef)(null),v=(0,_.A)(),k=(0,d.useCallback)(()=>{x.current&&((0,y.Nx)("description"),v&&v.markConstraintComplete("description"))},[v]),S=s?f._('See more', 'productDescription.productDescriptionPreview.cta', 'CTA label for expanding the description'):f._('See details', 'productDescription.productDescriptionPreview.cta', 'CTA label for expanding the description'),P=e?f._('See less', 'productDescription.productDescriptionPreview.cta', 'CTA label for collapsing the description'):S;return(0,d.useLayoutEffect)(()=>{if(!x.current||e)return;let t=setTimeout(()=>{if(x.current){let e=x.current;m(e.scrollHeight>e.clientHeight)}},10);return()=>clearTimeout(t)},[i,e]),(0,b.jsxs)(c.xu,{"data-test-id":"product-description-preview",display:"block",children:[(0,b.jsx)(c.X6,{size:"300",children:f._('Description', 'productDescription.productDescriptionPreview.header', 'header for the product description')}),(0,b.jsx)(c.xu,{marginTop:2,position:"relative",children:(0,b.jsx)(c.xu,{ref:x,dangerouslySetInlineStyle:{__style:{...e?{}:{display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden",lineClamp:3,boxOrient:"vertical"},transition:"height 200ms ease-in-out"}},children:(0,b.jsx)(F,{descriptions:i,onLoad:k,pinKey:r})})}),u&&(0,b.jsx)(c.kC,{justifyContent:"end",children:(0,b.jsx)(c.iP,{display:"inlineBlock",fullWidth:!1,onTap:t,children:(0,b.jsx)(c.xv,{align:"end",size:"200",weight:"bold",children:P})})})]})};function R(e){let{commerceData:t,structuredDescription:n,type:i="accordion",viewParameter:a,pinKey:l}=e,r=(0,g.Z)(E,l),{logContextEvent:s}=(0,m.u)(),[o,c]=(0,d.useState)(!1),p=(0,u.Z)(r);return((0,d.useEffect)(()=>{s({event_type:120,component:13597,view_type:3,view_parameter:a,aux_data:{...t}})},[]),p||0!==n.length)?"preview"===i?(0,b.jsx)(D,{...e,isOpen:o,onOpen:()=>{c(!o),s({event_type:101,component:13597,view_type:3,element:o?13278:13277,view_parameter:a,aux_data:{...t}}),s({event_type:101,component:13597,view_type:3,element:10492,view_parameter:a,aux_data:{...t}})},pinKey:r}):(0,b.jsx)(L,{...e,pinKey:r}):null}},371941:function(e,t,n){n.d(t,{Z:()=>ey});var i,a,l,r=n(667294);n(167912);var s=n(616550),o=n(20256),d=n(295483),c=n(546345),u=n(952018),p=n(439122),m=n(592821),g=n(995415),h=n(139707),_=n(934645),y=n(878709),f=n(890479),x=n(980787),v=n(744862),b=n(415546),k=n(601686),S=n(280670),P=n(785893);let w=(void 0!==i||(i=n(681081)).hash&&"076ac514bfbb048036e79417ec3c0eb5"!==i.hash&&console.error("The definition of 'OfficialUserAttributionText_user' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function C({clickable:e=!0,fontWeight:t="normal",getDisplayName:n,onMouseDown:i,userKey:a}){let l=(0,s.k6)(),{logContextEvent:r}=(0,x.u)(),d=(0,b.Z)(w,a),{peekCloseupEnabled:c}=(0,k.x4)(),{isVerifiedMerchant:u,fullName:p="",verifiedIdentity:m,username:g,isAdsOnlyProfile:h,adsOnlyProfileSite:_,imageMediumUrl:y}=d,f=d.avatarColorIndex,C=u||m?.verified,I=(0,P.jsxs)(o.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{gap:"8px"}},direction:"row",display:"flex",onMouseDown:()=>{i&&i()},children:[c&&(0,P.jsx)(v.qE,{color:f,name:p??"",size:"xs",src:y??""}),(0,P.jsx)(o.xv,{lineClamp:1,size:c?"200":"300",weight:t,children:n?n(p??""):p??""})]});if(!e)return I;let T=h&&!!_;return(0,P.jsxs)(o.kC,{alignItems:"center",direction:"row",justifyContent:"start",children:[(0,P.jsx)(o.xu,{children:T?(0,P.jsx)(o.Tg,{href:_||"",onTap:()=>{r({event_type:9371,element:13382,aux_data:{aop_origin:"OfficialUserAttributionText"}})},rel:"nofollow",target:"blank",children:I}):(0,P.jsx)(o.iP,{onTap:()=>{l.push(`/${g}/`)},children:I})}),C&&(0,P.jsx)(o.xu,{marginStart:2,children:(0,P.jsx)(S.Z,{isVerifiedIdentity:m?.verified||!1,isVerifiedMerchant:u||!1,size:"sm"})})]})}var I=n(723329),T=n(617778),j=n(611282),A=n(453179),F=n(271910),E=n(774429),L=n(620427);let D=(void 0!==a||(a=n(570674)).hash&&"8dced786a95725beb90a797a0e54242b"!==a.hash&&console.error("The definition of 'ProductHeading_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a);function R({clientTrackingParams:e,enableDynamicSizeAdjustment:t,link:n,pinKey:i,text:a,onClickThrough:l}){let s=(0,b.Z)(D,i),d=(0,r.useRef)(null),[c,u]=(0,r.useState)("500"),{closeupWithinMasonryEnabled:p,peekCloseupEnabled:m}=(0,k.x4)(),g=(0,_.Z)({showProductDetailPage:!!s?.isEligibleForPdp}),h=(0,j.Z)({href:n||"",clientTrackingParams:(0,L.Z)(e,s?.trackingParams),externalData:{pin:s&&{attributionSourceId:s.attributionSourceId,board:s.board&&{url:s.board.url},campaignId:s.campaignId,entityId:s.entityId,isDownstreamPromotion:s.isDownstreamPromotion,isPromoted:s.isPromoted,pinner:s.pinner&&{username:s.pinner.username},pinPromotionId:s.pinPromotionId,promoter:s.promoter&&{entityId:s.promoter.entityId},storyPinDataId:s.storyPinDataId,trackingParams:s.trackingParams,advertiserId:s.advertiserId}}}),y=(0,E.Z)({clickthroughType:"middleClick",location:"closeup.shopping.productTitle"}),f=(0,P.jsx)(o.xu,{ref:d,children:(0,P.jsx)(o.X6,{id:"product-heading",lineClamp:m?2:void 0,size:p&&!g?"400":c,children:a})});return(0,r.useEffect)(()=>{if(!d||!d.current||!t)return;let e=d.current.querySelector("#product-heading");if(!e)return;let n=Number(e.offsetHeight)||0;Number.isFinite(n)&&u(2>=Math.floor(n/33)?"500":"400")},[t,d]),(0,P.jsx)(F.q,{children:({hovered:t,onMouseEnter:i,onMouseLeave:a})=>(0,P.jsx)(T.Z,{clientTrackingParams:e,hovered:t,pinKey:s,viewType:3,children:(0,P.jsx)(o.xu,{onMouseEnter:i,onMouseLeave:a,children:n?(0,P.jsx)(o.xu,{"data-test-id":"link-navigation",children:(0,P.jsx)(o.xv,{children:(0,P.jsx)(o.rU,{_onAuxClick:({event:e})=>{(0,A.UE)(e)&&(y(),e.stopPropagation(),h({event:e}),l({componentType:14284}))},href:n,onClick:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),h({event:e}),l({componentType:14284})},underline:"none",children:f})})}):f})})})}var K=n(517724),M=n(686761),Z=n(884620),z=n(18468);let O=()=>(0,P.jsx)(o.xu,{alignSelf:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:z.wZV}},height:44,width:1});function B({icon:e,iconAccessibilityLabel:t,children:n,showSeparator:i=!0}){return(0,P.jsxs)(o.kC,{alignItems:"center",direction:"row",gap:2,children:[i&&(0,P.jsx)(O,{}),(0,P.jsxs)(o.kC,{direction:"column",gap:1,children:[(0,P.jsx)(o.JO,{accessibilityLabel:t,color:"default",icon:e,size:18}),n]})]})}var N=n(698258);function V({count:e,ratingValue:t,shippingInfo:n}){let i=null!=t?parseFloat(t):0,a=null!=t&&!Number.isNaN(i);return(0,P.jsxs)(o.xu,{alignItems:"start",display:"flex",justifyContent:"between",marginTop:3,paddingY:2,width:"100%",children:[a&&(0,P.jsx)(B,{icon:"star-outline",iconAccessibilityLabel:"Star rating",showSeparator:!1,children:(0,P.jsxs)(o.kC,{gap:1,children:[(0,P.jsx)(o.xv,{color:"subtle",size:"200",children:i.toFixed(1)}),null!=e&&e>0&&(0,P.jsxs)(o.xv,{color:"subtle",size:"200",children:["(",e,")"]})]})}),(n?.freeShippingPrice||n?.freeShippingValue)&&(0,P.jsx)(o.kC.Item,{flexBasis:a?"50%":"100%",children:(0,P.jsx)(B,{icon:"box",iconAccessibilityLabel:"Shipping",showSeparator:a,children:(0,P.jsx)(N.Z,{customStyles:{color:"subtle",size:"200"},freeShippingPrice:n?.freeShippingPrice,freeShippingValue:n?.freeShippingValue,showPrevDot:!1})})})]})}var U=n(391501),H=n(355940),W=n(821342),G=n(525839),$=n(369416),X=n(506662),q=n(300540),Y=n(67831),J=n(956077),Q=n(15667),ee=n(821806),et=n(324307),en=n(644493),ei=n(431338),ea=n(448505),el=n(7872),er=n(611499),es=n(302148);function eo({priceHistorySummary:e}){let t,n=(0,G.ZP)(),{durationDays:i,typicalPrice:a,lowestPrice:l}=e||{};return Number.isInteger(i)&&(a||l)?(a?t=(0,es.nk)(n._('{{ typicalPrice }} average price last {{ durationDays }} days', 'PriceHistorySummary.typicalPriceText', 'typicalPrice: typical price (average price), durationDays: duration days'),{typicalPrice:a,durationDays:i}):l&&(t=(0,es.nk)(n._('{{ lowestPrice }} lowest price in {{ durationDays }} days', 'PriceHistorySummary.lowestPriceText', 'lowestPrice: lowest price, durationDays: duration days'),{lowestPrice:l,durationDays:i})),(0,P.jsx)(o.xu,{"data-test-id":"price-history-summary",children:(0,P.jsx)(o.xv,{children:t})})):null}var ed=n(785195),ec=n(906715),eu=n(57293),ep=n(78762);let em=(0,ep.Z)(()=>n.e("96615").then(n.bind(n,174753)),void 0,e=>174753,"CloseupPartnerModule",e=>["96615"]),eg=(0,ep.Z)(()=>Promise.resolve().then(n.bind(n,417827)),void 0,e=>417827,"app-common-react-components-closeup-CloseupCommentModule-UnifiedCommentModule",e=>[]),eh=(void 0!==l||(l=n(676707)).hash&&"8006d27d384526aca111cb980d673707"!==l.hash&&console.error("The definition of 'ProductMetadata_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l),e_=({clientTrackingParams:e,closeupUnifiedTitle:t,durationDays:n,finalLink:i,inBlendedUIExp:a,lowestPrice:l,onClickThrough:s,pin:d,productTitleMarginTop:c,renderDomainOwner:u,renderPriceAndRatings:p,showDomainOwner:m,showDomainOwnerOnTop:g,showPriceHistorySummary:h,showTitle:_,typicalPrice:y})=>(0,P.jsxs)(r.Fragment,{children:[m&&g&&u(),_&&!!t&&(0,P.jsx)(o.xu,{"data-test-id":"product-title",marginTop:c,children:(0,P.jsx)(R,{clientTrackingParams:e,enableDynamicSizeAdjustment:a,link:i,onClickThrough:s,pinKey:d,text:t})},"product-title"),p(),h&&(0,P.jsx)(o.xu,{"data-test-id":"product-price-history-summary",marginTop:2,children:(0,P.jsx)(eo,{priceHistorySummary:{durationDays:n,lowestPrice:l,typicalPrice:y}})},"product-price-history-summary"),m&&!g&&u()]});function ey({clientTrackingParams:e,detailsScrollContainerRef:t,hideShopButton:n,inCommentsImprovedDropdownExp:i,inCommentsPopoverExp:a,isBoardOwnerOrCollaborator:l,isLoadingNewlyCreatedComment:v,onClickThrough:S,outerPaddingSize:w,pinKey:T,showPartnerModule:j,showPDPComments:F,showPinStats:E,showTrendsOnPinCloseup:L,trendsData:D,viewParameter:R,blendedUIScrollContainerRef:z}){let O=(0,G.ZP)(),{logContextEvent:B}=(0,x.u)(),N=(0,W.Z)(),{closeupWithinMasonryEnabled:es,peekCloseupEnabled:eo,viewportSize:ep}=(0,k.x4)(),ey=(0,_.Z)({showProductDetailPage:!0}),{sideBySideFullWidthCTAEnabled:ef}=(0,h.Z)(),ex=(0,b.Z)(eh,T),ev=(0,r.useRef)(null),eb=z||ev,{affiliateLink:ek,carouselData:eS,closeupAttribution:eP,closeupUnifiedDescription:ew,closeupUnifiedTitle:eC,commentsDisabled:eI,favoritedByMe:eT,isDownstreamPromotion:ej,isGoLinkless:eA,isOosProduct:eF,isStaleProduct:eE,linkUserWebsite:eL,linkDomain:eD,promoter:eR,richMetadata:eK,sponsorship:eM,storyPinData:eZ,nativeCreator:ez}=ex,eO=(0,Y.A)(),eB=(0,r.useCallback)(()=>{(0,J.Nx)("shopButton"),eO&&eO.markConstraintComplete("shopButton")},[eO]),eN=(0,ei.Z)(ex)(),{isAuthenticated:eV}=(0,Q.B)(),{carouselInfo:eU}=(0,y.G)(),eH=(0,ea.Z)(),eW=(0,el.lJ)(N,eH),eG=(0,el.q6)(N,ex?.pinner?.entityId,eH),e$=eK?.products?.[0],{inStock:eX,maxPrice:eq,minPrice:eY,price:eJ,standardPrice:eQ}=e$?.offerSummary||{},{durationDays:e0,lowestPrice:e1,typicalPrice:e2}=e$?.priceHistorySummary||{},e3=Number.isInteger(e0)&&(!!e1||!!e2),e6=eF||!1===eX,{ratingValue:e4,reviewCount:e7,ratingCount:e5}=eK?.aggregateRating||{},e8=!!e4&&(e7||e5),{brand:e9,shippingInfo:te}=e$||{},tt=eL?.officialUser?.firstName,{officialUser:tn}=eD||{},ti=eP||tn,{firstName:ta}=ti||{},tl=(0,et.ZP)(tt||ta||"",20),{name:tr}=e9||{},ts=!!tr,to=(0,s.TH)(),td=!eV&&(0,X.am)(to),tc=!!(eR&&!ej)&&eR?.entityId===ez?.entityId,tu=!!ek,tp=!!eZ?.hasAffiliateProducts,tm=(!!eM||tp||tu)&&!tc&&!td,tg=(0,r.useCallback)(e=>{if(e&&ts){let t=eo?"200":void 0;return(0,P.jsx)(o.xv,{align:"center",size:t,weight:"normal",children:e})}return e},[ts,eo]),th=(ew||"").trim(),t_=(0,ec.Z)(ex),ty=(0,eu.j)({components:t_,pinDescription:th}),tf=(eU?.carouselData?.carousel_slots?.length??0)>0,{link:tx,trackedLink:tv,utmLink:tb}=ex||{},tk=(0,A.Zt)({utmLink:tb,trackedLink:tv,link:tx})||"",tS=(0,en.Z)(tk)??tk,{currentDomain:tP}=(0,g.Z)({carouselData:eS&&{carouselSlots:eS.carouselSlots&&eS.carouselSlots.map(e=>({domain:e.domain,link:e.link})),index:eS?.index},domain:ex.domain}),tw=tP.split(".")[0],{freeShippingPrice:tC,freeShippingValue:tI}=te||{},tT=!!tC&&!!tI,tj=!!(e8||tT),tA=!n&&(tl||tw)&&tS&&!eA,tF=w??er.ER,tE=6*!es,tL=eT?O._('Remove from favorites', 'closeup.productMetadata.removeFromFavorites', 'Text for button allowing users to unfavorite a saved Product Pin'):O._('Add to favorites', 'closeup.productMetadata.addToFavorites', 'Text for button allowing users to favorite a saved Product Pin'),tD=(ex.aggregatedPinData?.commentCount??0)+(ex.aggregatedPinData?.didItData?.imagesCount??0),tR=!!ex.isEligibleForAggregatedComments&&(i?!ex.commentsDisabled:!a)&&(!ey||tD>0),tK=i?!!tD:!(eo&&ex.aggregatedPinData?.commentCount===0),tM=a&&!eI,tZ=[...ty.length>0&&th?[(0,P.jsx)(u.Z,{paddingLeft:es?tF/2:0,paddingRight:es?tF/2:0,children:(0,P.jsx)(o.xu,{"data-test-id":"product-description",children:(0,P.jsx)(I.Z,{commerceData:eN,pinKey:ex,structuredDescription:ty,type:"expandable",viewParameter:R})})},"closeupProductDescription")]:[],...l?[(0,P.jsx)(u.Z,{paddingLeft:es?tF/2:0,paddingRight:es?tF/2:0,children:(0,P.jsxs)(o.xu,{alignItems:"center",display:"flex",justifyContent:"between",marginBottom:2*!es,marginTop:2,children:[es?(0,P.jsx)(o.X6,{size:"400",children:tL}):(0,P.jsx)(o.xv,{weight:"bold",children:tL}),(0,P.jsx)(c.Z,{pinKey:ex})]})},"closeupProductMetadataFavoriteBarMetadataPadding")]:[]],tz=()=>(0,P.jsxs)(o.xu,{alignItems:ey?"start":"center",dangerouslySetInlineStyle:{__style:{columnGap:es?4:8,flexWrap:es?"wrap":void 0}},direction:ey?"column":"row",display:"flex",marginTop:ey?1:2,children:[(0,P.jsx)(o.xu,{"data-test-id":"product-price",children:(0,P.jsx)(f.Z,{id:"ProductPrice",children:(0,P.jsx)(K.Z,{colorOverride:"default",isSoldOut:e6,isStale:eE,productDetails:{maxPrice:eq,minPrice:eY,price:eJ,standardPrice:eQ},type:es?"mobileHeading":"heading"})})},"product-price"),tj&&(ey?(0,P.jsx)(f.Z,{id:"VerticalProductRatingsAndShipping",children:(0,P.jsx)(V,{bracket:!0,count:e5||e7,countFormat:"number",countType:e5?"rating":"review",hideSeparationDot:!0,ratingValue:e4,shippingInfo:{freeShippingPrice:tC,freeShippingValue:tI}})}):(0,P.jsx)(f.Z,{id:"ProductRatingsAndShipping",children:(0,P.jsx)(M.Z,{bracket:!0,count:e5||e7,countFormat:"number",countType:e5?"rating":"review",hideSeparationDot:!0,ratingValue:e4,shippingInfo:{freeShippingPrice:tC,freeShippingValue:tI}})}))]}),tO=()=>ti?(0,P.jsx)(o.xu,{"data-test-id":"pdp-product-metadata-domain-owner",marginBottom:ey?1:2,marginTop:2*!ey,children:(0,P.jsx)(f.Z,{id:"OfficialUserAttributionText",children:(0,P.jsx)(C,{fontWeight:"bold",getDisplayName:tg,onMouseDown:ts?()=>{B({event_type:102,object_id_str:ex.entityId,view_type:3,view_parameter:144,element:13592,aux_data:eN})}:void 0,userKey:ti})})}):null,tB=()=>(0,P.jsx)(u.Z,{paddingBottom:eo?tF/2:void 0,paddingRight:0,children:(0,P.jsx)(o.xu,{"data-test-id":"product-shop-button",marginTop:es||ey?0:3,children:(0,P.jsx)(U.Z,{clientTrackingParams:e,color:"gray",fullWidth:ef,link:tS,onClickThrough:S,onLoad:eB,pinKey:ex,text:O._('Visit site', 'closeup.shop.button', 'shop button')})})}),tN=4;es?tN=0:eo&&ti&&(tN=2);let tV=`
    [data-testid="product-metadata-details-flex"] > div:last-of-type {
      margin-top: auto;
    }
  `;return(0,P.jsxs)(o.xu,{dangerouslySetInlineStyle:{__style:{flexDirection:ey?"column":void 0}},display:ey?"flex":"block",height:ey?"100%":void 0,marginTop:es&&!ey?2:0,children:[ey&&(0,P.jsx)(r.Fragment,{children:(0,P.jsxs)(o.xu,{color:"default",marginBottom:4,children:[(0,P.jsx)(o.xu,{marginBottom:3,children:(0,P.jsx)(f.Z,{id:"ProductMetadataHeader",children:(0,P.jsx)(e_,{clientTrackingParams:e,closeupUnifiedTitle:eC??void 0,durationDays:e0??void 0,finalLink:tS,inBlendedUIExp:ey,lowestPrice:e1??void 0,onClickThrough:S,pin:ex,productTitleMarginTop:tN,renderDomainOwner:tO,renderPriceAndRatings:tz,showDomainOwner:!!ti,showDomainOwnerOnTop:!0,showPriceHistorySummary:e3,showTitle:!!eC,typicalPrice:e2??void 0})})}),tf&&(0,P.jsx)(o.xu,{marginBottom:3,children:(0,P.jsx)(q.Z,{containerId:"InnerScrollContainer",children:(0,P.jsx)(Z.Z,{commerceData:eN,inBlendedUIExp:ey,layout:ey?"row":"column",pinId:ex.entityId,size:"lg",surfaceType:"closeup",viewParameter:156})})}),tA&&(!es||ey)&&tB()]})}),es&&j&&(0,P.jsx)(u.Z,{paddingRight:w,children:(0,P.jsx)(o.xu,{"data-test-id":"PartnerModule",width:"100%",children:(0,P.jsx)(H.Z,{name:"SafeSuspense_Closeup_PartnerModule",children:(0,P.jsx)(ee.Z,{children:(0,P.jsx)(em,{borderStyle:m.te,isStoryPin:!1,pinKey:ex,showPinStats:E,trendsData:L?D?.data?.results:null,viewportSize:ep})})})})}),eo&&(0,P.jsx)(u.Z,{paddingRight:0,children:tO()}),(0,P.jsxs)(o.xu,{ref:eb,dangerouslySetInlineStyle:{__style:{overflowY:eo||ey?"auto":void 0,paddingRight:eo?`${m.Gd}px`:void 0}},height:eo?"100%":void 0,marginBottom:l||F?0:5,marginEnd:eo?void 0:tE,marginTop:es&&!ey?2:0,children:[eo&&(0,P.jsx)($.Z,{unsafeCSS:tV}),(0,P.jsxs)(o.kC,{"data-testid":"product-metadata-details-flex",direction:"column",height:eo?"100%":void 0,children:[(0,P.jsxs)(u.Z,{paddingLeft:es&&!ey?tF/2:0,paddingRight:es&&!ey?tF/2:0,children:[(0,P.jsxs)(o.xu,{alignItems:es?"start":void 0,display:es?"flex":void 0,justifyContent:es?"between":void 0,children:[(0,P.jsxs)(o.kC.Item,{flexBasis:!es||ey?"100%":"77%",children:[!ey&&(0,P.jsx)(e_,{clientTrackingParams:e,closeupUnifiedTitle:eC??void 0,durationDays:e0??void 0,finalLink:tS,inBlendedUIExp:!1,lowestPrice:e1??void 0,onClickThrough:S,pin:ex,productTitleMarginTop:tN,renderDomainOwner:tO,renderPriceAndRatings:tz,showDomainOwner:!eo&&!ey&&!!ti,showDomainOwnerOnTop:!1,showPriceHistorySummary:e3,showTitle:!!eC,typicalPrice:e2??void 0}),tm&&!eo&&(0,P.jsx)(f.Z,{id:"SponsorshipText",children:(0,P.jsx)(ed.Z,{hasAffiliateLink:tu,hasAffiliateProducts:tp})}),tM&&(0,P.jsx)(f.Z,{id:"UnifiedCommentModule",children:(0,P.jsx)(eg,{inCommentsPopoverExp:a,pinKey:ex,viewParameter:R})})]}),tA&&es&&!ey&&(0,P.jsx)(o.xu,{alignItems:"stretch",display:ef?"block":"flex",flex:"grow",justifyContent:"end",children:tB()})]}),ey&&ty.length>0&&th&&(0,P.jsx)(o.xu,{"data-test-id":"product-description",children:(0,P.jsx)(I.Z,{commerceData:eN,pinKey:ex,structuredDescription:ty,type:"preview",viewParameter:R})})]}),(0,P.jsxs)(o.kC,{alignItems:"stretch",direction:"column",flex:"grow",justifyContent:"start",children:[(0,P.jsx)(r.Fragment,{children:!ey&&tZ.map((e,t)=>(0,P.jsxs)(r.Fragment,{children:[e,(0,P.jsx)(u.Z,{paddingLeft:tF/2,paddingRight:tF/2,children:(0,P.jsx)(o.xu,{marginBottom:2,marginTop:2,width:"100%",children:(0,P.jsx)(p.Z,{show:!!(tR&&tK||t<tZ.length-1),surface:"product-metadata-details"})})})]},`detailFragment-${e.key}`))}),(!tZ.length||ey)&&(0,P.jsx)(o.xu,{marginBottom:3,marginTop:tR&&tK?3:0,width:"100%",children:(0,P.jsx)(p.Z,{show:(es||ey)&&tR&&tK&&tD>0,surface:"product-metadata-details"})}),F&&!a&&(0,P.jsx)(u.Z,{paddingBottom:es&&!(i&&tR)?tF/2:void 0,paddingLeft:es&&!ey?tF/2:0,paddingRight:es&&!ey?er.ER/2:0,children:tR&&(0,P.jsx)(H.Z,{name:"ProductPinCanonicalCard",children:(0,P.jsx)(f.Z,{id:"CanonicalCard",children:(0,P.jsx)(d.Z,{aggregatedPinId:ex.aggregatedPinData?.entityId,closeupAttributionId:ex.closeupAttribution?.entityId,closeupAttributionUsername:ex.closeupAttribution?.username,commentCount:ex.aggregatedPinData?.commentCount??0,commentsDisabled:ex.commentsDisabled,inCommentsImprovedDropdownExp:i,isLoadingNewCreatedComment:v,isORBACProfileManager:eG,isShopTheLook:ex.aggregatedPinData?.isShopTheLook,isVideo:!!ex.videos?.videoList,orbacSubjectId:eW,photoCount:ex.aggregatedPinData?.didItData?.imagesCount??0,pinId:ex.entityId,pinKey:ex,pinnerId:ex.pinner?.entityId,scrollContainerRef:ey?eb.current:t,shouldShowHeading:tK,storyPinDataId:ex.storyPinData?.entityId,viewParameter:R})})})},"closeupProductMetadataComments")]})]})]})]})}},517724:function(e,t,n){n.d(t,{Z:()=>d});var i=n(20256),a=n(934645),l=n(724810),r=n(525839),s=n(601686),o=n(785893);function d({colorOverride:e,inlineComponent:t,isSoldOut:n,isStale:d,productDetails:c,showSalesPrice:u,textSize:p,type:m}){let{peekCloseupEnabled:g}=(0,s.x4)(),h=(0,a.Z)({showProductDetailPage:!0}),{maxPrice:_,minPrice:y,price:f,standardPrice:x}=c,v=!!f&&!!x&&f!==x,b="100";"heading"!==m||g?"mobileHeading"===m?b="300":("cutout"===m||g)&&(b="200"):b="400",b=p||b;let k=(0,r.ZP)(),S=k._('See price on site', 'product.price.stale', 'Product is stale'),P=k._('Sold out', 'product.price.soldOut', 'Product is sold out');return d?(0,o.jsx)(i.xv,{color:"subtle",size:b,weight:"normal",children:S}):(0,o.jsxs)(i.kC,{alignItems:"stretch",dataTestId:"product-price",direction:"row",justifyContent:"start",children:[n&&(0,o.jsx)(i.xu,{"data-test-id":"product-sold-out-text",marginEnd:2,children:(0,o.jsx)(i.xv,{color:"subtle",size:b,weight:"normal",children:P})}),(!!f||!!y||!!_)&&(0,o.jsx)(i.xv,{color:e||(v?"shopping":"default"),dataTestId:"product-price",size:b,weight:h?"bold":"normal",children:(0,o.jsx)("span",{children:(0,l.Z)({maxPrice:_,minPrice:y,price:f})})}),v&&!u&&(0,o.jsx)(i.xu,{marginStart:1,children:(0,o.jsx)(i.xv,{color:"cutout"===m?"dark":"subtle",size:b,weight:["heading","mobileHeading"].includes(m)?"normal":"bold",children:(0,o.jsx)("span",{style:{textDecoration:"line-through"},children:x})})}),t||null]})}},686761:function(e,t,n){n.d(t,{Z:()=>c});var i=n(20256),a=n(937805),l=n(698258),r=n(601686),s=n(848494),o=n(890788),d=n(785893);function c({count:e,countType:t,countFormat:n,hideSeparationDot:c,bracket:u,ratingValue:p,unauthPdp:m,shippingInfo:g}){let{closeupWithinMasonryEnabled:h,peekCloseupEnabled:_}=(0,r.x4)(),{mWebCloseupRedesignEnabled:y}=(0,a.Z)();return(0,d.jsxs)(i.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{columnGap:h?4:void 0,rowGap:8}},display:"flex",wrap:!0,children:[(0,d.jsx)(s.Z,{bracket:u,count:e,countFormat:n,countType:t,rating:p,textSize:_||y?"200":"300",unauthPdp:m}),(0,d.jsx)(i.xu,{marginStart:!h&&(0,o.Z)({count:e,rating:p})&&c?2:0,children:(0,d.jsx)(l.Z,{customStyles:{color:"default",size:_||y?"200":"300"},freeShippingPrice:g?.freeShippingPrice,freeShippingValue:g?.freeShippingValue,showPrevDot:(0,o.Z)({count:e,rating:p})&&!c})})]})}},884620:function(e,t,n){n.d(t,{g:()=>j,Z:()=>E});var i=n(667294),a=n(20256),l=n(501392),r=n(629178),s=n(878709),o=n(581722),d=n(980787),c=n(525839),u=n(331854),p=n(391178),m=n(206459),g=n(785893);function h({accessibilityLabel:e,currentlySelectedIndex:t,index:n,onSelect:l,pinId:s,isDarkMode:h=!1,isSelectOnHover:_,size:y,thumbnail:f,mediaType:x="image",viewParameter:v,inBlendedUIExp:b}){let{logContextEvent:k}=(0,d.u)(),S=(0,o.I0)(),P=(0,c.ZP)(),[w,C]=(0,i.useState)(!1),{isCloseupMediaViewerEnabled:I}=(0,r.Z)({isShufflePin:!1}),T=(0,i.useCallback)(e=>{"video"===x&&e&&!w&&(C(!0),k({event_type:13,component:13596,element:12831,view_type:3,view_parameter:v}))},[k,x,v,w]),j=(0,u.Z)({onVisibilityChanged:T}),A=()=>{S((0,m.yR)(s,n)),l(n)},F=t===n||!t&&0===n;return(0,g.jsx)(a.xu,{ref:j,children:(0,g.jsx)(a.iP,{accessibilityLabel:e,onMouseEnter:({event:e})=>{e.preventDefault(),e.stopPropagation(),_&&A()},onTap:({event:e})=>{e.preventDefault(),e.stopPropagation(),_||A()},rounding:I?4:void 0,children:(0,g.jsx)(p.Z,{isDarkMode:h,outlined:F,rounding:I?4:void 0,type:b?"border":void 0,children:(0,g.jsxs)(a.xu,{position:"relative",children:[(0,g.jsx)(a.zd,{height:y,wash:!0,width:y,children:(0,g.jsx)(a.Ee,{alt:"",color:"#efefef",fit:"cover",naturalHeight:1,naturalWidth:1,src:f})}),"video"===x&&(0,g.jsx)(a.xu,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",left:!0,position:"absolute",top:!0,width:"100%",children:(0,g.jsx)(a.JO,{accessibilityLabel:P._('Secondary Carousel Video Icon', 'secondaryCarousel.carouselItem.videoIndicatorIcon', 'accessibility label on secondary carousel item'),color:"light",icon:"play",size:20})})]})})})})}var _=n(15667);let y=()=>{};function f({direction:e,handleNavHoverToggle:t,leftHover:n,isDarkMode:i=!1,hasBlurredBackground:l=!1,onScroll:r,rightHover:s,shouldPadArrows:o,size:d="md"}){let u=(0,c.ZP)(),{isRTL:p}=(0,_.B)(),m=function({direction:e,isDarkMode:t,isRTL:n,leftHover:i,rightHover:a,shouldPadArrows:l,verticalSize:r,hasBlurredBackground:s=!1},o){let d={backgroundImage:`linear-gradient(to ${e}, rgba(255, 255, 255, 0) 0%, #fff 90%)`,height:"100%",top:"0px",bottom:void 0},c={color:t?"inverse":"default",height:"40px",justifyContent:"center",left:void 0,right:void 0},u={sm:"54px",md:"124px",lg:"28px"};return{up:{...c,backgroundImage:s?"":`linear-gradient(${t?"#000 0%, rgba(0, 0, 0, 0) 90%":"#fff 0%, rgba(255, 255, 255, 0) 90%"})`,bottom:"",icon:"arrow-up",label:o._('Up arrow', 'product.carousel.arrowUp', 'Label for up arrow button in closeup image carousel'),top:"0px",width:u[r]},down:{...c,backgroundImage:s?void 0:`linear-gradient(${t?"rgba(0, 0, 0, 0) 0%, #000 90%":"rgba(255, 255, 255, 0) 0%, #fff 90%"})`,bottom:"0px",icon:"arrow-down",label:o._('Down arrow', 'product.carousel.arrowDown', 'Label for down arrow button in closeup image carousel'),top:void 0,width:u[r]},left:{...d,color:l||i?"default":"subtle",icon:n?"arrow-forward":"arrow-back",justifyContent:"start",label:o._('Left arrow', 'Label for left arrow button in search guides', 'Label for left arrow button in search guides'),left:"0px",right:void 0,width:n?"22px":"210px"},right:{...d,color:l||a?"default":"subtle",icon:n?"arrow-back":"arrow-forward",justifyContent:"end",label:o._('Right arrow', 'Label for right arrow button in search guides', 'Label for right arrow button in search guides'),left:void 0,right:"0px",width:n?"22px":"210px"}}}({direction:e,isDarkMode:i,isRTL:p,leftHover:n,rightHover:s,shouldPadArrows:o,verticalSize:d,hasBlurredBackground:l},u);return(0,g.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{willChange:"transform",pointerEvents:"none",top:m[e].top,bottom:m[e].bottom,left:m[e].left,right:m[e].right}},height:m[e].height,position:"absolute",children:(0,g.jsx)(a.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundImage:m[e].backgroundImage,marginTop:o?"25px":void 0}},display:"flex",height:"100%",justifyContent:m[e].justifyContent,width:m[e].width,children:(0,g.jsx)("button",{onClick:r,onMouseEnter:t?()=>t(e,!0):y,onMouseLeave:t?()=>t(e,!1):y,style:{backgroundColor:"transparent",border:0,height:"100%",outline:"none",padding:0,pointerEvents:"all"},children:(0,g.jsx)(a.kC,{alignItems:"center",height:"100%",justifyContent:m[e].justifyContent,width:"50px",children:(0,g.jsx)(a.JO,{accessibilityLabel:m[e].label,color:m[e].color,icon:m[e].icon})})})})})}var x=n(899678);function v({direction:e,isDarkMode:t=!1,onScroll:n}){return(0,g.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{top:"50%",transform:"translateY(-50%)",..."left"===e?{left:"8px"}:{right:"8px"}}},position:"absolute",zIndex:new a.Ry(10),children:(0,g.jsx)(x.Z,{children:(0,g.jsx)(a.hU,{accessibilityLabel:`${e} arrow`,bgColor:"white",icon:"left"===e?"arrow-back":"arrow-forward",iconColor:t?"light":"dark",onClick:({event:e})=>n(e),size:"sm"})})})}var b=n(369416),k=n(302148),S=n(680825),P=n(166282),w=n(159527),C=n(601686),I=n(230543),T=n(603316);let j=52,A={lg:60,md:120,sm:52},F=`
  .ProductCarousel-InnerScrollContainer {
    -ms-overflow-style: none;
    overflow-x: hidden;
    overflow-y: auto;
  }
  .ProductCarousel-InnerScrollContainer::-webkit-scrollbar {
    display: none;
  }
  .ProductCarousel-InnerScrollContainer--row {
    -ms-overflow-style: none;
    overflow-x: auto;
    overflow-y: hidden;
  }
  .ProductCarousel-InnerScrollContainer--row::-webkit-scrollbar {
    display: none;
  }
`;function E({commerceData:e={},isSelectOnHover:t,layout:n="column",onImageSelect:o,pinId:u,size:p,surfaceType:m,viewParameter:_,inBlendedUIExp:y}){let x,{logContextEvent:j}=(0,d.u)(),E=(0,c.ZP)(),{isCloseupMediaViewerEnabled:L}=(0,r.Z)({isShufflePin:!1}),{isEnabled:D}=(0,l.Z)({dangerouslySkipActivation:!0}),{carouselInfo:R}=(0,s.G)(),K=R?.handleCarouselSwipe,M=R?.carouselData?.carousel_slots??[],Z=R?.carouselData?.index??0,[z,O]=(0,i.useState)(),[B,N]=(0,i.useState)(0),[V,U]=(0,i.useState)(),[H,W]=(0,i.useState)(),[G,$]=(0,i.useState)(),[X,q]=(0,i.useState)(!1),[Y,J]=(0,i.useState)(!1),[Q,ee]=(0,i.useState)(!1),[et,en]=(0,i.useState)(!1),[ei,ea]=(0,i.useState)(!1),el=(0,I.t)(),{closeupWithinMasonryEnabled:er}=(0,C.x4)(),es=(0,i.useRef)(null),eo=(0,i.useRef)(null),ed=A[p],ec=L&&"media-viewer"===m,eu=L&&"media-viewer"===m;(0,i.useEffect)(()=>{j({event_type:120,component:13596,view_type:3,view_parameter:_,aux_data:{pin_id:u,...e}})},[]),(0,i.useEffect)(()=>{if(!z||!es.current)return;let e=es.current.getBoundingClientRect();N(Math.floor(e.top)),U(Math.floor(e.bottom)),$(Math.floor(e.top)),W(Math.floor(e.bottom))},[es.current,z]),(0,i.useEffect)(()=>{if(es.current){let{height:e,top:t,bottom:n}=es.current.getBoundingClientRect();N(Math.floor(t)),U(Math.floor(n)),O(Math.floor(e))}},[M.length]),(0,i.useEffect)(()=>{!z&&es.current&&O(Math.floor(es.current.getBoundingClientRect().height))},[es.current]);let ep=8/(er?2:1);(0,i.useEffect)(()=>{B&&G&&H&&V&&M.length>=4&&(B<G?q(!0):q(!1),V>=490+el+ep?J(!0):J(!1))},[B,V,G,H]);let em=()=>{if(!eo.current)return;let{scrollTop:t,scrollHeight:i,clientHeight:a,scrollLeft:l,scrollWidth:r,clientWidth:s}=eo.current;if("column"===n)q(t>0),J(t+a<i-5);else{let e=r>s,t=e&&l>0,n=e&&l+s<r-5;ee(t),en(n)}("column"===n?t>0:l>0)&&!ei&&(ea(!0),(0,T.nP)(`closeup.dweb.css_carousel.${D?"enabled":"control"}.scroll_thumbnails`,{sampleRate:1}),j({event_type:110,component:13596,view_type:3,view_parameter:_,aux_data:{pin_id:u,...e}}))},eg=(0,i.useRef)(em);(0,i.useEffect)(()=>{eg.current=em}),(0,i.useEffect)(()=>{eg.current()},[n,M.length,z]);let eh=eo.current;(0,i.useEffect)(()=>{let e=(0,w.Z)(()=>{if(es.current){let e=es.current.getBoundingClientRect();N(Math.floor(e.top)),U(Math.floor(e.bottom)),eg.current()}},16);return eh?.addEventListener("scroll",e),()=>{eh?.removeEventListener("scroll",e)}},[eh]);let e_=(e,t=!1)=>{0!==e&&(x&&x.cancel(),es.current&&eo.current&&(t?eo.current.scrollBy({left:e,behavior:"smooth"}):(x=(0,P.Z)(eo.current,0,e,{easingFunction:"ease-in-out",scrollSpeedPxPerMs:.8,onAnimationComplete:()=>{x=null},extendToEdgeDistanceY:50})).start(),em()))};return(0,g.jsxs)(a.xu,{dangerouslySetInlineStyle:{__style:{marginTop:`${ep}px`}},overflow:"hidden",position:"relative",children:[(0,g.jsx)(b.Z,{unsafeCSS:F}),(0,g.jsx)("div",{ref:eo,className:`ProductCarousel-InnerScrollContainer${"row"===n?"--row":""}`,id:"InnerScrollContainer",style:{maxHeight:"column"===n?490:void 0,maxWidth:"row"===n?"100%":void 0,cursor:"default"},children:(0,g.jsx)("div",{"aria-hidden":"true",onClick:e=>{e.preventDefault(),e.stopPropagation()},style:{cursor:"default"},children:(0,g.jsx)(a.xu,{ref:es,alignItems:"center",dangerouslySetInlineStyle:{__style:{columnGap:"8px",rowGap:"16px"}},direction:"row"===n?"row":"column",display:"flex",justifyContent:"row"===n?"start":"center",marginEnd:"row"===n?4:6*!er,position:"relative",width:"row"===n?"100%":ed+4,children:M.map((n,i)=>{let{images:a,videos:l}=n,{thumbnail:r,mediaType:s}=l?{thumbnail:l.cover_image_url,mediaType:"video"}:{thumbnail:(0,S.Z)({images:a,resolutionPreferences:["564x","736x","236x"]})?.url,mediaType:"image"};return(0,g.jsx)(h,{accessibilityLabel:(0,k.Wc)(E._('image {{ index }} of {{ total }}', 'secondaryCarousel.carouselItem.accessibilityLabel', 'Accessibility label for carousel item. index: the current image index. total: the total number of images'),{index:(i+1).toString(),total:M.length.toString()}),currentlySelectedIndex:Z,inBlendedUIExp:y,index:i,isDarkMode:ec,isSelectOnHover:t,mediaType:s,onSelect:()=>{(o||K)&&((0,T.nP)(`closeup.dweb.css_carousel.${D?"enabled":"control"}.select_thumbnail`,{sampleRate:1}),j({event_type:101,component:13596,element:"image"===s?11922:12831,view_type:3,view_parameter:_,aux_data:{...e}}),o?.(i),K?.(i))},pinId:u,size:ed,thumbnail:r||"",viewParameter:_},`carousel-item-${n.image_signature||""}-${i}`)})})})}),!!z&&M.length>3&&(0,g.jsxs)(a.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},height:z>490?494:z+4,overflow:"hidden",position:"absolute",top:!0,width:"100%",children:["column"===n&&X&&(0,g.jsx)(f,{direction:"up",hasBlurredBackground:eu,isDarkMode:ec,onScroll:e=>{e.preventDefault(),e.stopPropagation(),e_(-100)},size:p}),"column"===n&&Y&&(0,g.jsx)(f,{direction:"down",hasBlurredBackground:eu,isDarkMode:ec,onScroll:e=>{e.preventDefault(),e.stopPropagation(),e_(100)},size:p}),"row"===n&&Q&&(0,g.jsx)(v,{direction:"left",isDarkMode:ec,onScroll:e=>{e.preventDefault(),e.stopPropagation(),e_(-(eo.current?Math.floor(.85*eo.current.clientWidth):100),!0)},size:p}),"row"===n&&et&&(0,g.jsx)(v,{direction:"right",isDarkMode:ec,onScroll:e=>{e.preventDefault(),e.stopPropagation(),e_(eo.current?Math.floor(.85*eo.current.clientWidth):100,!0)},size:p})]})]})}},391501:function(e,t,n){n.d(t,{Z:()=>x});var i,a=n(667294);n(167912);var l=n(20256),r=n(249013),s=n(617778),o=n(415546),d=n(369416),c=n(611282),u=n(453179),p=n(274320),m=n(271910),g=n(774429),h=n(601686),_=n(785893);let y=(void 0!==i||(i=n(561330)).hash&&"e327c6c7127550a2f17b174cd4dcfa73"!==i.hash&&console.error("The definition of 'VisitButton_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),f=`
  .visit-button-animate {
    position: relative;
    overflow: hidden;
    transform-origin: center;
  }

  .visit-button-animate.pulse-glow {
    animation: pulseGlow 1000ms ease-in-out 0ms 1;
  }
  @keyframes pulseGlow {
    0%, 100% {
      transform: scale(1);
      box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.4);
    }
    50% {
      transform: scale(1.03);
      box-shadow: 0 0 20px 5px rgba(255, 255, 255, 0.2);
    }
  }

  .visit-button-animate::before {
    content: '';
    position: absolute;
    top: 0;
    left: -120%;
    width: 120%;
    height: 100%;
    background: linear-gradient(90deg,
      transparent 0%,
      rgba(255,255,255,0.2) 30%,
      rgba(255,255,255,0.7) 50%,
      rgba(255,255,255,0.2) 70%,
      transparent 100%);
    animation: visitBtnShimmer 1000ms ease-out 0ms 1;
  }
  @keyframes visitBtnShimmer {
    0% { left: -120%; }
    100% { left: 100%; }
  }
`;function x({clientTrackingParams:e,color:t,link:n,onClickThrough:i,onLoad:x,pinKey:v,text:b,fullWidth:k=!1}){let S=(0,o.Z)(y,v),{peekCloseupEnabled:P}=(0,h.x4)(),{animateVisitSite:w}=(0,r.g)(),{anyEnabled:C}=(0,p.r)().checkExperiment("closeup_dweb_visit_site_animation"),I=(0,g.Z)({clickthroughType:"middleClick",location:"closeup.visitButton"}),T=(0,c.Z)({href:{pathname:n,state:{trackingParams:e}},clientTrackingParams:e,externalData:{pin:S&&{attributionSourceId:S.attributionSourceId,board:S.board&&{url:S.board.url},campaignId:S.campaignId,entityId:S.entityId,isDownstreamPromotion:S.isDownstreamPromotion,isPromoted:S.isPromoted,pinner:S.pinner&&{username:S.pinner.username},pinPromotionId:S.pinPromotionId,promoter:S.promoter&&{entityId:S.promoter.entityId},storyPinDataId:S.storyPinDataId,trackingParams:S.trackingParams,advertiserId:S.advertiserId}}});return(0,a.useEffect)(()=>{"function"==typeof x&&x()},[x]),(0,_.jsx)(m.q,{children:({hovered:a,onMouseEnter:r,onMouseLeave:o})=>(0,_.jsx)(s.Z,{clientTrackingParams:e,hovered:a,pinKey:S,viewType:3,children:(0,_.jsxs)("div",{className:w&&C?"visit-button-animate pulse-glow":void 0,children:[(0,_.jsx)(d.Z,{unsafeCSS:f}),(0,_.jsx)(l.ZP,{_onAuxClick:({event:e})=>{(0,u.UE)(e)&&(I(),e.stopPropagation(),i({componentType:194}),T({event:e}))},_onMouseEnter:r,_onMouseLeave:o,color:t,fullWidth:P||k,href:n,onClick:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),i({componentType:194}),T({event:e})},rel:"nofollow",size:"lg",text:b})]})})})}},713705:function(e,t,n){n.d(t,{i:()=>i,j:()=>a});let i=2,a=236},704300:function(e,t,n){n.r(t),n.d(t,{default:()=>o});var i=n(667294),a=n(616550),l=n(11919),r=n(378888),s=n(785893);function o({buttonText:e,clientTrackingParams:t,imageSrc:n,pinDescription:o,pinId:d,shownWithinMasonry:c}){let u=(0,a.TH)(),[p,m]=(0,i.useState)(!!(0,r.mB)(u.search).share);return(0,s.jsx)(l.default,{buttonText:e,controllerOptions:{flyoutDisplayOptions:{showCaret:!0,shownWithinMasonry:c},isFlyoutOpen:p,loggingOptions:{component:228,element:10942,viewParameter:157,viewType:3},onFlyoutDismiss:()=>m(!1),onToggleFlyout:()=>m(!p),sendObject:{type:"pin",description:o,id:d,imageUrl:n,url:`/pin/${d}/`,clientTrackingParams:t}},iconColor:"white"})}},11919:function(e,t,n){n.r(t),n.d(t,{default:()=>w});var i=n(667294),a=n(303151),l=n(20256),r=n(707915),s=n(856782),o=n(111330),d=n(702849),c=n(525839),u=n(369416),p=n(753143),m=n(341742),g=n(664897),h=n(790427),_=n(785893);function y({containerRef:e,onAnimationEnd:t,startAnimating:n,containerWidth:a}){let r=(0,c.ZP)(),s=(0,g.Z)(),m=(0,p.M0)(),[y,f]=(0,i.useState)(),[x,v]=(0,i.useState)(!1),[b,k]=(0,i.useState)(),S=r._('Share', 'secondarySendButtonAnimation.share', 'Share label for sharing a Pin'),P={buttonStyle:{animation:y,backgroundColor:d.Et},textStyle:{animation:b}};return(0,i.useEffect)(()=>{if(!s&&a)if(n){v(!0);let{animationSeenCount:e}=m.getItem(o.$M)||{animationSeenCount:0};m.setItem(o.$M,{animationSeenCount:e+1,lastAnimationTimestamp:Date.now()}),f("buttonSlideOut 1s ease-in forwards"),k("textFadeIn 1s ease-in forwards")}else f("buttonSlideIn .3s ease-in forwards"),k("textFadeOut .3s ease-in-out forwards")},[a,m,n,s]),(0,_.jsxs)(i.Fragment,{children:[(0,_.jsx)(u.Z,{unsafeCSS:`
@keyframes buttonSlideOut {
  0% {
    width: 48px;
  }
  15% {
    width: ${a}px;
  }
  100% {
    width: ${a}px;
  }
}

@keyframes textFadeIn {
  0% {
    opacity: 0;
  }
  15% {
    opacity: 0;
  }
  25% {
    opacity: 1;
  }
  100% {
    opacity: 1;
  }
}

@keyframes buttonSlideIn {
  0% {
    width: ${a}px;
  }
  100% {
    width: 48px;
  }
}

@keyframes textFadeOut {
  0% {
    opacity: 1;
  }
  15% {
    opacity: 1;
  }
  25% {
    opacity: 0;
  }
  100% {
    opacity: 0;
  }
}
`}),(0,_.jsx)(l.xu,{ref:e,alignItems:"center",dangerouslySetInlineStyle:{__style:{...P.buttonStyle,visibility:x?"visible":"hidden"}},display:"flex",onAnimationEnd:e=>{"buttonSlideIn"===e.animationName&&t()},position:"absolute",rounding:4,zIndex:h.mS,children:(0,_.jsxs)(l.kC,{alignItems:"center",gap:1,children:[(0,_.jsx)(l.xu,{padding:3,children:(0,_.jsx)(l.JO,{accessibilityLabel:S,color:"default",icon:"share",size:24})}),(0,_.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:P.textStyle},marginEnd:3,children:(0,_.jsx)(l.mg,{size:"md",children:S})})]})})]})}function f({onAnimationEnd:e}){let t=(0,i.useRef)(null),[n,a]=(0,i.useState)(0),[l,r]=(0,i.useState)(!1);return(0,m.Z)(()=>{let e=setTimeout(()=>{r(!0);let e=setTimeout(()=>{r(!1)},3e3);return()=>clearTimeout(e)},s.S+1e3);return()=>clearTimeout(e)}),(0,i.useEffect)(()=>{if(t.current&&!n&&l){let e=t.current.getBoundingClientRect().width;e&&a(e)}},[t,n,l]),(0,_.jsx)(y,{containerRef:t,containerWidth:n,onAnimationEnd:e,startAnimating:l})}var x=n(121836),v=n(364843),b=n(274320),k=n(238589),S=n(807765),P=n(539532);function w({controllerOptions:e,iconColor:t,iconOnly:n,buttonText:s,showSendAnimation:d=!1,tabIndex:u=0,closeupWithinMasonryEnabled:g=!1}){let h=(0,c.ZP)(),y=(0,p.M0)(),w=(0,k.Nl)(),{checkExperiment:C}=(0,b.r)(),{setIsShowingShareButton:I}=(0,S.f)(),T=(0,i.useRef)(null),[j,A]=(0,i.useState)(d),F=new l.Ry(5),[E]=(0,i.useState)(()=>{let e=w.getItem(x.bl)||0,{animationSeenCount:t}=y.getItem(o.$M)||{animationSeenCount:0};return t<2&&(2===e||3===e)}),L=()=>{A(!1)};return(0,m.Z)(()=>{let{lastAnimationTimestamp:e}=y.getItem(o.$M)||{lastAnimationTimestamp:0};(0,a.Z)(new Date(e),new Date)||y.setItem(o.$M,{animationSeenCount:0,lastAnimationTimestamp:e})}),(0,i.useEffect)(()=>(I(d),()=>{I(!1)}),[I,d]),(0,_.jsxs)(i.Fragment,{children:[(0,_.jsx)(P.Z,{...e,children:({handleSendShareFlyoutButtonClick:i})=>(0,_.jsxs)(l.u,{inline:!0,text:h._('Share', 'Closeup.SharePin.Icon', 'Icon for sharing the current pin'),zIndex:F,children:[j&&E&&C("sg_dweb_improved_share_animation_on_closeup").anyEnabled&&(0,_.jsx)(l.xu,{"data-test-id":"closeup-share-button",children:(0,_.jsx)(l.iP,{onTap:i,children:(0,_.jsx)(f,{onAnimationEnd:L})})}),(0,_.jsx)(r.Z,{ref:T,accessibilityLabel:h._('Send', 'Accessible label for button to send this pin', 'Accessible label for button to send this pin'),bgColor:g?"white":void 0,buttonText:s,handleClick:()=>i(),icon:"share",iconColor:t,iconOnly:n,isActive:e.isFlyoutOpen,tabIndex:u,testId:"closeup-share-button"})]})}),(0,_.jsx)(v.N,{anchors:{3017:T.current},idealDirection:"down",onAnchorTouch:"complete",placementId:12,scrollToDismiss:!0})]})}},406196:function(e,t,n){n.d(t,{E:()=>o,N:()=>d});var i=n(667294),a=n(655202),l=n(729434),r=n(785893);let{Provider:s,get:o}=(0,l.Z)("Flag"),d=({children:e})=>{let[t,n]=(0,i.useState)(),[l,o]=(0,i.useState)(a.Zw.REPORT),[d,c]=(0,i.useState)(a.qb.STARTED),[u,p]=(0,i.useState)(),[m,g]=(0,i.useState)(),h=(0,i.useMemo)(()=>({flagReason:m,flow:l,status:d,selectedReason:u,modalTitle:t,setFlagReason:g,setFlow:o,setModalTitle:n,setStatus:c,setSelectedReason:p}),[t,l,d,u,m]);return(0,r.jsx)(s,{value:h,children:e})}},655202:function(e,t,n){n.d(t,{Vm:()=>l,Zw:()=>i,qb:()=>a});let i={REPORT:"REPORT",BLOCK:"BLOCK",END:"END"},a={STARTED:"STARTED",SELECTED:"SELECTED",SUBMITTED:"SUBMITTED",PROCESSING:"PROCESSING",COMPLETED:"COMPLETED"},l={CONVERSATION:"CONVERSATION",DID_IT:"DID_IT"}},869985:function(e,t,n){n.d(t,{Z:()=>G});var i,a,l=n(667294);n(422578);var r=n(20256),s=n(592821),o=n(979904),d=n(890479),c=n(11919),u=n(980787),p=n(679422),m=n(415546),g=n(525839),h=n(601686),_=n(603316),y=n(785893);function f(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let x={__style:{backgroundColor:"#000"}},v=(void 0!==i||(i=n(307595)).hash&&"e04be51b4be0a2585e7803d004fa83b7"!==i.hash&&console.error("The definition of 'CloseupVideoEndCard_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);class b extends l.PureComponent{constructor(...e){super(...e),f(this,"handleRestartVideo",({event:e})=>{e.stopPropagation(),this.props.onRestartVideo?.({event:e}),(0,_.nP)("web.video.endcard.share",{sampleRate:1,tags:{status:"restart",variant:"enabled_send_first"}})}),f(this,"handleShareVideo",()=>{let{clientTrackingParams:e,onToggleFlyout:t,isFlyoutOpen:n,pinId:i,requireAuth:a,logContextEvent:l}=this.props;if(n&&(0,_.nP)("web.video.endcard.share",{sampleRate:1,tags:{status:"shareSheetOpen",variant:"enabled_send_first"}}),l({event_type:101,component:179,object_id_str:i,view_type:3,view_parameter:156,element:11731,clientTrackingParams:e}),a)return void a();t&&t()}),f(this,"handleExternalSend",()=>{(0,_.nP)("web.video.endcard.share",{sampleRate:1,tags:{status:"shareSheetOpen",variant:"enabled_send_first"}})}),f(this,"renderReplayButton",()=>(0,y.jsx)(r.iP,{accessibilityLabel:this.props.i18n._('Watch again', 'Button when pressed restarts the video', 'Button when pressed restarts the video'),onTap:this.handleRestartVideo,rounding:2,children:(0,y.jsxs)(r.xu,{alignItems:"center",display:"flex",padding:2,children:[(0,y.jsx)(r.xu,{marginEnd:3,children:(0,y.jsx)(r.JO,{accessibilityLabel:this.props.i18n._('Watch again', 'Button when pressed restarts the video', 'Button when pressed restarts the video'),color:"inverse",icon:"refresh",size:18})}),(0,y.jsx)(r.X6,{color:"light",overflow:"normal",size:"400",children:this.props.i18n._('Watch again', 'Clickable label when pressed restarts the video', 'Clickable label when pressed restarts the video')})]})})),f(this,"renderShareButton",()=>{let{clientTrackingParams:e,gridDescription:t,imageSrc:n,isFlyoutOpen:i,onFlyoutDismiss:a,pinId:l}=this.props;return(0,y.jsx)(r.iP,{accessibilityLabel:this.props.i18n._('Send', 'end.video.send.icon.label', 'Clickable label when pressed opens share sheet after video is finished'),onTap:this.handleShareVideo,rounding:2,children:(0,y.jsxs)(r.xu,{alignItems:"center",display:"flex",justifyContent:"center",padding:2,children:[(0,y.jsx)(c.default,{controllerOptions:{flyoutDisplayOptions:{shownWithinMasonry:!0},loggingOptions:{component:179,element:72,onExternalSend:this.handleExternalSend,viewType:3},isFlyoutOpen:i,onFlyoutDismiss:a,onToggleFlyout:()=>{},sendObject:{type:"pin",description:t,id:l,imageUrl:n,url:`/pin/${l}/`,clientTrackingParams:e}},iconColor:"white",iconOnly:!0,tabIndex:-1}),(0,y.jsx)(r.xu,{children:(0,y.jsx)(r.X6,{color:"light",overflow:"normal",size:"400",children:this.props.i18n._('Send', 'end.video.send.icon.label', 'Clickable label when pressed opens share sheet after video is finished')})})]})})})}componentDidMount(){let{clientTrackingParams:e,pinId:t,logContextEvent:n}=this.props;(0,_.nP)("web.video.endcard.share",{sampleRate:1,tags:{status:"land",variant:"enabled_send_first"}}),n({event_type:13,component:179,object_id_str:t,view_type:3,view_parameter:156,element:11731,clientTrackingParams:e})}render(){let{backgroundImage:e,naturalHeight:t,naturalWidth:n,maxHeight:i,maxWidth:a,pinTitle:l}=this.props;return(0,y.jsx)(r.xu,{maxHeight:i,maxWidth:a,children:(0,y.jsxs)(r.Ee,{alt:l||"",naturalHeight:t,naturalWidth:n,src:e,children:[(0,y.jsx)(r.xu,{bottom:!0,dangerouslySetInlineStyle:x,left:!0,position:"absolute",right:!0,top:!0}),(0,y.jsx)(r.xu,{alignItems:"center",direction:"column",display:"flex",height:"100%",justifyContent:"center",left:!0,maxHeight:i,maxWidth:a,position:"absolute",top:!0,width:"100%",children:(0,y.jsxs)(r.xu,{position:"absolute",children:[(0,y.jsx)(r.xu,{children:this.renderShareButton()}),(0,y.jsx)(r.xu,{alignSelf:"center",children:this.renderReplayButton()})]})})]})})}}function k(e){let t,{pinKey:n,variant:i}=e,a=(0,m.Z)(v,n),{logContextEvent:l}=(0,u.u)(),r=(0,g.ZP)(),d=(0,p.Z)(),{closeupWithinMasonryEnabled:c,peekCloseupEnabled:_,viewportSize:f}=(0,h.x4)(),{maxHeight:x,fiftyPercentHeight:k,fiftyPercentWidth:S}=(0,s.Re)(),{maxHeight:P}=(0,o.Z)({pinKey:a});return _?t="sm"===f?k:x:c&&(t=P),(0,y.jsx)(b,{...e,closeupWithinMasonryEnabled:c,i18n:r,logContextEvent:l,maxHeight:"media-viewer"===i?"inherit":t,maxWidth:"media-viewer"===i?"inherit":S,requireAuth:d})}let S=({backgroundImage:e,onRestartVideo:t,pinTitle:n})=>{let i=(0,g.ZP)();return(0,y.jsx)(r.xu,{"data-test-id":"video-end-card",height:"100%",width:"100%",children:(0,y.jsxs)(r.Ee,{alt:n||"",fit:"contain",naturalHeight:1,naturalWidth:1,src:e,children:[(0,y.jsx)(r.xu,{bottom:!0,dangerouslySetInlineStyle:x,left:!0,opacity:.8,position:"absolute",right:!0,top:!0}),(0,y.jsx)(r.xu,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",left:!0,position:"absolute",top:!0,width:"100%",children:(0,y.jsx)(r.xu,{children:(0,y.jsx)(r.iP,{onTap:t,rounding:2,children:(0,y.jsxs)(r.xu,{alignItems:"center",display:"flex",padding:2,children:[(0,y.jsx)(r.hU,{accessibilityLabel:i._('Replay', 'closeupVideo.endCard.ReplayButton', 'Button when pressed restarts the video'),icon:"refresh",iconColor:"white",size:"md"}),(0,y.jsx)(r.X6,{color:"light",overflow:"normal",size:"400",children:i._('Replay', 'closeupVideo.endCard.ReplayButton', 'Button when pressed restarts the video')})]})})})})]})})};var P=n(293565),w=n(392824),C=n(67831),I=n(716920),T=n(361423),j=n(754545),A=n(956077),F=n(15667),E=n(281106),L=n(181663),D=n(123317),R=n(724084),K=n(510928),M=n(647709),Z=n(239728),z=n(104659),O=n(653621),B=n(589357),N=n(720445);function V(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let U=(void 0!==a||(a=n(60533)).hash&&"53ae9ecd15f057f744460205e5d495fd"!==a.hash&&console.error("The definition of 'CloseupVideoNonDuplo_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),H=(e,t)=>{t({currentTime:e?.currentTime??0,duration:e?.duration??1})};class W extends l.Component{constructor(...e){super(...e),V(this,"state",{controls:"always"===this.props.showControls&&!this.props.disabled,fullscreen:!1,playing:!(0,P.G6)(this.props.requestContext.userAgent.browserName)&&!!this.props.autoplay&&!this.props.disabled,ready:!1,seeking:!1,showEndCard:!1,volume:this.props.muted||this.props.shouldMute?0:1,videoStartTime:this.props.videoStartTime||0}),V(this,"setVideoPwtLoadingStop",(e=!1)=>{if(!T.Z)return;let{storyPinStepStopwatch:t,pinId:n,pwtSurfaceContext:i}=this.props;t&&(e||t.addAnnotation("video.startup.end"),t.addBinaryAnnotation("pin.id",n,"STRING"),t.addBinaryAnnotation("video",!0,"BOOL"),t.addBinaryAnnotation("preload",e,"BOOL"),t.addSubspan({name:"perceived_video_load",endTime:T.Z.now()}),t.stop()),i&&(e||(i.addAnnotation("video.startup.end"),(0,w.ZP)("video.startup.end")),i.addBinaryAnnotation("pin.id",n,"STRING"),i.addBinaryAnnotation("video",!0,"BOOL"),i.markConstraintComplete(O._z),i.addSubspan("perceived_video_load",null,T.Z.now()),(0,w.L8)("perceived_video_load"),"story_pin"===i.getMetricId().segment&&i.removeConstraint(O.pM)),(0,A.Nx)(O._z),(0,A.rt)("pin.id",n,"STRING"),(0,A.rt)("video",!0,"BOOL"),"STORY_PIN_CLOSEUP"===(0,j.Ly)()&&(0,A.l7)(O.pM)}),V(this,"componentDidMount",()=>{let{customThumbnail:e,video:t,preferMp4:n}=this.props,{mp4:i}=t,a=t.hlsv3||t.hls||null,{thumbnail:l}=n&&i||a||{},r=(0,B.j4)(e||l);r?.ready===4&&(this.setState({ready:!0}),this.props.autoplay&&this.setVideoPwtLoadingStop(!0)),document.addEventListener("fullscreenchange",this.onFullscreenChange),document.addEventListener("webkitfullscreenchange",this.onFullscreenChange),document.addEventListener("mozfullscreenchange",this.onFullscreenChange),document.addEventListener("MSFullscreenChange",this.onFullscreenChange)}),V(this,"componentWillUnmount",()=>{document.removeEventListener("fullscreenchange",this.onFullscreenChange),document.removeEventListener("webkitfullscreenchange",this.onFullscreenChange),document.removeEventListener("mozfullscreenchange",this.onFullscreenChange),document.removeEventListener("MSFullscreenChange",this.onFullscreenChange)}),V(this,"onFullscreenChange",()=>{document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||this.props.setPanelOpen(e=>!e)}),V(this,"componentDidUpdate",(e,t)=>{this.props.videoStartTime&&this.props.videoStartTime!==e.videoStartTime&&this.setState({videoStartTime:this.props.videoStartTime}),!1===e.isPlaying&&this.props.isPlaying&&this.setState({playing:!0,controls:"never"!==this.props.showControls}),e.isPlaying&&!1===this.props.isPlaying&&this.setState({playing:!1}),e.autoplay!==this.props.autoplay&&(this.setState({playing:!!this.props.autoplay}),this.props.autoplay&&this.state.ready&&this.setVideoPwtLoadingStop(!0)),e.muted!==this.props.muted&&this.setState({volume:+!this.props.muted}),"never"===this.props.showControls&&t.controls&&this.setState({controls:!1}),(t.controls||t.playing)&&this.props.disabled&&this.setState({playing:!1,controls:!1}),!t.playing&&this.state.playing&&this.props.onPlay&&this.props.onPlay(),this.props.isCloseupMediaViewerOpen&&!e.isCloseupMediaViewerOpen&&this.setState({playing:!1})}),V(this,"handleTouch",()=>{let{seeking:e}=this.state,{disabled:t}=this.props;e||t||this.setState(e=>({playing:!e.playing}))}),V(this,"handleShowControls",()=>this.setState({controls:!0})),V(this,"handleHideControls",()=>this.setState({controls:!1})),V(this,"handleReady",()=>{let{ready:e,playing:t}=this.state,{autoplay:n,disabled:i}=this.props;n&&!e&&this.setVideoPwtLoadingStop(),this.setState({ready:!0}),(0,P.G6)(this.props.requestContext.userAgent.browserName)&&!t&&n&&!i&&this.setState({playing:!0})}),V(this,"handleEnded",({event:e})=>{let{customThumbnail:t,customEndCard:n,pinId:i,setCurrentVideo:a,loop:l,onEnded:r}=this.props;e.stopPropagation(),!l&&(this.setState({playing:!1}),t&&t.endsWith(".gif")||n||(this.setState({showEndCard:!0,videoStartTime:0}),a({pinId:i,isPromoted:!1,currentTime:0})),this.state.fullscreen&&this.exitFullscreen()),r&&r(),this.props.setPanelOpen(!0)}),V(this,"handlePause",({event:e})=>{e.stopPropagation(),this.setState({playing:!1})}),V(this,"handlePlay",({event:e})=>{e.stopPropagation(),this.setState({playing:!0})}),V(this,"handleFullscreenChange",({event:e,fullscreen:t})=>{e.stopPropagation(),this.setState({fullscreen:t})}),V(this,"handlePlayheadDown",()=>{this.setState({seeking:!0})}),V(this,"handlePlayheadUp",()=>{setTimeout(()=>{this.setState({seeking:!1})},500)}),V(this,"handleRestartVideo",({event:e})=>{e.stopPropagation(),this.setState({playing:!0,showEndCard:!1})}),V(this,"handleShareRestartVideo",({event:e})=>{e.stopPropagation(),this.setState({playing:!0,showEndCard:!1})}),V(this,"handleVolumeChange",({event:e,volume:t})=>{let{shouldMute:n}=this.props;e.stopPropagation(),n||this.setState({volume:t})}),V(this,"exitFullscreen",()=>{let{document:e}=window;(e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement)&&(e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen())}),V(this,"requestFullscreen",()=>{let{customThumbnail:e,video:t,preferMp4:n}=this.props,{mp4:i}=t,a=t.hlsv3||t.hls||null,{thumbnail:l}=n&&i||a||{},r=(0,B.j4)(e||l);r.requestFullscreen?r.requestFullscreen():r.webkitRequestFullscreen?r.webkitRequestFullscreen():r.mozRequestFullScreen?r.mozRequestFullScreen():r.msRequestFullscreen&&r.msRequestFullscreen()}),V(this,"renderCloseupVideoEndCard",(e,t,n,i)=>{let a={backgroundImage:e,naturalHeight:t,naturalWidth:n,onRestartVideo:this.handleShareRestartVideo},l={backgroundImage:e,naturalHeight:t,naturalWidth:n,onRestartVideo:this.handleRestartVideo},{clientTrackingParams:r,flyoutShareProps:s}=this.props,o={clientTrackingParams:r,gridDescription:s?s.gridDescription:"",imageSrc:s?s.imageSrc:"",isFlyoutOpen:!!s&&s.isFlyoutOpen,onFlyoutDismiss:s?s.onFlyoutDismiss:()=>{},onToggleFlyout:s?s.onToggleFlyout:()=>{},pinId:s?s.pinId:"",pinKey:this.props.pin,variant:this.props.variant};return i?(0,y.jsx)(S,{...l}):(0,y.jsx)(k,{...o,...a})})}render(){let{aspectRatio:e,autoplay:t,closeupStoryPinViewability:n,contextLogData:i={component:179,is_closeup_video:!0,objectId:this.props.pinId,view:3,viewParameter:156},customThumbnail:a,isPromoted:l,loop:o,objectFit:c,preferMp4:u,preload:p,requestContext:m,showControls:g,variant:h,video:_,captions:f,isDesktop:x,videoThumbnailStartTime:v,pin:b,pinId:k,setProgressInfo:S,progressInfo:w,setPanelOpen:C,panelOpen:I,setMute:T,isMuted:j,closeupWithinMasonryEnabled:A,maxHeight:F,maxWidth:R,onTimeChange:K,seekTime:M,roundingOverride:z}=this.props;i.is_closeup_video=!0;let{controls:O,fullscreen:V,playing:U,showEndCard:W,volume:G,videoStartTime:$}=this.state,X=_.hlsv3||_.hls||null;if(!X&&!_.mp4)return null;let{mp4:q}=_,Y=u&&q&&q.url||X&&[{type:"video/m3u8",src:X.url}]||void 0,{height:J,thumbnail:Q,width:ee}=u&&q||X||{},et=a||Q,en=()=>{C&&C(!I),I&&x&&this.requestFullscreen()},ei=()=>{this.setState({volume:+!!j}),T(!j)},ea=()=>{this.setState({playing:!0})},el=()=>{this.setState({playing:!1})},er=()=>{this.setState({playing:!U})};return(0,y.jsxs)(r.zd,{height:A||"media-viewer"===h?"inherit":void 0,rounding:z,wash:!A&&"media-viewer"!==h||void 0,width:A||"media-viewer"===h?"inherit":void 0,willChangeTransform:!((0,P.G6)(m.userAgent.browserName)&&V),children:[W?this.renderCloseupVideoEndCard(et??"",J??1,ee??1,l):(0,y.jsxs)(r.iP,{accessibilityLabel:this.props.i18n._('Pause or play video', 'pin.closeup.video.tap', 'tap area to pause or play video'),fullHeight:A||"media-viewer"===h,onMouseEnter:"hover"===g?this.handleShowControls:void 0,onMouseLeave:"hover"===g?this.handleHideControls:void 0,onTap:this.handleTouch,rounding:2,children:[(0,y.jsx)(E.Z,{playing:U,zIndexValue:99}),(0,y.jsx)(d.Z,{id:"VideoWithContextLogging",children:(0,y.jsx)(N.ZP,{aspectRatio:e??(ee??1)/(J??1),backgroundColor:A?"black":s.yc,captions:f,closeupStoryPinViewability:n,contextLogData:{...i,video_id:this.props.video.id},hlsConfig:{startLevel:B.VS},isAutoPlay:!!t,loop:o,objectFit:c,onControlsPause:this.handlePause,onControlsPlay:this.handlePlay,onEnded:this.handleEnded,onFullscreenChange:this.handleFullscreenChange,onPlay:()=>{},onPlayError:()=>{},onPlayheadDown:this.handlePlayheadDown,onPlayheadUp:this.handlePlayheadUp,onReady:this.handleReady,onTimeChange:"storyPin"===h?K:({time:e})=>{H&&"number"==typeof q?.duration&&q.duration>0&&S&&H({currentTime:e,duration:q.duration/Z.gJ},S)},onVolumeChange:this.handleVolumeChange,pin:b,pinKey:b,playing:U,poster:et,preferMp4:u,preload:p,seekTime:M,src:Y,variant:h,video:u&&q||X||{},videoStartTime:$||v,volume:G})})]}),(0,y.jsx)(r.xu,{onMouseEnter:"hover"===g?this.handleShowControls:void 0,onMouseLeave:"hover"===g?this.handleHideControls:void 0,children:"storyPin"!==h&&(0,y.jsx)(r.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...O?{...B.Ul}:{},flexDirection:"column-reverse"}},display:"flex",height:B.hy,maxHeight:F,maxWidth:R,paddingX:6,position:"absolute",width:"100%",zIndex:D.Gf,children:(0,y.jsx)(d.Z,{id:"IdeaPinVideoScrubber",children:(0,y.jsx)(L.Z,{activePageIndex:0,captionsUrl:f,handleMute:ei,handlePanelChange:en,handlePause:el,handlePausePlay:er,handlePlay:ea,handleWatchAgain:this.handleRestartVideo,inMilliseconds:!1,isMuted:j,isPanelOpen:I,isPlaying:U,isStoryPin:!1,pageCount:1,pages:[],pinId:k,progressInfo:w,showEndCard:W,showVideoControls:O,viewParameter:156})})})})]})}}function G(e){let{pinKey:t,pinId:n,isPromoted:i,video:a,muted:r,variant:c}=e,u=(0,m.Z)(U,t),p=(0,g.ZP)(),_=(0,F.B)(),f=(0,I.g)(),x=(0,C.A)(),{seekTimes:v}=(0,R.Hx)(),{clientTrackingParams:b,closeupWithinMasonryEnabled:k,isCloseupMediaViewerOpen:S}=(0,h.x4)(),{maxWidth:P}=(0,s.Re)(),{appUI:w,setCurrentVideo:T}=(0,z.G)(),{videosAutoplaying:j}=w,{organicVideosAutoplaying:A,promotedVideosAutoplaying:E}=j,L=_.locale.toLowerCase(),D=(a.mp4?.captions_urls||a.hlsv3?.captions_urls)??{},Z=L&&D[L]||Object.values(D)[0]||"",O=(0,M.HG)(),B=i?E[n]:A[n],N=parseInt((0,K.Z)().t||0,10),[V,H]=(0,l.useState)(B?.currentTime||0),[G,$]=(0,l.useState)(null),[X,q]=(0,l.useState)(!0),[Y,J]=(0,l.useState)(r),{maxHeight:Q}=(0,o.Z)({pinKey:u});(0,l.useEffect)(()=>{let e=V;N>0&&(e=N),v[n]&&(e=v[n]),H(e)},[v,n,N,V]);let ee=(0,l.useMemo)(()=>("default"!==c||!S)&&(!B||!B.paused),[c,B,S]);return(0,y.jsx)(d.Z,{id:"CloseupVideoInner",children:(0,y.jsx)(W,{...e,captions:String(Z)||"",clientTrackingParams:b,closeupWithinMasonryEnabled:k,i18n:p,isCloseupMediaViewerOpen:S,isDesktop:O,isMuted:Y,isPanelOpen:X,isPlaying:ee,maxHeight:Q,maxWidth:"media-viewer"===c?void 0:P,panelOpen:X,pin:u,progressInfo:G,pwtSurfaceContext:x,requestContext:_,seekTime:v[n],setCurrentVideo:T,setMute:J,setPanelOpen:q,setProgressInfo:$,storyPinStepStopwatch:f,variant:c,videoStartTime:V})})}V(W,"defaultProps",{loop:!1,showControls:"hover"})},294851:function(e,t,n){n.d(t,{Z:()=>_});var i,a=n(667294);n(422578);var l=n(890479),r=n(869985),s=n(415546),o=n(776777),d=n(863667),c=n(750092),u=n(104659),p=n(785893);function m(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let g=(void 0!==i||(i=n(3449)).hash&&"60493becbbe037be854a8cd1136fede6"!==i.hash&&console.error("The definition of 'CloseupVideoWithVisibility_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);class h extends a.Component{constructor(...e){super(...e),m(this,"handleVisibilityChanged",e=>{let{pinId:t,isPromoted:n,setCurrentVideo:i,pauseAutoplay:a,videosAutoplaying:l,videoStartTime:r}=this.props,s=(0,c.Z)(t,l);e&&!s?i({pinId:t,isPromoted:!!n,currentTime:r}):!e&&s&&a({pinId:t,isPromoted:!!n,currentTime:this.currentVideoCurrentTime})}),m(this,"handleVideoTimeChange",e=>{let{pinId:t,videosAutoplaying:n}=this.props;(0,c.Z)(t,n)&&(this.currentVideoCurrentTime=e.time)})}componentDidUpdate(e){let{appInFocus:t}=e,{appInFocus:n,pauseAutoplay:i,pinId:a,isPromoted:l,setCurrentVideo:r,videosAutoplaying:s}=this.props,o=(0,c.Z)(a,s),u=(0,d.Z)(a,s);this.currentVideoCurrentTime=u??this.currentVideoCurrentTime,n!==t&&!n&&o?(this.pausedDueToBrowserOutOfFocus=!0,i({pinId:a,isPromoted:!!l,currentTime:this.currentVideoCurrentTime})):this.pausedDueToBrowserOutOfFocus&&n&&(this.pausedDueToBrowserOutOfFocus=!1,r({pinId:a,isPromoted:!!l,currentTime:this.currentVideoCurrentTime}))}componentWillUnmount(){let{pinId:e,isPromoted:t,pauseAutoplay:n}=this.props;n({pinId:e,isPromoted:!!t,currentTime:this.currentVideoCurrentTime})}render(){let{pauseAutoplay:e,pin:t,setCurrentVideo:n,videoStartTime:i,videosAutoplaying:a,...s}=this.props;return(0,p.jsx)(l.Z,{id:"VisibilityChangedWrapper",children:(0,p.jsx)(o.Z,{onVisibilityChanged:this.handleVisibilityChanged,trackFullVisible:!1,...s,children:(0,p.jsx)(l.Z,{id:"CloseupVideo",children:(0,p.jsx)(r.Z,{...s,onTimeChange:this.handleVideoTimeChange,pinKey:t})})})})}}function _(e){let{pinId:t,pinKey:n,isPromoted:i}=e,a=(0,s.Z)(g,n),{appUI:{appInFocus:r,videosAutoplaying:o},pauseAutoplay:d,setCurrentVideo:c}=(0,u.G)(),{organicVideosAutoplaying:m,promotedVideosAutoplaying:_}=o,y=i?_[t]:m[t];return(0,p.jsx)(l.Z,{id:"CloseupVideoWithVisibilityInner",children:(0,p.jsx)(h,{...e,appInFocus:r,pauseAutoplay:d,pin:a,setCurrentVideo:c,videosAutoplaying:o,videoStartTime:y?y.currentTime:null})})}},955421:function(e,t,n){n.d(t,{Z:()=>a});let i=new Set([90,88,89,91,101,92,131]);function a(e){return i.has(e)}},730647:function(e,t,n){n.d(t,{Z:()=>r});var i=n(598579);let a=new Set([92]),l=new Set([154]);function r(e){let t=[];return e.forEach(e=>{if("story"===e.type?a.has(e.container_type)||l.has(e.container_type)||i.v8.has(e.story_type)||i.AW.has(e.story_type):1){let n=t[t.length-1];Array.isArray(n)?n.push(e):t.push([e])}else t.push(e)}),t}},281218:function(e,t,n){n.d(t,{Z:()=>a});let i="undefined"!=typeof window&&window.performance&&window.performance.now?()=>window.performance.now():()=>Date.now();function a({window:e,duration:t,run:n}){let a=i(),l=0,r=null,s=()=>{let o=i()-a,d=o-l;if(t===1/0)n(0,o,d);else{let e=o/t;if(e>=1)return void n(1,o,d);n(e,o,d)}l=o,r=e.requestAnimationFrame(s)};return{start:()=>{r=e.requestAnimationFrame(s)},cancel:()=>{r&&(e.cancelAnimationFrame(r),r=null)}}}},86295:function(e,t,n){n.d(t,{EF:()=>p,GM:()=>o,Hg:()=>I,Hl:()=>x,IR:()=>y,Je:()=>c,K3:()=>F,O1:()=>R,Q6:()=>g,QE:()=>i,V3:()=>C,Z4:()=>_,c7:()=>f,cU:()=>r,cZ:()=>P,cg:()=>a,dZ:()=>l,gO:()=>v,hd:()=>S,j$:()=>k,j9:()=>E,kX:()=>b,oQ:()=>z,p:()=>Z,pg:()=>K,pk:()=>w,pt:()=>A,qq:()=>D,sy:()=>u,tP:()=>T,uE:()=>h,vk:()=>L,w2:()=>d,ww:()=>j,xX:()=>s,xw:()=>M,yR:()=>m});let i=3e3,a=280,l=500,r=1e4,s=250,o=250,d=251,c=50,u=50,p=20,m=20,g={DASHBOARD:"DASHBOARD",PEOPLE:"PEOPLE",PARTNERS:"PARTNERS",AD_ACCOUNTS:"AD_ACCOUNTS",AD_ACCOUNTS_PENDING_TAB:"AD_ACCOUNTS_PENDING_TAB",HISTORY:"HISTORY",PEOPLE_DETAIL:"PEOPLE_DETAIL",PARTNERS_DETAIL:"PARTNERS_DETAIL",SHARED_PARTNERS_DETAIL:"SHARED_PARTNERS_DETAIL",AD_ACCOUNTS_DETAIL:"AD_ACCOUNTS_DETAIL",PENDING_AD_ACCOUNTS_DETAIL:"PENDING_AD_ACCOUNTS_DETAIL",PARTNERS_INVITES:"PARTNERS_INVITES",CHOOSER:"CHOOSER",PROFILES:"PROFILES",PROFILES_DETAIL:"PROFILES_DETAIL",PARTNERS_PENDING_TAB:"PARTNERS_PENDING_TAB",PEOPLE_PENDING_TAB:"PEOPLE_PENDING_TAB",USERS:"USERS",ACOUNTS:"ACCOUNTS",BUSINESS_SECURITY:"BUSINESS_SECURITY",ASSETS:"ASSETS",ASSET_GROUPS:"ASSET_GROUPS",INVOICE_MANAGEMENT:"INVOICE_MANAGEMENT",BUSINESS_HIERARCHY:"BUSINESS_HIERARCHY",BUSINESS_HIERARCHY_BUSINESS_SECURITY:"BUSINESS_HIERARCHY_BUSINESS_SECURITY",MANAGERS:"MANAGERS",AUDIENCES:"AUDIENCES",SHARED_TAGS:"SHARED_TAGS",CATALOGS:"CATALOGS",BRAND_SAFETY:"BRAND_SAFETY",AD_ACCOUNTS_CEE_MIGRATION:"AD_ACCOUNTS_CEE_MIGRATION",BUSINESS_SETTINGS:"BUSINESS_SETTINGS",SYSTEM_USERS:"SYSTEM_USERS",APPS:"APPS",CONVERSION_DATA:"CONVERSION_DATA"},h={PARTNER:"PARTNER",PARTNER_ADMIN:"PARTNER_ADMIN"},_={ADVERTISER_OWNED_AD_ACCOUNT:"ADVERTISER_OWNED_AD_ACCOUNT",AGENCY_OWNED_AD_ACCOUNT:"AGENCY_OWNED_AD_ACCOUNT"},y={ASCENDING:"ASCENDING",DESCENDING:"DESCENDING"},f={AD_ACCOUNT:"AD_ACCOUNT",PERSON:"PERSON",PARTNER:"PARTNER",SYSTEM_USER:"SYSTEM_USER",CATALOG:"CATALOG"},x={PERSON:"PERSON",PARTNER:"PARTNER",SYSTEM_USER:"SYSTEM_USER",PROFILE:"PROFILE"},v={ADMIN:"ADMIN",ANALYST:"ANALYST",FINANCE_MANAGER:"FINANCE_MANAGER",AUDIENCE_MANAGER:"AUDIENCE_MANAGER",CAMPAIGN_MANAGER:"CAMPAIGN_MANAGER",CATALOGS_MANAGER:"CATALOGS_MANAGER",FINANCE_EDIT:"FINANCE_EDIT",FINANCE_VIEW:"FINANCE_VIEW"},b={CATALOGS_MANAGER:"CATALOGS_MANAGER",CATALOGS_VIEWER:"CATALOGS_VIEWER"},k=["ADMIN","ANALYST","FINANCE_MANAGER","AUDIENCE_MANAGER","CAMPAIGN_MANAGER","CATALOGS_MANAGER"],S=["ADMIN","ANALYST","AUDIENCE_MANAGER","CAMPAIGN_MANAGER","CATALOGS_MANAGER","FINANCE_EDIT","FINANCE_VIEW"],P=["ADMIN","ANALYST","FINANCE_MANAGER","AUDIENCE_MANAGER","CAMPAIGN_MANAGER"],w=["CATALOGS_MANAGER","CATALOGS_VIEWER"],C={EMPLOYEE:"EMPLOYEE",BIZ_ADMIN:"BIZ_ADMIN",OWNER:"OWNER"},I=["PROFILE_PUBLISHER"],T={AD_ACCOUNT:0,PROFILE:2,ASSET_GROUP:3,CATALOG:4},j={0:"AD_ACCOUNT",2:"PROFILE",3:"ASSET_GROUP",4:"CATALOG"},A={ACTIVE:0,PENDING:1},F={ACTIVE:"active",PENDING:"pending"},E="filter_type",L={page:1,totalCount:0,limit:10,sortDirection:"ASCENDING",sortBy:void 0,searchBy:void 0,searchTerm:""},D={WARNING:"WARNING",DEFAULT:"DEFAULT"},R={BUSINESS_INVITE_INVALID:2932,BUSINESS_ACCESS_PERSONAL_ACCOUNT:2936,INVALID_USERNAME:90,ACCESS_DENIED:280,BUSINESS_RELATIONSHIP_ALREADY_EXISTS:2751,ODO_BUSINESS_RELATIONSHIP_ALREADY_EXISTS:53,BUSINESS_RELATIONSHIP_COUNT_EXCEEDED:2769,BUSINESS_NUMBER_MEMBERS_IN_POLICY_EXCEEDS:2938,ODO_BUSINESS_NUMBER_MEMBERS_IN_POLICY_EXCEEDS:66,ODO_BIZ_INVITE_EXISTS:71,INVALID_ODO_REQUEST:2755,BUSINESS_INVITE_STACKED_ERROR:2773,ACL_POLICY_NOT_FOUND:1110,BUSINESS_INVITE_NOT_EXIST:2770,BUSINESS_RELATIONSHIP_PREMATURE_MIGRATION_INVITE:4300,SANCTIONED_COUNTRY_FOR_BUSINESS:2762},K={ALL:"ALL",OWNED:"OWNED",SHARED:"SHARED"},M=new Date("2024-10-31T12:00"),Z="Httpool by Aleph",z="pinterest-leads@alephholding.com"},974297:function(e,t,n){function i(e){return e?[e["736x"],e["564x"],e["474x"],e["236x"]].find(e=>e?.url)??null:null}n.d(t,{Z:()=>i})},673616:function(e,t,n){function i({isHiddenPin:e,isUnsafePin:t}){return!e&&!t}n.d(t,{Z:()=>i})},47944:function(e,t,n){n.d(t,{Z:()=>s});var i=n(20256),a=n(744862),l=n(525839),r=n(785893);let s=({isQuestion:e,name:t,size:n,src:s})=>{let o=(0,l.ZP)();return(0,r.jsxs)(i.xu,{"data-test-id":"comment-avatar-container",position:"relative",children:[(0,r.jsx)(a.qE,{name:t,size:n,src:s}),e&&(0,r.jsxs)(i.xu,{alignItems:"center",bottom:!0,display:"flex",height:16,justifyContent:"center",marginBottom:-1,marginEnd:-1,position:"absolute",right:!0,width:16,children:[(0,r.jsx)(i.xu,{position:"absolute",children:(0,r.jsx)(i.JO,{accessibilityLabel:o._('Q and A comment', 'comment.userAvatar.creator.q&aIndicator', 'question mark icon indicator background that comment is Q&A'),color:"dark",icon:"speech"})}),(0,r.jsx)(i.xu,{position:"absolute",children:(0,r.jsx)(i.JO,{accessibilityLabel:o._('Q and A comment', 'comment.userAvatar.creator.q&aIndicator', 'question mark icon indicator background that comment is Q&A'),color:"light",icon:"question-mark",size:8})})]})]})}},315787:function(e,t,n){n.d(t,{Z:()=>er});var i=n(20256),a=n(667294),l=n(581722),r=n(473727),s=n(767439),o=n(111923),d=n(406196),c=n(47944),u=n(296691),p=n(333651),m=n(773655),g=n(744862),h=n(785893);let _={helpfulStyle:{backgroundImage:`url(${p})`},lovedStyle:{backgroundImage:`url(${m})`}},y=({response:e,handleReactionListHover:t,maybeDismissReactionListWithDelay:n})=>{let a=14===e.reaction_type,l=1===e.reaction_type,r=e.user.is_private_profile?e.user.first_name:e.user.full_name;return(0,h.jsxs)(i.kC,{alignItems:"center",children:[(0,h.jsx)(i.Tg,{href:`/${e.user.username}/`,onBlur:n,onFocus:t,children:(0,h.jsxs)(i.kC,{alignItems:"center",children:[(0,h.jsx)(i.xu,{maxWidth:40,children:(0,h.jsx)(g.qE,{accessibilityLabel:"",name:r,outline:!0,size:"sm",src:e.user.image_medium_url})}),(0,h.jsx)(i.xu,{marginStart:2,maxWidth:80,children:(0,h.jsx)(i.xv,{color:"inverse",size:"100",weight:"bold",children:r})})]})}),(0,h.jsxs)(i.xu,{alignContent:"end",display:"flex",padding:2,children:[l&&(0,h.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:_.lovedStyle},"data-test-id":"comment-reaction-tray-loved-emoji",height:16,width:16}),a&&(0,h.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:_.helpfulStyle},"data-test-id":"comment-reaction-tray-helpful-emoji",height:16,width:16})]})]})};var f=n(821342),x=n(886981),v=n(448505),b=n(7872);let k=["userreaction.id","userreaction.reaction_type","userreaction.user()","user.first_name","user.full_name","user.id","user.image_medium_url","user.is_private_profile","user.username"],S=({commentId:e,handleReactionListHover:t,isMarkedHelpfulByMe:n,isLovedByMe:l,isTry:r,maybeDismissReactionListWithDelay:s})=>{let o=(0,f.Z)(),d=(0,v.Z)(),c=(0,x.Z)({name:"ApiResource",options:{url:r?`/v3/did_it/${e}/reacted_by/`:`/v3/aggregated_comments/${e}/reacted_by/`,field_sets:k}}),u=(0,b.lJ)(o,d)||("id"in o&&o.id?o.id:""),p=c.data;(l||n)&&p&&(p=p.filter(e=>e.user.id!==u),p=[{id:e,reaction_type:l?1:14,user:{first_name:(0,b.Fk)(o,d),full_name:(0,b.Fk)(o,d),id:u,image_medium_url:(0,b.gJ)(o,d),is_private_profile:!!o.isAuth&&!!o.isPrivateProfile,username:(0,b.Ms)(o,d)}},...p]);let m=(0,a.useRef)(null);return(0,a.useEffect)(()=>{let{current:e}=m,t=()=>{c.isFetching||(c.isAtEnd?e?.removeEventListener("scroll",t):c.fetchMore())};return e?.addEventListener("scroll",t),()=>{e?.removeEventListener("scroll",t)}},[c]),(0,h.jsx)(i.xu,{ref:m,color:"selected",maxHeight:140,overflow:"scroll",rounding:2,width:180,children:p?.map(e=>(0,h.jsx)(i.xu,{"data-test-id":"reaction-list-single-user",margin:3,children:(0,h.jsx)(y,{handleReactionListHover:t,maybeDismissReactionListWithDelay:s,response:e})},e.id))})};var P=n(525839),w=n(821806),C=n(601686);let I=(0,a.lazy)(()=>n.e("46308").then(n.bind(n,766289))),T="comment-reaction-container-entry-point",j=({commentId:e,dismissReactionList:t,helpfulCount:n,isDesktop:l,isMarkedHelpfulByMe:r,isLovedByMe:s,isReactionListOpen:o,isTry:d,lovedCount:c,onReactionCountHover:g,onToggleHelpful:_,onToggleLove:y})=>{let f=(0,P.ZP)(),{isCommentComposerFocused:x}=(0,C.x4)(),v=(0,a.useRef)(null),b=l?16:12,[k,j]=(0,a.useState)(!1),A=!1,F=(c||0)+(n||0);r&&s&&(F-=1);let E=e=>()=>{j(e)},L=()=>{A=!0,g()},D=()=>{A=!1,setTimeout(()=>{A||t()},1e3)},R=l?(0,h.jsx)(i.xu,{"data-test-id":T,children:k?(0,h.jsx)(i.iP,{onMouseLeave:E(!1),onTap:E(!1),children:(0,h.jsx)(w.Z,{children:(0,h.jsx)(I,{onTooltipHover:E(!1),setHelpful:_(!0),setLoved:y(!0)})})}):(0,h.jsx)(i.iP,{onMouseEnter:E(!0),onTap:E(!0),children:(0,h.jsx)(i.JO,{accessibilityLabel:f._('React', 'comment.actionbar.react', 'accessibility label entry point to react to a comment'),color:"subtle",icon:"heart-outline",size:b})})}):(0,h.jsx)(i.xu,{"data-test-id":T,margin:-1.5,children:(0,h.jsx)(i.hU,{accessibilityLabel:f._('React', 'comment.actionbar.react', 'accessibility label entry point to react to a comment'),icon:"heart-outline",onClick:y(!0),size:"xs"})});return(0,h.jsxs)(i.kC,{alignItems:"center",gap:{row:l?1:1.5,column:0},children:[r||s?(0,h.jsx)(i.iP,{onTap:()=>{_(!1)(),y(!1)()},children:(0,h.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{backgroundImage:`url(${s?m:p})`,backgroundSize:"contain"}},"data-test-id":s?"comment-reaction-container-loved-emoji":"comment-reaction-container-helpful-emoji",height:b,width:b})}):R,F>0&&(0,h.jsxs)(a.Fragment,{children:[(0,h.jsx)(i.iP,{onMouseEnter:L,onMouseLeave:D,onTap:L,children:(0,h.jsx)(i.xu,{ref:v,"data-test-id":"comment-reaction-container-reaction-count",display:l?void 0:"flex",children:(0,h.jsx)(i.xv,{color:l?"subtle":"default",inline:!0,size:l?"200":"100",weight:"bold",children:F})})}),o&&(0,h.jsx)(i.mh,{zIndex:u.Ty,children:(0,h.jsx)(i.J2,{anchor:v.current,idealDirection:"down",onDismiss:t,positionRelativeToAnchor:!1,shouldFocus:!x,children:(0,h.jsx)(i.iP,{onMouseEnter:L,onMouseLeave:D,children:(0,h.jsx)(S,{commentId:e,handleReactionListHover:L,isLovedByMe:s,isMarkedHelpfulByMe:r,isTry:d,maybeDismissReactionListWithDelay:D})})})})]})]})};var A=n(624895),F=n(54424),E=n(545961),L=n(162321);function D(e){let{comment:t,commentTags:n,handlePhotoTap:l,isDesktop:r,previewPhoto:s,taggedUsers:o}=e,[d,c]=(0,a.useState)(!1),{user:{username:u}}=t,p="text"in t?t.text:t.details,m=r?`${u} ${p}`:p,{height:g,url:_,width:y}=s||{},f=g??E.Vb,x=y??E.mu;return(0,h.jsxs)(i.xu,{children:[(0,h.jsx)(L.Z,{isFirstTaggedUserAuthor:!0,shouldShowFirstNameOnly:!0,taggedUsers:o,tags:n,text:m}),r||!r?(0,h.jsx)(i.xu,{marginBottom:r?void 0:1.5,marginTop:r?1:.5,children:(0,h.jsx)(E.ZP,{canEnlargePhoto:r,isSelectedPhoto:!1,previewPhoto:s})}):(0,h.jsx)(i.xu,{height:150,marginBottom:r?4:2,marginTop:1,width:150,children:(0,h.jsx)(i.iP,{disabled:!r,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),onTap:l,children:(0,h.jsx)(i.zd,{rounding:2,wash:!0,children:_&&(0,h.jsx)(i.Ee,{alt:_,color:"#efefef",naturalHeight:f,naturalWidth:x,src:_,children:(0,h.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{cursor:r?"zoom-in":void 0,backgroundColor:`rgba(17, 17, 17, ${.4*!!d})`}},height:"100%",width:"100%"})},_)})})})]})}var R=n(667835),K=n(302148),M=n(105433),Z=n(696323);function z(e){let{featuredCommentId:t,parentId:n,parentType:r,inCommentsImprovedDropdownExp:s,inCommentsPopover:o,isDesktop:d,isLoading:c,isReadOnly:u,openOverflowMenu:p,replyingToCommentId:m,toggleEditComposer:g,toggleHelpful:_,toggleLike:y,toggleReplyComposer:f,isORBACProfileManager:x,isVideo:v,storyPinDataId:b,pinId:k,closeupAttributionId:S,aggregatedPinDataId:w,closeupAttributionUsername:C,pinnerId:I,reactionListCommentId:T,showReactionListForComment:j,viewParameter:A}=e,F=(0,P.ZP)(),E=(0,R.vs)(),L=(0,M.lV)(),D=(0,l.v9)(({feeds:e})=>{let t=e[`${Z.Z.AGGREGATED_COMMENT_REPLIES}:${n}`]||[],i=e[`${Z.Z.AGGREGATED_COMMENTS}:${n}`]||[];return t.concat(i).reduceRight((e,{id:t})=>{let n=L[t];return n?[...e,n]:e},[])}),z=(0,a.useRef)(!0),O=(0,a.useRef)(D.length),[B,N]=(0,a.useState)(1),[V,U]=(0,a.useState)(!1),H=B===D.length;return(0,a.useEffect)(()=>{let e=O.current,t=D.length;z.current?t>0&&(z.current=!1):t>e&&U(!0),t!==e&&N(e=>e>1?t:+(t>0)),O.current=t},[D.length]),(0,h.jsxs)(a.Fragment,{children:[D.length>1&&(0,h.jsx)(i.iP,{onTap:()=>{N(H?0:D.length)},children:(0,h.jsxs)(i.xu,{alignItems:d?void 0:"center",display:d?void 0:"flex",marginBottom:d?4:6,children:[d?(0,h.jsx)(i.xu,{display:"inlineBlock",marginEnd:2,children:(0,h.jsx)(i.xv,{color:"subtle",size:"200",weight:"bold",children:""})}):(0,h.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{background:E?"white":"black"}},height:1,marginEnd:2,width:32}),(0,h.jsx)(i.xv,{color:d?"subtle":"default",inline:!0,size:"100",weight:"bold",children:H?F._('Hide replies', 'comment.button.hideReplies', 'hide comment replies'):(0,K.nk)(F.ngettext('View {{ commentCount }} reply', 'View {{ commentCount }} replies', D.length, 'comment.button.showReplies', 'show comment replies'),{commentCount:D.length})})]})}),(0,h.jsx)(er,{aggregatedPinDataId:w,closeupAttributionId:S,closeupAttributionUsername:C,comments:(()=>{if(0===B||0===D.length)return[];if(1===B)if(V)return D.slice(-1);else return D.slice(0,1);return D.slice(0,B)})(),commentsDisabled:!1,featuredCommentId:t,gapSize:d?2:6,inCommentsImprovedDropdownExp:s,inCommentsPopover:o,isDesktop:d,isLoading:c,isORBACProfileManager:x,isReadOnly:u,isVideo:v,openOverflowMenu:p,parentId:n,parentType:r,pinId:k,pinnerId:I,reactionListCommentId:T,replyingToCommentId:m,showReactionListForComment:j,storyPinDataId:b,toggleEditComposer:g,toggleHelpful:_,toggleLike:y,toggleReplyComposer:f,userAvatarSize:"sm",viewParameter:A})]})}var O=n(980787),B=n(657043),N=n(475498),V=n(670622),U=n(2420),H=n(15667),W=n(536652),G=n(87853),$=n(542092),X=n(636921),q=n(502066),Y=n(449613),J=n(611134),Q=n(401450),ee=n(78762);let et=(0,a.lazy)(()=>n.e("16592").then(n.bind(n,357966))),en=(0,ee.Z)(()=>n.e("73842").then(n.bind(n,434780)),void 0,e=>434780,"app-packages-comment-CommentOverflowPopover",e=>["73842"]),ei=(0,a.lazy)(()=>n.e("84046").then(n.bind(n,257233)));function ea(e){let t,n,{aggregatedPinDataId:p,closeupAttributionId:m,closeupAttributionUsername:g,comment:_,featuredCommentId:y,inCommentsImprovedDropdownExp:x,inCommentsPopover:k,isDesktop:S,isReadOnly:I,isVideo:T,openOverflowMenu:E,toggleReplyComposer:Z,parentId:ee,parentType:ea=$.o.pin,pinId:el,storyPinDataId:er,replyingToCommentId:es,showReactionListForComment:eo,showTopCommentHeading:ed,toggleEditComposer:ec,toggleHelpful:eu,toggleLike:ep,userAvatarSize:em,isORBACProfileManager:eg,pinnerId:eh,reactionListCommentId:e_,viewParameter:ey}=e,{user:{id:ef,first_name:ex,id:ev,image_medium_url:eb,username:ek},id:eS,is_translatable:eP,comment_count:ew,helpful_count:eC,tags:eI=[]}=_,[eT,ej]=(0,a.useState)(!1),eA=eT&&_.translatedText||_.text,eF=!eP||""===_.translatedText,eE=(0,X.Z)(),eL=!1,eD=0,eR=!1,eK=!!_.marked_helpful_by_me,eM=S?[_.user]:[],eZ="",ez=new Date;"aggregatedcomment"===_.type?(eL=_.highlighted_by_pin_owner,eD=_.reaction_counts[1],eR=_.reaction_by_me>0,n=_?.media?.sticker,eM.push(..._.tagged_users),eZ=S?`${ek} ${eA??""}`:eA??"",ez=new Date(_.created_at)):(eD=_.like_count,eR=_.liked_by_me,t=_.images[0]||{},eZ=S?`${ek} ${_.details}`:_.details,ez=new Date(_.done_at));let eO=t?.originals,eB=n||eO,eN=(0,P.ZP)(),eV=(0,f.Z)(),{setIsMediaViewerOpen:eU,clientTrackingParams:eH,setIsCommentPopoverInteractionActive:eW}=(0,C.x4)(),{logContextEvent:eG}=(0,O.u)(),{isBot:e$}=(0,H.B)(),{showToast:eX}=(0,G.dI)(),eq=(0,l.I0)(),eY=(0,R.vs)(),eJ=(0,a.useRef)(null),{hasApplicableLawForCountry:eQ}=(0,Y.ZP)(),e0=!I||eQ,e1="aggregatedcomment"===_.type&&1===_.comment_tag,e2=e1&&S,e3=(0,v.Z)(),e6=(0,b.lJ)(eV,e3),{nativeEngagementsHiddenForUser:e4}=(0,q.G)(),{aggregatedCommentsHiddenForUser:e7,translateAggregatedComment:e5,updateAggregatedComment:e8}=(0,M.nf)(),e9=(0,o.Z)(),te="userdiditdata"===_.type,tt=(0,V.Z)(),tn=eP&&!1,ti=(0,u.zs)(ek,eI,eY,!S),ta={SHOW_TRANSLATION:eN._('Show translation', 'comment.translateButton.showTranslation', 'text for translation button when translation is available'),TRANSLATING:eN._('Translating...', 'comment.translateButton.translating', 'text for translation button while translating'),SHOW_ORIGINAL:eN._('Show original', 'comment.translateButton.showOriginal', 'text for translation button after translating')},tl=(0,a.useRef)(ta.SHOW_TRANSLATION),[tr,ts]=(0,s.Z)(),[to,td]=(0,a.useState)(!1),[tc,tu]=(0,a.useState)(!1),[tp,tm]=(0,a.useState)(!1),[tg,th]=(0,a.useState)(!1),[t_,ty]=(0,a.useState)(!1),[tf,tx]=(0,a.useState)(!1),[tv,tb]=(0,a.useState)(!1),[tk,tS]=(0,a.useState)(u.A9.NONE),tP=e=>()=>{ec?ec(_):tu(e)};(0,a.useEffect)(()=>{tn&&eG({event_type:10416,view_type:3,view_parameter:ey,component:"pin"===ea?13696:13697})},[eG,ea,tn,ey]),(0,a.useEffect)(()=>{ew>0&&!e$&&eq((0,W.U)("aggregatedcomment"===_.type?"AggregatedCommentReplyFeedResource":"DidItCommentsResource",{options:{isUnifiedComment:!0,objectId:eS,redux_normalize_feed:!0}}))},[_.type,eS]);let tw=ea.toLowerCase()===$.o.aggregatedComment.toLowerCase()||ea.toLowerCase()===$.n.didIt.toLowerCase(),tC=_.user.first_name||"",tI=async({contentMarkdown:e,force:t,tags:n})=>{let i,a;th(!0);let l=_.id;if(tw&&(i=ea.toLowerCase()===$.n.didIt,l=ee,a=_.id),l)try{await e9({force:t,fromUnifiedComment:!0,objectType:te||i?$.o.didIt:$.o.aggregatedComment,objectId:l,orbacSubjectId:e6,tags:n,text:e,replyToCommentId:a})}catch(t){let e=(0,B.Z)(t,"code");if([U.ky,U.LJ].includes(e??0)&&S)return tS(e===U.ky?u.A9.WARNING:u.A9.BLOCK),th(!1),!1}return Z&&Z(void 0),th(!1),!0},tT=async({contentMarkdown:e,force:t,tags:n})=>{tm(!0);try{te?await eq((0,J.IU)({id:_.id,details:e,pinId:el??"",image_signatures:"image_signatures"in _&&_.image_signatures?_.image_signatures:[]})):await e8({commentId:_.id,force:t,orbacSubjectId:e6,tags:n,text:e})}catch(e){if([U.ky,U.LJ].includes((0,B.Z)(e,"code")??0)&&S)return tS(e.code===U.ky?u.A9.WARNING:u.A9.BLOCK),tm(!1),!1}return tu(!1),tm(!1),!0},tj=()=>{S?(eW(!to),td(!to)):E&&E(_)},tA=e=>()=>{eW(e),td(e),tb(e),e||eG({component:14349,event_type:9408})},tF=()=>{tS(u.A9.NONE)},tE=e=>{e?ts():tr(),eU(!e),ty(!e)};(0,a.useEffect)(()=>{eT&&eF&&(ej(!eT),eX(({hideToast:e})=>(0,h.jsx)(N.Z,{onHide:e,text:eN._('Error - couldn\'t translate', 'comment.couldNotTranslate.toast', 'error toast that shows after unsuccessful translation'),type:"error"})))},[eT,eF]),eT?tl.current=_.translatedText?ta.SHOW_ORIGINAL:ta.TRANSLATING:tl.current=ta.SHOW_TRANSLATION;let tL=S?128:110,tD="aggregatedcomment"===_.type&&_.media?.sticker?.image_url&&(0,h.jsx)(i.xu,{height:tL,marginBottom:+!!S,marginTop:1,width:tL,children:_.media?.sticker?.image_url&&(0,h.jsx)(i.Ee,{alt:_.media?.sticker?.display_name??"",fit:"contain",naturalHeight:0,naturalWidth:0,src:_.media.sticker.image_url})});return(0,h.jsxs)(a.Fragment,{children:[(0,h.jsx)(i.xH,{accessibilityLabel:"Loading comment",show:tp}),!tc&&!tp&&(0,h.jsxs)(i.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,h.jsx)(i.xu,{marginEnd:2,children:(0,h.jsx)(r.rU,{to:`/${ek}/`,children:(0,h.jsx)(c.Z,{isQuestion:e2,name:ex||ek||"",size:em,src:eb??""})})}),(0,h.jsxs)(i.kC,{direction:"column",flex:"grow",justifyContent:"start",children:[(0,h.jsxs)(i.kC,{justifyContent:"between",children:[(0,h.jsx)(i.kC.Item,{minWidth:0,children:(0,h.jsxs)(i.kC,{dataTestId:"author-and-comment-container",direction:"column",children:[!S&&(0,h.jsxs)(i.kC,{alignItems:"center",gap:{row:1,column:0},children:[(0,h.jsx)(L.Z,{isFirstTaggedUserAuthor:!0,lineHeight:"14px",marginEnd:0,shouldShowFirstNameOnly:!0,size:"100",taggedUsers:[_.user],tags:(0,u.zs)(ek,[],eY),text:ek}),e1&&!ed&&(0,h.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{lineHeight:"14px"}},children:(0,h.jsx)(i.xv,{color:"subtle",size:"100",children:eN._('asked a question \uD83D\uDC40', 'comment.question.label', 'label on a comment that is a question')})}),ed&&(0,h.jsxs)(i.kC,{children:[(0,h.jsx)(i.xu,{alignItems:"center",display:"flex",marginEnd:1,children:(0,h.jsx)(i.JO,{accessibilityLabel:(0,u.yW)(eN),color:"recommendation",icon:"star",size:12})}),(0,h.jsx)(i.xv,{color:"recommendation",size:"100",weight:"bold",children:(0,u._q)(eN)})]}),(e1||ed)&&ez&&(0,h.jsx)(i.xv,{color:"subtle",size:"100",children:""}),ez&&(0,h.jsx)(i.xu,{"data-test-id":"comments-time-passed",children:(0,h.jsx)(i.xv,{color:"subtle",size:"100",children:tt(ez,!0)})})]}),te?(0,h.jsx)(D,{comment:_,commentTags:ti,handlePhotoTap:()=>tE(t_),isDesktop:S,previewPhoto:eO,taggedUsers:eM}):(0,h.jsx)(L.Z,{isFirstTaggedUserAuthor:!!S,lineHeight:S?void 0:"21px",marginBottom:S?void 0:"4px",shouldShowFirstNameOnly:!0,taggedUsers:eM,tags:ti,text:eZ}),tD,tn&&(0,h.jsx)(i.xu,{marginBottom:2,marginTop:2,children:(0,h.jsx)(i.iP,{onTap:()=>void(!eT&&!_.translatedText&&e5(_.id),eT||tl.current!==ta.SHOW_TRANSLATION?eT&&tl.current===ta.SHOW_ORIGINAL&&eG({event_type:10418,view_type:3,view_parameter:ey,component:"pin"===ea?13696:13697}):eG({event_type:10417,view_type:3,view_parameter:ey,component:"pin"===ea?13696:13697}),ej(!eT)),children:(0,h.jsx)(i.xv,{color:"subtle",size:"300",weight:"bold",children:tl.current})})})]})}),y===eS&&(0,h.jsx)(i.xu,{alignSelf:"center",color:"primary",height:8,minWidth:8,rounding:"pill"})]}),eL&&(0,h.jsx)(i.xu,{marginBottom:S?3:1.5,marginTop:S?4:-.5,children:(0,h.jsx)(i.xv,{size:"100",children:(0,K.nk)(eN._('Highlighted by @{{ closeupAttributionUsername }}', 'comment.highlighted.label', 'label on comment that has been highlighted by the Pin creator'),{closeupAttributionUsername:g})})}),e0&&(0,h.jsx)(i.xu,{alignItems:"center",display:"flex",height:S?25:"100%",justifyContent:"between",position:"relative",children:(0,h.jsxs)(i.kC,{alignItems:"center",gap:{row:S?5:4,column:0},children:[!I&&S&&(0,h.jsx)(i.xu,{"data-test-id":"comments-time-passed",children:(0,h.jsx)(i.xv,{color:"subtle",size:"200",children:tt(ez,!0)})}),!I&&(0,h.jsx)(i.xu,{"data-test-id":"comment-reply-button-container",children:(0,h.jsx)(i.iP,{onTap:()=>{Z&&Z(_,ee,ea)},children:(0,h.jsx)(i.xv,{color:S?"subtle":"default",size:S?"200":"100",weight:"bold",children:eN._('Reply', 'comment.button.reply', 'entry point to reply to comment')})})}),!I&&(0,h.jsx)(j,{commentId:eS,dismissReactionList:()=>{eo(void 0)},helpfulCount:eC,isDesktop:S,isLovedByMe:eR,isMarkedHelpfulByMe:eK,isReactionListOpen:e_===eS,isTry:te,lovedCount:eD,onReactionCountHover:()=>{eo(eS),eG({event_type:9906,component:"pin"===ea?13696:13697,view_type:3,view_parameter:ey})},onToggleHelpful:e=>()=>{eK!==e&&eu(eS,!e,te)()},onToggleLove:e=>()=>{eR!==e&&ep(eS,!e,te)()}}),!("id"in eV&&eV.id===ev&&e1)&&(S?(0,h.jsx)(i.xu,{ref:eJ,"data-test-id":"comment-more-options",children:(0,h.jsx)(i.hU,{accessibilityLabel:eN._('More', 'comment.button.more', 'see more options for comment'),icon:"ellipsis",iconColor:"gray",onClick:tj,size:"xs"})}):(0,h.jsx)(i.xu,{"data-test-id":"comment-more-options",children:(0,h.jsx)(i.iP,{onTap:tj,children:(0,h.jsx)(i.JO,{accessibilityLabel:eN._('More', 'comment.button.more', 'see more options for comment'),color:eY?"light":"dark",icon:"ellipsis",size:12})})}))]})})]})]}),S&&(0,h.jsxs)(a.Fragment,{children:[tc&&!(k||x)&&(0,h.jsx)(i.xu,{marginTop:3,children:(0,h.jsx)(A.Z,{clientTrackingParams:eH,commentWarningModalState:tk,dismissCommentWarningModal:tF,initialTags:_.tags,initialText:"aggregatedcomment"===_.type?_.text:_.details,isEditing:!0,objectType:$.o.aggregatedComment,onAddItem:tT,onCancelItem:tP(!1),postedPhoto:eB,showCommentComposer:!0,statusType:"textInFlightNested",viewParameter:ey})}),es===eS&&(0,h.jsx)(i.xu,{marginStart:12*!tw,marginTop:3,children:(0,h.jsx)(A.Z,{commentWarningModalState:tk,dismissCommentWarningModal:tF,initialTags:tw?[{offset:0,object_id:ef,length:tC.length,tag_type:1}]:[],initialText:tw?`${tC} `:"",isReplying:!0,objectType:$.o.aggregatedComment,onAddItem:tI,onCancelItem:()=>{Z&&Z()},showCommentComposer:!0,statusType:"textInFlightNested",viewParameter:ey})})]}),(ew>0||tg)&&(0,h.jsx)(i.xu,{marginStart:S?12:10,marginTop:S?4:3,children:(0,h.jsx)(z,{aggregatedPinDataId:p,closeupAttributionId:m,closeupAttributionUsername:g,featuredCommentId:y,inCommentsImprovedDropdownExp:x,inCommentsPopover:k,isDesktop:S,isLoading:tg,isORBACProfileManager:eg,isReadOnly:I,isVideo:T,openOverflowMenu:E,parentId:eS,parentType:_.type,pinId:el,pinnerId:eh,reactionListCommentId:e_,replyingToCommentId:es,showReactionListForComment:eo,storyPinDataId:er,toggleEditComposer:ec,toggleHelpful:eu,toggleLike:ep,toggleReplyComposer:Z,viewParameter:ey})}),S&&e0&&(0,h.jsx)(en,{aggregatedPinDataId:p,anchor:eJ.current,closeupAttributionId:m,comment:_,dismiss:e=>{td(!1),e||(eW(!1),eG({component:14349,event_type:10128}))},inCommentsPopover:!!k,isOpen:to,isReply:tw,onEdit:tP(!0),onShowBlockUserModal:tA(!0),parentId:ee,pinId:el}),tf&&(0,h.jsx)(w.Z,{children:(0,h.jsx)(d.N,{children:(0,h.jsx)(ei,{aggregatedPinDataId:p,didItDataId:eS,onClose:e=>()=>{tx(!e)},pinId:el??"",username:ek,users:[_.user]})})}),tv&&(0,h.jsx)(w.Z,{children:(0,h.jsx)(et,{firstName:ex??"",onBlockUser:()=>{eq((0,Q.Ge)({id:ef,orbacSubjectId:e6,blockSource:"comment",blockContext:eS,logContextEvent:eG})),e7(ef),e4(ef),eG({event_type:101,component:13712,element:87,view_type:220,aux_data:{creator_id:eV.isAuth?eV.id:null}}),eG({component:14349,event_type:9407}),tb(!1),eE(),eW(!1)},onClearModal:tA(!1)})}),!!eO&&t_&&(0,h.jsx)(F.Z,{onDismiss:()=>tE(t_),photo:eO})]})}var el=n(351607);function er(e){let t,n,{aggregatedPinDataId:a,comments:l,commentsDisabled:r,commentsScrollContainerRef:s,featuredCommentId:o,gapSize:d=6,id:c,inCommentsImprovedDropdownExp:u,inCommentsPopover:p,isDesktop:m,isLoading:g=!1,isReadOnly:_,openOverflowMenu:y,toggleReplyComposer:f,parentId:x,parentType:v,replyingToCommentId:b,showingCloseupCommentModule:k,toggleEditComposer:S,toggleHelpful:w,toggleLike:I,userAvatarSize:T,isORBACProfileManager:j,isVideo:A,storyPinDataId:F,pinId:E,closeupAttributionId:L,closeupAttributionUsername:D,pinnerId:R,showReactionListForComment:K,reactionListCommentId:M,viewParameter:Z}=e,z=(0,P.ZP)(),{closeupWithinMasonryEnabled:O}=(0,C.x4)(),B=!!k&&!1;return(p?t="12px":O&&(t="8px"),n=F?"story":A?"video":"pin",r)?(0,h.jsx)(i.xu,{alignSelf:"center","data-test-id":"comments-disabled-label",marginTop:O?2:void 0,width:"100%",children:(0,h.jsx)(i.xv,{align:m?"start":"center",color:"subtle",children:z._('Comments are turned off for this Pin', 'commentThread.disabledState.message', 'Comments are turned off or disabled for this pin')})}):l.length>0?(0,h.jsxs)(i.xu,{ref:s,dangerouslySetInlineStyle:{__style:{gap:`${4*d}px 0`,overscrollBehavior:p?"none":"auto",scrollbarGutter:O?"stable":void 0,paddingTop:t}},"data-test-id":"aggregated-comment-list",direction:"column",display:"flex",id:c,maxHeight:O&&!p?722:"100%",overflow:O?"auto":void 0,width:"100%",children:[l.map((e,t)=>(0,h.jsx)(el.Fw,{componentType:"pin"===v?13696:13697,impressionAuxFields:{commentId:e.id,pinId:E,pinOwnerUserId:L,pinType:n,parentId:x,parentType:v,commentType:"aggregatedComment"},impressionType:"Comment",loggingId:e.id,slotIndex:t,viewType:m?3:98,children:({impressionTrackerRef:n})=>{let r=t===l.length-1;return(0,h.jsx)(i.xu,{ref:n,dangerouslySetInlineStyle:{__style:{paddingBottom:p&&r?"24px":"0px"}},"data-test-id":"commentThread-comment",tabIndex:0,children:(0,h.jsx)(ea,{aggregatedPinDataId:a,closeupAttributionId:L,closeupAttributionUsername:D,comment:e,featuredCommentId:o,inCommentsImprovedDropdownExp:u,inCommentsPopover:p,isDesktop:m,isORBACProfileManager:j,isReadOnly:_,isVideo:A,openOverflowMenu:y,parentId:x,parentType:v,pinId:E,pinnerId:R,reactionListCommentId:M,replyingToCommentId:b,showReactionListForComment:K,showTopCommentHeading:B&&0===t,storyPinDataId:F,toggleEditComposer:S,toggleHelpful:w,toggleLike:I,toggleReplyComposer:f,userAvatarSize:T,viewParameter:Z})})}},e.id)),g&&(0,h.jsx)(i.xH,{accessibilityLabel:z._('Comments loading', ' - ', ' -- '),show:g})]}):(0,h.jsx)(i.xu,{alignSelf:"center",width:"100%",children:(0,h.jsx)(i.xH,{accessibilityLabel:z._('Comments loading', ' - ', ' -- '),show:g})})}},624895:function(e,t,n){n.d(t,{Z:()=>s});var i=n(667294),a=n(782259),l=n(785893);let r=(0,i.lazy)(()=>Promise.all([n.e("8907"),n.e("66979")]).then(n.bind(n,656379)));function s(e){return(0,l.jsx)(a.Z,{fallback:null,children:(0,l.jsx)(r,{...e})})}},54424:function(e,t,n){n.d(t,{Z:()=>o});var i=n(20256),a=n(762802),l=n(678213),r=n(525839),s=n(785893);function o({onDismiss:e,photo:t}){let n=(0,r.ZP)(),{height:o,url:d,width:c}=t,u=Math.min(o??936,936),p="100vh",m=n._('Close media viewer', 'comments.photo.mediaViewer.close', 'Close media viewer overlay');return(0,s.jsxs)(i.mh,{zIndex:l.b7,children:[(0,s.jsx)(i.iP,{mouseCursor:"zoomOut",onTap:e,children:(0,s.jsxs)(i.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, 0.8)"}},"data-test-id":"comment-media-viewer",display:"flex",height:p,justifyContent:"center",left:!0,position:"fixed",right:!0,top:!0,width:"100%",children:[(0,s.jsx)(i.xu,{left:!0,padding:5,position:"absolute",top:!0,children:(0,s.jsx)(i.hU,{accessibilityLabel:m,icon:"cancel",iconColor:"white",onClick:e,padding:3,size:"lg"})}),(0,s.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{margin:"0 84px"}},height:p,maxHeight:u,width:c,children:d&&(0,s.jsx)(i.Ee,{alt:d??"",fit:"contain",naturalHeight:o??1,naturalWidth:c??1,src:d},d)})]})}),(0,s.jsx)(a.Z,{onClose:e})]})}},545961:function(e,t,n){n.d(t,{Vb:()=>g,ZP:()=>_,mu:()=>h});var i=n(667294),a=n(20256),l=n(767439),r=n(296691),s=n(436873),o=n(54424),d=n(525839),c=n(15667),u=n(647709),p=n(601686),m=n(785893);let g=150,h=346;function _({canEnlargePhoto:e,containerWidth:t,isSelectedPhoto:n,previewPhoto:_,removeSelectedPhoto:y}){let f=(0,d.ZP)(),x=(0,u.HG)(),{isRTL:v}=(0,c.B)(),{setIsMediaViewerOpen:b}=(0,p.x4)(),[k,S]=(0,l.Z)(),[P,w]=(0,i.useState)(!1),[C,I]=(0,i.useState)(!1),[T,j]=(0,i.useState)(null),[A,F]=(0,i.useState)(r.WU),E=(0,s.Z)(_)?_?.url:_?.image_url;(0,i.useEffect)(()=>{(async()=>{E&&!(0,s.Z)(_)&&j(await new Promise((e,t)=>{let n=new Image;n.onload=()=>{e({width:n.width,height:n.height})},n.onerror=t,n.src=E}))})()},[E,_]);let L=(0,s.Z)(_)?_?.width:T?.width,D=(0,s.Z)(_)?_?.height:T?.height,R=L??0,K=D??0,M=E??"",Z=Math.min((t||(x?h:312))/R,(x?g:110)/K,1),z=f._('Remove photo', 'photoCommentPreview.removePhoto', 'Icon to remove the selected photo from the comment composer'),O=f._('Photo', 'photoCommentPreview.previewPhoto', 'Photo previewed as part of a comment'),B=e=>{e?S():k(),b(!e),w(!e)};return(0,m.jsxs)(a.xu,{height:Z*K,marginTop:3*!!n,position:"relative",width:Z*R,children:[(0,m.jsx)(a.iP,{disabled:!e,onMouseEnter:()=>I(!0),onMouseLeave:()=>I(!1),onTap:()=>B(P),children:(0,m.jsx)(a.zd,{rounding:2,children:M&&(0,m.jsx)(a.Ee,{alt:O,color:A,naturalHeight:K,naturalWidth:R,onLoad:()=>{F(r.o),n&&URL.revokeObjectURL(M)},src:M,children:e&&(0,m.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{cursor:"zoom-in",backgroundColor:`rgba(17, 17, 17, ${.4*!!C})`}},height:"100%",width:"100%"})},O)})}),n&&(0,m.jsx)(a.xu,{alignItems:"center",display:"flex",height:24,justifyContent:"center",left:v,marginEnd:-3,marginTop:-3,position:"absolute",right:!v,top:!0,width:24,children:(0,m.jsx)(a.hU,{accessibilityLabel:z,bgColor:"lightGray",icon:"cancel",onClick:y,size:"xs"})}),P&&(0,m.jsx)(o.Z,{onDismiss:()=>B(P),photo:_})]})}},162321:function(e,t,n){n.d(t,{Z:()=>r});var i=n(667294),a=n(20256),l=n(785893);let r=({inCommentFeedPreview:e,isFirstTaggedUserAuthor:t,lineHeight:n,marginBottom:r,marginEnd:s,shouldShowFirstNameOnly:o,size:d,tags:c,taggedUsers:u,text:p})=>{let m=(0,i.useRef)(null),g=(e,t)=>(0,l.jsx)(a.xv,{inline:!0,overflow:"normal",size:d,children:(0,l.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{lineHeight:n,overflowWrap:"anywhere",display:"inline"}},"data-test-id":"text-container",children:e})},t);return(0,l.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"pre-wrap",wordWrap:"break-word",marginBottom:r}},children:(()=>{if(!c.length||!u||c.length!==u.length)return g(p,"1");let i=0,r=[];return c.forEach((n,s)=>{let c=p.substring(i,n.offset);i=n.offset+n.length;let m=p.substring(n.offset,i);r=r.concat(g(c,`${s}a`)).concat(((n,i,r,s)=>{let c=o||0===r&&t?u[r].first_name||u[r].username[0]:i;return(0,l.jsx)(a.xv,{color:n,inline:!0,overflow:"normal",size:d,weight:"bold",children:e?c:(0,l.jsx)(a.rU,{display:"inlineBlock",href:`/${u[r].username}`,underline:"hover",children:c})},s)})(n.color,m,s,`${s}b`))}),r=r.concat(g(p.substring(i),"2")),(0,l.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{lineHeight:n}},display:o?"flex":void 0,marginEnd:s??3,position:"relative",children:(0,l.jsx)(a.xv,{ref:m,inline:!0,lineClamp:e?1:void 0,size:d,children:r})})})()})}},296691:function(e,t,n){n.d(t,{A9:()=>h,F1:()=>P,Ff:()=>S,G5:()=>w,G_:()=>k,Gu:()=>b,LH:()=>s,Rv:()=>u,TJ:()=>m,Ty:()=>l,WU:()=>y,XU:()=>c,_q:()=>j,i$:()=>f,iB:()=>r,je:()=>o,mi:()=>C,o:()=>_,pW:()=>g,qJ:()=>A,sp:()=>I,uC:()=>d,xA:()=>p,yQ:()=>T,yW:()=>v,zs:()=>x});var i=n(20256),a=n(473728);let l=new i.Ry(3),r=48,s=56,o="sm",d=500,c=1,u=Object.freeze({TOP:0,REPLY_TO_TRIED:1,REPLY_TO_AGGREGATED:2}),p=Object.freeze({PHOTO:0,STICKER:1,PIN:2}),m="comment_featured_ids",g="did_it_featured_ids",h={NONE:"none",WARNING:"warning",BLOCK:"block"},_="transparent",y="#efefef",f=(e,t)=>e?(0,a.Z)(t.ngettext('{{ count }} Comment', '{{ count }} Comments', e, 'closeup.commentThread.heading.commentCount', 'Comment count on a Pin. count: number of comments'),{count:e.toString()}):t._('No comments yet', 'closeup.commentThread.heading.noComments', 'Prompt for user to comment on Pin'),x=(e,t,n,i)=>{let a=t.map(t=>({...t,offset:(t.offset||0)+(i?0:e.length+1),color:"shopping"}));return i?a:[{offset:0,length:e.length,color:n?"light":"dark"},...a]},v=e=>e._('Insight heading icon', 'closeupCommentModuleHeading.icon', 'Icon displayed in the comment module heading'),b=e=>e._('No comments yet', 'emptyCommentThread.noComments.heading', 'Text shown when there are no comments yet'),k=e=>e._('Post', 'commentComposer.button.post', 'Post new comment'),S=e=>e._('posted a photo', 'comment.preview.text.photo', 'Comment preview text for an image that a user posted'),P=e=>e._('posted a sticker', 'comment.preview.text.sticker', 'Comment preview text for a sticker that a user posted'),w=e=>e._('Select an emoji', 'emojitray.button.accessibilityLabel', 'Accessibility label for emoji tray button'),C=e=>e._('Select a photo', 'photoModal.button.accessibilityLabel', 'Accessibility label for photo modal button'),I=e=>e._('Select a sticker', 'stickerTray.button.accessibilityLabel', 'Accessibility label for sticker tray button'),T=e=>e._('Text editor', 'EditorWithMentions.container', 'Tappable area for the editor container'),j=e=>e._('Top Comment', 'closeupCommentModuleHeading.heading.topComment', 'Top Comment heading for the comment module'),A=e=>[w(e),C(e),k(e),I(e),T(e)]},640848:function(e,t,n){n.d(t,{Z:()=>x});var i=n(581722),a=n(111923),l=n(296691),r=n(980787),s=n(657043),o=n(475498),d=n(821342),c=n(525839),u=n(2420),p=n(87853),m=n(448505),g=n(7872),h=n(105433),_=n(542092),y=n(611134),f=n(785893);function x(){let e=(0,i.I0)(),t=(0,a.Z)(),{updateAggregatedComment:n}=(0,h.nf)(),{logContextEvent:x}=(0,r.u)(),{showOneToast:v}=(0,p.dI)(),b=(0,d.Z)(),k=(0,m.Z)(),S=(0,g.lJ)(b,k),P=(0,c.ZP)();return{handleAddComment:async function(i,a,r,d,c,p,m,g,h,k){let{commentMedia:w,contentMarkdown:C,force:I,imageSignatures:T,tags:j}=i,A=!!k,F=!!h;if(!a)return!1;try{if(a){if(F)h.type===_.n.didIt?await e((0,y.IU)({id:h.id,details:C,pinId:r??"",image_signatures:"image_signatures"in h&&h.image_signatures?h.image_signatures:[]})):await n({commentId:h.id,force:I,orbacSubjectId:S,tags:j,text:C});else if(T.length){let t={aggregatedPinDataId:a,details:C,image_signatures:T,pin_id:r??"",username:b.isAuth&&b.username||"",fromUnifiedComment:!0};await e((0,y.DD)(t))}else if(A){let e=k?.parentType!==_.n.pin,n=e?k?.parentType===_.n.didIt:k?.type===_.n.didIt,i=e?k?.parentId||"":k?.id,a=n?_.o.didIt:_.o.aggregatedComment,l=e?k?.id:void 0;await t({force:I,fromUnifiedComment:!0,objectType:a,objectId:i,pinId:r,orbacSubjectId:S,replyToCommentId:l,tags:j,text:C})}else await t({commentMedia:w,force:I,fromUnifiedComment:!0,objectType:_.o.pin,objectId:a,pinId:r,tags:j,text:C,orbacSubjectId:S});x({event_type:7,clientTrackingParams:p,object_id_str:r,aux_data:{num_user_mention_tags:(j?JSON.parse(j):[]).length,...d?{creator_id:c,story_pin_data_id:d}:{}}})}}catch(e){return[u.ky,u.LJ].includes((0,s.Z)(e,"api_error_code")??0)?m((0,s.Z)(e,"api_error_code")===u.ky?l.A9.WARNING:l.A9.BLOCK):v(({hideToast:t})=>(0,f.jsx)(o.Z,{onHide:t,text:(0,s.Z)(e,"message_detail")||(0,s.Z)(e,"message")||P._('There was an issue posting your comment.', 'comment.post.errorMessage', 'error message for posting comment in toast'),type:"error"})),!1}return g(!1),!0}}}},419366:function(e,t,n){n.d(t,{Z:()=>r});var i=n(581722),a=n(105433),l=n(611134);function r(e){let t=(0,i.I0)(),{toggleAggregatedCommentLike:n,toggleAggregatedCommentHelpful:r}=(0,a.nf)();return{toggleCommentLike:(i,a,r)=>()=>{r?t((0,l.wH)({didItDataId:i,isLikedByMe:a,orbacSubjectId:e})):n({aggregatedCommentId:i,isLikedByMe:a,orbacSubjectId:e})},toggleCommentHelpful:(n,i,a)=>()=>{a?t((0,l.YH)({didItDataId:n,isMarkedHelpfulByMe:i,orbacSubjectId:e})):r({aggregatedCommentId:n,isMarkedHelpfulByMe:i,orbacSubjectId:e})}}}},436873:function(e,t,n){n.d(t,{Z:()=>i});let i=e=>e?.url!==void 0},607600:function(e,t,n){n.d(t,{Z:()=>r});var i=n(537347),a=n.n(i),l=n(603316);function r(e){if("undefined"==typeof window||!document.head)return(0,l.nP)("load_fonts.failure",{sampleRate:1,tags:{failure_reason:"window undefined"}}),Promise.reject(Error("Window is undefined or no head on the document. Unable to load fonts"));let{head:t}=document,n=[];return e.forEach(e=>{e.styles.forEach(i=>{let l=document.querySelector(`#${e.fontFamily??""}-${i.name}`);l||((l=document.createElement("style")).setAttribute("id",`${e.fontFamily??""}-${i.name}`),t.appendChild(l),e.format&&i.fontUrl&&l&&l.sheet&&l.sheet.insertRule(`
            @font-face {
              font-family: "${e.fontFamily??""}";
              font-style: "${i.fontStyle}";
              font-weight: "${i.fontWeight}";
              src: url("${i.fontUrl}") format("${e.format}");
            }
          `,0),n.push(new(a())(e.fontFamily,{style:i.fontStyle,weight:i.fontWeight}).load()))})}),Promise.all(n).then(()=>{Promise.resolve()}).catch(e=>{(0,l.nP)("load_fonts.failure",{sampleRate:1,tags:{failure_reason:"unsuccessful load"}}),Promise.reject(e)})}},356052:function(e,t,n){n.d(t,{Z:()=>a});var i=n(785893);let a=({color:e="#111"})=>(0,i.jsx)("svg",{"data-test-id":"conversation-reply",display:"block",fill:"none",height:"12",viewBox:"0 0 12 12",width:"12",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{d:"m0 9.99945c0 .55505.45 1.00005 1.005 1.00005s1.005-.45 1.005-1.00005c0-2.07 1.69-3.755 3.765-3.755h2.4l-1.57 1.565c-.39.39-.39 1.025 0 1.415s1.025.39 1.42 0l3.975-3.965-3.97-3.965c-.39-.389997-1.025-.389997-1.42 0-.39.39-.39 1.025 0 1.415l1.53 1.525h-2.365c-3.185 0-5.775 2.585-5.775 5.765z",fill:e})})},482694:function(e,t,n){n.d(t,{Z:()=>S});var i=n(667294),a=n(763387),l=n.n(a),r=n(20256);function s(e,t){return Math.max(0,((t<=0?0:Math.ceil(e/t))-1)*t)}function o(e,t,n){return n<=1?Math.max(0,Math.min(e,t-1)):Math.min(Math.max(0,Math.floor(e/n)*n),s(t,n))}var d=n(525839),c=n(785893);let u="12px";function p({currentIndex:e=0,itemCount:t,itemHeight:n,itemsPerPage:a,onIndexChange:l,showNavigationArrows:p=!1}){let m=(0,i.useRef)(null),g=(0,d.ZP)(),h=(0,i.useCallback)(()=>{if(a&&a>1){let n=Math.max(0,o(e,t,a)-a);l?.(n)}else{let t=Math.max(0,e-1);l?.(t)}},[e,t,a,l]),_=(0,i.useCallback)(()=>{if(a&&a>1){let n=o(e,t,a),i=Math.min(s(t,a),n+a);l?.(i)}else{let n=Math.min(t-1,e+1);l?.(n)}},[e,t,a,l]),{showPrevious:y,showNext:f}=(()=>{if(!p)return{showPrevious:!1,showNext:!1};if(a&&a>1){let n=o(e,t,a);return{showPrevious:n>0,showNext:n<s(t,a)}}return{showPrevious:e>0,showNext:e<t-1}})(),x=n?`${n/2-18}px`:"50%";return(0,c.jsxs)(r.xu,{ref:m,dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},left:!0,position:"absolute",right:!0,top:!0,zIndex:new r.Ry(10),children:[(0,c.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{left:u,marginBlockStart:x,pointerEvents:"auto"}},opacity:+!!y,position:"absolute",children:(0,c.jsx)(r.hU,{accessibilityLabel:g._('View Previous', 'CarouselOverlay.scrollButton.viewPrevious', 'Accessibility label for button to navigate to the previous item in the carousel'),bgColor:"white",icon:"arrow-back",onClick:h,size:"md"})}),(0,c.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{right:u,marginBlockStart:x,pointerEvents:"auto"}},opacity:+!!f,position:"absolute",children:(0,c.jsx)(r.hU,{accessibilityLabel:g._('View Next', 'CarouselOverlay.scrollButton.viewNext', 'Accessibility label for button to navigate to the next item in the carousel'),bgColor:"white",icon:"arrow-forward",onClick:_,size:"md"})})]})}var m=n(15667);let g=function({mode:e,showNavigationButtons:t=!1,showScrollMarkers:n=!1}){let{userAgent:{browserName:i,browserVersion:a}}=(0,m.B)(),l="Chrome"===i&&Number(a.split(".")[0])>=135;return"multi"===e?{enableCssScrollButtons:!1,enableCssScrollMarkers:!1,enableFallbackScrollButtons:t,enableFallbackScrollMarkers:n}:l?{enableCssScrollButtons:t,enableCssScrollMarkers:n,enableFallbackScrollButtons:!1,enableFallbackScrollMarkers:!1}:{enableCssScrollButtons:!1,enableCssScrollMarkers:!1,enableFallbackScrollButtons:t,enableFallbackScrollMarkers:n}};var h=n(341742),_=n(603316),y=n(461951);function f({index:e,isActive:t,onClick:n,label:i}){return(0,c.jsx)(r.xu,{height:8,width:8,children:(0,c.jsx)(r.iP,{accessibilityLabel:i||`Navigate to slide ${e+1}`,onTap:()=>n(e),rounding:"circle",children:(0,c.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:t?y.etl:y.zsO,transition:"background-color 0.2s ease"}},height:8,rounding:"circle",width:8})})},e)}function x({currentIndex:e,itemCount:t,itemLabels:n,itemsPerPage:a,mode:l,onNavigateToIndex:s}){let{enableCssScrollMarkers:d,enableFallbackScrollMarkers:u}=g({showScrollMarkers:!0,mode:l}),p=a?o(e,t,a):e,m=(0,i.useCallback)(e=>{s(e)},[s]),h=a?Math.ceil(t/a):t,_=a?a<=1?Math.max(0,Math.min(p,t-1)):Math.floor(o(p,t,a)/a):p;return h<=1?null:(0,c.jsx)(r.xu,{alignItems:"center",display:"flex",justifyContent:"center",paddingY:4,children:(0,c.jsxs)(r.xu,{dangerouslySetInlineStyle:{__style:{display:"grid",gridAutoColumns:"1rem",gridAutoFlow:"column",placeItems:"center"}},width:"fit-content",children:[d&&(0,c.jsx)(r.xu,{minHeight:8}),u&&[...Array(h).keys()].map(e=>{let t=a?e*a:e;return(0,c.jsx)(f,{index:t,isActive:e===_,label:n?.[t],onClick:m},e)})]})})}let v=e=>`
  --scroll-button-size: 36px;
  --scroll-button-offset: 1rem;

  &::scroll-button(*) {
    opacity: 0;
    pointer-events: auto;
    position: absolute;
    position-anchor: --${e};
    background-color: ${y.Wmm};
    border: none;
    border-radius: 12px;
    cursor: pointer;
    display: inline-block;
    margin-block-start: calc(var(--carousel-item-height) / 2 - var(--scroll-button-size) / 2);
    height: var(--scroll-button-size);
    line-height: 0;
    vertical-align: middle;
    width: var(--scroll-button-size);
    transition: opacity 50ms cubic-bezier(0, 0, 1, 1), transform 50ms cubic-bezier(0, 0, 1, 1);
  }

  /* Show scroll buttons when hovering on the parent <ul>. */
  &:hover::scroll-button(*) {
    opacity: 1;
    transition: opacity 100ms cubic-bezier(0, 0, 1, 1), transform 100ms cubic-bezier(0, 0, 1, 1);
  }


  &::scroll-button(inline-end) {
    content: url("data:image/svg+xml,%3Csvg aria-hidden='true' role='img' viewBox='0 0 24 24' width='16' height='16' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8.7.3 20.42 12 8.71 23.7l-1.42-1.4L17.6 12 7.29 1.7z' /%3E%3C/svg%3E");
    right: anchor(--${e} right);
    margin-inline-end: var(--scroll-button-offset);
    top: anchor(--${e} start);
  }

  &::scroll-button(inline-start) {
    content: url("data:image/svg+xml,%3Csvg aria-hidden='true' role='img' viewBox='0%200%2024%2024' width='16' height='16' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='m6.41%2012%2010.3-10.3L15.29.3%203.6%2012l11.7%2011.7%201.42-1.4z'/%3E%3C/svg%3E");
    left: anchor(--${e} left);
    margin-inline-start: var(--scroll-button-offset);
    top: anchor(--${e} start);
  }

  /* CSS specificity order matters: hover/focus  active  disabled (most specific last) */
  &::scroll-button(*):is(:hover, :focus-visible) {
    background-color: ${y.KtD};
    opacity: 1;
  }

  &::scroll-button(*):active {
    background-color: ${y.hWn};
    transform: scale(0.90);
  }

  &::scroll-button(*):disabled {
    background-color: ${y.ilB};
    opacity: 0;
    cursor: not-allowed;
    interactivity: inert;
  }

`,b=(e,t="multi",n=1)=>{let i="multi"===t;return`
  scroll-marker-group: after;

  &::scroll-marker-group {
    display: grid;
    grid-auto-columns: 1rem;
    grid-auto-flow: column;
    justify-content: center;
    margin-block-start: ${i?"16px":"-1.25rem"};
    position-anchor: --${e};
    position-area: bottom;
    ${i?"position: fixed; align-items: center;":"scroll-snap-type: y mandatory;"}
    transition: all 150ms ease-out;
    @media (prefers-reduced-motion: no-preference) {
      scroll-behavior: smooth;
    }
  }

  > li:nth-child(${n}n + 1)::scroll-marker {
    aspect-ratio: 1;
    border-radius: 50% ;
    background: ${i?y.zsO:"rgba(255, 255, 255, 0.6)"};
    content: ' ';
    width: 50%;
    box-shadow: ${i?"none":"0 1px 0px rgba(0, 0, 0, 0.1)"};
    animation-timeline: view(x);
    interactivity: auto;
    transition: all 150ms ease-out;
    place-self: center;
  }

  > li:nth-child(${n}n + 1)::scroll-marker:target-current {
    background: ${i?y.etl:y.Wmm};
  }
`};var k=n(369416);function S({mode:e,itemHeight:t,items:n,itemWidth:a,onIndexChange:s,renderItem:o,selectedIndex:d,showScrollMarkers:u,showNavigationButtons:m}){let{enableCssScrollMarkers:y,enableCssScrollButtons:f,enableFallbackScrollMarkers:S,enableFallbackScrollButtons:P}=g({mode:e,showScrollMarkers:u,showNavigationButtons:m}),[w,C]=(0,i.useState)(0),I=(0,i.useRef)(null),T=(e=>{let[t,n]=(0,i.useState)(1),a=(0,i.useRef)(null);return(0,h.Z)(()=>{let t=null;if(e.current){let i=()=>{a.current&&cancelAnimationFrame(a.current),a.current=requestAnimationFrame(()=>{(()=>{let t=e.current;if(t){let e=t.offsetWidth,i=t.querySelector("li");if(i){let t=i.offsetWidth;if(t>0&&e>0){let i=Math.max(1,Math.floor((e-32+8)/(t+8)));n(e=>e!==i?i:e)}}}})(),a.current=null})};i(),(t=new ResizeObserver(i)).observe(e.current)}return()=>{a.current&&cancelAnimationFrame(a.current),t&&t.disconnect()}}),t})(I),j=(0,r.JZ)(),{isInteractive:A,onKeyboardFocus:F,onKeyboardBlur:E,onMouseOver:L,onMouseOut:D}=function(){let[e,t]=(0,i.useState)(!1),[n,a]=(0,i.useState)(!1),l=(0,i.useCallback)(e=>{e.target.matches(":focus-visible")&&t(!0)},[]);return{keyboardFocused:e,hovered:n,isInteractive:e||n,onKeyboardFocus:l,onKeyboardBlur:(0,i.useCallback)(()=>{t(!1)},[]),onMouseOver:(0,i.useCallback)(()=>{a(!0)},[]),onMouseOut:(0,i.useCallback)(()=>{a(!1)},[])}}(),{setNavigationIntent:R}=function({scrollerRef:e,itemsLength:t,itemsPerPage:n,mode:a,focusedIndex:l,setFocusedIndex:r,onIndexChange:s}){let o=(0,i.useRef)([]),d=(0,i.useRef)(null),c=(0,i.useRef)(!0),u=(0,i.useRef)(null),p=(0,i.useRef)(-1),m=(0,i.useRef)(0),g=(0,i.useRef)(0),h=(0,i.useRef)(null),y=(0,i.useCallback)(e=>{let{direction:t}=getComputedStyle(e),{scrollLeft:n,scrollWidth:i,clientWidth:a}=e;return"rtl"!==t?n:n<0?-n:i-a-n},[]),f=(0,i.useCallback)(()=>{let t=e.current;if(!t||!o.current.length)return;let i=u.current,d=t.children.length;if(c.current||!i||i.scrollWidth!==t.scrollWidth||i.clientWidth!==t.clientWidth||i.childrenCount!==d||o.current.length!==d){let e=Array.from(t.children);o.current=e.map(e=>e.offsetLeft+e.offsetWidth/2),u.current={scrollWidth:t.scrollWidth,clientWidth:t.clientWidth,childrenCount:e.length},c.current=!1}let f=y(t),x=t.scrollWidth-t.clientWidth,v=f+t.clientWidth/2,b=o.current,k=0,S=1/0;b.forEach((e,t)=>{let n=Math.abs(e-v);n<S&&(S=n,k=t)});let P=k;if("multi"===a&&n>1){let e=Math.floor(k/n)*n,t=Math.max(0,Math.floor((b.length-1)/n)*n),i=Math.min(e,t),a=m.current;if(a!==i){let e=i>a?1:-1,t=(b[a+(e>0?n-1:0)]+b[i+(e>0?0:Math.min(n-1,b.length-i-1))])/2+e*(v>b[b.length-1]-24||v<b[0]+24?6:24),l=f-g.current;(!(e>0?v>=t:v<=t)||e>0&&l<-.5||e<0&&l>.5)&&(i=a)}(f/x>.98||x-f<=8)&&(i=t),m.current=P=i}let w=performance.now(),C=h.current,I=C&&w-C.timestamp<500;P===l||I||(p.current!==P&&((0,_.nP)("closeup.dweb.css_carousel.enabled.carousel_index_change",{sampleRate:1}),p.current=P),r(P),s?.(P)),C&&(P===C.targetIndex||w-C.timestamp>500)&&(h.current=null),g.current=f},[l,n,a,s,e,r,y]),x=(0,i.useCallback)(()=>{let e=performance.now(),t=h.current;t&&e-t.timestamp<500||(d.current&&cancelAnimationFrame(d.current),d.current=requestAnimationFrame(()=>{d.current=null,f()}))},[f]),v=(0,i.useCallback)(()=>{c.current=!0,x()},[x]);return(0,i.useLayoutEffect)(()=>{let t=e.current;if(!t)return;let n=Array.from(t.children);o.current=n.map(e=>e.offsetLeft+e.offsetWidth/2),u.current={scrollWidth:t.scrollWidth,clientWidth:t.clientWidth,childrenCount:n.length},c.current=!1;let i="undefined"!=typeof ResizeObserver?new ResizeObserver(v):null,a=new MutationObserver(v);return i&&i.observe(t),a.observe(t,{childList:!0}),t.addEventListener("scroll",x,{passive:!0}),window.addEventListener("resize",v),()=>{t.removeEventListener("scroll",x),window.removeEventListener("resize",v),a.disconnect(),i&&i.disconnect(),d.current&&(cancelAnimationFrame(d.current),d.current=null)}},[x,v,e]),(0,i.useLayoutEffect)(()=>{c.current=!0,x()},[t,n,x]),{setNavigationIntent:(0,i.useCallback)(e=>{h.current={targetIndex:e,timestamp:performance.now()}},[])}}({scrollerRef:I,itemsLength:n.length,itemsPerPage:T,mode:e,focusedIndex:w,setFocusedIndex:C,onIndexChange:s}),K=(0,i.useCallback)(e=>{let t=I.current;if(!t)return;let n=Array.from(t.children),i=Math.max(0,Math.min(e,n.length-1)),a=n[i];if(a&&"number"==typeof a.offsetLeft){let e=parseInt(getComputedStyle(t).paddingInlineStart,10)||0;t.scrollTo({left:a.offsetLeft-e,behavior:j?"auto":"smooth"})}},[j]),M=(0,i.useCallback)(e=>{R(e),K(e),C(e),s?.(e)},[s,K,R]);(0,i.useLayoutEffect)(()=>{void 0!==d&&d!==w&&n.length&&M(d)},[d,w,M,n.length]);let Z=(0,i.useCallback)(e=>()=>C(e),[]),z=(0,i.useCallback)(()=>C(-1),[]),O="single"===e,B=`carousel--mode-${e}`,N=O?`
  .${B} {
    anchor-name: --${B};
    container-type: inline-size scroll-state;
    counter-reset: item;
    display: grid;
    grid-auto-flow: column;
    grid-auto-columns: 100%;
    height: 100%;
    list-style-type: none;
    overscroll-behavior-x: contain;
    overflow-x: auto;
    scroll-behavior: smooth;
    scroll-snap-type: x mandatory;
    scrollbar-width: none;

    @media (hover) {
      &:not(:hover,
      :focus-within)::scroll-button(*) {
        opacity: 0;
      }
    }

    > li {
      container-type: scroll-state;
      scroll-snap-align: center;
      scroll-snap-stop: always;
      width: 100%;
      height: 100%;
      overflow: hidden;

      & img {
        height: 100%;
        width: 100%;
      }
    }

    &.scroll-markers {
      ${b(B,"single")}
    }

    &.scroll-buttons {
      ${v(B)}
    }
  }
`:`
  .${B} {
    --carousel-edge-padding: 16px;
    anchor-name: --${B};
    container-type: inline-size;
    counter-reset: item;
    display: grid;
    gap: 0.5rem;
    grid-auto-flow: column;
    grid-auto-columns: var(--carousel-item-width, min-content);
    list-style-type: none;
    margin-inline: auto;
    overscroll-behavior-x: contain;
    overflow-y: hidden;
    overflow-x: auto;
    padding-inline: var(--carousel-edge-padding);
    scroll-padding-inline-start: var(--carousel-edge-padding);
    scroll-padding-inline-end: var(--carousel-edge-padding);
    scroll-snap-type: x mandatory;
    scrollbar-width: none;

    @media (prefers-reduced-motion: no-preference) {
      scroll-behavior: smooth;
    }

    >li {
      block-size: auto;
      width: var(--carousel-item-width, auto);
      overflow: visible;
      display: flex;
      flex-direction: column;
      container-type: scroll-state;
      scroll-snap-align: start;
    }

    &.scroll-markers {
      ${b(B,"multi",T)}
    }

    &.scroll-buttons {
      ${v(B)}
    }

    /* Ensure page boundaries are mandatory stops so native buttons can't skip a page */
    > li:nth-child(${T}n + 1) {
      scroll-snap-stop: always;
    }
  } `,V={...t&&{"--carousel-item-height":`${t}px`},...a&&{"--carousel-item-width":`${a}px`}},U=l()(B,{"scroll-markers":y,"scroll-buttons":f});return(0,c.jsxs)(r.xu,{height:"100%",onBlur:E,onFocus:F,onMouseOut:D,onMouseOver:L,width:"100%",children:[(0,c.jsx)(k.Z,{unsafeCSS:N}),P&&(0,c.jsx)(p,{currentIndex:w,itemCount:n.length,itemHeight:t,itemsPerPage:T,onIndexChange:M,showNavigationArrows:A}),(0,c.jsx)("ul",{ref:I,className:U,style:V,children:n.map((e,t)=>(0,c.jsx)("li",{children:o({item:e,index:t,isFocused:w===t,onFocus:Z(t),onUnfocus:z})},e?.id??e?.entityId??t))}),(y||S)&&(0,c.jsx)(x,{currentIndex:w,itemCount:n.length,itemsPerPage:T,mode:e,onNavigateToIndex:M})]})}},628708:function(e,t,n){n.d(t,{Z:()=>p});var i=n(667294),a=n(980787),l=n(821342),r=n(510928),s=n(776777),o=n(785893);function d(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let c=(0,r.Z)()&&(0,r.Z)().debug_impression_log,u={Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},Story:{impressionType:"storyImpression",idType:"idStr",eventType:170},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061}};function p(e){class t extends i.Component{constructor(...e){super(...e),d(this,"currentNs",()=>1e6*Date.now()),d(this,"startTime",0),d(this,"debugPinImpressions",c&&"Pin"===this.props.impressionType&&this.props.viewer.isAuth&&this.props.viewer.isEmployee),d(this,"handleVisibilityChanged",e=>{let{componentType:t,contextLogData:n,impressionAuxFields:i,impressionType:a,loggingId:l,slotIndex:r,viewParameter:s,viewType:o,viewData:d,logContextEvent:c}=this.props;if(e)this.startTime=this.currentNs(),this.debugPinImpressions&&console.log(r+" started timer");else{let e=u[a],p=e.idType,m=this.currentNs(),g={endTime:m,[p]:l,slotIndex:r,time:this.startTime,renderDuration:m-this.startTime,...i};c({event_type:e.eventType,component:t,event_data:{[e.impressionType]:[g]},view_type:o,view_parameter:s,view_data:d,aux_data:{...n}}),this.debugPinImpressions&&console.log(r+" logged for "+(m-this.startTime)/1e9+"s")}})}render(){return(0,o.jsx)(s.Z,{onVisibilityChanged:this.handleVisibilityChanged,...this.props,children:(0,o.jsx)(e,{...this.props})})}}return function(e){let{logContextEvent:n}=(0,a.u)(),i=(0,l.Z)();return(0,o.jsx)(t,{...e,logContextEvent:n,viewer:i})}}},662490:function(e,t,n){function i(e,t){let n=e.split(t?",":":");return n.length>0?t?n[0]:n[1]:""}n.d(t,{Z:()=>i})},127753:function(e,t,n){n.d(t,{HM:()=>a,ZP:()=>r,oV:()=>l});var i=n(78187);let a=e=>[i.Mq.SKIN,i.Mq.HAIR,i.Mq.BODY].includes(e),l=e=>{switch(e){case i.Mq.SKIN:return i.ti.SKIN;case i.Mq.HAIR:return i.ti.HAIR;case i.Mq.BODY:return i.ti.BODY;default:return""}};function r(e,t){return e===i.ti.SKIN?t.skin_tone_filter_list.options:t.hair_pattern_filter_list}},27152:function(e,t,n){async function i(e){return new Promise((t,n)=>{let i=document.createElement("img");i.onerror=()=>n(Error(`Image failed to load with src ${e}`)),i.onload=()=>t(!0),i.src=e})}async function a(e){try{let t=await fetch(e,{method:"HEAD"}),n=(await t.blob()).type.startsWith("image/");{let t=await i(e);return n&&t}}catch(e){return!1}}n.d(t,{Z:()=>a})},503863:function(e,t,n){n.d(t,{T:()=>i,Z:()=>l});let{Provider:i,get:a}=(0,n(729434).Z)("NotificationContext"),l=a},753261:function(e,t,n){n.d(t,{G7:()=>r,Nl:()=>o,WE:()=>l,l6:()=>s});var i=n(654937),a=n(473728);function l(e,t,n,i,a,l){return e.isAuth&&!!t&&(n||i)&&!!a?.isLoaded&&!l}function r(e,t){return(0,a.Z)(t.ngettext('Last {{ count }} Day', 'Last {{ count }} Days', e, 'Previous {{ count }} days from current date', 'Previous {{ count }} days from current date'),{count:e})}function s(e,t){return(0,a.Z)(t.ngettext('Last {{ count }} Hour', 'Last {{ count }} Hours', e, 'analytics.utils', 'Previous {{ count }} hours from current time'),{count:e})}function o({i18n:e,isRealtime:t,humanizedTimeSinceLastUpdate:n,displayLifetime:l,numDays:r,selectedDateRange:s,locale:o}){let d=[];if(r){let t=l?(0,a.Z)(e.ngettext('Percent changes are compared to {{n}} day before {{startDate}} \u2013 {{endDate}}.', 'Percent changes are compared to {{n}} days before {{startDate}} \u2013 {{endDate}}.', r, 'pinstats.toplineMetrics.description', 'Label describing how deltas are calculated and when performance over time metrics are updated'),{n:r,startDate:(0,i.ZP)(o,s.startDate,i.kH.NUMERIC),endDate:(0,i.ZP)(o,s.endDate,i.kH.NUMERIC)}):(0,a.Z)(e.ngettext('Percent changes are compared to {{n}} day before the selected date range.', 'Percent changes are compared to {{n}} days before the selected date range.', r, 'pinstats.toplineMetrics.description', 'Label describing how deltas are calculated and when performance over time metrics are updated'),{n:r});d.push(t)}return t?d.push(e._('Metrics are updated in real-time.', 'pinstats.PinnerToplineMetrics.description', 'Label describing when lifetime of pin metrics are updated')):n&&d.push((0,a.Z)(e._('Metrics updated {{ timeSince }}.', 'analytics.header.disclaimer.metricsUpdated', 'Disclaimer describing when data was last updated. timeSince: time period since last update (ex: 1 day)'),{timeSince:n})),d.join(" ")}},774721:function(e,t,n){n.d(t,{Z:()=>r}),n(422578);var i,a=n(918920),l=n(415546);function r(e,t,r){let s=(0,l.Z)((void 0!==i||(i=n(251967)).hash&&"977a37f1bef6ecfbe279db65075e1520"!==i.hash&&console.error("The definition of 'usePinAnalyticsStatus_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),e);if(!t.isAuth||!t.isPartner||null==s)return!1;let{creatorAnalytics:o}=s,d=!!s.storyPinDataId,c=!!s.videos?.videoList,u=!(d||c)&&0!==Object.keys(s.aggregatedPinData?.creatorAnalytics?._30dRealtime||{}).length,p=s.board?.privacy===a.ZP.BoardPrivacy.PUBLIC,m=(s.board?.privacy===a.ZP.BoardPrivacy.PROTECTED||p)&&!s.isRepin&&[t.id,r].includes(s.pinner?.entityId??"");return u||0!==Object.keys(o?._30dRealtime||{}).length||t.isPartner&&m||d&&m}},411354:function(e,t,n){n.d(t,{Z:()=>s});var i=n(603316);let a=e=>{let t=new Image;t.loading="lazy",t.src=e;let{complete:n}=t;return t.src="",n},l=["736x","564x","474x","236x"],r=new RegExp(/\/(\d+x|originals)\//);function s(e){for(let t of l){let n=e.replace(r,`/${t}/`);if(a(n))return(0,i.nP)("web.closeup.cached_preview_image.found",{tags:{resolution:t}}),n}return(0,i.nP)("web.closeup.cached_preview_image.not_found"),null}},643875:function(e,t,n){n.d(t,{f:()=>i,Z:()=>a});let i=e=>{let{h:t,m:n}=e||{},i={hours:t||0,minutes:n||0};return void 0!==t||void 0!==n?{h:t,m:n,time:i,isoDuration:function({hours:e,minutes:t}){return`PT${e}H${t}`}(i)}:null},a=e=>{if(!e)return null;let{richMetadata:t}=e,{recipe:n}=t;return n&&n.name?{...e,recipe:{name:n.name,categorizedIngredients:n.categorized_ingredients,diets:n.diets,fromAggregatedData:n.from_aggregated_data,prepTime:i(n.cook_times?.prep),cookTime:i(n.cook_times?.cook),totalTime:i(n.cook_times?.total),servingSummary:n.servings_summary?.summary,serves:n.servings_summary?.serves,instructions:n.instructions}}:null}},665827:function(e,t,n){n.d(t,{Z:()=>i});let i=e=>{if(!e)return null;let{rich_metadata:t}=e.pin;return t?{...e,richMetadata:t}:null}},222555:function(e,t,n){n.d(t,{Z:()=>l});var i=n(254029),a=n(176465);let l=e=>{if(!e)return null;let{video:t}=(e=>{if(!e)return null;let{videos:t}=e.pin,{id:n,video_list:a={}}=t||{},{V_720P:l,V_HLSV4:r,V_HLSV3_MOBILE:s}=a,o=(0,i.V3)(r),d=(0,i.V3)(s),c=(0,i.V3)(l),u=c||o||d;return n&&u?{...e,video:{id:n,hasVideo:u,mp4:c||void 0,hls:o||void 0,hlsv3:d||void 0}}:null})((0,a.Z)(e))||{},{embed:n}=(e=>{if(!e)return null;let{embed:t}=e.pin,{type:n,src:i,subtype:a}=t||{};return i?{...e,embed:{type:n,src:i,subtype:a}}:null})((0,a.Z)(e))||{},l=!!(t&&(e=>{let{hlsv3:t,hls:n}=e,i=t||n;return!!(i&&(i.width??0)>(i.height??0))})(t))||!!(n&&n.src&&"pinstory"!==n.subtype&&"gif"!==n.type);return{...e,isWideVideo:l}}},607652:function(e,t,n){n.d(t,{Z:()=>d});var i,a=n(667294);n(167912);var l=n(415546),r=n(906498);let s=(void 0!==i||(i=n(673588)).hash&&"64a50a10a8f854ca82309453d98f41a7"!==i.hash&&console.error("The definition of 'useGetMainPinImage_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function o(e,t){return e&&t?`${e} ${t}w`:null}function d({pinKey:e}){let t=(0,l.Z)(s,e),{anyEnabled:n,group:i}=(0,r.Z)(),d=(0,a.useMemo)(()=>t?.imageSpec_736x||t?.imageSpec_564x||t?.imageSpec_orig||t?.imageSpec_474x||t?.imageSpec_236x,[t]),c=(0,a.useMemo)(()=>{if(!t)return;let e=[o(t.imageSpec_736x?.url,t.imageSpec_736x?.width),o(t.imageSpec_1200x?.url,t.imageSpec_1200x?.width),{enabled:null,enabled_564x:o(t.imageSpec_564x?.url,t.imageSpec_564x?.width),enabled_orig:o(t.imageSpec_orig?.url,t.imageSpec_orig?.width)}[i]].filter(Boolean);return e.length>1?e.join(", "):void 0},[t,i]),u=n?"100cqw":void 0;return(0,a.useMemo)(()=>({mainPinImage:{url:d?.url||"",height:d?.height||1,width:d?.width||1},srcSet:c,srcSizes:u}),[d,c,u])}},906498:function(e,t,n){n.d(t,{Z:()=>r});var i=n(274320),a=n(15667),l=n(647709);let r=({skipExpActivation:e=!1}={})=>{let{checkExperiment:t}=(0,i.r)(),n=(0,l.HG)(),{isAuthenticated:r}=(0,a.B)();return r&&n?t("closeup_dweb_adaptive_images",{dangerouslySkipActivation:e}):{anyEnabled:!1,group:""}}},887946:function(e,t,n){n.d(t,{Z:()=>o}),n(167912);var i,a=n(415546),l=n(453179),r=n(436475);let s=(void 0!==i||(i=n(498876)).hash&&"b694b913cbcf66451260d78ec78bcccd"!==i.hash&&console.error("The definition of 'usePinFormattedLink_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),o=e=>{let t=(0,a.Z)(s,e),n=(0,r.Z)(t);if(!t?.entityId)return null;let{trackedLink:i,link:o,method:d,utmLink:c}=t,u=(0,l.Zt)({trackedLink:i,link:o,utmLink:c});return u&&("catalog_bulk_create"===d||n)?decodeURIComponent(u):u}},436475:function(e,t,n){n.d(t,{Z:()=>r}),n(167912);var i,a=n(415546);let l=(void 0!==i||(i=n(445662)).hash&&"e1f413e0ba2f9031ea605d85baa14a4b"!==i.hash&&console.error("The definition of 'usePinHasProducts_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),r=e=>{let t=(0,a.Z)(l,e);if(!t?.richMetadata)return!1;let{products:n}=t.richMetadata??{};return!!Array.isArray(n)&&n.some(e=>!!e&&e.name)}},640785:function(e,t,n){n.d(t,{NC:()=>l,Rc:()=>s,WK:()=>d,X9:()=>a,b9:()=>i,f9:()=>o,gu:()=>r});let i="pin-builder-font-faces",a="system-font-faces",l="pin-builder-education-font-faces",r="licensed",s="system",o="brand",d=4},176465:function(e,t,n){n.d(t,{Z:()=>i});let i=e=>e?.pin?.id?e:null},698258:function(e,t,n){n.d(t,{Z:()=>c});var i=n(20256),a=n(525839),l=n(302148),r=n(697473),s=n(785893);function o(){return (0, a.ZP)()._('Free shipping', 'closeup.product.shipping', 'product shipping info')}function d({freeShippingPrice:e}){let t=(0,a.ZP)();return(0,l.nk)(t._('Free shipping with {{ shippingPrice }}+', 'closeup.product.shipping', 'product shipping info'),{shippingPrice:e}).join("")}function c({customStyles:e,showPrevDot:t,freeShippingPrice:n,freeShippingValue:a}){let l,c=t?[""]:[],{color:u="subtle",size:p="200"}=e||{};return Number.isFinite(a)?(0===a?l=(0,s.jsx)(o,{}):n&&(l=(0,s.jsx)(d,{freeShippingPrice:n})),l&&c.push((0,s.jsx)(i.kC,{direction:"row",children:l})),0===c.length)?null:(0,s.jsx)(i.xv,{color:u,size:p,children:(0,s.jsx)(r.Z,{color:u,items:c})}):null}},300540:function(e,t,n){n.d(t,{Z:()=>o});var i=n(667294),a=n(20256),l=n(67831),r=n(956077),s=n(785893);function o(e){let t=(0,l.A)();return(0,i.useEffect)(()=>{let n=document.getElementById(e.containerId),i=async(e,t)=>{let n=e.getBoundingClientRect(),i=t.getBoundingClientRect();return!!n&&!!i&&n.top>=i.top&&n.left>=i.left&&n.bottom<=i.bottom&&n.right<=i.right};if(null==n)t?.removeConstraint("thumbnailsLoaded"),(0,r.l7)("thumbnailsLoaded");else{let e=Array.from(n.querySelectorAll("*")).filter(e=>"IMG"===e.tagName&&i(e,n)),a=e.length;e.forEach(e=>{e.onload=void(a-=1),0===a&&(t?.markConstraintComplete("thumbnailsLoaded"),(0,r.Nx)("thumbnailsLoaded"))})}},[e.containerId,t]),(0,s.jsx)(a.xu,{id:"imageContainerPerf",children:e.children})}},291892:function(e,t,n){n.d(t,{Z:()=>r});var i=n(667294),a=n(284778),l=n(785893);function r({alt:e,children:t,color:n,elementTiming:r,fetchPriority:s,isActive:o=!1,naturalHeight:d,naturalWidth:c,onLoad:u,src:p,fit:m="none",srcSet:g,...h}){let _=(0,i.useRef)(null),y=(0,i.useRef)(null);return(0,i.useEffect)(()=>{if(p!==_.current||o&&o!==y.current){_.current=p??null;let e=document.querySelector(`img[src="${p}"]`)||null;e?.complete&&u()}y.current=o},[p,u,o]),(0,l.jsx)(a.Z,{...h,alt:e,color:n,elementTiming:r,fetchPriority:s,fit:m,naturalHeight:d,naturalWidth:c,onLoad:u,src:p,srcSet:g,children:t})}},231760:function(e,t,n){n.d(t,{B6:()=>c,IQ:()=>d,_m:()=>r});var i=n(658673);let{Provider:a,get:l}=(0,i.Z)({name:"related_feed",sampleRate:1}),r=a,{Provider:s,get:o}=(0,i.Z)({name:"related_feed_pageload",sampleRate:1}),d=s,c=e=>{let t=l(),n=o();return"related_feed"===e?t:"related_feed_pageload"===e?n:void 0}},716920:function(e,t,n){n.d(t,{T:()=>l,g:()=>r});let{Provider:i,get:a}=(0,n(658673).Z)({name:"story_pin_step",sampleRate:1}),l=i,r=a},287819:function(e,t,n){n.d(t,{Z:()=>a});var i=n(302148);function a({m:e,h:t,rm:n,rh:l},r,s=!1){return e&&(!t||l<=0)?s?(0,i.nk)(r._('{{mins}}min', 'closeup.makeRecipeTimeText.minutes', 'number showing the minutes to complete a recipe'),{mins:n.toString()}):(0,i.nk)(r.ngettext('{{mins}} minute', '{{mins}} minutes', n, 'number showing the minutes to complete a recipe', 'number showing the minutes to complete a recipe'),{mins:n.toString()}):t?s?(0,i.nk)(r._('{{hrs}}hr {{mins}}min', 'closeup.makeRecipeTimeText.hours', 'hrs: number showing the hours to complete a recipe, mins: number showing the minutes to complete a recipe'),{hrs:t.toString(),mins:e.toString()}):(0,i.nk)(r.ngettext('{{hrs}} hour', '{{hrs}} hours', l, 'number showing the hours to complete a recipe', 'number showing the hours to complete a recipe'),{hrs:l.toString()}):null}},63749:function(e,t,n){n.d(t,{Z:()=>r});var i=n(709311),a=n(302148),l=n(785893);function r({m:e,h:t,rm:n,rh:r},s){return e&&(!t||r<=0)?(0,a.nk)(s._('{{mins}}min', 'closeup.makeRecipeText.minutesLabel', 'Minutes label for Rich Pin Recipe'),{mins:(0,l.jsx)(i.Z,{maximumFractionDigits:2,value:n},"recipe-minutes")}):t?(0,a.nk)(s._('{{hrs}}hr', 'closeup.makeRecipeText.hoursLabel', 'Hours label for Rich Pin Recipe'),{hrs:(0,l.jsx)(i.Z,{maximumFractionDigits:2,value:r},"recipe-hours")}):null}},169330:function(e,t,n){n.d(t,{Z:()=>a});var i=n(302148);function a(e,t){return e<60?(0,i.nk)(t._('{{mins}}min', 'recipe.minutes', 'recipe in minutes. mins: recipe duration in minutes'),{mins:e}):(0,i.nk)(t._('{{hrs}}h {{mins}} min', 'recipe.time', 'recipe time. mins: recipe duration in minutes. hrs: recipe duration in hours'),{mins:e%60,hrs:Math.floor(e/60)})}},366291:function(e,t,n){n.d(t,{Z:()=>a});var i=n(886981);function a(e){return(0,i.Z)(function(e){let t;if(!e)return null;let n=e?.url;return Array.isArray(e?.params)?t=e?.params:Object.entries(t={...e?.params??{}}).forEach(([e,i])=>{n?.includes(`{${e}}`)&&(n=n?.replaceAll(`{${e}}`,String(i)),delete t[e])}),{name:"ApiResource",options:{url:n,data:t,...e?.method==="POST"?{postInsteadOfGet:!0}:{}},enabledRouteRefresh:e?.enabledRouteRefresh,headers:e?.headers,noCache:e?.noCache}}(e))}},254029:function(e,t,n){n.d(t,{QO:()=>o,U0:()=>l,V3:()=>r,cO:()=>u,dn:()=>d,fP:()=>c,zP:()=>s});var i=n(243099),a=n(941404);let l={FOLLOW_ACTION:"https://schema.org/FollowAction",LIKE_ACTION:"https://schema.org/LikeAction",SHARE_ACTION:"https://schema.org/ShareAction",WATCH_ACTION:"https://schema.org/WatchAction"},r=e=>{let{thumbnail:t,url:n,width:i,height:a,duration:l}=e||{};return t&&n&&i&&a&&{thumbnail:t,url:n,width:i,height:a,duration:l}||void 0},s=({isEligible:e,hasName:t,hasAggregateRating:n,hasOffers:i})=>{(0,a.My)("closeup_main_pin.leaf_snippet.is_product",{isEligible:e,hasName:t,hasAggregateRating:n,hasOffers:i})},o=(e,{userName:t,fullName:n})=>{let i=t||"";return{"@type":"Person",name:n||i,alternateName:i,url:e+"/"+i}};function d(e,t,n,a,l,r){n=n.trim();let s=(t=t.trim())||r||n||a;if(!e||!e.metatags)return{title:s,description:n||t||l};let{description:o=""}=e.metatags;return{title:s,description:(0,i.o)(o||"").trim()||t||l}}let c=(e,t,n)=>{let i=t;return n?{fallbackTitle:i="recipe"===e?n._('Pinterest Recipe', 'pin.closeup.leafsnippet.recipe', 'Default recipe title and description for crawlers'):"howto"===e?n._('Pinterest How To', 'pin.closeup.leafsnippet.howto', 'Default how to title and description for crawlers'):"video"===e?n._('Pinterest Video', 'pin.closeup.leafsnippet.video', 'Default video title and description for crawlers'):"product"===e?n._('Pinterest Product', 'pin.closeup.leafsnippet.product', 'Default product title and description for crawlers'):n._('Pin page', 'pin.closeup.leafsnippet.pin', 'Default pin title and description for crawlers'),fallbackDescription:i}:{fallbackTitle:i,fallbackDescription:i}},u=e=>{if(!e)return;let t=!!e.ratingCount||!!e.reviewCount,{ratingValue:n}=e;if(!t||!n||Number.isNaN(parseFloat(n)))return;let i=e.ratingCount||e.reviewCount;return{"@type":"AggregateRating",ratingValue:e.ratingValue,ratingCount:i,bestRating:5,worstRating:1}}},166282:function(e,t,n){n.d(t,{Z:()=>s});var i=n(281218);function a({scrollPosition:e,containerSize:t,contentSize:n,intendedDistance:i,extendToEdgeDistance:a=0}){let l=n-t,r=i;return r=Math.max(r=Math.min(r,l-e),-e),i>0&&l-(e+r)<=a?r=l-e:i<0&&e+r<=a&&(r=-e),r}let l={easingFunction:"ease-in-out",extendToEdgeDistanceX:0,extendToEdgeDistanceY:0,scrollSpeedPxPerMs:1.2,minScrollDuration:200},r={linear:e=>e,"ease-in":e=>e*e,"ease-out":e=>e*(2-e),"ease-in-out":e=>e<.5?2*e*e:-1+(4-2*e)*e};function s(e,t,n,o={}){let d={...l,...o},{scrollLeft:c,scrollTop:u,scrollWidth:p,scrollHeight:m,clientWidth:g,clientHeight:h}=e,_=a({scrollPosition:c,containerSize:g,contentSize:p,intendedDistance:t,extendToEdgeDistance:d.extendToEdgeDistanceX}),y=a({scrollPosition:u,containerSize:h,contentSize:m,intendedDistance:n,extendToEdgeDistance:d.extendToEdgeDistanceY}),f=Math.max(Math.abs(Math.floor(_/d.scrollSpeedPxPerMs)),Math.abs(Math.floor(y/d.scrollSpeedPxPerMs)));d.minScrollDuration&&(f=Math.max(f,d.minScrollDuration));let x=r[d.easingFunction]||r["ease-in-out"];return(0,i.Z)({window,duration:f,run:t=>{e.scrollLeft=c+_*x(t),e.scrollTop=u+y*x(t),1===t&&d.onAnimationComplete&&setTimeout(d.onAnimationComplete,0)}})}},389965:function(e,t,n){n.d(t,{Z:()=>eb});var i=n(667294),a=n(616550),l=n(20256),r=n(96413),s=n(592821),o=n(996434),d=n(581722),c=n(525839),u=n(611282),p=n(776777),m=n(169053),g=n(785893);let h=e=>{let t=(0,c.ZP)(),{sourceUrl:n,clientTrackingParams:i,linkText:a,displayUrl:r,image:s,pageId:o,canonicalUrl:p,pinId:h,onTouch:_,onClickThrough:y,isLoading:f}=e,x={story_pin_page_id:o,story_pin_data_id:(0,d.v9)(t=>e.pinId&&t.pins?.[e.pinId]?.story_pin_data_id),src_url:n,canonical_url:p},v=(0,g.jsxs)(l.xu,{alignItems:"center",borderStyle:"sm",display:"flex",overflow:"hidden",rounding:2,children:[(0,g.jsx)(l.xu,{alignItems:"center",color:f||s&&s.url?void 0:"secondary",dangerouslySetInlineStyle:{__style:{borderRight:"1px solid lightGray"}},display:"flex",flex:"none",height:80,justifyContent:"center",minWidth:80,width:80,children:f?(0,g.jsx)(l.xH,{accessibilityLabel:t._('Loading website', 'a11y for loading spinner', 'a11y for loading spinner'),show:!0}):s&&s.url?(0,g.jsx)(l.Ee,{alt:a,fit:"cover",naturalHeight:s.height??1,naturalWidth:s.width??1,src:s.url}):(0,g.jsx)(l.JO,{accessibilityLabel:t._('Default link block icon', 'Icon for default link blocks without an image', 'Icon for default link blocks without an image'),color:"subtle",icon:"link",size:35})}),(0,g.jsxs)(l.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap",textOverflow:"ellipsis"}},flex:"grow",overflow:"hidden",paddingX:5,children:[(0,g.jsx)(l.xv,{lineClamp:1,weight:"bold",children:a}),(0,g.jsx)(l.xv,{color:"shopping",size:"200",children:r})]})]}),b=(0,m.S6)()(h),k=(0,u.Z)({href:{pathname:n,state:{trackingParams:i}},target:"blank",clientTrackingParams:i,externalData:b?{pin:b&&{attributionSourceId:b.attribution_source_id,board:b.board&&{url:b.board.url},campaignId:b.campaign_id,entityId:b.id,isDownstreamPromotion:b.is_downstream_promotion,isPromoted:b.is_promoted,pinner:b.pinner&&{username:b.pinner.username},pinPromotionId:b.pin_promotion_id,promoter:b.promoter&&{entityId:b.promoter.id},storyPinDataId:b.story_pin_data_id,trackingParams:b.tracking_params,advertiserId:b.advertiser_id}}:void 0});return _?(0,g.jsx)(l.iP,{onTap:_,rounding:2,children:v}):(0,g.jsx)(l.Tg,{href:n,onTap:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),y&&y({auxData:x}),k({event:e})},rel:"nofollow",rounding:2,target:"blank",children:v})},_=e=>(0,g.jsx)(p.Z,{...e,children:(0,g.jsx)(h,{...e})});var y=n(980787),f=n(123317);let x=(0,n(78762).Z)(()=>n.e("15564").then(n.bind(n,125734)),void 0,e=>125734,"app-common-react-components-Activities-Utils-Linkify",e=>["15564"]),v=({block:e,clientTrackingParams:t,pageId:n,pinId:i,onClickThrough:a})=>{let{logContextEvent:r}=(0,y.u)();switch(e.type){case f.h8.LINK:let{canonical_url:s,image:o,normalized_url:d,src_url:c,text:u=""}=e,p=o?.images?.["345x"];if(o&&c&&d&&s)return(0,g.jsx)(l.xu,{marginTop:5,children:(0,g.jsx)(_,{canonicalUrl:s,clientTrackingParams:t,displayUrl:d,image:p,linkText:u,onClickThrough:a,onVisibilityChanged:e=>{e&&r({event_type:120,view_type:3,view_parameter:157,component:228,element:11157,object_id_str:i,aux_data:{story_pin_page_id:n,srcUrl:c,canonicalUrl:s}})},pageId:n,pinId:i,sourceUrl:c})});return null;case f.h8.HEADING:{let{text:t=""}=e;return(0,g.jsx)(l.xu,{marginBottom:4,paddingX:2,children:(0,g.jsx)(l.X6,{accessibilityLevel:2,overflow:"normal",size:"600",children:t})})}case f.h8.PARAGRAPH:{let{text:t=""}=e;return(0,g.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"pre-line"}},paddingX:2,children:(0,g.jsx)(l.xv,{children:(0,g.jsxs)(x,{children:[" ",t," "]})})})}default:return null}};var b=n(369416);let k=`
@media (min-height: 0) {
  .StoryPinText {
    padding: 15px;
  }
  .StoryPinText span {
    font-size: 12px;
  }
  .StoryPinText h2 {
    font-size: 18px;
  }
}

@media (min-height: 600px) {
  .StoryPinText {
    padding: 2.5vh;
  }
  .StoryPinText span {
    font-size: 2vh;
  }
  .StoryPinText h2 {
    font-size: 3vh;
  }
}

@media (min-height: 800px) {
  .StoryPinText {
    padding: 20px;
  }
  .StoryPinText span {
    font-size: 16px;
  }
  .StoryPinText h2 {
    font-size: 24px;
  }
}
`,S=e=>{let{blocks:t,clientTrackingParams:n,pageId:a,pinId:l,onClickThrough:r}=e;return(0,g.jsxs)(i.Fragment,{children:[(0,g.jsx)(b.Z,{unsafeCSS:k}),(0,g.jsx)("div",{className:"StoryPinText",children:t.filter(e=>e).map((e,t)=>(0,g.jsx)(v,{block:e,clientTrackingParams:n,onClickThrough:r,pageId:a,pinId:l},t))})]})};var P=n(179639);let w=s._B*f.ap,C=`
.StoryPinTextDrawer {
  background: #fff;
  border-top-left-radius: 32px;
  border-top-right-radius: 32px;
  bottom: 0;
  box-shadow: rgba(0, 0, 0, 0.1) 0 1px 20px 0;
  box-sizing: border-box;

  height: auto;
  max-height: 15%;
  opacity: 0.625;
  position: absolute;
  transition: max-height 0.15s ease-in, opacity 0.15s ease-in;
  width: 100%;
}

.StoryPinTextDrawer:hover {
  max-height: 70%;
  opacity: 1;
  overflow: scroll;
}
`;function I(e){let t=(0,c.ZP)(),{activePageIndex:n,clientTrackingParams:a,hideText:r,isActive:o,isCoverPage:d,muteVideos:u,onClickThrough:p,page:{image_adjusted:m,image:h,blocks:_,video:y,id:f},pageIndex:x,pageWidth:v,pin:k,pinId:I}=e,{images:T={}}=m||h||{},j=T["750x"],{video_list:A={}}=y||{},F=A.V_HLSV3_MOBILE||A.V_720P;if(!j&&!F)return null;let E=v/s._B;return(0,g.jsxs)(i.Fragment,{children:[!!y&&!!F&&(0,g.jsx)(P.Z,{activePageIndex:n,blockHeight:w*E,blockWidth:s._B*E,isPlaying:o,muted:u,pageIndex:x,pin:k,pinId:I,video:y}),j&&j.url&&!F&&(0,g.jsx)(l.Ee,{alt:function(e){let t="";for(let n of e.blocks??[])[1,0].includes(n.block_type)&&(t=n.text?n.text:"");return t??""}(e.page)||t._('Story pin image', 'Alt text for story pin image', 'Alt text for story pin image'),fit:d?"cover":"contain",naturalHeight:j.height??1,naturalWidth:j.width??1,src:j.url}),_&&_.length>0&&!r&&(0,g.jsxs)(i.Fragment,{children:[(0,g.jsx)(b.Z,{unsafeCSS:C}),(0,g.jsx)("div",{className:"StoryPinTextDrawer",children:(0,g.jsx)(S,{blocks:_,clientTrackingParams:a,onClickThrough:p,pageId:f,pinId:I})})]})]})}let T=e=>{let{page:{image_adjusted:t,blocks:n}}=e,{images:a={}}=t||{},r=a["750x"];if(!r)return null;let{width:s,height:o}=r;return(0,g.jsx)(i.Fragment,{children:r&&r.url&&(0,g.jsx)(l.Ee,{alt:(n??[]).map(e=>e.text||"").join(),fit:"contain",naturalHeight:o??1,naturalWidth:s??1,src:r.url})})};var j=n(607600),A=n(390843),F=n(886981),E=n(885003),L=n(123998),D=n(611499),R=n(230543);function K({children:e,clientTrackingParams:t,closeupStoryPinViewability:n,pin:i,productPins:a,viewParameter:l,viewType:r}){let{previous:s,forward:d}=(0,A.ou)(),c=0===s.length&&0===d.length,u=(0,R.t)();return(0,g.jsx)(E.o,{closeupPaneWidth:D.Gg,headerHeight:u,isLandingPage:c,loadFonts:j.Z,productPins:a,renderStoryPinMediaLayout:({activePageIndex:e,hideText:n,isActive:a,isCoverPage:l,muteVideos:r,onClickThrough:s,page:o,pageIndex:d,pageWidth:c,pinId:u})=>(0,g.jsx)(I,{activePageIndex:e,clientTrackingParams:t,hideText:n,isActive:a,isCoverPage:l,muteVideos:r,onClickThrough:s,page:o,pageIndex:d,pageWidth:c,pin:i,pinId:u}),renderStoryPinPage:({activePageIndex:e,customEndCard:a,fontsLoaded:s,isActive:d,muteVideos:c,onEnded:u,onFlyoutOpen:p,onUpdateVideoInfo:m,page:h,pageAspectRatio:_,pageHeight:y,pageWidth:f,ownerId:x,pinId:v,productPins:b,shouldLogTimeSpent:k,stillLoading:S,videoPinProgress:P})=>(0,g.jsx)(o.Z,{activePageIndex:e,clientTrackingParams:t,closeupStoryPinViewability:n,customEndCard:a,fontsLoaded:s,isActive:d,muteVideos:c,onEnded:u,onFlyoutOpen:p,onUpdateVideoInfo:m,ownerId:x,page:h,pageAspectRatio:_,pageHeight:y,pageIndex:e,pageWidth:f,pin:i,pinId:v,productPins:b,shouldLogTimeSpent:k,stillLoading:S,videoPinProgress:P,viewParameter:l,viewType:r}),renderStoryPinSplitLayout:({page:e})=>(0,g.jsx)(T,{page:e}),renderStoryPinText:({blocks:e,onClickThrough:n,pageId:i,pinId:a})=>(0,g.jsx)(S,{blocks:e,clientTrackingParams:t,onClickThrough:n,pageId:i,pinId:a}),children:e})}function M({clientTrackingParams:e,children:t,isInStream:n,viewType:i,viewParameter:a}){return n?t:(0,g.jsx)(L.Z,{clientTrackingParams:e,component:85,view:i,viewParameter:a,children:t})}function Z({children:e,pin:t}){return e({productPins:(0,F.Z)({name:"StoryPinTaggedProductsResource",options:{id:t.id},noCache:!0}).data||[]})}function z({children:e,clientTrackingParams:t,closeupStoryPinViewability:n,pin:i,isInStream:a=!1,viewType:l,viewParameter:r}){let s=!!i.story_pin_data?.has_product_pins,o=({productPins:a})=>(0,g.jsx)(K,{clientTrackingParams:t,closeupStoryPinViewability:n,pin:i,productPins:a,viewParameter:r,viewType:l,children:e});return(0,g.jsx)(M,{clientTrackingParams:t,isInStream:a,viewParameter:r,viewType:l,children:s?(0,g.jsx)(Z,{pin:i,children:o}):o({productPins:[]})})}var O=n(521009),B=n(642407),N=n(355940),V=n(115247),U=n(453179),H=n(728994),W=n(776250),G=n(67831),$=n(716920),X=n(956077),q=n(821806),Y=n(15667),J=n(572227);function Q({appConfig:e}){let t=(0,c.ZP)(),n=(0,J.Z)(),{isRTL:a}=(0,Y.B)();return(0,g.jsx)(i.Fragment,{children:(0,g.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{marginTop:16}},"data-test-id":"back-button",left:!a,paddingX:4,position:"absolute",right:a,top:!0,children:"authDesktop"===e.type&&(0,g.jsx)(l.hU,{accessibilityLabel:t._('Back button', 'storyPin.closeup.back', 'Button label to navigate to previous page'),bgColor:"transparent",icon:"directional-arrow-left",iconColor:"darkGray",onClick:()=>{n({action:"click",item:"back-button"}),e.onNavigateBack()},size:"lg"})})})}var ee=n(281106),et=n(461413),en=n(181663),ei=n(445698),ea=n(724084),el=n(543561),er=n(341742),es=n(239728),eo=n(601686),ed=n(458460),ec=n(620427);let eu=(0,i.lazy)(()=>n.e("65443").then(n.bind(n,850447))),ep=(0,i.lazy)(()=>Promise.resolve().then(n.bind(n,71157))),em=(0,i.lazy)(()=>n.e("32560").then(n.bind(n,817631))),eg=(0,i.lazy)(()=>Promise.all([n.e("25418"),n.e("6245")]).then(n.bind(n,377733))),eh=(0,i.lazy)(()=>Promise.resolve().then(n.bind(n,704300))),e_={backgroundImage:"linear-gradient(to bottom, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",pointerEvents:"none",borderRadius:"32px 32px 0 0"},ey={backgroundImage:"linear-gradient(to top, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",pointerEvents:"none",borderRadius:"0 0 32px 32px",bottom:0},ef={backgroundImage:"linear-gradient(to bottom, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",borderRadius:"32px 32px 0 0",paddingTop:"30px",top:0},ex=[5,6,2];function ev({appConfig:e,clientTrackingParams:t,isInFocus:n,isInStream:a=!1,isStreamMuted:o,isStreamPanelOpen:d=!0,pin:u,storyPinData:p,onIdeaPinCloseupCommentClick:m,setStreamIsMuted:h,streamItemIndex:_,togglePanel:y,variant:x,viewType:v=3,viewParameterType:b,onTogglePanel:k}){let S,P=(0,E.c)(),{peekCloseupEnabled:w,viewportSize:C}=(0,eo.x4)(),I=(0,c.ZP)(),T=(0,O.Z)(),j=(0,$.g)(),A=(0,G.A)(),{setIdeaPinActivePage:F,setIdeaPinDynamicWidth:L}=(0,ed.Ut)(),{activePage:D}=(0,ed.H8)(),{clearSeekTime:R}=(0,ea.RC)(),{seekTimes:K}=(0,ea.Hx)(),{closeupPaneWidth:M,headerHeight:Z,isLandingPage:z,renderStoryPinMediaLayout:V,renderStoryPinPage:Y,renderStoryPinSplitLayout:J,renderStoryPinText:ec,productPins:ev}=P||{},{id:eb}=u,ek=K&&K[u.id],eS=!!p?.is_deleted,{pages:eP=[],metadata:ew={}}=p||{},{canvas_aspect_ratio:eC,version:eI}=ew,eT=eC??f.ap,[ej,eA]=(0,i.useState)(0),eF=(0,i.useRef)(0),eE=(0,i.useRef)(null),[eL,eD]=(0,i.useState)("closeup"===x&&n),[eR,eK]=(0,i.useState)(375),eM="calc(100% - 32px)",eZ=(0,i.useRef)(null),[ez,eO]=(0,i.useState)(!1),[eB,eN]=(0,i.useState)(!1),[eV,eU]=(0,i.useState)(!0);(0,i.useEffect)(()=>{k&&k(eV)},[eV,k]),(0,i.useEffect)(()=>{eU(d)},[d]);let{should_mute:eH=!0,music_attributions:eW=[]}=eP[ej],[eG,e$]=(0,i.useState)(z||eH),eX=void 0!==h?h:e$,eq=void 0!==o?o:eG;(0,i.useEffect)(()=>{eH&&eX(!0)},[eH,eX]);let eY=eP.filter(e=>!ex.includes(e.layout)),eJ=eY.length,eQ=eY[ej],e0=b||(0,W.Z)({hasPin:!!u,hasPinRichMetadata:!!u.rich_metadata,hasPinRichMetadataProducts:!!u.rich_metadata?.products,hasPinRichMetadataArticle:!!u.rich_metadata?.article,hasPinRichMetadataRecipe:!!u.rich_metadata?.recipe,hasPinStoryPinData:!!u.story_pin_data}),e1=Z+64,{getNormalizedPinImage:e2}=(0,H.Z)({pinKey:{type:"deprecated",data:u},maxWidth:B.Wm}),e3="closeup"===x,e6=()=>{if("undefined"!=typeof window){let e=window.innerWidth-(eV?M:0)-216;if(e3)eK(function({availableWidth:e,pageAspectRatio:t,unavailableHeight:n,windowInnerHeight:i}){let a=i-n,l=Math.min(Math.max(650,Math.min((i-n)*t,e)),1e3);return l/t>=a&&(l=a*t),l}({availableWidth:e,pageAspectRatio:eT,unavailableHeight:e1,windowInnerHeight:window.innerHeight}));else{let{width:e}=e2();eK(e),L(e)}}};(0,er.Z)(()=>(window.addEventListener("resize",e6),e6(),()=>{window.removeEventListener("resize",e6)}));let[e4,e7]=(0,i.useState)(!1),[e5,e8]=(0,i.useState)(null),[e9,te]=(0,i.useState)(!1);(0,i.useEffect)(()=>{!e9&&n&&(T({event_type:7588,view_type:v,view_parameter:e0,component:13801,object_id_str:eb,aux_data:{..."number"==typeof _?{grid_index:_}:{}}}),te(!0))},[e9,n,T,eb,v,e0,_]);let tt=(0,i.useCallback)(e=>{let{blocks:t}=eP[e]||{},i=t?.find(e=>3===e.block_type);eZ.current&&eZ.current instanceof el.B7&&(eZ.current.clear(),eZ.current=null),!i&&n&&(eZ.current=new el.B7(e=>{e8({currentTime:e<1?e:1,duration:1})},()=>{let t="closeup"===x?e:D;t<eJ-1?(eZ.current&&eZ.current instanceof el.B7&&(eZ.current.clear(),eZ.current=null),ta(t+1)):(eO(!0),eD(!1))},U.oN))},[n,eJ,eP,D,x]),tn=e=>{e8({currentTime:0,duration:1}),tt(e)};(0,i.useEffect)(()=>{eF.current=ej},[ej]),(0,i.useEffect)(()=>{eE.current=eL},[eL]),(0,er.Z)(()=>(tn(ej),()=>{eZ.current&&eZ.current instanceof el.B7&&eE.current&&eZ.current.clear()}));let ti=e=>{A&&(A.abort("startNewPwt"),(0,X.sX)("startStoryPinStepPwt")),j&&(j.abort("startNewPwt"),j.start(),j.addBinaryAnnotation("page.current.index",e,"I16"),j.addBinaryAnnotation("page.count",eP.length,"I16"),j.addBinaryAnnotation("view.type",v,"I32"),j.addBinaryAnnotation("view.parameter",e0,"I32"))};(0,er.Z)(()=>{A&&(A.addBinaryAnnotation("page.current.index",ej,"I16"),A.addBinaryAnnotation("page.count",eP.length,"I16"),A.addBinaryAnnotation("view.type",v,"I32"),A.addBinaryAnnotation("view.parameter",e0,"I32")),(0,X.rt)("page.current.index",ej,"I16"),(0,X.rt)("page.count",eP.length,"I16"),(0,X.rt)("view.type",v,"I32"),(0,X.rt)("view.parameter",e0,"I32")});let ta=e=>{eL||eD(!0),ez&&eO(!1),tn(e),e!==ej&&R(),eA(e),F(e),ti(e)};(0,i.useEffect)(()=>{if(ez&&eO(!1),eZ.current&&ek){let e=eZ.current;e.pause(),e.remaining=U.oN-ek*es.gJ,e8({currentTime:ek/U.P6,duration:1})}},[ek]),(0,i.useEffect)(()=>{F(D)},[F,D]),(0,i.useEffect)(()=>{"related-products"===x&&(eA(D),ta(D))},[D,x]);let tl=()=>ez?13799:0===ej?227:228,tr=()=>{ej<eJ-1&&(ta(ej+1),T({event_type:101,view_type:v,view_parameter:e0,component:tl(),element:12261,object_id_str:eb}))},ts=e=>{let{keyCode:t,target:n}=e,i=!!n&&"isContentEditable"in n&&n.isContentEditable||!!n&&"contentEditable"in n&&"true"===n.contentEditable;37!==t||i?39!==t||i||tr():ej===eJ-1&&ez?(ta(ej),T({event_type:101,view_type:v,view_parameter:e0,component:tl(),element:12260,object_id_str:eb})):ej>0&&(ta(ej-1),T({event_type:101,view_type:v,view_parameter:e0,component:tl(),element:12260,object_id_str:eb}))};(0,i.useEffect)(()=>(document.addEventListener("keydown",ts),()=>document.removeEventListener("keydown",ts)),[ej]);let{fontsLoaded:to,mediaDataReceived:td}=(0,ei.tq)({hasPin:!!u,pages:eP}),tc=eI?(0,el.n4)(eI,"0.8.0"):null,tu=null!=tc&&tc>=0,tp=e=>{e===eJ-1&&(eO(!0),eD(!1),F(0)),e===ej&&tr()},tm=e=>{e8({currentTime:e?.currentTime??0,duration:e?.duration??1})},tg=()=>{eN(!0),eD(!1),eZ.current&&!eZ.current.paused&&eZ.current.pause()},th=t=>eP[t]?tu?Y({activePageIndex:ej,fontsLoaded:to,customEndCard:!0,isActive:t===ej&&eL,muteVideos:eq,onChangeMuteVideo:eX,onEnded:tp,onFlyoutOpen:tg,videoPinProgress:ej===t?e5:void 0,onUpdateVideoInfo:tm,ownerId:u.native_creator?.id??"",page:eP[t],pageAspectRatio:eT,pageIndex:t,pageHeight:eR/eT,pageWidth:eR,pinId:u.id,productPins:ev,shouldLogTimeSpent:n,stillLoading:!td}):(t=>{let n=0===t.layout;switch(t.layout){case 0:case 1:return V({activePageIndex:ej,hideText:n,isActive:!0,isCoverPage:n,muteVideos:eq,onClickThrough:e.onClickThrough,page:t,pageIndex:ej,pageWidth:eR,pinId:eb});case 4:return t.blocks.length>0&&ec({blocks:t.blocks,pageId:`text-${ej}`,page:t,pinId:eb,onClickThrough:e.onClickThrough});case 3:return J({page:t});default:return null}})(eQ):null,t_=()=>{eD(!1),eZ.current&&eZ.current.pause(),T({event_type:9324,view_type:v,view_parameter:e0,component:tl(),object_id_str:eb,aux_data:{story_pin_page_id:ej}})},ty=()=>{if(eD(!0),eZ.current){let e=eZ.current;ek&&ek>0&&R(),e.resume()}else e5||tn(ej);T({event_type:9323,view_type:v,view_parameter:e0,component:tl(),object_id_str:eb,aux_data:{story_pin_page_id:ej}})},tf=()=>{ez||(eN(!1),eL?t_():ty())};(0,i.useEffect)(()=>{"closeup"===x&&(!n||ez||eL?!n&&eL&&t_():ty())},[n,x]),(0,i.useEffect)(()=>{"related-products"===x&&t_()},[]);let tx=()=>{ta(0)},{fiftyPercentWidth:tv,fiftyPercentHeight:tb}=(0,s.Re)(64),{maxHeight:tk}=(0,s.Re)(0,32),{fiftyPercentWidth:tS}=(0,s.Re)();return w&&(S="sm"===C?tb:tk),(0,g.jsxs)(l.xu,{dangerouslySetInlineStyle:{__style:e3?{top:Z,height:`calc(100vh - ${Z}px)`,position:"sticky",pointerEvents:"none",minHeight:632,maxHeight:w?S:void 0,zIndex:eV?"auto":3}:{}},display:"flex",left:!0,children:[(0,g.jsxs)(l.xu,{alignItems:"center",color:"default",dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",minWidth:w&&"sm"!==C?tS:void 0}},display:"flex",flex:"grow",justifyContent:"center",position:"relative",children:[e3&&(0,g.jsx)(l.xu,{bottom:!0,color:"secondary",left:!0,position:"absolute",right:!0,top:!0}),eS?(0,g.jsx)(et.Z,{height:eR/f.ap,rounding:f.yR,width:eR}):(0,g.jsxs)(i.Fragment,{children:[td&&(0,g.jsx)(l.xu,{height:1,left:!0,marginTop:-1,overflow:"hidden",position:"absolute",top:!0,width:1,children:(()=>{let e=[];for(let t=1;t<=eP.length;t+=1)ej+t<eP.length&&e.push(th(ej+t));return e})()}),(0,g.jsx)(l.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{marginLeft:e3?void 0:`${f.YL}px`}},display:"flex",onMouseLeave:()=>{e7(!1)},onMouseOver:()=>e7(!0),position:"relative",children:(0,g.jsxs)(l.xu,{paddingX:4,children:[(0,g.jsx)(l.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...ey,flexDirection:"column-reverse"}},display:"flex",height:128,paddingX:6,position:"absolute",width:eM,zIndex:f.Gf,children:(0,g.jsx)(en.Z,{activePageIndex:ej,handleMute:()=>{eH||eX(!eq)},handlePanelChange:()=>{eU(!eV)},handlePause:t_,handlePausePlay:tf,handlePlay:ty,handleVideoScrubbingNewPage:e=>{ez&&eO(!1),tn(e),eA(e),F(e),ti(e)},handleWatchAgain:tx,inMilliseconds:!0,isMuted:eq,isPanelOpen:eV,isPlaying:eL,onPageSelect:e=>ta(e),pageCount:eJ,pages:eY,pinId:u.id,progressInfo:e5,showEndCard:ez,showVideoControls:e4,viewParameter:e0})}),(0,g.jsx)(l.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{...!eV?{paddingLeft:"26px",bottom:0}:ef,marginBottom:eV?void 0:"88px",maxWidth:tv}},"data-test-id":"music-attribution",display:"flex",justifyContent:eV?"center":"start",overflow:"hidden",paddingY:eV?5:void 0,position:"absolute",width:eR,zIndex:f.Gf,children:(0,g.jsx)(r.Z,{handlePause:t_,handlePlay:ty,musicAttributions:eW,shouldMute:eH,showEndCard:ez})}),!ez&&!eV&&(0,g.jsxs)(l.xu,{alignItems:"start",dangerouslySetInlineStyle:{__style:eV?{}:e_},display:"flex",height:128,justifyContent:"between",padding:4,position:"absolute",top:!0,width:eM,zIndex:f.Gf,children:[(0,g.jsxs)(l.kC,{alignItems:"stretch",direction:"row",children:[!eV&&(0,g.jsx)(N.Z,{name:"SafeSuspense_IdeaPinCloseup_IdeaPinSecondarySendButton",children:(0,g.jsx)(q.Z,{children:(0,g.jsx)(eh,{imageSrc:u.image_url??"",pinDescription:u.description??"",pinId:u.id})})}),!eV&&u.is_eligible_for_aggregated_comments&&(0,g.jsx)(N.Z,{name:"SafeSuspense_IdeaPinCloseup_CommentButton",children:(0,g.jsx)(q.Z,{children:(0,g.jsx)(eu,{onCommentClick:()=>{T({event_type:101,view_type:v,view_parameter:e0,component:13801,element:10944,object_id_str:u.id}),a&&y?y():eU(!0),m&&m();let e=document.getElementById(`canonical-card-${u.id}`);e&&e.scrollIntoView({behavior:"smooth",block:"end"})}})})}),!eV&&(0,g.jsx)(N.Z,{name:"SafeSuspense_IdeaPinCloseup_ReactionPickerContainer",children:(0,g.jsx)(q.Z,{children:(0,g.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},"data-test-id":"pointer-events-wrapper",children:(0,g.jsx)(eg,{clientTrackingParams:t,component:13801,iconColor:"white",pinId:u.id,reactionByMe:u.reaction_by_me,showTooltip:!0,viewParameter:e0,viewType:v})})})})]}),!eV&&(0,g.jsx)(N.Z,{name:"SafeSuspense_IdeaPinCloseup_PinSaveButton",children:(0,g.jsx)(q.Z,{children:(0,g.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},"data-test-id":"pointer-events-wrapper",children:(0,g.jsx)(em,{clientTrackingParams:t,isCloseupPin:!0,onClickCallback:()=>{T({event_type:101,view_type:v,view_parameter:e0,component:13801,element:0,object_id_str:u.id})},pinKey:{type:"deprecated",data:u},size:"lg"})})})})]}),(0,g.jsx)(l.xu,{"data-test-id":"story-pin-closeup-container",position:"relative",children:(0,g.jsx)(l.iP,{accessibilityLabel:eL?I._('Pause', 'storyPin.closeup.pauseButton.accessibilityLabel', 'Button label for pause tap area'):I._('Play', 'storyPin.closeup.playButton.accessibilityLabel', 'Button label for play tap area'),disabled:ez,onTap:tf,rounding:f.yR,children:(0,g.jsxs)(l.xu,{dangerouslySetInlineStyle:{__style:{maxWidth:tv,maxHeight:S}},"data-test-id":"story-pin-closeup-page",height:eR/eT,overflow:"hidden",position:"relative",rounding:f.yR,width:eR,children:[th(ej),!ez&&!eB&&!ek&&(0,g.jsx)(ee.Z,{playing:eL}),"authDesktop"===e.type&&ez&&u.native_creator&&(0,g.jsx)(N.Z,{name:"IdeaPinCloseup_EndCard",children:(0,g.jsx)(q.Z,{children:(0,g.jsx)(l.xu,{bottom:!0,left:!0,padding:4,position:"absolute",right:!0,rounding:f.yR,top:!0,zIndex:f.s5,children:(0,g.jsx)(ep,{clientTrackingParams:u.trackingParams||u.tracking_params,imageSrc:u.image_url??"",pinDescription:u.description??"",pinId:u.id,watchAgain:tx})})})})]})})})]})})]}),!a&&e3&&(0,g.jsx)(Q,{appConfig:e})]}),eV&&e3&&(0,g.jsx)(l.xu,{flex:"none",height:"100%",position:"relative",width:M,children:"duplo"===e.type&&e.storyPinDetails})]})}function eb(e){let{pin:t,viewType:n=3,viewParameterType:r}=e,[s,o]=(0,i.useState)({isInFocus:!0,viewability:0}),{isInFocus:d,viewability:c}=s,u=r||(0,W.Z)({hasPin:!!t,hasPinRichMetadata:!!t.rich_metadata,hasPinRichMetadataProducts:!!t.rich_metadata?.products,hasPinRichMetadataArticle:!!t.rich_metadata?.article,hasPinRichMetadataRecipe:!!t.rich_metadata?.recipe,hasPinStoryPinData:!!t.story_pin_data}),p=(0,a.TH)(),m=e.clientTrackingParams||(0,ec.Z)((p?.state||{}).trackingParams,t.trackingParams||t.tracking_params);return(0,g.jsx)($.T,{children:(0,g.jsx)(V.Z,{onVisibilityChange:e=>{if(e&&e.length>0){let{intersectionRatio:t}=e[0];o({isInFocus:t>.5,viewability:t})}},options:{threshold:[0,.5,.8,.99,1]},children:i=>(0,g.jsx)(l.xu,{ref:i,children:(0,g.jsx)(z,{clientTrackingParams:m,closeupStoryPinViewability:c,pin:t,viewParameter:u,viewType:n,children:d?(0,g.jsx)(L.Z,{clientTrackingParams:m,component:13801,objectId:t.id,view:n,viewParameter:u,children:(0,g.jsx)(ev,{...e,isInFocus:d})}):(0,g.jsx)(ev,{...e,isInFocus:d})})})})})}},281106:function(e,t,n){n.d(t,{Z:()=>d});var i=n(667294),a=n(20256),l=n(883817),r=n(369416),s=n(123317),o=n(785893);function d({playing:e,zIndexValue:t}){return(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(r.Z,{unsafeCSS:"#story-pin-closeup-pause-play-overlay svg { filter: drop-shadow( 0px 0px 8px rgba(0,0,0,0.1));}"}),(0,o.jsx)(a.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},"data-test-id":"story-pin-closeup-pause-play-overlay",display:"flex",id:"story-pin-closeup-pause-play-overlay",justifyContent:"center",left:!0,opacity:.8,position:"absolute",right:!0,rounding:s.yR,top:!0,zIndex:t?new a.Ry(t):l.p8,children:!e&&(0,o.jsx)(a.JO,{accessibilityLabel:"Play",color:"light",icon:"play",size:48})})]})}},461413:function(e,t,n){n.d(t,{Z:()=>r});var i=n(20256),a=n(525839),l=n(785893);function r({height:e,isDenseView:t,rounding:n,width:r,color:s}){let o=(0,a.ZP)();return(0,l.jsx)(i.xu,{alignItems:"center",color:s||"default","data-test-id":"unavailable-pin",display:"flex",height:e,justifyContent:"center",overflow:"hidden",position:"relative",rounding:n,width:r,children:(0,l.jsxs)(i.kC,{alignItems:"center",direction:"column",children:[(0,l.jsx)(i.xu,{paddingY:t?2:4,children:(0,l.jsx)(i.JO,{accessibilityLabel:o._('Pin not available', 'story-pin.Closeup.UnavailableIdeaPin.icon.accessibilityLabel', 'Accessibility label on icon'),color:"default",icon:"alert",size:20})}),(0,l.jsx)(i.xv,{weight:"bold",children:o._('Unavailable', 'story-pin.Closeup.UnavailableIdeaPin.Unavailable', 'Text on an unavailable idea Pin that has been deleted')}),!t&&(0,l.jsx)(i.xu,{paddingY:1,children:(0,l.jsx)(i.xv,{children:o._('Removed by the creator', 'story-pin.Closeup.UnavailableIdeaPin.Removed', 'Text on an unavailable idea Pin explaining it has been removed by its creator')})})]})})}},181663:function(e,t,n){n.d(t,{Z:()=>x});var i=n(667294),a=n(20256),l=n(525839),r=n(453179),s=n(579935),o=n(123317),d=n(724084),c=n(941404),u=n(572227),p=n(647709),m=n(239728),g=n(792171),h=n(601686),_=n(785893);let y=()=>{},f=({accessibilityLabel:e,dataTestId:t,disable:n,handleTap:i,icon:l})=>(0,_.jsx)(a.xu,{"data-test-id":t,opacity:n?.5:void 0,children:(0,_.jsx)(a.iP,{disabled:n,onTap:i,children:(0,_.jsx)(a.JO,{accessibilityLabel:e,color:"light",icon:l,size:16})})});function x({activePageIndex:e,handlePanelChange:t,handlePlay:n,handlePause:x,handlePausePlay:v,handleMute:b,handleVideoScrubbingNewPage:k,handleWatchAgain:S,inMilliseconds:P,isPlaying:w,isMuted:C,isPanelOpen:I,pages:T,pageCount:j,pinId:A="",progressInfo:F,showEndCard:E,showVideoControls:L=!1,viewParameter:D,isStoryPin:R=!0,captionsUrl:K=""}){let M=(0,l.ZP)(),{currentTime:Z}=F||{},{seekTimes:z}=(0,d.Hx)(),{closeupWithinMasonryEnabled:O}=(0,h.x4)(),B=(0,g.H)(),N=(0,p.HG)(),{captionsEnabled:V}=B,U=(0,u.Z)(),H=T[e],{should_mute:W}=H||C,G=Object.keys(z).includes(A)&&z[A]?z[A]:Z,$=(0,i.useMemo)(()=>T.map(e=>{let t=e.blocks?.find(e=>3===e.block_type),n=t?.video?.video_list?.V_HLSV3_MOBILE?.duration||t?.video?.video_list?.V_720P?.duration;return n?{duration:n,isVideo:!0}:{duration:r.oN,isVideo:!1}}),[T]),X=[{duration:F?.duration||0,isVideo:!0}],q=R?$:X,Y=(H&&H.blocks?.[0]||{}).video?.video_list?.V_HLSV3_MOBILE?.captions_urls,J=!1;(Y&&0!==Object.keys(Y).length||K)&&(J=!0);let Q=(0,i.useMemo)(()=>q.reduce((e,t)=>e+(t.duration||0),0)/(R?m.gJ:1),[q,R]),ee=(0,i.useMemo)(()=>q.filter((t,n)=>n<e).reduce((e,t)=>e+(t.duration||0),0)/m.gJ,[q,e]),et=q.length>0&&q[e]?.isVideo?Z??0:(Z??0)*5+(ee??0),en=M._('Hide captions', 'gestalt.video.accessibilityHideCaptionsLabel', 'ARIA label for hide captions button'),ei=M._('Show captions', 'gestalt.video.accessibilityShowCaptionsLabel', 'ARIA label for show captions button');return(0,_.jsxs)(a.xu,{alignContent:"evenly",alignItems:"baseline",dangerouslySetInlineStyle:{__style:{gap:"18.5px",pointerEvents:"auto"}},direction:"column",display:"flex",justifyContent:"between",width:"100%",children:[(0,_.jsxs)(a.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{opacity:L||!w?1:0,transition:"all .1s"}},direction:"row",display:"flex",justifyContent:"between",width:"99%",children:[(0,_.jsxs)(a.kC,{alignItems:"center",direction:"row",gap:5,children:[(0,_.jsx)(f,{accessibilityLabel:w?M._('Pause', 'closeup.IdeaPinVideo.Pause', 'Pause button on Idea Pin video'):M._('Play', 'closeup.IdeaPinVideo.Play', 'Play button on Idea Pin video'),dataTestId:`story-pin-closeup-${w?"pause":"play"}`,handleTap:E&&S?S:v,icon:w?"pause":"play"}),F&&(0,_.jsx)(a.iP,{children:(0,_.jsxs)(a.xu,{"aria-label":`${M._('Video duration', 'closeup.IdeaPinVideo.durationLabel', 'Screen reader label for video duration display')}: ${(0,o.Lc)(et)} of ${(0,o.Lc)(Q)}`,"data-test-id":"time-display",children:[(0,_.jsx)(a.xv,{align:"end",color:"inverse",inline:!0,overflow:"normal",size:"300",weight:"bold",children:`${(0,o.Lc)(et)}`})," ",(0,_.jsx)(a.xu,{display:"inlineBlock",opacity:.6,children:(0,_.jsx)(a.xv,{align:"end",color:"inverse",inline:!0,overflow:"normal",size:"300",weight:"bold",children:`/ ${(0,o.Lc)(Q)}`})})]})})]}),(0,_.jsxs)(a.kC,{direction:"row",gap:5,children:[J&&(0,_.jsx)(f,{accessibilityLabel:V?ei:en,dataTestId:`closed-captions-button-${V?"disable":"enable"}`,handleTap:()=>{let e=N?"desktop_pin_page":"mweb_pin_page";V?(0,c.My)(`${e}.closed_captions_button.toggle_off`):(0,c.My)(`${e}.closed_captions_button.toggle_on`),U({action:"click",item:"closed-captions-button"}),B.setCaptionsEnabled(!V)},icon:V?"captions":"captions-outline"}),(0,_.jsx)(f,{accessibilityLabel:C?M._('Unmute', 'closeup.IdeaPinVideo.unmute', 'Unmute button on Idea Pin video'):M._('Mute', 'closeup.IdeaPinVideo.mute', 'Mute button on Idea Pin video'),dataTestId:`story-pin-closeup-${C?"unmute":"mute"}`,disable:W,handleTap:b,icon:C?"mute":"sound"}),t&&!O&&(0,_.jsx)(f,{accessibilityLabel:I?M._('Maximize', 'closeup.IdeaPinVideo.maximize', 'Maximize button on Idea Pin video'):M._('Minimize', 'closeup.IdeaPinVideo.minimize', 'Minimize button on Idea Pin video'),dataTestId:`story-pin-closeup-${I?"maximize":"minimize"}`,handleTap:t||y,icon:I?"maximize":"minimize"})]})]}),(0,_.jsx)(s.ZP,{activePageCurrentTime:G,activePageIndex:e,duration:Q,handlePause:x,handlePlay:n,handleVideoScrubbingNewPage:k,inMilliseconds:P,isPlaying:w,pageCount:j,pageDurations:q,pinId:A,progressInfo:F,shouldShowPlayhead:!0,showEndCard:E,showVideoControls:L,videoDurations:q,viewParameter:D})]})}},579935:function(e,t,n){n.d(t,{$:()=>h,$E:()=>g,ZP:()=>x});var i=n(667294),a=n(20256),l=n(521009),r=n(525839),s=n(453179),o=n(15667),d=n(785893);function c({pillHeight:e,scrubberWidth:t}){return(0,d.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:g}},display:"flex",flex:"grow",height:e,overflow:"hidden",rounding:"pill",children:(0,d.jsx)(a.xu,{color:h,dangerouslySetInlineStyle:{__style:{width:t}},"data-test-id":"video-progress-bar",height:"100%",rounding:"pill"})})}var u=n(724084),p=n(647709),m=n(239728);let g="rgba(255,255,255,0.24)",h="light",_=()=>{},y=({children:e,setHoveringChange:t,handleMouseDown:n,handleMouseLeave:i,handleTouchStart:l,playhead:s,isPlaying:o,showVideoControls:c})=>{let u=(0,r.ZP)(),m=!(0,p.HG)();return(0,d.jsx)(a.iP,{children:(0,d.jsx)(a.xu,{ref:s,alignItems:"center","aria-label":u._('Video scrubber progress bar', 'ideaPin.closeupvideo.videoScrubberLabel', 'Accessibility label for video scrubber progress bar on video idea pins.'),dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",touchAction:"none"}},"data-test-id":"bullet-video-progress-bar",display:"flex",flex:"grow",justifyContent:m?"center":"start",marginBottom:6*!m,minHeight:"8px",onFocus:t(!0),onMouseDown:n,onMouseLeave:i,onMouseOver:t(!0),onTouchEnd:e=>e.preventDefault(),onTouchStart:l,opacity:c||!o?1:0,paddingY:6*!!m,position:"relative",role:"progressbar",width:"100%",children:e})})},f=({isRTL:e,isSeeking:t,scrubberWidth:n})=>(0,d.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:e?{right:n}:{left:n}},"data-test-id":"video-progress-bar-playhead",position:"relative",children:(0,d.jsx)(a.xu,{color:h,height:4,position:"absolute",rounding:"pill",children:(0,d.jsx)(a.xu,{color:"light",dangerouslySetInlineStyle:{__style:{marginTop:t?-8:-6}},height:t?16:12,marginStart:-2,rounding:"circle",width:t?16:12})})});function x({activePageIndex:e,activePageCurrentTime:t,pageCount:n,progressInfo:r,showEndCard:g,duration:x=0,pageDurations:v=[],handlePlay:b=_,handlePause:k=_,handleVideoScrubbingNewPage:S=_,inMilliseconds:P,videoDurations:w=[],viewParameter:C,isInactiveStreamPin:I=!1,isPlaying:T=!1,setVideoProgress:j,shouldShowPlayhead:A=!1,showVideoControls:F=!0,pinId:E=""}){let L=!(0,p.HG)(),D=(0,i.useRef)(null),{isRTL:R}=(0,o.B)(),[K,M]=(0,i.useState)(!1),[Z,z]=(0,i.useState)(T),[O,B]=(0,i.useState)(),N=(0,l.Z)(),[V,U]=(0,i.useState)(!1),{clearSeekTime:H,updateSeekTime:W}=(0,u.RC)(),G=(0,i.useCallback)((t,i)=>{if(!I&&i<=n){if(i!==e&&S(i),j){let{isVideo:e}=w[i];j({currentTime:t/1e3,duration:e?r?.duration??1:r?.duration??5,pinId:E})}W(t/1e3,E)}N({event_type:101,view_type:3,view_parameter:C,component:14302})},[e,S,I,N,n,E,r?.duration,j,W,w,C]),$=v.map(e=>`${(e.duration||0)/x/10}%`),X=(0,i.useMemo)(()=>{let e=0;return v.map(({duration:t})=>{let n=t+e,i={min:e,max:n};return e=n,i})},[v]),q=K?"0 1.2px":"0 1px",Y=e=>()=>M(e),J=(0,i.useCallback)(e=>{if(!D.current)return;let{left:t=0,right:n=0,width:i=0}=D.current.getBoundingClientRect(),a=(R?Math.max(0,Math.min((n-e)/i,1)):Math.max(0,Math.min((e-t)/i,1)))*x*1e3,l=X.findIndex(e=>a>=e.min&&a<=e.max),r=-1===l?0:l;G(a-X[r].min,r)},[x,G,X,R]),Q=(0,i.useCallback)(()=>{V||z(T||g),U(!0)},[V,z,T,g]),ee=(0,i.useCallback)(e=>{Q(),T&&k(),J(e.pageX)},[Q,T,k,J]),et=(0,i.useCallback)(e=>{V&&J(e.pageX)},[J,V]),en=(0,i.useCallback)(e=>{if(V){e.preventDefault();let t=Array.from(e.changedTouches).find(e=>e.identifier===O);t&&J(t.pageX)}},[V,J,O]),ei=(0,i.useCallback)(()=>{Y(!1),B(void 0),U(!1),Z&&b()},[b,Z]),ea=(0,i.useCallback)(e=>{Array.from(e.changedTouches).find(e=>e.identifier===O)&&(Y(!1),B(void 0),U(!1),H()),Z&&b()},[H,b,Z,O]);return(0,i.useEffect)(()=>(V&&!I&&(window.addEventListener("mousemove",et),window.addEventListener("mouseup",ei),window.addEventListener("touchmove",en),window.addEventListener("touchend",ea)),()=>{window.removeEventListener("mousemove",et),window.removeEventListener("mouseup",ei),window.removeEventListener("touchmove",en),window.removeEventListener("touchend",ea)}),[et,ei,ea,en,I,V,J,Z,O]),(0,d.jsx)(y,{handleMouseDown:ee,handleMouseLeave:()=>{Y(!1)},handleTouchStart:e=>{Q(),Y(!0);let t=e.changedTouches[0];B(t.identifier),T&&k(),J(t.pageX)},isPlaying:T,playhead:D,setHoveringChange:Y,showVideoControls:F,children:Array(n).fill(void 0).map((i,l)=>{let o=r?.currentTime??0,u=r?.duration??s.P6,p=w[l],_=`${p?.isVideo&&P?Math.floor(1e4*(t??o)/(p.duration/m.gJ))/100:o/u*100}%`;return(0,d.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{margin:q}},flex:"grow",width:$.length===n?$[l]:"auto",children:(0,d.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{transition:"all .1s"}},"data-test-id":"idea-pin-video-progress-bar",rounding:"pill",children:l<e||g?(0,d.jsx)(a.xu,{color:h,height:4,rounding:"pill"}):e===l&&r?(0,d.jsxs)(a.kC,{alignItems:"center",flex:"grow",children:[A&&(F||K||V||L)&&(0,d.jsx)(f,{isRTL:R,isSeeking:V,scrubberWidth:_}),(0,d.jsx)(c,{pillHeight:4,scrubberWidth:_})]}):(0,d.jsx)(a.xu,{color:h,dangerouslySetInlineStyle:{__style:{opacity:.24}},height:4,rounding:"pill"})})},`${E}-${l}`)})})}},724084:function(e,t,n){n.d(t,{RC:()=>p,Hx:()=>m,Wr:()=>u});var i=n(667294),a=n(729434),l=n(496406),r=n(914071),s=n(785893);let o=()=>Promise.resolve().then(n.bind(n,496406)),{Provider:d,get:c}=(0,a.Z)("IdeaPinVideoPlayer");function u({children:e}){let[t,n]=(0,r.Z)(o,l.initialState),a=(0,i.useMemo)(()=>({dispatch:n,ideaPinVideoPlayerControls:t}),[n,t]);return(0,s.jsx)(d,{value:a,children:e})}function p(){let{dispatch:e}=c();return(0,i.useMemo)(()=>({updateSeekTime:(t,n)=>{e({type:"UPDATE_SEEK_TIME",payload:{seekTime:t,pinId:n||""}})},clearSeekTime:t=>{e({type:"CLEAR_SEEK_TIME",payload:{seekTime:void 0,pinId:t||""}})}}),[e])}function m(){let{ideaPinVideoPlayerControls:e}=c();return e}},496406:function(e,t,n){n.r(t),n.d(t,{default:()=>a,initialState:()=>i});let i={seekTimes:{},currentProgressInfo:{currentTime:0,duration:0}};function a(e=i,t){switch(t.type){case"UPDATE_SEEK_TIME":return{...e,seekTimes:{...e.seekTimes,[t.payload.pinId]:t.payload.seekTime}};case"CLEAR_SEEK_TIME":return{...e,seekTimes:{}};default:return e}}},885003:function(e,t,n){n.d(t,{c:()=>s,o:()=>r});var i=n(667294),a=n(785893);let l=(0,i.createContext)(null);function r({children:e,closeupPaneWidth:t,headerHeight:n,isLandingPage:r,loadFonts:s,renderStoryPinMediaLayout:o,renderStoryPinSplitLayout:d,renderStoryPinText:c,renderStoryPinPage:u,productPins:p}){let m=(0,i.useMemo)(()=>({closeupPaneWidth:t,headerHeight:n,isLandingPage:r,loadFonts:s,renderStoryPinMediaLayout:o,renderStoryPinSplitLayout:d,renderStoryPinText:c,renderStoryPinPage:u,productPins:p}),[t,n,r,s,o,d,c,u,p]);return(0,a.jsx)(l,{value:m,children:e})}let s=()=>(0,i.useContext)(l)},445698:function(e,t,n){n.d(t,{BN:()=>c,RK:()=>d,d3:()=>p,tq:()=>m,xm:()=>u});var i=n(667294),a=n(607600),l=n(123317),r=n(543561),s=n(341742);let o=(e,t)=>{let n=(0,l.pE)(e,t);return`${n.y}px ${n.x}px`},d=({alignment:e,verticalAlignment:t})=>{let n={alignItems:"flex-start",display:"flex",height:"100%",justifyContent:"start",textAlign:"left",width:"100%"};return 1===t?n.alignItems="center":2===t&&(n.alignItems="flex-end"),1===e&&(n.justifyContent="center",n.textAlign="center"),n},c=({fontSize:e,hexColor:t,highlightColor:n,letterSpacing:i,lineHeight:a,name:l})=>({fontSize:e,letterSpacing:i,color:t,fontFamily:l,margin:0,maxHeight:"100%",textShadow:!n&&t&&"#ffffff"===t.toLowerCase()?"0px 1px 4px rgba(0, 0, 0, 0.2)":void 0,wordBreak:"break-word",...n?{backgroundColor:n,borderRadius:e/5,padding:o(e,a)}:{}}),u=({fontSize:e,hasText:t,highlightColor:n,lineHeight:i})=>({...n?{backgroundColor:t?n:void 0,borderRadius:e/5,padding:o(e,i)}:{}}),p=({letterSpacing:e,lineHeight:t,name:n,url:i})=>({fontFamily:n,fontGroup:"",fontOverrides:{letterSpacing:e,lineHeight:t,textTransform:!1},format:"truetype",defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"normal",fontUrl:i}]}),m=({hasPin:e,pages:t,limitToSingleFont:n})=>{let[o,d]=(0,i.useState)(!1),[c,u]=(0,i.useState)(()=>!!e&&(0,r.X7)(t)),m=()=>{let e=t.reduce((e,t)=>{let i=t?.blocks?.filter(e=>[l.h8.PARAGRAPH,l.h8.HEADING].includes(e.type))||[];return n&&i.length>1&&(i=[i[0]]),i.forEach(t=>{let n=t.style?.font||l.Cc.font,{name:i=""}=n;e[i]||(e[i]=n)}),e},{});if(Object.keys(e).length>0){let t=Object.keys(e).map(t=>{let n=e[t];return p({letterSpacing:n.letter_spacing,lineHeight:n.line_height,name:n.name,url:n.url})});(0,a.Z)(t),d(!0)}};return(0,s.Z)(()=>{m()}),(0,s.Z)(()=>{c||m()}),(0,i.useEffect)(()=>{c||u((0,r.X7)(t))},[c,t]),{fontsLoaded:o,mediaDataReceived:c}}},138758:function(e,t,n){n.d(t,{Z:()=>l});var i=n(97517);let a=/\{\s*(\w+)\s*\}/g;function l({args:e,format:t}){let n,l=(e||[]).reduce((e,t,n)=>({...e,[n]:t.text}),{});return n=t||"",(0,i.Z)(a,n,l)}},294711:function(e,t,n){function i({currentTime:e,endTime:t,startTime:n}){return"number"!=typeof n||"number"!=typeof t||!(n>=0)||!(t>0)||!(n<t)||n<=e&&e<=t}n.d(t,{Z:()=>i})},543561:function(e,t,n){n.d(t,{B7:()=>r,X7:()=>s,n4:()=>l});var i=n(123317);function a(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let l=(e,t)=>{let n=/^\d{1,3}\.\d{1,3}(?:\.\d{1,6})?$/;if(!e?.match(n)||!t?.match(n))return null;let i=e?.split("."),a=t?.split("."),l=Math.max((i??"").length,(a??"").length);for(let e=0;e<l;e+=1){let t=e<(i?.length??0)?parseInt(i?.[e]??"",10):0,n=e<(a?.length??0)?parseInt(a?.[e]??"",10):0;if(t<n)return -1;if(t>n)return 1}return 0};class r{constructor(e,t,n){if(a(this,"start",Date.now()),a(this,"paused",!1),this.onProgress=e,this.onComplete=t,this.duration=n,this.remaining=n,"undefined"==typeof window)return;this.intervalId=window.setInterval(()=>{let e=this.paused?this.duration-this.remaining:this.duration-this.remaining+(Date.now()-this.start);this.onProgress(e/this.duration)},500),this.resume()}currentTime(){return this.duration-this.remaining}pause(){this.paused=!0,window.clearTimeout(this.timerId),this.remaining-=Date.now()-this.start;let e=this.duration-this.remaining;this.onProgress(e/this.duration)}resume(){this.paused=!1,this.start=Date.now(),window.clearTimeout(this.timerId),this.timerId=window.setTimeout(this.onComplete,this.remaining)}clear(){window.clearTimeout(this.timerId),window.clearInterval(this.intervalId)}}let s=e=>e.some(e=>(e?.blocks??[]).some(e=>e.type===i.h8.IMAGE&&!!e.image||e.type===i.h8.VIDEO&&(!!e.video||!!e.video_signature)))},243099:function(e,t,n){function i(e,t){let n=(((t||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");return e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>|<!--[\s\S]*/gi,"").replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,(e,t)=>n.indexOf("<"+t.toLowerCase()+">")>-1?e:"")}n.d(t,{Z:()=>a,o:()=>i});let a=e=>e.replace(/(<([^>]+)>)/gi,"")},91479:function(e,t,n){n.d(t,{Z:()=>u});var i=n(667294),a=n(20256),l=n(934645),r=n(525839),s=n(15667),o=n(601686),d=n(785893);let c=({onClick:e,showShadow:t,size:n="lg",onMouseEnter:l})=>{let s=(0,r.ZP)();return(0,d.jsx)(i.Fragment,{children:(0,d.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{animation:t?"showShadow 1s cubic-bezier(0.165, 0.84, 0.44, 1) forwards":"hideShadow 1s cubic-bezier(0.165, 0.84, 0.44, 1) forwards"}},onMouseEnter:l,rounding:"circle",children:(0,d.jsx)(a.hU,{accessibilityLabel:s._('Back', 'backButton.accessibilityLabel', 'Accessibility label for the button to navigate back to the previous page'),bgColor:"white",dataTestId:"back-icon-button",icon:"directional-arrow-left",iconColor:"darkGray",onClick:e,size:n})},"back-button-icon")})};function u({handleScroll:e,marginTop:t,onClick:n,showShadow:r,onMouseEnter:u}){let{closeupWithinMasonryEnabled:p,showProductDetailPage:m}=(0,o.x4)(),{isRTL:g}=(0,s.B)(),h=(0,l.Z)({showProductDetailPage:m});return(0,i.useEffect)(()=>e?(window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)):()=>{},[e]),(0,d.jsx)(a.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{...g?{right:0}:{left:p?0:-12}}},"data-test-id":"back-button",display:"flex",paddingX:4*!p,position:"relative",children:(0,d.jsx)(c,{marginTop:t,onClick:n,onMouseEnter:u,showShadow:r,size:p&&!h?"xl":"lg"})})}},697473:function(e,t,n){n.d(t,{Z:()=>o});var i=n(667294),a=n(20256),l=n(734263),r=n(785893);function s(e){return null!=e}function o({additionalPadding:e,color:t,inline:n,items:o}){let d=e?(0,r.jsx)("span",{style:{padding:`0 ${4*e}px`},children:(0,r.jsx)(l.Z,{color:t})}):(0,r.jsx)(l.Z,{color:t}),c=o.filter(s).reduce((e,t,n)=>[...e,0!==n?d:null,t],[]).filter(s).map((e,t)=>(0,r.jsx)(i.Fragment,{children:e},t));return 0===c.length?null:n?(0,r.jsx)(a.xu,{children:c}):(0,r.jsx)(a.kC,{alignItems:"center",justifyContent:"start",children:c})}},627925:function(e,t,n){n.d(t,{Z:()=>d});var i=n(20256),a=n(980787),l=n(525839),r=n(302148),s=n(644493),o=n(785893);function d({closeupLinkEnabled:e,nativeCreatorCloseupLinkEligible:t,peekCloseupEnabled:n,uriComponent:d}){let c=(0,l.ZP)(),{logContextEvent:u}=(0,a.u)();return t&&e&&d?(0,o.jsx)(i.xv,{align:"start",size:n?"200":"300",children:(0,r.nk)(c._('See original post on {{ instagramLink }}', 'closeup.defaultMetadata.instagramLink', 'instagramLink: Link to the original Instagram post where the text of the link reads \u2019Instagram\u2019'),{instagramLink:(0,o.jsx)(i.xv,{color:"link",inline:!0,children:(0,o.jsx)(i.rU,{display:"inline",externalLinkIcon:"default",href:(0,s.Z)(d)??d,onClick:()=>{u({event_type:102,element:16198,component:135,aux_data:{is_claimed_domain:t}})},underline:"none",children:c._('Instagram', 'closeup.defaultMetadata.instagramLink-linkText', 'Instagram')})})})}):null}},644493:function(e,t,n){function i(e){try{return decodeURIComponent(e)}catch{return null}}n.d(t,{Z:()=>i})},7525:function(e,t,n){n.d(t,{Z:()=>l});var i=n(667294),a=n(27152);function l(e){let[t,n]=(0,i.useState)(null);return(0,i.useEffect)(()=>{!async function(){n(await (0,a.Z)(e))}()},[e]),t}},973940:function(e,t,n){n.d(t,{Z:()=>a});var i=n(667294);let a=e=>{let t=(0,i.useRef)(null);return(0,i.useEffect)(()=>{t.current=e},[e]),t.current}},734871:function(e,t,n){n.d(t,{Z:()=>r});var i=n(667294),a=n(289032),l=n(159527);let r=(e="throttle")=>{let[t,n]=(0,i.useState)(0);return(0,i.useEffect)(()=>{let t="throttle"===e?(0,l.Z)(()=>n(window.scrollY),10):(0,a.Z)(()=>n(window.scrollY),10);return window.addEventListener("scroll",t),()=>{window.removeEventListener("scroll",t)}},[e]),t}},776777:function(e,t,n){n.d(t,{Z:()=>r});var i=n(20256),a=n(331854),l=n(785893);function r({onVisibilityChanged:e,children:t,...n}){let r=(0,a.Z)({onVisibilityChanged:e,...n});return(0,l.jsx)(i.xu,{ref:r,children:t})}},863667:function(e,t,n){function i(e,t){let{organicVideosAutoplaying:n,promotedVideosAutoplaying:i,videoCarouselModuleAutoplaying:a}=t,l={...n,...i,...a};return l[e]&&l[e].currentTime}n.d(t,{Z:()=>i})},399806:function(e,t,n){n.d(t,{Q:()=>i,Z:()=>a});let i=()=>{let e,t="undefined"!=typeof window?window.navigator?.connection?.effectiveType:void 0,n=!window?.devicePixelRatio||window.devicePixelRatio<=1?"1x":"2x";return t?"4g"===t?e="40-80":(n="1x",e="0-1"):e="unknown",{downloadSpeedGroup:e,screenDimension:n}};function a(e){let{vHLSV3MOBILE:t,...n}=e,a=function({vEXP3:e,vEXP4:t,vEXP5:n,vEXP6:a,vEXP7:l,v720P:r}){let{downloadSpeedGroup:s,screenDimension:o}=i(),d={"1x":e,"2x":n},c={"1x":l,"2x":l};return({unknown:d,"0-1":d,"1-5":{"1x":t,"2x":n},"5-10":{"1x":n,"2x":n},"10-20":{"1x":a,"2x":a},"20-40":c,"40-80":c,"80_or_above":c})[s][o]||r||void 0}(n),l=t||void 0;return a?{hlsv3:l,mp4:a}:{hlsv3:l}}},766033:function(e,t,n){n.d(t,{Z:()=>l});var i=n(274320),a=n(647709);function l(){let{checkExperiment:e}=(0,i.r)();return"desktop"===(0,a.ZP)()?e("dweb_pdm_shopping_module_gql").anyEnabled:e("mweb_shopping_module_gql").anyEnabled}},105433:function(e,t,n){n.d(t,{pb:()=>x,nf:()=>v,lV:()=>b});var i=n(667294),a=n(581722),l=n(441143),r=n.n(l),s=n(575108),o=n(729434),d=n(686319),c=n(791948),u=n(503246),p=n(991384);let m={feature_map:Object.freeze({})},g=(e,t)=>{let n={...(0,p.Z)(e,t),...t.reaction_counts?{reaction_counts:t.reaction_counts}:Object.freeze({}),...t.tags?{tags:t.tags}:Object.freeze({}),...t.tagged_users?{tagged_users:t.tagged_users}:Object.freeze({})};return(0,u.ZP)(e,n)?e:n},h=(e,t)=>{if(e=e||m,"FETCH_COMPLETE"===t.type){let{payload:{resource:n}}=t,{data:i}=t.payload.response.resource_response;if("AggregatedCommentFeedResource"===n||"AggregatedCommentReplyFeedResource"===n||"DidItCommentsResource"===n){let t=(i||[]).reduce((t,n)=>(t[n.id]=g(e[n.id],n),t),{});return{...e,...t}}if("UnifiedCommentsResource"===n&&i&&i.length>0){let t=i.filter(e=>"aggregatedcomment"===e.type).reduce((t,n)=>(t[n.id]=g(e[n.id],n),t),{});return{...e,...t}}if("UnifiedCommentsPreviewResource"===n&&i&&i.length>0){let t=i.map(e=>e.aggregated_comment).reduce((t,n)=>(n&&(t[n.id]=g(e[n.id],n)),t),{}),n=i.map(e=>e.creator_reply).reduce((t,n)=>(n&&n.id&&(t[n.id]=g(e[n.id],n)),t),{});return{...e,...t,...n}}if("AggregatedCommentFeaturesResource"===n&&i&&Object.keys(i).length>0)return{...e,feature_map:i}}else if("AGGREGATED_COMMENT_CREATED"===t.type){let{payload:{aggregatedComment:n}}=t;return n.id?{...e,[n.id]:n}:e}else if("AGGREGATED_COMMENT_DELETED"===t.type||"AGGREGATED_COMMENT_HIDDEN"===t.type){let{payload:{aggregatedCommentId:n}}=t,i={...e};return delete i[n],i}else if("AGGREGATED_COMMENT_HIDDEN_FOR_USER"===t.type){let{payload:{userId:n}}=t;return Object.fromEntries(Object.entries(e).filter(e=>e[1].user?.id!==n))}else if("AGGREGATED_COMMENT_UPDATED"===t.type){let{payload:{data:n}}=t;return{...e,[n.id]:g(e?.[n.id],n)}}else if("AGGREGATED_COMMENT_LIKE_TOGGLED"===t.type){let{payload:{data:n}}=t,i=e?.[n.id],a=i?.reaction_counts[1]||0,l={1:n.reaction_by_me?a+1:a-1},r={...i,reaction_by_me:n.reaction_by_me,reaction_counts:l};return{...e,[n.id]:r}}else if("AGGREGATED_COMMENT_HELPFUL_TOGGLED"===t.type){let{payload:{data:n}}=t,i=e?.[n.id],a=i?.helpful_count||0,l=n.marked_helpful_by_me?a+1:a-1,r={...i,marked_helpful_by_me:n.marked_helpful_by_me,helpful_count:l};return{...e,[n.id]:r}}else if("AGGREGATED_COMMENT_HIGHLIGHT_TOGGLED"===t.type){let{payload:{data:n}}=t,i={...e?.[n.aggregated_comment_id],highlighted_by_pin_owner:n.is_highlighted};return{...e,[n.aggregated_comment_id]:i}}else if("AGGREGATED_COMMENT_FEATURES_UPDATED"===t.type){let{payload:{data:{featureMap:n}}}=t;return{...e,feature_map:{...e?.feature_map,...n}}}else if("UPDATE_AGGREGATED_COMMENT_COMMENT_COUNT"===t.type){let{payload:{increment:n,id:i}}=t,a=e?.[i];if(!a)return e;let l={...a,comment_count:a.comment_count+n};return{...e,[i]:l}}else if("DELETE_COMMENT_MENTION"===t.type){let{payload:{aggregatedCommentId:n,tagged_users:i}}=t,a={...e?.[n],tagged_users:i};return{...e,[n]:a}}else if("GET_COMMENT_TRANSLATION"===t.type){let{payload:{aggregatedCommentId:n,translatedText:i}}=t,a={...e?.[n],translatedText:i};return{...e,[n]:a}}return e};var _=n(785893);let{Provider:y,get:f}=(0,o.Z)("AggregatedComments");function x({children:e}){let t=(0,a.v9)(({resources:e})=>e?.UnifiedCommentsResource),n=m;t&&Object.values(t).forEach(e=>{let t=e.data?.filter(e=>"aggregatedcomment"===e.type),i=t?.reduce((e,t)=>(e[t.id]=g(n[t.id],t),e),{});n={...n,...i}});let[l,r]=(0,i.useReducer)(h,n),s=e=>{r({type:"FETCH_COMPLETE",payload:e})};(0,c.Z8)("AggregatedCommentFeaturesResource",s),(0,c.my)("AggregatedCommentFeaturesResource",s),(0,c.Z8)("AggregatedCommentFeedResource",s),(0,c.my)("AggregatedCommentFeedResource",s),(0,c.Z8)("AggregatedCommentReplyFeedResource",s),(0,c.my)("AggregatedCommentReplyFeedResource",s),(0,c.Z8)("DidItCommentsResource",s),(0,c.my)("DidItCommentsResource",s),(0,c.Z8)("UnifiedCommentsPreviewResource",s),(0,c.my)("UnifiedCommentsPreviewResource",s),(0,c.Z8)("UnifiedCommentsResource",s),(0,c.my)("UnifiedCommentsResource",s);let o=(0,i.useMemo)(()=>({aggregatedComments:l,dispatch:r}),[l,r]);return(0,_.jsx)(y,{value:o,children:e})}function v(){let{dispatch:e}=f();return(0,i.useMemo)(()=>({aggregatedCommentCreated(t,n){e({type:"AGGREGATED_COMMENT_CREATED",payload:{parentId:t,aggregatedComment:n}})},aggregatedCommentDeleted:(t,n)=>{e({type:"AGGREGATED_COMMENT_DELETED",payload:{parentId:t,aggregatedCommentId:n}})},aggregatedCommentHidden:t=>{e({type:"AGGREGATED_COMMENT_HIDDEN",payload:{aggregatedCommentId:t}})},aggregatedCommentsHiddenForUser:t=>{e({type:"AGGREGATED_COMMENT_HIDDEN_FOR_USER",payload:{userId:t}})},flagAggregatedComment:async({isAggregatedComment:e=!0,commentId:t,reason:n,detailedReasons:i})=>{let a=e?`/v3/aggregated_comments/${t}/flag/`:`/v3/did_it/${t}/flag/`;return(0,d.Z)({url:a,method:"PUT",data:{commentId:t,reason:n,detailedReasons:i}})},deleteCommentMention:async t=>{let{resource_response:n}=await (0,d.Z)({url:`/v3/aggregated_comments/${t}/mentions/`,method:"DELETE",data:{fields:["aggregatedcomment.id","aggregatedcomment.tagged_users"]}}),i=n.data??{};e({type:"DELETE_COMMENT_MENTION",payload:{aggregatedCommentId:i.id,tagged_users:i.tagged_users}})},translateAggregatedComment:async t=>{try{let{resource_response:n}=await (0,d.Z)({url:`/v3/aggregated_comments/${t}/translate/`,method:"GET"}),i=n.data??"";e({type:"GET_COMMENT_TRANSLATION",payload:{aggregatedCommentId:t,translatedText:i}})}catch(n){e({type:"GET_COMMENT_TRANSLATION",payload:{aggregatedCommentId:t,translatedText:""}})}},toggleAggregatedCommentHelpful:({aggregatedCommentId:t,isMarkedHelpfulByMe:n,orbacSubjectId:i})=>{(0,d.Z)({url:`/v3/helpful/1/${t}/`,method:n?"DELETE":"POST",data:i?{orbac_subject_id:i}:{}}),e({type:"AGGREGATED_COMMENT_HELPFUL_TOGGLED",payload:{data:{id:t,marked_helpful_by_me:!n}}})},toggleAggregatedCommentHighlight:async({aggregatedCommentId:t,pinId:n,isHighlighted:i})=>{r()(t,"Could not find comment"),r()(n,"Could not find Pin"),await (0,d.Z)({url:"/v3/aggregated_comments/pin/highlight/",method:"PUT",data:{aggregated_comment:t,pin:n,highlight:!i}}),e({type:"AGGREGATED_COMMENT_HIGHLIGHT_TOGGLED",payload:{data:{aggregated_comment_id:t,pin_id:n,is_highlighted:!i}}})},toggleAggregatedCommentLike:({aggregatedCommentId:t,isLikedByMe:n,orbacSubjectId:i})=>{(0,d.Z)({url:`/v3/aggregated_comments/${t}/react/`,method:n?"DELETE":"POST",data:{reaction_type:1,...i?{orbac_subject_id:i}:{}}}),e({type:"AGGREGATED_COMMENT_LIKE_TOGGLED",payload:{data:{id:t,reaction_by_me:+!n}}})},updateAggregatedComment:async({commentId:t,force:n,orbacSubjectId:i,tags:a,text:l})=>{let{resource_response:r}=await s.Z.create("AggregatedCommentResource",{commentId:t,force:n,tags:a,text:l,...i?{orbacSubjectId:i}:{}}).callUpdate({showError:!1}),{tagged_users:o}=r.data??{};e({type:"AGGREGATED_COMMENT_UPDATED",payload:{data:{id:t,tagged_users:o.map(e=>({...e})),tags:JSON.parse(a),text:l}}})},updateAggregatedCommentFeatures:async({userId:t,featureMap:n,passcode:i,userConfirmPasscode:a})=>{let l={userId:t,featureMap:n,passcode:i,user_confirm_skip_passcode:a};void 0===a&&(l.user_confirm_skip_passcode=!1);let{resource_response:r}=await s.Z.create("AggregatedCommentFeaturesResource",l).callUpdate({showError:!1});e({type:"AGGREGATED_COMMENT_FEATURES_UPDATED",payload:{data:{featureMap:r.data??Object.freeze({})}}})},updateCommentCount:(t,n)=>{e({type:"UPDATE_AGGREGATED_COMMENT_COMMENT_COUNT",payload:{increment:n,id:t}})}}),[e])}function b(){let{aggregatedComments:e}=f();return e}},542092:function(e,t,n){n.d(t,{n:()=>a,o:()=>i});let i={aggregatedComment:"aggregatedComment",didIt:"didIt",pin:"pin"},a={aggregatedComment:"aggregatedcomment",didIt:"userdiditdata",pin:"pin"}},636921:function(e,t,n){n.d(t,{Z:()=>o});var i=n(20256),a=n(475498),l=n(525839),r=n(87853),s=n(785893);function o(){let{showToast:e}=(0,r.dI)(),t=(0,l.ZP)();return()=>{e(({hideToast:e})=>(0,s.jsx)(a.Z,{duration:5e3,onHide:e,text:t._('Blocked. To manage your block list, see social permissions in settings.', 'blockedAccounts.blockConfirmMessage', 'This message appears when a user block an account as confirmation message'),thumbnail:{icon:(0,s.jsx)(i.JO,{accessibilityLabel:t._('Success icon', 'blockedAccounts.blockConfirmMessage.icon', 'Icon displayed in the toast message as visual representation of a success message'),color:"default",icon:"check-circle-fill",size:12})}}))}}},285491:function(e,t,n){n.d(t,{Z:()=>_});var i=n(667294),a=n(20256),l=n(744862),r=n(821342),s=n(525839),o=n(274320),d=n(417245),c=n(324307),u=n(233624),p=n(271910),m=n(785195),g=n(149728),h=n(785893);let _=function(e){let t=(0,s.ZP)(),{fullName:n,isVerifiedIdentity:_,imageUrl:y,isPromoted:f,isVerifiedMerchant:x,profileUrl:v,sponsorName:b,sponsorshipStatus:k,sponsorUsername:S="",verified:P,color:w="default",onAvatarClick:C,onNavigateClick:I,onNavigateSponsorClick:T,openNewTab:j}=e,A=(0,o.r)().checkExperiment("mweb_web_android_ios_backend_clbc_display_controls").anyEnabled,F=(0,r.Z)(),E=F.isAuth?F?.avatar_color_index:void 0,L=(0,d.Z)(t._('{{ fullName }} avatar link', 'creatorCardProfile.avatar.accessibilityLabel', 'Accessibility label for user avatar'),{fullName:n??""}),D=(0,h.jsx)(p.q,{children:({active:e,focused:t,hovered:i,onBlur:r,onFocus:s,onMouseEnter:o,onMouseLeave:d})=>(0,h.jsx)(a.xu,{onBlur:r,onFocus:s,onMouseDown:()=>{C&&C()},onMouseEnter:o,onMouseLeave:d,children:(0,h.jsx)(a.zd,{rounding:"circle",wash:i||e||t,children:(0,h.jsx)(l.qE,{accessibilityLabel:L,color:E,name:n??"",size:F.isAuth?"xs":"md",src:y??"",verified:P})})})}),R=(0,c.ZP)(n,70),K=(0,h.jsxs)(i.Fragment,{children:[f&&(0,h.jsx)(a.xv,{lineClamp:1,size:"200",weight:"bold",children:t._('Promoted by', 'indicating the username of the person who promoted the pin', 'indicating the username of the person who promoted the pin')}),(0,h.jsx)(a.xu,{"data-test-id":"creator-profile-name",children:(0,h.jsx)(a.xu,{maxWidth:270,children:(0,h.jsx)(a.xv,{color:w,size:"200",weight:"normal",children:_||x?(0,h.jsx)(a.xu,{"data-test-id":"verified-name",children:(0,h.jsx)(g.Z,{badgeSize:"xs",badgeSpacing:2,fullName:R,isVerifiedIdentity:_,isVerifiedMerchant:x})}):n})})})]}),M=S&&b||m.j.includes(k)&&A,Z=`/${S??""}/`;return(0,h.jsxs)(a.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},"data-test-id":"creator-card-profile",display:"flex",marginEnd:-1,marginStart:-1,children:[(0,h.jsx)(a.xu,{"data-test-id":"creator-avatar",flex:"none",paddingX:1,children:v?(0,h.jsx)(a.Tg,{dataTestId:"creator-avatar-link",href:v,onTap:I,rel:(0,u.Z)(v)?"none":"nofollow",target:j?"blank":null,children:D}):D}),(0,h.jsxs)(a.xu,{children:[v?(0,h.jsx)(a.xu,{alignItems:"center",direction:"row",display:"flex",flex:"grow",paddingX:1,children:(0,h.jsx)(a.rU,{dataTestId:"creator-profile-link",href:v,onClick:I,rel:(0,u.Z)(v)?"none":"nofollow",target:j?"blank":null,underline:"none",children:K})}):K,M&&(0,h.jsx)(a.xu,{"data-test-id":"sponsor-title",display:"flex",paddingX:1,children:(0,h.jsx)(m.Z,{href:Z,isPromoted:f,onNavigateSponsorClick:T,sponsorName:b,sponsorshipStatus:k,sponsorUsername:S})})]})]})}},368974:function(e,t,n){n.d(t,{Z:()=>s});var i=n(20256),a=n(209026),l=n(525839),r=n(785893);let s=function(){let e=(0,l.ZP)();return(0,r.jsx)(i.xu,{display:"flex",justifyContent:"center",marginBottom:5,width:"100%",children:(0,r.jsx)(a.Z,{containerSize:320,description:e._('It looks like something went wrong. That\u2019s okay\u2014try refreshing this page.', 'error404.page.gumball.illustrations.description', 'Message displayed under the illustration when 404 error'),illustrationSize:186,message:e._('Something\u2019s a little off', 'error404.page.gumball.illustrations.message', 'Description displayed under the illustration when when 404 error'),name:"gumball",primaryAction:(0,r.jsx)(i.ZP,{color:"red",href:"",onClick:()=>{window.location.reload()},text:e._('Refresh page', 'error404.page.pinjar.illustration', 'Button text for refreshing the page for 404 error')})})})}},458460:function(e,t,n){n.d(t,{H8:()=>m,Ut:()=>p,fr:()=>u});var i=n(667294),a=n(729434),l=n(914071),r=n(987765),s=n(785893);let o=()=>n.e("77027").then(n.bind(n,145581)),{Provider:d,get:c}=(0,a.Z)("IdeaPin");function u({children:e}){let[t,n]=(0,l.Z)(o,r.Z),a=(0,i.useMemo)(()=>({dispatch:n,ideaPin:t}),[n,t]);return(0,s.jsx)(d,{value:a,children:e})}function p(){let{dispatch:e}=c();return(0,i.useMemo)(()=>({setIdeaPinActivePage:t=>{e({type:"IDEA_PIN_ACTIVE_PAGE",payload:{activePage:t}})},setIdeaPinDynamicWidth:t=>{e({type:"IDEA_PIN_DYNAMIC_WIDTH",payload:{dynamicWidth:t}})}}),[e])}function m(){let{ideaPin:e}=c();return e}},987765:function(e,t,n){n.d(t,{Z:()=>i});let i={activePage:0,dynamicWidth:0}},502066:function(e,t,n){n.d(t,{G:()=>p,Kl:()=>m,vo:()=>u});var i=n(667294),a=n(729434),l=n(791948),r=n(914071),s=n(785893);let o=()=>n.e("83726").then(n.bind(n,3571)),{Provider:d,get:c}=(0,a.Z)("NativeEngagements");function u({children:e}){let[t,n]=(0,r.Z)(o,[]);(0,l.Z8)("NativeInteractionsResource",e=>{n({type:"FETCH_COMPLETE",payload:e})}),(0,l.my)("NativeInteractionsResource",e=>{n({type:"FETCH_MORE_COMPLETE",payload:e})});let a=(0,i.useMemo)(()=>({dispatch:n,nativeEngagements:t}),[n,t]);return(0,s.jsx)(d,{value:a,children:e})}function p(){let{dispatch:e}=c();return(0,i.useMemo)(()=>({nativeEngagementsHiddenForUser:t=>{e({type:"NATIVE_ENGAGEMENT_HIDDEN_FOR_USER",payload:{userId:t}})}}),[e])}function m(){let{nativeEngagements:e}=c();return e}},394887:function(e,t,n){n.d(t,{Z:()=>s});var i=n(255957),a=n(15667),l=n(653621),r=n(785893);function s({children:e,type:t}){let n=(0,a.B)();return(0,r.jsx)(i.Z,{annotateExperiments:[...n.isAuthenticated?["authDesktop"===t?"auth_dweb_graphql_pin_page":"auth_mweb_graphql_pin_page"]:[],n.isAuthenticated?"web_eager_loadable_auth":"web_eager_loadable_unauth",..."authDesktop"===t?["closeup_dweb_side_by_side_redesign_fast_follow"]:[],..."authDesktop"===t?["auth_dweb_shuffle_renderer_closeup_v2"]:[]],constraints:"authDesktop"===t?[...l.d0]:["PinPageMainImageRendered"],customEnabledNavigationTypes:["initial_app_load","client_route_push","client_route_replace"],surface:"pin_closeup",children:e})}},807765:function(e,t,n){n.d(t,{c:()=>o,f:()=>s});var i=n(667294),a=n(729434),l=n(785893);let{Provider:r,get:s}=(0,a.Z)("CloseupAnimations");function o({children:e}){let[t,n]=(0,i.useState)(!1),[a,s]=(0,i.useState)(!1),o=(0,i.useMemo)(()=>({isShowingShareButton:t,setIsShowingShareButton:n,isShowingVisualSearchButton:a,setIsShowingVisualSearchButton:s}),[t,a]);return(0,l.jsx)(r,{value:o,children:e})}},218831:function(e,t,n){n.d(t,{C:()=>s,K:()=>r});var i=n(667294),a=n(785893);let l=(0,i.createContext)({closeupBodyWidth:0,isCollageOverlayOpen:!1,isRelatedPins10PercentVisible:!1,setCloseupBodyWidth:()=>{},setIsCollageOverlayOpen:()=>{},setIsRelatedPins10PercentVisible:()=>{}});function r(){let e=(0,i.useContext)(l);if(!e)throw Error("useCloseupBodyContext must be used within CloseupBodyContextProvider");return e}function s({children:e}){let[t,n]=(0,i.useState)(0),[r,s]=(0,i.useState)(!1),[o,d]=(0,i.useState)(!1),c=(0,i.useMemo)(()=>({closeupBodyWidth:t,setCloseupBodyWidth:n,isCollageOverlayOpen:r,setIsCollageOverlayOpen:s,isRelatedPins10PercentVisible:o,setIsRelatedPins10PercentVisible:d}),[t,r,o]);return(0,a.jsx)(l,{value:c,children:e})}},688170:function(e,t,n){n.d(t,{C:()=>i,_:()=>a});let i=e=>!!e&&/^\/pin\/[\w-]+\/?$/.test(e.pathname),a=e=>{let t=[...e].reverse().find(({location:e})=>e&&!i(e));return t&&t.location&&(({pathname:e})=>/^\/search\/pins\//.test(e))(t.location)?(({pathname:e,search:t})=>{let n=/^\/search\/pins\/(\?.*)$/.exec(e),i=(t||n&&n[1]||"").substr(1).split("&").map(e=>e.split("=")).find(e=>"q"===e[0]);return i?decodeURIComponent(i[1]):""})(t.location):""}},685178:function(e,t,n){n.d(t,{Z:()=>E});var i,a=n(667294);n(167912);var l=n(20256),r=n(821342),s=n(415546),o=n(369416),d=n(611282),c=n(453179),u=n(887946),p=n(436475),m=n(54840),g=n(483180),h=n(774429),_=n(611499),y=n(601686),f=n(785893);let x=`
.CloseupTitleCard {
  color: #444;
  font-weight: bold;
}

.CloseupTitleCard .richPinInformation {
  padding: 0 40px 16px;
  padding-top: 0;
  width: 470px; /* 80% of closeup width */
}

.CloseupTitleCard a {
    color: #444;
}

.CloseupTitleCard a:hover,
.CloseupTitleCard a:active {
  color: #444;
}`,v=(void 0!==i||(i=n(176376)).hash&&"e0961d958eda59cad942eda9890b0f5f"!==i.hash&&console.error("The definition of 'TitleDesktop_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),b=e=>{let{clientTrackingParams:t,children:n,isLink:i=!0,onClick:a,pin:s,carouselInfo:o}=e,p=(0,u.Z)(s),m=(0,r.Z)(),{closeupWithinMasonryEnabled:g,peekCloseupEnabled:_}=(0,y.x4)(),x=(0,h.Z)({clickthroughType:"middleClick",location:"closeup.title"}),v=s.imageSpec_orig?.url&&s.imageSpec_orig.width&&s.imageSpec_orig.height?s.imageSpec_orig:null,b=n;if(o){let{carouselData:e}=o||{},{carousel_slots:t=[],index:n}=e||{};t&&null!=n&&t[n]&&(p=t[n].link||p,b=t[n].title||b)}let k=s?.originPinner&&m.isAuth&&m.id===s.originPinner.entityId||!s.isGoLinkless,S=(0,d.Z)({href:{pathname:p??v?.url??"",state:{trackingParams:t}},clientTrackingParams:t,target:"blank",externalData:{pin:s&&{advertiserId:s.advertiserId,attributionSourceId:s.attributionSourceId,board:s.board&&{url:s.board.url},campaignId:s.campaignId,entityId:s.entityId,isDownstreamPromotion:s.isDownstreamPromotion,isPromoted:s.isPromoted,pinner:s.pinner&&{username:s.pinner.username},pinPromotionId:s.pinPromotionId,promoter:s.promoter&&{entityId:s.promoter.entityId},storyPinDataId:s.storyPinDataId,trackingParams:s.trackingParams}}});if(!e.pin.entityId)return null;let P=b&&(0,f.jsx)(l.X6,{accessibilityLevel:1,lineClamp:_?2:void 0,size:g?"400":"600",children:b});return(0,f.jsx)("div",{itemProp:"name",children:(i||p)&&k?(0,f.jsx)(l.rU,{_onAuxClick:({event:e})=>{(0,c.UE)(e)&&(x(),e.preventDefault(),e.stopPropagation(),a&&a(),S({event:e}))},href:p??v?.url??"",onClick:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),a&&a(),S({event:e})},rel:"nofollow",target:"blank",underline:"none",children:P}):P})},k=e=>{if(!e.pin.entityId)return null;let{entityId:t}=e.pin,n=e.pin.imageSpec_736x?.url&&e.pin.imageSpec_736x.width&&e.pin.imageSpec_736x.height?e.pin.imageSpec_736x:null;return(0,f.jsxs)(l.xu,{children:[(0,f.jsx)("meta",{content:`https://${g.Vi}/pin/${t}/`,itemProp:"url"}),n&&(0,f.jsx)("meta",{content:n.url,itemProp:"image"})]})},S=e=>{if(!e.pin.entityId)return null;let{pin:t}=e||{},{gridTitle:n,title:i}=t||{},l=n||i;return(0,f.jsx)(a.Fragment,{children:l&&(0,f.jsx)(m.Z,{children:(0,f.jsx)(b,{...e,children:l})})})},P=e=>{if(!e.pin.entityId)return null;let{pin:t}=e||{},{richMetadata:n,gridTitle:i}=t||{},{title:l}=n||{};return(0,f.jsx)(a.Fragment,{children:(i||l)&&(0,f.jsx)(m.Z,{itemType:_.iB.PRODUCT,children:(0,f.jsxs)(b,{...e,children:[i||l,(0,f.jsx)(k,{...e})]})})})},w=e=>{if(!e.pin.entityId)return null;let{pin:t}=e||{},{richMetadata:n,gridTitle:i}=t||{},{title:a}=n||{};return(0,f.jsx)(m.Z,{itemType:_.iB.ARTICLE,children:(0,f.jsx)(b,{...e,children:i||a})})},C=e=>{if(!e.pin.richMetadata?.recipe?.name)return null;let{name:t}=e.pin.richMetadata.recipe;return(0,f.jsx)(m.Z,{itemType:_.iB.RECIPE,children:(0,f.jsx)(b,{...e,children:t})})},I=e=>e.pin.richMetadata?.tutorial?.fromAggregatedData||!e.pin.richMetadata?.tutorial?.name?null:(0,f.jsx)(m.Z,{children:(0,f.jsx)(b,{...e,children:(0,f.jsx)(l.xu,{children:e.pin.richMetadata.tutorial.name})})}),T=e=>{let t=!!e.pin.richSummary?.displayName;return t?(0,f.jsx)(m.Z,{children:(0,f.jsx)(b,{...e,children:(0,f.jsx)(l.xu,{children:t})})}):null},j=e=>{if(!e.pin.entityId)return null;let{gridTitle:t}=e.pin||{};return(0,f.jsx)(m.Z,{itemType:_.iB.ARTICLE,children:(0,f.jsx)(b,{...e,children:t})})};function A(e){let{carouselInfo:t}=e,{carouselData:n}=t||{},{carousel_slots:i}=n||{};return((i||[])[0]||{}).title}let F=e=>{let{pin:t,...n}=e;if(!e.pin.entityId)return null;let i=A(n);return(0,f.jsx)(m.Z,{itemType:_.iB.ARTICLE,children:(0,f.jsx)(b,{...e,children:i})})},E=({pinKey:e,...t})=>{let n=(0,s.Z)(v,e),{carouselInfo:i,onTitleCheck:r}=t,d=!!n.entityId&&!!n.gridTitle,c=!!n.richMetadata?.tutorial?.name,u=!!n.richMetadata?.recipe?.name,m=!!n.richMetadata?.article?.name,g=!!n.richSummary?.displayName,h=(0,p.Z)(n),{clientTrackingParams:_}=(0,y.x4)(),b=j,k=!1;return i&&n.entityId&&A(t)?b=F:h?b=P:(e=>{let{carouselData:t,title:n}=e??{};if(n)return!0;if(t){let{carouselSlots:e,index:n}=t;if(null!=n&&e?.[n]&&e[n].title)return!0}return!1})(n)?b=S:c?b=I:u?b=C:m?b=w:g?b=T:d||(k=!0),(0,a.useEffect)(()=>{r?.(k)},[k,r]),(0,f.jsxs)(a.Fragment,{children:[(0,f.jsx)(o.Z,{unsafeCSS:x}),(0,f.jsx)("div",{className:"CloseupTitleCard",children:(0,f.jsx)(l.xu,{children:(0,f.jsx)(b,{...t,clientTrackingParams:_,pin:n})})})]})}},653621:function(e,t,n){let i;n.d(t,{GL:()=>r,_z:()=>a,d0:()=>o,hO:()=>s,pM:()=>l});let a="video",l="image",r=new Map([["DEFAULT",new Set(["button"])],["story_pin",new Set([a])],["product_detail_page",new Set(["description","shopButton","thumbnailsLoaded"])],["product_detail_page_plus",new Set(["description","shopButton","thumbnailsLoaded"])]]),s=(i=new Set,r.forEach(e=>{i=new Set([...i,...e])}),i),o=new Set([...s,l,"resource"])},477464:function(e,t,n){n.d(t,{Z:()=>l});var i=n(453179),a=n(938287);let l=(e,t)=>{let n=e.action||void 0,l=(0,a.Z)({url:e.location.search});return"PUSH"===n?"click":("POP"!==n||e.location.key)&&"news_hub"!==l.entrySource?t&&(0,i.sV)(t)?"deeplink":"click":"deeplink"}},790427:function(e,t,n){n.d(t,{$8:()=>c,Dk:()=>d,Fk:()=>a,fS:()=>o,lI:()=>l,mS:()=>s,qW:()=>r});var i=n(20256);let a=new i.Ry(1),l=new i.Ry(3),r=2,s=new i.Ry(r),o=3,d=new i.Ry(100),c=new i.H3([d])},680288:function(e,t,n){n.d(t,{B:()=>a,q:()=>i});let{Provider:i,get:a}=(0,n(729434).Z)("CloseupPageContext")},607233:function(e,t,n){function i(){return["aggregatedpindata.aggregated_stats","aggregatedpindata.creator_analytics","aggregatedpindata.id","aggregatedpindata.is_shop_the_look","aggregatedpindata.pin_tags","board.collaborated_by_me","board.followed_by_me","board.id","board.image_thumbnail_url","board.is_collaborative","board.layout","board.name","board.owner()","board.privacy","board.type","board.url","buyableproductmetadata.display_active_max_price","buyableproductmetadata.display_active_min_price","buyableproductmetadata.short_description","buyableproductmetadata.title","comment.commenter()","comment.created_at","comment.deletable_by_me","comment.id","comment.text","comment.type","domain.official_user()","pin.access","pin.ad_destination_url","pin.ad_match_reason","pin.additional_hide_reasons","pin.aggregated_pin_data()","pin.alt_text","pin.attribution","pin.board()","pin.carousel_data()","pin.collection_pin()","pin.comment_count","pin.comments(limit:5,resume:true)","pin.created_at","pin.creator_analytics","pin.debug_info_html","pin.description_html","pin.description","pin.domain","pin.dominant_color","pin.embed","pin.grid_description","pin.grid_title","pin.has_required_attribution_provider","pin.id","pin.image_crop","pin.image_signature","pin.image_square_url","pin.images[170x,136x136,236x,474x,736x,orig]","pin.images[236x]","pin.is_downstream_promotion","pin.is_eligible_for_pdp","pin.is_eligible_for_web_closeup","pin.is_native","pin.is_playable","pin.is_promoted","pin.is_quick_promotable","pin.is_repin","pin.is_uploaded","pin.is_video","pin.is_whitelisted_for_tried_it","pin.link_domain()","pin.link_user_website()","pin.link","pin.manual_interest_tags","pin.method","pin.native_creator()","pin.pinner()","pin.price_currency","pin.price_value","pin.privacy","pin.promoted_is_removable","pin.promoted_lead_form","pin.promoter()","pin.reaction_counts","pin.repin_count","pin.rich_summary()","pin.shopping_flags","pin.product_metadata()","product_metadata.shopping_flags","pin.sponsorship","pin.story_pin_data_id","pin.story_pin_data()","pin.title","pin.tracking_params","pin.type","pin.videos()","pin.view_tags","pincarouselslot.details","pincarouselslot.id","pincarouselslot.images[60x60,136x136,170x,236x,474x,564x,736x,600x315,orig]","pincarouselslot.link","pincarouselslot.title","pintag.pin_tag_key","pintag.pins()","pintag.type","pintag.x_percent","pintag.y_percent","user.blocked_by_me","user.explicitly_followed_by_me","user.full_name","user.id","user.image_large_url","user.image_small_url","user.is_verified_merchant","user.type","user.username","user.verified_identity","userwebsite.official_user()","video.id","video.video_list[V_HLSV4,V_HLSV3_WEB,V_HLSV3_MOBILE,V_EXP3,V_EXP4,V_EXP5,V_EXP6,V_EXP7]"]}n.d(t,{Z:()=>i})},121508:function(e,t,n){n.d(t,{Z:()=>u}),n(667294);var i=n(20256),a=n(667835),l=n(356052),r=n(461951),s=n(525839),o=n(302148),d=n(647709),c=n(785893);let u=({onClose:e,replyToComment:t})=>{let n=(0,s.ZP)(),u=(0,a.Yc)(),p=(0,d.HG)(),m=t?.text||t?.details,g=t?.user?.first_name||t?.user?.username,h=n._('Edit comment icon', 'commentContextBanner.editing.icon', 'Banner icon for editing a comment'),_=t?(0,o.nk)(n._('Replying to {{ userName }}', 'commentContextBanner.replying.header', 'Header text for replying to a comment. userName: name of the user being replied to'),{userName:g}):n._('Editing your comment', 'commentContextBanner.editing.header', 'Header text for editing a comment'),y=t?(0,c.jsx)(l.Z,{color:u?"white":void 0}):(0,c.jsx)(i.JO,{accessibilityLabel:h,color:"default",icon:"edit",size:12});return(0,c.jsxs)(i.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:r.zsO,paddingLeft:"16px",paddingRight:"14px"}},direction:"row",display:"flex",justifyContent:"between",paddingY:3,children:[(0,c.jsxs)(i.kC,{direction:"column",justifyContent:"center",children:[(0,c.jsxs)(i.kC,{alignItems:"center",direction:"row",children:[(0,c.jsx)(i.xu,{marginEnd:1.5,children:y}),(0,c.jsx)(i.xv,{size:"100",weight:"bold",children:_})]}),m&&(0,c.jsx)(i.xu,{marginTop:1.5,children:(0,c.jsx)(i.xv,{color:u?"default":"subtle",lineClamp:1,size:"100",children:m})})]}),p&&(0,c.jsx)(i.hU,{accessibilityLabel:n._('Close comment context banner', 'commentContextBanner.close.icon', 'Icon to close the comment context banner'),icon:"cancel",onClick:e,padding:1,size:"lg"})]})}},934603:function(e,t,n){n.d(t,{B:()=>S,Z:()=>w});var i,a=n(667294),l=n(581722);n(167912);var r=n(616550),s=n(20256),o=n(315787),d=n(821342),c=n(415546),u=n(886981),p=n(647709),m=n(341742),g=n(448505),h=n(7872),_=n(105433),y=n(542092),f=n(716751),x=n(611134),v=n(32082),b=n(793698),k=n(785893);let S=({aggregatedPinDataId:e,featuredCommentIds:t,featuredDidItIds:n,isDesktop:i,isReversed:a=!1,noCache:l=!1,orbacSubjectId:r=""})=>({name:"UnifiedCommentsResource",options:{aggregated_pin_id:e,comment_featured_ids:t,did_it_featured_ids:n,page_size:i?10:25,redux_normalize_feed:!0,is_reversed:a,...r?{orbac_subject_id:r}:{}},noCache:l}),P=(void 0!==i||(i=n(316387)).hash&&"38e173ab2c3107ebc5b3da9f216fac98"!==i.hash&&console.error("The definition of 'CommentThreadContainer_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),w=({isReadOnly:e,pinKey:t,scrollContainer:n,setIsComposingNewComment:i=()=>{},showingCloseupCommentModule:w,viewParameter:C,toggleComposerForReply:I,openMwebOverflowMenu:T})=>{let{comment_id:j}=(0,r.UO)(),A=(0,l.I0)(),F=(0,p.HG)(),E=(0,d.Z)(),L=(0,c.Z)(P,t),D=(L?.aggregatedPinData?.commentCount||0)+(L?.aggregatedPinData?.didItData?.imagesCount||0),R=L?.aggregatedPinData?.entityId,K=L?.closeupAttribution?.entityId,M=L?.closeupAttribution?.username,Z=L?.commentsDisabled,z=D>0&&!L?.commentsDisabled,O=!!L?.videos?.videoList,B=L?.entityId,N=L?.pinner?.entityId,V=L?.storyPinData?.entityId,U=(0,a.useRef)(z),H=(0,g.Z)(),W=(0,h.lJ)(E,H),G=(0,u.Z)(U.current&&R?S({aggregatedPinDataId:R,featuredCommentIds:j?[j]:[],isDesktop:F}):null),{removeUnauthCommentPinId:$,unauthCommentPinId:X}=(0,f.o)(),q=(0,_.lV)(),{toggleAggregatedCommentHelpful:Y,toggleAggregatedCommentLike:J}=(0,_.nf)(),Q=(0,b.dM)(),ee=(0,l.v9)(e=>(0,v.Z)(e,{aggregatedPinDataId:R,aggregatedComments:q,users:Q})),[et,en]=(0,a.useState)(void 0);(0,m.Z)(()=>{!F&&E.isAuth&&X&&B&&X===B&&(i(!0),$())}),(0,a.useEffect)(()=>{let e=()=>{let t=!!n&&n.scrollTop+n.clientHeight+10>=n.scrollHeight;G&&!G.isFetching&&(G.isAtEnd?n?.removeEventListener("scroll",e):t&&G.fetchMore())};return n?.addEventListener("scroll",e),()=>{n?.removeEventListener("scroll",e)}},[G,n]);let ei=2*(!F&&!Z);return(0,k.jsx)(a.Fragment,{children:(0,k.jsx)(s.xu,{display:"flex",height:F||Z||0!==ee.length?void 0:"100%",marginTop:F?6:ei,width:"100%",children:(0,k.jsx)(o.Z,{aggregatedPinDataId:R,closeupAttributionId:K,closeupAttributionUsername:M,comments:ee,commentsDisabled:Z,isDesktop:F,isReadOnly:e,isVideo:O,openOverflowMenu:T,parentId:R??"",parentType:y.o.pin,pinId:B,pinnerId:N,reactionListCommentId:et,showingCloseupCommentModule:w,showReactionListForComment:en,storyPinDataId:V,toggleHelpful:(e,t,n)=>()=>{n?A((0,x.YH)({didItDataId:e,isMarkedHelpfulByMe:t,orbacSubjectId:W})):Y({aggregatedCommentId:e,isMarkedHelpfulByMe:t,orbacSubjectId:W})},toggleLike:(e,t,n)=>()=>{n?A((0,x.wH)({didItDataId:e,isLikedByMe:t,orbacSubjectId:W})):J({aggregatedCommentId:e,isLikedByMe:t,orbacSubjectId:W})},toggleReplyComposer:I,userAvatarSize:"sm",viewParameter:C})})})}},716751:function(e,t,n){n.d(t,{o:()=>s,p:()=>o});var i=n(667294),a=n(729434),l=n(785893);let{Provider:r,get:s}=(0,a.Z)("Session");function o({children:e}){let[t,n]=(0,i.useState)(void 0),a=(0,i.useCallback)(()=>n(void 0),[]),s=(0,i.useMemo)(()=>({unauthCommentPinId:t,setUnauthCommentPinId:n,removeUnauthCommentPinId:a}),[t,a]);return(0,l.jsx)(r,{value:s,children:e})}},97781:function(e,t,n){n.d(t,{Z:()=>c});var i=n(20256),a=n(475498),l=n(821342),r=n(525839),s=n(302148),o=n(274320),d=n(785893);function c({boardName:e,boardUrl:t,isBoardlessPin:n,isFromPinBuilder:c,hasNewPin:u,onChangeButtonClick:p,onVisitButtonClick:m=()=>{},onHide:g,onUndo:h,pinImageUrl:_}){let y,f=(0,r.ZP)(),{checkExperiment:x}=(0,o.r)(),v=(0,l.Z)(),b=!!v.isAuth&&v.isPartner,k=n&&x("web_all_toasts_lead_to_boards").anyEnabled?b?"/me/pins/":"/me/_pins/":"/me/";return c?y={accessibilityLabel:f._('Visit Pin', 'PostSavedPinToast.a11yVisitButton', 'Accessibility label for Visit Pin saved from PinBuilder'),label:f._('Visit', 'PostSavedPinToast.VisitButton', 'Visit Pin saved from PinBuilder'),size:"lg",onClick:m}:(p||h)&&(y={accessibilityLabel:u&&n&&p?f._('Change Pin destination', 'PostSavedPinToast.a11yChangeButton', 'Change saved pin to a different destination'):f._('Undo Saved Pin', 'PostSavedPinToast.a11yUndoButton', 'Undo Saved Pin'),label:u&&n&&p?f._('Change', 'PostSavedPinToast.ChangeButton', 'Change saved pin to a different destination'):f._('Undo', 'PostSavedPinToast.UndoButton', 'Undo Saved Pin'),size:"lg",onClick:u&&n&&p?()=>p():h}),(0,d.jsx)(a.Z,{duration:n?6e3:3e3,imageUrl:_,onHide:g,primaryAction:y,text:(0,d.jsx)(i.xv,{overflow:"normal",size:"200",children:(0,s.nk)(f._('Saved to {{ destination }}', 'PostSavedPinToast.SavedToBoardLabel', 'Saved to label for better save'),{destination:(0,d.jsx)(i.rU,{href:n?k:t??"",children:(0,d.jsx)(i.xv,{lineClamp:1,size:"200",weight:"bold",children:e},"PostSavedPinToastBoardName")})})}),thumbnail:n?{icon:(0,d.jsx)(i.JO,{accessibilityLabel:f._('Saved to profile thumbnail', 'PostSavedPinToast.thumbnail.accessibilityLabel', 'Thumbnail for saved to profile.'),color:"default",icon:"history",size:24})}:void 0})}},725191:function(e,t,n){n.r(t),n.d(t,{default:()=>m});var i=n(20256),a=n(980787),l=n(93966),r=n(351607),s=n(138758),o=n(902293),d=n(601686),c=n(396162),u=n(785893);let p=l.yF;function m({contextLogData:e,bubbles:t,id:n,referringSource:l,slotIndex:m,storyType:g,title:h,titleIcon:_,viewType:y,viewParameter:f}){let{logContextEvent:x}=(0,a.u)(),{closeupWithinMasonryEnabled:v}=(0,d.x4)(),b=t?.map(({type:e,id:t})=>e+":"+t).join("|"),k={story_type:g,...e,content_ids:b},S=!!_&&(0,o.Z)(_);return(0,u.jsx)(r.Fw,{componentType:200,contextLogData:k,impressionType:"Story",loggingId:n,objectIdStr:n,slotIndex:m,viewParameter:f,viewType:y,children:({impressionTrackerRef:e})=>(0,u.jsxs)(i.xu,{ref:e,children:[h&&(0,u.jsxs)(i.xu,{alignItems:"center",display:"flex",justifyContent:"center",marginBottom:1,children:[S&&(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{paddingTop:1}},marginEnd:2,children:(0,u.jsx)(i.JO,{accessibilityLabel:"",color:"default",icon:S,size:14})}),(0,u.jsx)(i.xv,{weight:"bold",children:(0,s.Z)(h)})]}),t?.map((e,t)=>(0,u.jsx)(i.xu,{flex:"none",paddingY:1,children:(0,u.jsx)(c.Z,{bubble:e,contextLogData:k,height:103,onClick:e=>{x({event_type:101,object_id_str:e,view_type:y,view_parameter:f,component:200,aux_data:k})},referringSource:l,slotIndex:t,storyId:n,viewParameter:f,viewType:y,width:v?"100%":p})},`bubble-${e.id}`))]})})}},44344:function(e,t,n){n.d(t,{Z:()=>c});var i=n(667294),a=n(274320),l=n(15667),r=n(647709),s=n(603316);class o{constructor(){var e,t,n;e="callbacks",t=new Map,(e="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string"))?n:n+"")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t,this.observer=new ResizeObserver(e=>{e.forEach(e=>{let t=this.callbacks.get(e.target);t&&t.forEach(t=>t(e.target))})})}observe(e,t){this.callbacks.has(e)||(this.callbacks.set(e,new Set),this.observer.observe(e)),this.callbacks.get(e).add(t)}unobserve(e,t){let n=this.callbacks.get(e);n&&(n.delete(t),0===n.size&&(this.callbacks.delete(e),this.observer.unobserve(e)))}}let d=null;function c(e,t){let{anyEnabled:n,group:c}=(0,a.r)().checkExperiment("closeup_web_resize_observer_optimization"),{isAuthenticated:u}=(0,l.B)(),p=(0,r.ZP)(),m=(0,i.useCallback)(t=>{let n=performance.now();e(t);let i=performance.now();(0,s.nP)("closeup.www.resizeObserverCallback",{sampleRate:.1,tags:{isAuthenticated:u,deviceType:p,resizeObserverOptimizationExp:c,duration:Math.round(i-n)}})},[e,u,p,c]);g=n?null:m,(0,i.useEffect)(()=>{if(!t.current||!g)return()=>{};{let e=t.current;if("ResizeObserver"in window){let t=new ResizeObserver(t=>{Array.isArray(t)&&t.length&&g(e)});return t.observe(e),()=>t.unobserve(e)}{let t,n=e.clientHeight,i=e.clientWidth,a=()=>{let l=e.clientHeight,r=e.clientWidth;(n!==l||i!==r)&&(n=l,i=r,g(e)),t=window.requestAnimationFrame(a)};return a(),()=>window.cancelAnimationFrame(t)}}},[t,g]);var g,h=n?m:null;let _=(0,i.useRef)(h);_.current=h,(0,i.useEffect)(()=>{if(!t.current)return;let e="undefined"!=typeof window&&"ResizeObserver"in window?(d||(d=new o),d):null;if(!e)return void(0,s.nP)("closeup.www.resizeObserverCallback.noResizeObserver",{sampleRate:.1,tags:{isAuthenticated:u,deviceType:p}});let n=t.current,i=e=>{_.current?.(e)};return e.observe(n,i),()=>{e.unobserve(n,i)}},[t,_,u,p])}},611134:function(e,t,n){n.d(t,{YH:()=>o,IU:()=>m,DD:()=>u,L8:()=>c,lg:()=>p,Th:()=>g,wH:()=>s});var i=n(575108),a=n(686319),l=n(189976),r=n(696323);function s({didItDataId:e,isLikedByMe:t,orbacSubjectId:n}){return i=>((0,a.Z)({url:`/v3/did_it/${e}/like/`,method:t?"DELETE":"POST",data:n?{orbac_subject_id:n}:{}}),i({type:"USER_DID_IT_DATA_LIKE_TOGGLED",payload:{id:e,liked_by_me:!t}}))}function o({didItDataId:e,isMarkedHelpfulByMe:t,orbacSubjectId:n}){return i=>((0,a.Z)({url:`/v3/helpful/2/${e}/`,method:t?"DELETE":"POST",data:n?{orbac_subject_id:n}:{}}),i({type:"USER_DID_IT_DATA_HELPFUL_TOGGLED",payload:{id:e,marked_helpful_by_me:!t}}))}function d(e){return{type:"USER_DID_IT_DATA_DELETE",payload:{id:e}}}function c(e,t){return{type:"USER_DID_IT_DATA_UPDATE_COMMENT_COUNT",payload:{id:e,increment:t}}}function u({aggregatedPinDataId:e,details:t,fromUnifiedComment:n,image_signatures:a,pin_id:s,username:o,updateParentDidItCount:d}){let u={aggregatedPinDataId:e,details:t,image_signatures:a,pin_id:s};return t=>i.Z.create("DidItActivityResource",u).callCreate().then(i=>{let a=i.resource_response.data;t({type:"PIN_DID_IT",payload:{id:s,value:!0}}),t({type:"USER_DID_IT_DATA_CREATE",payload:{user_did_it_data:a}}),t((0,l.vX)({feedId:e,feedType:n?r.Z.UNIFIED_COMMENTS:r.Z.TRIED_IT_FEED,itemIds:[a.id],itemType:a.type,prepend:!0})),t((0,l.vX)({feedId:o,feedType:r.Z.TRIED_IT_FEED,itemIds:[a.id],itemType:a.type})),d&&t(c(e,1))},()=>{})}function p({aggregatedPinDataId:e,feedType:t,id:n,isOwnedByMe:a,pinId:s,username:o,updateParentDidItCount:u}){return p=>{i.Z.create("DidItActivityResource",{user_did_it_data_id:n,pinId:s}).callDelete().then(()=>{a&&p({type:"PIN_DID_IT",payload:{id:s,value:!1}}),p(d(n)),p((0,l.EX)({feedId:e??"",feedType:t||r.Z.TRIED_IT_FEED,itemIds:[n],itemType:"userdiditdata"})),p((0,l.EX)({feedId:o,feedType:r.Z.TRIED_IT_FEED,itemIds:[n],itemType:"userdiditdata"})),p((0,l.EX)({feedId:o,feedType:r.Z.UNIFIED_COMMENTS,itemIds:e?[e]:[],itemType:"userdiditdata"})),u&&p(c(n,-1))},()=>{})}}function m({id:e,details:t,image_signatures:n,pinId:a}){let l={details:t,image_signatures:n,user_did_it_data_id:e,pin_id:a};return e=>{i.Z.create("DidItActivityResource",l).callUpdate().then(t=>{e({type:"USER_DID_IT_DATA_UPDATE",payload:{user_did_it_data:t.resource_response.data}})},()=>{})}}function g(e,t,n,i,s){return o=>{(0,a.Z)({url:`/v3/did_it/${n}/flag/`,method:"PUT",data:{reason:i,detailed_reasons:t,explanation:void 0}}).then(()=>{o(d(n)),e&&o((0,l.EX)({feedId:e,feedType:r.Z.TRIED_IT_FEED,itemIds:[n],itemType:"userdiditdata"})),o((0,l.EX)({feedId:s,feedType:r.Z.TRIED_IT_FEED,itemIds:[n],itemType:"userdiditdata"}))},()=>{})}}},800300:function(e,t,n){function i(e,t){return{type:"PIN_UPDATE_COMMENT_COUNT",payload:{id:e,increment:t}}}n.d(t,{R:()=>i})},32082:function(e,t,n){n.d(t,{Z:()=>r});var i=n(442279),a=n(696323);let l={},r=(0,i.createSelector)((e,{aggregatedComments:t})=>t,({feeds:e},{aggregatedPinDataId:t})=>e[`${a.Z.UNIFIED_COMMENTS}:${t||""}`],({didItData:e})=>e,(e,{users:t})=>t??l,(e,t,n,i)=>{let a=new Set;return t?.map(({id:t,type:r})=>{if(a.has(t))return;a.add(t);let s="aggregatedcomment"===r.toLowerCase()?e[t]:n[t];if(!s)return;let o="user"in s&&("string"==typeof s.user?i[s.user]??l:s.user??l);return{...s,user:o??l}}).filter(e=>void 0!==e)||[]})},846051:function(e,t,n){n.d(t,{Z:()=>r});var i=n(706563),a=n(287819),l=n(169330);function r(e,t,n,r){switch(e){case 0:return function({isShortened:e,minutes:t,i18n:n}){if(!t)return"";if(e)return(0,l.Z)(t,n).join("");let r=(0,a.Z)((0,i.X)({m:t}),n);if(!r)return"";let s=r.join(""),o=n._('Cook Time', 'ideapin.basics.cookTime', 'The cook time for the food in this pin');return`${o}: ${s}`}({minutes:parseInt(t,10),i18n:n,isShortened:r});case 1:return function({servingSize:e,i18n:t}){return e?1===e?`${e} ${t._('serving', 'ideapin.basics.servings', 'The number of servings this recipe makes')}`:`${e} ${t._('servings', 'ideapin.basics.servings', 'The number of servings this recipe makes')}`:""}({servingSize:parseInt(t,10),i18n:n});case 2:return function({difficulty:e,i18n:t}){let n={1:t._('Easy', 'closeup.storyPin.basicsLayout.difficulty', 'Easy difficulty level'),2:t._('Intermediate', 'closeup.storyPin.basicsLayout.difficulty', 'Intermediate difficulty level'),3:t._('Expert', 'closeup.storyPin.basicsLayout.difficulty', 'Expert difficulty level')},i=t._('Difficulty', 'ideapin.basics.difficulty', 'The difficulty for the activity in this pin');return`${i}: ${n[e??"1"]}`}({difficulty:t,i18n:n});default:return""}}},213967:function(e,t,n){n.d(t,{Z:()=>i});let i=e=>e.join(` \u2022 `)},452750:function(e,t,n){n.d(t,{Z:()=>a});var i=n(640785);function a(e){return{defaultStyle:0,fontFamily:e.name??"",fontGroup:i.gu,fontOverrides:{letterSpacing:e.letter_spacing,lineHeight:e.line_height},format:"truetype",id:e.id,styles:[{fontStyle:"",fontUrl:e.url,fontWeight:"normal",name:"normal"}]}}},906715:function(e,t,n){n.d(t,{Z:()=>s}),n(167912);var i,a=n(415546),l=n(57293);let r=(void 0!==i||(i=n(262176)).hash&&"f5443b1193b0aed988404fef7c7338fe"!==i.hash&&console.error("The definition of 'useStructuredDescription_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function s(e){var t;return(t=(0,a.Z)(r,e).formattedCloseupDescription)&&Array.isArray(t.components)?t.components.filter(e=>("DescriptionHeader"===e.__typename||"DescriptionTable"===e.__typename||"DescriptionPoints"===e.__typename||"DescriptionSpecs"===e.__typename||"DescriptionString"===e.__typename||"DescriptionStringBold"===e.__typename)&&e.type).map(e=>{let t="DescriptionHeader"===e.__typename||"DescriptionTable"===e.__typename||"DescriptionPoints"===e.__typename||"DescriptionSpecs"===e.__typename||"DescriptionString"===e.__typename||"DescriptionStringBold"===e.__typename?e.type:"";if("DescriptionSpecs"===e.__typename&&t===l.X.SPECS)return{type:t,content:e.specsContent?.reduce((e,t)=>({...e,[t.key]:t.value}),{})};let n="DescriptionString"===e.__typename?e:null,i="DescriptionPoints"===e.__typename?e:null,a="DescriptionTable"===e.__typename?e:null,r="DescriptionHeader"===e.__typename?e:null,s="DescriptionStringBold"===e.__typename?e:null;return{type:t,content:n?.stringContent??i?.pointsContent??a?.tableContent??r?.headerContent??s?.boldContent}}):[]}},57293:function(e,t,n){n.d(t,{X:()=>i,j:()=>a});let i={BOLD:"formatted_description_bold_component",ELEMENT:"formatted_description_element_component",HEADER:"formatted_description_header_component",PARAGRAPH:"formatted_description_paragraph_component",POINTS:"formatted_description_points_component",SPECS:"formatted_description_specs_component",TABLE:"formatted_description_table_component"},a=({components:e,pinDescription:t})=>e&&0!==e.length?e:[{content:t,type:i.PARAGRAPH}]},720445:function(e,t,n){n.d(t,{ZP:()=>T});var i,a=n(667294);n(422578);var l=n(20256),r=n(980787),s=n(289032),o=n(415546),d=n(115247),c=n(274320),u=n(15667),p=n(149026),m=n(792171),g=n(589357),h=n(603316),_=n(78762),y=n(785893);function f(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let x=(0,_.Z)(()=>Promise.all([n.e("25418"),n.e("22244"),n.e("31142")]).then(n.bind(n,509691)),void 0,e=>509691,"app-www-video-VideoWrapper",e=>["25418","22244","31142"]),v=[0,.25,.5,.75,.95,.97],b=[0,.5,.8,.99,1],k={rootMargin:"-64px 0px 0px 0px",threshold:[...g.iM]},S=Object.freeze({LOADING:0,PLAYING:1,PAUSED:2,STALLING:3}),P=(void 0!==i||(i=n(454387)).hash&&"93ed23334d5bac81ac8410f05c4f2031"!==i.hash&&console.error("The definition of 'VideoWithContextLogging_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function w(){return new Date().getTime()}function C(e){return!!e.volume&&e.volume>0}class I extends a.Component{constructor(e){super(e),f(this,"videoWrapperRef",(0,a.createRef)()),f(this,"handleWindowResize",()=>{if(!this.fullscreen){let e=this.getDimensions(),{height:t,width:n}=this.currentInterval;e.height!==t||e.width!==n?(this.lastLoggedTime.startTime=0,this.startNewInterval(e)):(this.currentInterval.windowHeight=e.windowHeight,this.currentInterval.windowWidth=e.windowWidth)}}),f(this,"handlePlayheadDown",({event:e})=>{let{onPlayheadDown:t}=this.props;this.setState({seeking:!0}),t&&t({event:e})}),f(this,"handlePlayheadUp",({event:e})=>{let{onPlayheadUp:t}=this.props;this.setState({seeking:!1}),t&&t({event:e})}),f(this,"handleLoop",()=>{this.videoTime=0}),f(this,"handlePlaying",e=>{this.logVideoStart(),this.props.onPlaying&&this.props.onPlaying(e)}),f(this,"handleTimeChange",e=>{let{seeking:t,ready:n}=this.state;if(!this.currentInterval.videoDuration)return;let i=1e3*e.time,a=function(e,t,n,i){if(e>t||n<=0)return null;for(let a of i){let i=a*n;if(e<=i&&t>i)return a}return null}(this.videoTime,i,this.currentInterval.videoDuration,v);if("number"==typeof a&&this.props.playing&&!t&&n){let e=w();this.props.isMetricThrottleExpEnabled?this.isVideoEventLogIntervalMet("currentTime")&&this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:Math.floor(4*a),quartilePercentValue:a}):this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:Math.floor(4*a),quartilePercentValue:a})}this.videoTime=i,this.props.onTimeChange&&this.props.onTimeChange(e)}),f(this,"handleDurationChange",e=>{this.currentInterval.videoDuration=1e3*e.duration,this.props.onDurationChange&&this.props.onDurationChange(e)}),f(this,"handleReady",e=>{let{ready:t}=this.state;t||(this.lastLoggedTime.startTime=0,this.setState({ready:!0})),this.props.onReady&&this.props.onReady(e)}),f(this,"handleEnded",e=>{this.props.isMetricThrottleExpEnabled?this.isVideoEventLogIntervalMet("endTime")&&this.logFourthQuartileEvent():this.logFourthQuartileEvent(),this.props.loop&&(this.startNewInterval(),this.currentInterval.videoStartTime=0),this.props.onEnded&&this.props.onEnded(e)}),f(this,"handleVisibilityChange",e=>{if(0===e.length)return;let t=function(e){for(let t=0;t<b.length;t+=1){let n=b[t],i=b[t+1];if(null==i||n<=e&&e<i)return n}return null}(Number.parseFloat(e.slice(-1)[0].intersectionRatio.toFixed(2)));"number"==typeof t&&(this.visible=t>=.5),null==t||t===this.currentInterval.viewability||this.fullscreen||(0===t?this.startNewInterval({viewability:t,playbackState:S.PAUSED}):this.startNewInterval({viewability:t}))}),f(this,"handleFullscreenChange",({event:e,fullscreen:t})=>{if(t){let{height:e,width:t}=window.screen;this.startNewInterval({height:e,width:t,windowHeight:e,windowWidth:t})}else t||this.startNewInterval(this.getDimensions());this.fullscreen=t,this.props.onFullscreenChange&&this.props.onFullscreenChange({event:e,fullscreen:t})}),f(this,"handleClose",()=>{this.startNewInterval()}),this.state={ready:!1,seeking:!1,started:!1};let t=w();this.handleWindowResize=(0,s.Z)(this.handleWindowResize,1e3),this.currentInterval={videoDuration:0,startTime:t,endTime:t,videoStartTime:0,videoEndTime:0,isAudible:C(e),playbackState:this.getPlaybackState(e,this.state),quartile:-1,quartilePercentValue:0,height:null,width:null,windowHeight:null,windowWidth:null,viewability:null},this.videoTime=0,this.fullscreen=!1,this.visible=null,this.lastLoggedTime={startTime:0,endTime:0,currentTime:0}}componentDidMount(){this.currentInterval={...this.currentInterval,...this.getDimensions()},window.addEventListener("resize",this.handleWindowResize),window.addEventListener("beforeunload",this.handleClose)}componentDidUpdate(e,t){let n={};C(e)&&!C(this.props)?n.isAudible=!1:!C(e)&&C(this.props)&&(n.isAudible=!0);let i=this.getPlaybackState(this.props,this.state);this.getPlaybackState(e,t)!==i&&(n.playbackState=i),Object.keys(n).length>0&&this.startNewInterval(n)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),window.removeEventListener("beforeunload",this.handleClose),this.startNewInterval()}getPlaybackState(e,t){return t.ready?e.playing&&!t.seeking?S.PLAYING:S.PAUSED:S.LOADING}getDimensions(){let e,t;if(this.videoWrapperRef.current){let n=this.videoWrapperRef.current;n.clientHeight&&n.clientWidth&&(e=n.clientHeight,t=n.clientWidth)}return{height:e,width:t,windowHeight:window.innerHeight,windowWidth:window.innerWidth}}logMetricStat(e){let{requestContext:t}=this.props,n=t?.userAgent||{},i={appType:n.isMobile||n.isTablet?"WEB_MOBILE":"WEB_DENZEL",country:t?.country??"unknown",browserName:n.browserName,osName:n.osName,browserType:n.browserType,browserVersion:n.browserVersion,type:e};(0,h.nP)("webapp.metrics.videoLogging.skippedEvents",{tags:i})}isVideoEventLogIntervalMet(e){let t=w();return 250>Math.abs(t-this.lastLoggedTime[e])?(this.logMetricStat(e),!1):(this.lastLoggedTime[e]=t,!0)}logVideoEvent(e,t){let{closeupStoryPinViewability:n,contextLogData:i,logContextEvent:a,playing:l,surface:r}=this.props,{seeking:s}=this.state,{height:o,width:d,windowHeight:c,windowWidth:u,viewability:p,...m}=t;if(null!=o&&null!=d&&null!=c&&null!=u&&null!=p){let t={...m,gridAutoplay:6904===e&&l&&!s&&("AuthHomefeed"===r||"SearchItem"===r||"RelatedPinGrid"===r||"PdpRelatedPinGrid"===r),height:o,width:d,windowHeight:c,windowWidth:u,viewability:n||p};a({event_type:e,...function(e){let{eventData:{videoEvent:{gridAutoplay:t,videoDuration:n,startTime:i,endTime:a,videoStartTime:l,videoEndTime:r,isAudible:s,height:o,width:d,playbackState:c,quartile:u,quartilePercentValue:p,windowHeight:m,windowWidth:g,viewability:h}},component:_,objectId:y,view:f,viewParameter:x,...v}=e;return{component:_,object_id_str:y,view_type:f,view_parameter:x,aux_data:{...v},event_data:{videoEventData:{gridAutoplay:t,videoDuration:n?Math.floor(n):0,time:i,endTime:a,videoTime:l?Math.floor(l):0,endVideoTime:r?Math.floor(r):0,isAudible:s,height:o,width:d,playbackState:c,quartile:u,quartilePercentValue:p,windowHeight:m,windowWidth:g,viewability:h}}}}({...i,view:this.fullscreen?108:i.view,eventData:{videoEvent:t}})})}}logFourthQuartileEvent(){let e=w();this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:4,quartilePercentValue:1})}logVideoStart(){if(this.state.started)return;let{contextLogData:e,setVideoPlayed:t,shouldLogVideoStart:n}=this.props;if(n){let e=w();this.logVideoEvent(3621,{...this.currentInterval,startTime:e,endTime:e,videoEndTime:this.videoTime})}t(e.objectId),this.setState({started:!0})}startNewInterval(e){let t=w();this.props.isMetricThrottleExpEnabled?this.isVideoEventLogIntervalMet("startTime")&&this.logVideoEvent(6904,{...this.currentInterval,endTime:t,videoEndTime:this.videoTime}):this.logVideoEvent(6904,{...this.currentInterval,endTime:t,videoEndTime:this.videoTime}),this.currentInterval={...this.currentInterval,...e,startTime:t,videoStartTime:this.videoTime,endTime:-1,videoEndTime:-1}}render(){let{rootMargin:e,surface:t,aspectRatio:n,backgroundColor:i,captions:a,contextLogData:r,controls:s,fallback:o,hlsConfig:c,isAutoPlay:u,loop:m,objectFit:g,onLoadedChange:h,onControlsPause:_,onControlsPlay:f,onSeek:v,onVolumeChange:b,pin:S,playbackRate:P,playing:w,playsInline:C,poster:I,preload:T,seekTime:j,src:A,videoStartTime:F,volume:E,video:L,variant:D}=this.props,{seeking:R}=this.state;return void 0!==e&&(k.rootMargin=t?(0,p.eL)(t):e),(0,y.jsx)(d.Z,{onVisibilityChange:this.handleVisibilityChange,options:k,children:e=>(0,y.jsx)(l.xu,{ref:t=>{e.current=t,this.videoWrapperRef.current=t},height:"inherit",children:(0,y.jsx)(x,{aspectRatio:n,backgroundColor:i,captions:a,contextLogData:r,controls:s,fallback:o,hlsConfig:c,isAutoPlay:u,loop:m,objectFit:g,onControlsPause:_,onControlsPlay:f,onDurationChange:this.handleDurationChange,onEnded:this.handleEnded,onFullscreenChange:this.handleFullscreenChange,onLoadedChange:h,onLoop:this.handleLoop,onPlay:()=>{},onPlayError:()=>{},onPlayheadDown:this.handlePlayheadDown,onPlayheadUp:this.handlePlayheadUp,onPlaying:this.handlePlaying,onReady:this.handleReady,onSeek:v,onTimeChange:this.handleTimeChange,onVolumeChange:b,pinKey:S,playbackRate:P,playing:!R&&w,playsInline:C,poster:I,preload:T,seekTime:j,src:A,variant:D,video:L,videoStartTime:F,visible:this.visible,volume:E})})})}}function T(e){let{pinKey:t}=e,n=(0,o.Z)(P,t),{logContextEvent:i}=(0,r.u)(),{checkExperiment:a}=(0,c.r)(),{setVideoPlayed:l}=(0,m.H)(),s=a("web_video_start_log").anyEnabled,d=a("web_metric_video_throttle").anyEnabled,p=(0,u.B)();return(0,y.jsx)(I,{...e,isMetricThrottleExpEnabled:d,logContextEvent:i,pin:n,requestContext:p,setVideoPlayed:l,shouldLogVideoStart:s})}f(I,"defaultProps",l.nk.defaultProps)},589357:function(e,t,n){n.d(t,{Ul:()=>l,VS:()=>i,hy:()=>r,iM:()=>a,j4:()=>s});let i=2,a=[0,.01,.02,.03,.04,.05,.06,.07,.08,.09,.1,.11,.12,.13,.14,.15,.16,.17,.18,.19,.2,.21,.22,.23,.24,.25,.26,.27,.28,.29,.3,.31,.32,.33,.34,.35,.36,.37,.38,.39,.4,.41,.42,.43,.44,.45,.46,.47,.48,.49,.5,.51,.52,.53,.54,.55,.56,.57,.58,.59,.6,.61,.62,.63,.64,.65,.66,.67,.68,.69,.7,.71,.72,.73,.74,.75,.76,.77,.78,.79,.8,.81,.82,.83,.84,.85,.86,.87,.88,.89,.9,.91,.92,.93,.94,.95,.96,.97,.98,.99,1],l={backgroundImage:"linear-gradient(to top, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",pointerEvents:"none",bottom:0},r=128,s=e=>e&&document.querySelector(`video[poster="${e}"]`)||null},333651:function(e){e.exports="https://s.pinimg.com/webapp/commentHelpful-99007872.svg"},773655:function(e){e.exports="https://s.pinimg.com/webapp/commentLoved-7942dc4f.svg"}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/11154-2dae83e582edd59c.mjs.map